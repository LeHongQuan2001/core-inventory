(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[724],{2724:(Bt,Ft,Tt)=>{"use strict";Tt.r(Ft),Tt.d(Ft,{DmpModule:()=>nc});var _t=Tt(6895),St=Tt(8776),j=Tt(4006),ot=Tt(4177),Y=Tt(7337),H=Tt(5107),X=Tt(8694),z=Tt(671),tt=Tt(5938),V=Tt(3906);class Z{constructor(L){this.value="",this.text="",this.value=L?.value??"",this.text=L?.text??""}}class k{constructor(L){this.name="",this.product="",this.value="",this.placeholder="",this.ex="",this.prefix="",this.multiValue="",this.option=[],this.key="",this.key=L?.key??"",this.name=L?.name??"",this.product=L?.product??"",this.value=L?.typeInput??"",this.placeholder=L?.placeholder??"",this.ex=L?.ex??"",this.prefix=L?.prefix??"",this.multiValue=L?.multiple??"",this.option=this.option=L?.options?L.options.map(g=>new Z(g)):[]}}var b=Tt(5439);class m{constructor(L){this.id=0,this.title="",this.description="",this.status=0,this.tp="",this.isCampaign=0,this.configs=[],this.value="",this.createdBy=0,L&&(this.id=L.id??1,this.title=L.name??"",this.description=L.description??"",this.status=parseInt(L.status)??0,this.tp=L.tp??"",this.isCampaign=L.isCampaign??0,this.configs=L.configs?this.getValueConfig("string"==typeof L.configs?JSON.parse(L.configs):L.configs):[],this.value=L.value??"",this.createdBy=L.createdBy??0,this.createdAt=L.createdAt?b(L.createdAt).format("HH:mm:ss DD/MM/YYYY"):null)}getValueConfig(L){const g=[];return L.forEach(e=>{g.push(new k(e))}),g}}function a(n){return/<\/?[^>]+>/.test(n.value)?{htmlTag:!0}:null}function c(n,L){return g=>{const e=g.value;if(e){const i=e.name.split(".").pop()?.toLowerCase();if(i){if(!n.includes(i))return{invalidFileType:!0};if(L&&e.size>L)return{fileSize:!0}}}return null}}function u(n,L){return g=>{if(!g.value?.trim())return{required:!0};const i=g.value.trim().length;return i<n?{minlength:{requiredLength:n,actualLength:i}}:i>L?{maxlength:{requiredLength:L,actualLength:i}}:null}}function _(n){return L=>{const g=L.value;return"string"==typeof g&&""===g.trim()&&g.length>=n?{excessWhiteSpace:!0}:null}}function D(n){const L=n.value;return L&&!L.id?{paramRequired:!0}:null}var t=Tt(4650),B=Tt(2612),M=Tt(9066),x=Tt(4004),w=Tt(2340),h=Tt(529),l=Tt(600);let o=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.parameter.list,i,(0,x.U)(f=>{const I=[],F=f.data.rows??[],st=f.data.count??0;for(const ut in F)I.push(new m(F[ut]));return{status:f?.status,code:f?.code,data:I,total:st}}))}getAll(){return this.backendService.get(this.apiServerPaths.dmp.parameter.getAll,{params:{encryptParam:!0},headers:{Accept:"application/json"}},(0,x.U)(i=>{const f=[],I=i.data??[];for(const F in I)f.push(new m(I[F]));return{status:i?.status,code:i?.code,data:f}}))}create(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.parameter.create,i,(0,x.U)(I=>I))}update(e,i){const f=e;f.encryptBody=!0;let I=this.apiServerPaths.dmp.parameter.update;return I=I.replace("{PARAMETER_ID}",i.toString()),this.backendService.put(I,f,(0,x.U)(F=>F))}delete(e){let i=this.apiServerPaths.dmp.parameter.delete;return i=i.replace("{PARAMETER_ID}",e.toString()),this.backendService.delete(i,{encryptBody:!0},(0,x.U)(I=>I))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();var y=Tt(266);function s(n,L){1&n&&(t.TgZ(0,"h5",10),t._UZ(1,"i",11),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"modules.dmp.parameters.createParameter")," "))}const r=function(n){return{name:n}};function d(n,L){if(1&n&&(t.TgZ(0,"h5",10),t._UZ(1,"i",11),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){const g=t.oxw();t.xp6(2),t.hij(" ",t.xi3(3,1,"modules.dmp.parameters.editParameter",t.VKq(4,r,g.data.paramEdit.title))," ")}}function p(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameIsRequired")," "))}function T(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameMinLength")," "))}function U(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameMaxLength")," "))}function G(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function O(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function v(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,p,3,3,"div",51),t.YNc(2,T,3,3,"div",51),t.YNc(3,U,3,3,"div",51),t.YNc(4,G,3,3,"div",51),t.YNc(5,O,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(2);let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("name"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.form.get("name"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.form.get("name"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.form.get("name"))||null==I.errors?null:I.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(F=g.form.get("name"))||null==F.errors?null:F.errors.excessWhiteSpace)}}function C(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function q(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function J(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.descriptionMaxLength")," "))}function R(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,C,3,3,"div",51),t.YNc(2,q,3,3,"div",51),t.YNc(3,J,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(2);let e,i,f;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("description"))||null==e.errors?null:e.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(i=g.form.get("description"))||null==i.errors?null:i.errors.excessWhiteSpace),t.xp6(1),t.Q6J("ngIf",null==(f=g.form.get("description"))||null==f.errors?null:f.errors.maxlength)}}function A(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.valueIsRequired")," "))}function N(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.valueMinLength")," "))}function E(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.valueMaxLength")," "))}function K(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Q(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function et(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,A,3,3,"div",51),t.YNc(2,N,3,3,"div",51),t.YNc(3,E,3,3,"div",51),t.YNc(4,K,3,3,"div",51),t.YNc(5,Q,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(2);let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("value"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.form.get("value"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.form.get("value"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.form.get("value"))||null==I.errors?null:I.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(F=g.form.get("value"))||null==F.errors?null:F.errors.excessWhiteSpace)}}const rt=function(n){return{"btn-primary":n}};function at(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw(2);let F;return t.KtG(I.switchGroup(null==(F=f.get("groupId"))?null:F.value))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&n){const g=L.$implicit,e=t.oxw(2);let i,f;t.Q6J("ngClass",t.VKq(5,rt,e.groupSelected===(null==(i=g.get("groupId"))?null:i.value))),t.xp6(1),t.AsE(" ",t.lcZ(2,3,"modules.dmp.parameters.group.group")," - ",(null==(f=g.get("groupId"))?null:f.value)+1," ")}}function lt(n,L){1&n&&(t.TgZ(0,"li",53)(1,"p",54),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"common.dataNotFound")))}function ft(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"p",66)(1,"i",67),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3);return t.KtG(i.openRemoveGroupConfirmDialog(i.groupSelected))}),t.ALo(2,"translate"),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"modules.dmp.parameters.group.removeGroup")))}function vt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.keyGroupIsRequired")," "))}function gt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.keyGroupMaxLength")," "))}function ht(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function bt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function pt(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,vt,3,3,"div",51),t.YNc(2,gt,3,3,"div",51),t.YNc(3,ht,3,3,"div",51),t.YNc(4,bt,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(3);let e,i,f,I;t.xp6(1),t.Q6J("ngIf",null==(e=g.getDetailGroup().get("key"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.getDetailGroup().get("key"))||null==i.errors?null:i.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.getDetailGroup().get("key"))||null==f.errors?null:f.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(I=g.getDetailGroup().get("key"))||null==I.errors?null:I.errors.excessWhiteSpace)}}function it(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.prefixIsRequired")," "))}function nt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.prefixMinLength")," "))}function ct(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.prefixMaxLength")," "))}function dt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function mt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function yt(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,it,3,3,"div",51),t.YNc(2,nt,3,3,"div",51),t.YNc(3,ct,3,3,"div",51),t.YNc(4,dt,3,3,"div",51),t.YNc(5,mt,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(3);let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.getDetailGroup().get("prefix"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.getDetailGroup().get("prefix"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.getDetailGroup().get("prefix"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.getDetailGroup().get("prefix"))||null==I.errors?null:I.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(F=g.getDetailGroup().get("prefix"))||null==F.errors?null:F.errors.excessWhiteSpace)}}function Ct(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameShowIsRequired")," "))}function kt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameShowMinLength")," "))}function Mt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.nameShowMaxLength")," "))}function wt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Zt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function Ut(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,Ct,3,3,"div",51),t.YNc(2,kt,3,3,"div",51),t.YNc(3,Mt,3,3,"div",51),t.YNc(4,wt,3,3,"div",51),t.YNc(5,Zt,3,3,"div",51),t.qZA()),2&n){const g=t.oxw(3);let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.getDetailGroup().get("name"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.getDetailGroup().get("name"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.getDetailGroup().get("name"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.getDetailGroup().get("name"))||null==I.errors?null:I.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(F=g.getDetailGroup().get("name"))||null==F.errors?null:F.errors.excessWhiteSpace)}}function It(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.valueIsRequired")," "))}function Et(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.valueMaxLength")," "))}function Lt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function jt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function Ot(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,It,3,3,"div",51),t.YNc(2,Et,3,3,"div",51),t.YNc(3,Lt,3,3,"div",51),t.YNc(4,jt,3,3,"div",51),t.qZA()),2&n){const g=t.oxw().$implicit;let e,i,f,I;t.xp6(1),t.Q6J("ngIf",null==(e=g.get("value"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.get("value"))||null==i.errors?null:i.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.get("value"))||null==f.errors?null:f.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(I=g.get("value"))||null==I.errors?null:I.errors.excessWhiteSpace)}}function Nt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.textIsRequired")," "))}function Qt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.group.validate.textMaxLength")," "))}function qt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Rt(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function Ht(n,L){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,Nt,3,3,"div",51),t.YNc(2,Qt,3,3,"div",51),t.YNc(3,qt,3,3,"div",51),t.YNc(4,Rt,3,3,"div",51),t.qZA()),2&n){const g=t.oxw().$implicit;let e,i,f,I;t.xp6(1),t.Q6J("ngIf",null==(e=g.get("text"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.get("text"))||null==i.errors?null:i.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.get("text"))||null==f.errors?null:f.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(I=g.get("text"))||null==I.errors?null:I.errors.excessWhiteSpace)}}function Ee(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",75),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(5);return t.KtG(i.addOption())}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.parameters.group.addOption"))}function Ue(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",67),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw(4);return t.KtG(f.removeOption(i))}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.parameters.group.removeOption"))}const Pe=function(n){return{"mb-2":n}},Xt=function(n){return{"ng-invalid-custom":n}};function Ne(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",70)(1,"div",71)(2,"input",26),t.NdJ("blur",function(){const f=t.CHM(g).$implicit,I=t.oxw(4);return t.KtG(I.trimData(f.get("value")))}),t.ALo(3,"translate"),t.qZA(),t.YNc(4,Ot,5,4,"div",18),t.qZA(),t.TgZ(5,"div",71)(6,"input",72),t.NdJ("blur",function(){const f=t.CHM(g).$implicit,I=t.oxw(4);return t.KtG(I.trimData(f.get("text")))}),t.ALo(7,"translate"),t.qZA(),t.YNc(8,Ht,5,4,"div",18),t.qZA(),t.TgZ(9,"div"),t.YNc(10,Ee,2,3,"i",73),t.YNc(11,Ue,2,3,"i",74),t.qZA()()}if(2&n){const g=L.$implicit,e=L.index,i=t.oxw(4);let f,I,F,st;t.Q6J("formGroupName",e)("ngClass",t.VKq(14,Pe,e!==i.options().controls.length-1)),t.xp6(2),t.s9C("placeholder",t.lcZ(3,10,"modules.dmp.parameters.group.placeHolder.optionValue")),t.Q6J("ngClass",t.VKq(16,Xt,(null==(f=g.get("value"))?null:f.invalid)&&((null==(f=g.get("value"))?null:f.dirty)||(null==(f=g.get("value"))?null:f.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(I=g.get("value"))?null:I.invalid)&&((null==(I=g.get("value"))?null:I.dirty)||(null==(I=g.get("value"))?null:I.touched))),t.xp6(2),t.s9C("placeholder",t.lcZ(7,12,"modules.dmp.parameters.group.placeHolder.optionText")),t.Q6J("ngClass",t.VKq(18,Xt,(null==(F=g.get("text"))?null:F.invalid)&&((null==(F=g.get("text"))?null:F.dirty)||(null==(F=g.get("text"))?null:F.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(st=g.get("text"))?null:st.invalid)&&((null==(st=g.get("text"))?null:st.dirty)||(null==(st=g.get("text"))?null:st.touched))),t.xp6(2),t.Q6J("ngIf",0===e),t.xp6(1),t.Q6J("ngIf",e>0)}}function Oe(n,L){if(1&n&&(t.TgZ(0,"div",68)(1,"label",14)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.TgZ(5,"span",15),t._uU(6,"*"),t.qZA()()(),t.YNc(7,Ne,12,20,"div",69),t.qZA()),2&n){const g=t.oxw(3);t.xp6(3),t.hij("",t.lcZ(4,2,"modules.dmp.parameters.group.option")," "),t.xp6(4),t.Q6J("ngForOf",g.options().controls)}}function je(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",55),t.YNc(1,ft,3,3,"p",56),t.TgZ(2,"div",13)(3,"label",14)(4,"strong"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"span",15),t._uU(8," * "),t.qZA()()(),t.TgZ(9,"div",16)(10,"input",57),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.trimData(i.getDetailGroup().get("key")))}),t.ALo(11,"translate"),t.qZA()(),t.YNc(12,pt,5,4,"div",18),t.qZA(),t.TgZ(13,"div",13)(14,"label",14)(15,"strong"),t._uU(16),t.ALo(17,"translate"),t.qZA()(),t.TgZ(18,"div",58),t._UZ(19,"select",59),t.qZA()(),t.TgZ(20,"div",13)(21,"label",14)(22,"strong"),t._uU(23),t.ALo(24,"translate"),t.TgZ(25,"span",15),t._uU(26," * "),t.qZA()()(),t.TgZ(27,"div",16)(28,"input",60),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.trimData(i.getDetailGroup().get("prefix")))}),t.ALo(29,"translate"),t.qZA(),t.YNc(30,yt,6,5,"div",18),t.qZA()(),t.TgZ(31,"div",13)(32,"label",14)(33,"strong"),t._uU(34),t.ALo(35,"translate"),t.qZA()(),t.TgZ(36,"div",16)(37,"input",61),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.trimData(i.getDetailGroup().get("ex")))}),t.ALo(38,"translate"),t.qZA()()(),t.TgZ(39,"div",13)(40,"label",14)(41,"strong"),t._uU(42),t.ALo(43,"translate"),t.TgZ(44,"span",15),t._uU(45,"*"),t.qZA()()(),t.TgZ(46,"div",16)(47,"input",17),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.trimData(i.getDetailGroup().get("name")))}),t.ALo(48,"translate"),t.qZA()(),t.YNc(49,Ut,6,5,"div",18),t.qZA(),t.TgZ(50,"div",13)(51,"label",14)(52,"strong"),t._uU(53),t.ALo(54,"translate"),t.qZA()(),t.TgZ(55,"div",58),t._UZ(56,"select",62),t.qZA()(),t.TgZ(57,"div",13)(58,"label",14)(59,"strong"),t._uU(60),t.ALo(61,"translate"),t.qZA()(),t.TgZ(62,"div",58),t._UZ(63,"select",63),t.qZA()(),t.TgZ(64,"div",13)(65,"label",14)(66,"strong"),t._uU(67),t.ALo(68,"translate"),t.qZA()(),t.TgZ(69,"div",16)(70,"input",64),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.trimData(i.getDetailGroup().get("placeholder")))}),t.ALo(71,"translate"),t.qZA()()(),t.YNc(72,Oe,8,4,"div",65),t.qZA()}if(2&n){const g=t.oxw(2);let e,i,f,I,F,st;t.Q6J("formGroup",g.getDetailGroup()),t.xp6(1),t.Q6J("ngIf",g.groupSelected>0),t.xp6(4),t.hij("",t.lcZ(6,22,"modules.dmp.parameters.group.keyGroup")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(11,24,"modules.dmp.parameters.group.placeHolder.keyGroup")),t.Q6J("ngClass",t.VKq(48,Xt,(null==(e=g.getDetailGroup().get("key"))?null:e.invalid)&&((null==(e=g.getDetailGroup().get("key"))?null:e.dirty)||(null==(e=g.getDetailGroup().get("key"))?null:e.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(i=g.getDetailGroup().get("key"))?null:i.invalid)&&((null==(i=g.getDetailGroup().get("key"))?null:i.dirty)||(null==(i=g.getDetailGroup().get("key"))?null:i.touched))),t.xp6(4),t.Oqu(t.lcZ(17,26,"modules.dmp.parameters.group.product")),t.xp6(7),t.hij("",t.lcZ(24,28,"modules.dmp.parameters.group.prefix")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(29,30,"modules.dmp.parameters.group.placeHolder.prefix")),t.Q6J("ngClass",t.VKq(50,Xt,(null==(f=g.getDetailGroup().get("prefix"))?null:f.invalid)&&((null==(f=g.getDetailGroup().get("prefix"))?null:f.dirty)||(null==(f=g.getDetailGroup().get("prefix"))?null:f.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(I=g.getDetailGroup().get("prefix"))?null:I.invalid)&&((null==(I=g.getDetailGroup().get("prefix"))?null:I.dirty)||(null==(I=g.getDetailGroup().get("prefix"))?null:I.touched))),t.xp6(4),t.hij("",t.lcZ(35,32,"modules.dmp.parameters.group.ex")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(38,34,"modules.dmp.parameters.group.placeHolder.ex")),t.xp6(5),t.hij("",t.lcZ(43,36,"modules.dmp.parameters.group.nameShow")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(48,38,"modules.dmp.parameters.group.placeHolder.nameShow")),t.Q6J("ngClass",t.VKq(52,Xt,(null==(F=g.getDetailGroup().get("name"))?null:F.invalid)&&((null==(F=g.getDetailGroup().get("name"))?null:F.dirty)||(null==(F=g.getDetailGroup().get("name"))?null:F.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(st=g.getDetailGroup().get("name"))?null:st.invalid)&&((null==(st=g.getDetailGroup().get("name"))?null:st.dirty)||(null==(st=g.getDetailGroup().get("name"))?null:st.touched))),t.xp6(4),t.Oqu(t.lcZ(54,40,"modules.dmp.parameters.group.type")),t.xp6(7),t.hij("",t.lcZ(61,42,"modules.dmp.parameters.group.multipleValue")," "),t.xp6(7),t.hij("",t.lcZ(68,44,"modules.dmp.parameters.group.placeHolder.title")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(71,46,"modules.dmp.parameters.group.placeHolder.title")),t.xp6(2),t.Q6J("ngIf",g.options().controls.length>0)}}function qe(n,L){1&n&&(t.TgZ(0,"div",76)(1,"h3",77),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"common.noData")))}function Fe(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"form",12)(1,"div",13)(2,"label",14)(3,"strong"),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"span",15),t._uU(7," * "),t.qZA()()(),t.TgZ(8,"div",16)(9,"input",17),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.trimData(i.form.get("name")))}),t.ALo(10,"translate"),t.qZA()(),t.YNc(11,v,6,5,"div",18),t.qZA(),t.TgZ(12,"div",13)(13,"label",14)(14,"strong"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",16)(18,"textarea",19),t.ALo(19,"translate"),t._uU(20,"                    "),t.qZA(),t.YNc(21,R,4,3,"div",18),t.qZA()(),t.TgZ(22,"div",20)(23,"div",21)(24,"div",22)(25,"label",14)(26,"strong"),t._uU(27),t.ALo(28,"translate"),t.qZA()(),t.TgZ(29,"div",23),t._UZ(30,"select",24),t.qZA()(),t.TgZ(31,"div",25)(32,"label",14)(33,"strong"),t._uU(34),t.ALo(35,"translate"),t.TgZ(36,"span",15),t._uU(37," * "),t.qZA()()(),t.TgZ(38,"div",16)(39,"input",26),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.trimData(i.form.get("value")))}),t.ALo(40,"translate"),t.qZA()(),t.YNc(41,et,6,5,"div",18),t.qZA(),t.TgZ(42,"div",25)(43,"label",14)(44,"strong"),t._uU(45),t.ALo(46,"translate"),t.qZA()(),t.TgZ(47,"div",23),t._UZ(48,"select",27),t.qZA()()()(),t.TgZ(49,"div")(50,"div",28)(51,"div",29)(52,"div",30)(53,"div",31)(54,"div",32)(55,"p",33),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"ul",34)(59,"li")(60,"div",35)(61,"div",36)(62,"input",37),t.NdJ("input",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.changeKeyword(i))})("keydown.enter",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.searchGroup())}),t.ALo(63,"translate"),t.qZA(),t.TgZ(64,"button",38),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.searchGroup())}),t._UZ(65,"i",39),t.qZA()()()(),t.YNc(66,at,3,7,"button",40),t.YNc(67,lt,4,3,"li",41),t.qZA(),t.TgZ(68,"div",42)(69,"button",43),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.addGroup())}),t.TgZ(70,"span",44),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"span"),t._UZ(74,"i",45),t.qZA()()()()(),t.TgZ(75,"div",46)(76,"div",47),t.YNc(77,je,73,54,"div",48),t.qZA(),t.YNc(78,qe,4,3,"div",49),t.qZA()()()()()()}if(2&n){const g=t.oxw();let e,i,f,I,F,st;t.Q6J("formGroup",g.form),t.xp6(4),t.hij("",t.lcZ(5,24,"modules.dmp.parameters.name")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(10,26,"modules.dmp.parameters.group.placeHolder.name")),t.Q6J("ngClass",t.VKq(46,Xt,(null==(e=g.form.get("name"))?null:e.invalid)&&((null==(e=g.form.get("name"))?null:e.dirty)||(null==(e=g.form.get("name"))?null:e.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(i=g.form.get("name"))?null:i.invalid)&&((null==(i=g.form.get("name"))?null:i.dirty)||(null==(i=g.form.get("name"))?null:i.touched))),t.xp6(4),t.Oqu(t.lcZ(16,28,"modules.dmp.parameters.description")),t.xp6(3),t.s9C("placeholder",t.lcZ(19,30,"modules.dmp.parameters.group.placeHolder.description")),t.Q6J("ngClass",t.VKq(48,Xt,(null==(f=g.form.get("description"))?null:f.invalid)&&((null==(f=g.form.get("description"))?null:f.dirty)||(null==(f=g.form.get("description"))?null:f.touched)))),t.xp6(3),t.Q6J("ngIf",(null==(I=g.form.get("description"))?null:I.invalid)&&((null==(I=g.form.get("description"))?null:I.dirty)||(null==(I=g.form.get("description"))?null:I.touched))),t.xp6(6),t.Oqu(t.lcZ(28,32,"modules.dmp.parameters.tp")),t.xp6(7),t.hij("",t.lcZ(35,34,"modules.dmp.parameters.value")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(40,36,"modules.dmp.parameters.group.placeHolder.value")),t.Q6J("ngClass",t.VKq(50,Xt,(null==(F=g.form.get("value"))?null:F.invalid)&&((null==(F=g.form.get("value"))?null:F.dirty)||(null==(F=g.form.get("value"))?null:F.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(st=g.form.get("value"))?null:st.invalid)&&((null==(st=g.form.get("value"))?null:st.dirty)||(null==(st=g.form.get("value"))?null:st.touched))),t.xp6(4),t.Oqu(t.lcZ(46,38,"modules.dmp.parameters.status")),t.xp6(11),t.Oqu(t.lcZ(57,40,"modules.dmp.parameters.group.groupList")),t.xp6(6),t.s9C("placeholder",t.lcZ(63,42,"modules.dmp.parameters.group.searchDataGroup")),t.Q6J("value",g.keywordSearchGroup),t.xp6(4),t.Q6J("ngForOf",g.getFilteredGroups()),t.xp6(1),t.Q6J("ngIf",0===g.getFilteredGroups().length),t.xp6(2),t.Q6J("disabled",!g.checkSearchingGroup()),t.xp6(2),t.Oqu(t.lcZ(72,44,"modules.dmp.parameters.group.addGroup")),t.xp6(6),t.Q6J("ngIf",g.getFilteredGroups().length>0),t.xp6(1),t.Q6J("ngIf",0===g.getFilteredGroups().length)}}function Be(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.createParameter())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",79),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",0===g.getFilteredGroups().length||g.form.invalid),t.xp6(1),t.hij("",t.lcZ(2,2,"common.button.save")," ")}}function Ye(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",78),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openUpdateParameterConfirmDialog())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",79),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",0===g.getFilteredGroups().length||g.form.invalid),t.xp6(1),t.hij("",t.lcZ(2,2,"common.button.edit")," ")}}let _e=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.parameterService=F,this.dialogRef=st,this.dialog=ut,this.fb=xt,this.status={active:1,inActive:0},this.isUpdateForm=!1,this.multipleValueOptionsCnf=[{id:1,text:"true"},{id:2,text:"false"}],this.typeCnf=[{id:1,text:"input"},{id:2,text:"select"}],this.subfixType="-text",this.productList=[],this.groupSelected=0,this.keywordSearchGroup="",this.paramEdit=new m,this.data.paramEdit&&(this.isUpdateForm=!0,this.paramEdit=this.data.paramEdit),this.productList=this.data.products}ngOnInit(){this.createFormParameter(),this.isUpdateForm&&this.applyParamToForm(this.data.paramEdit)}ngAfterViewInit(){setTimeout(()=>{this.initSelect2(),this.initGroupSelect2()},100)}initSelect2(){let e=[],i=[];this.isUpdateForm?(e=this.data.params.map(f=>({id:f.id,text:f.tp,selected:this.paramEdit.tp===f.tp})),i=this.data.status.map(f=>({...f,selected:this.paramEdit.status===f.id}))):(e=this.data.params.map(f=>({id:f.id,text:f.tp})),i=this.data.status.map(f=>({...f,selected:0}))),e.unshift({id:-1,text:"Create new param"}),$(".select-status-create-param").select2({data:i}).on("select2:select",f=>{const I=parseInt(f.params.data.id);this.form.controls.status.setValue(I)}),$(".select-tp").select2({data:e}).on("select2:select",f=>{const I=parseInt(f.params.data.id);if(this.clearGroup(),-1!==I){let F=this.data.params.find(st=>st.id===I);this.form.controls.tp.setValue(F.tp),this.applyParamToForm(F),this.data.paramEdit=F,this.isUpdateForm=!0}else this.isUpdateForm=!1,this.createFormParameter()})}initGroupSelect2(e){let i="",f="",I="";e&&(i=e.get("product").value,f=e.get("typeInput").value,I=e.get("multiple").value),$(".select-group-product").empty(),$(".select-group-product").select2({data:this.productList.map(F=>({id:F.name,text:F.name,selected:e?i===F.name:this.getDetailGroup().get("product")?.value===F.name}))}).on("select2:select",F=>{const st=F.params.data.id;this.getDetailGroup().get("product")?.setValue(st)}),$(".select-group-type").empty(),$(".select-group-type").select2({data:this.typeCnf.map(F=>({...F,selected:e?f.includes(F.text):this.getDetailGroup().get("typeInput")?.value.includes(F.text)}))}).on("select2:select",F=>{const st=parseInt(F.params.data.id);let ut=this.typeCnf.find(xt=>xt.id===st)?.text;ut?.includes("input")&&(ut+=this.subfixType),this.getDetailGroup().get("typeInput")?.setValue(ut),2===st&&0==this.options().controls.length&&this.addOption(),2!==st&&this.clearOption()}),$(".select-group-multiple-value").empty(),$(".select-group-multiple-value").select2({data:this.multipleValueOptionsCnf.map(F=>({...F,selected:e?I.toString()===F.text:this.getDetailGroup().get("multiple")?.value.toString()===F.text}))}).on("select2:select",F=>{const st=parseInt(F.params.data.id);this.getDetailGroup().get("multiple")?.setValue("true"===this.multipleValueOptionsCnf.find(ut=>ut.id===st)?.text)})}createParameter(){const e=this.form.value;e.configs=e.groups,e.tp||(e.tp=this.form.value.value),this.parameterService.create(e).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.parameters.notify.createSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.parameters.notify.createFailed")])})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}updateParameter(){const e=this.form.value;e.configs=e.groups,this.parameterService.update(e,this.data.paramEdit.id).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.parameters.notify.updateSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.parameters.notify.updateFailed")])})}applyParamToForm(e){this.form.controls.name.setValue(e.title),this.form.controls.description.setValue(e.description),this.form.controls.value.setValue(e.tp),this.form.controls.tp.setValue(e.tp),this.form.controls.status.setValue(e.status),this.form.controls.isCampaign.setValue(e.isCampaign),$(".select-status-create-param").val(e.status).trigger("change");const i=e.configs;i&&(i.forEach((f,I)=>{this.addGroup(f),f.option.length>0&&this.addOption(f.option,I)}),this.groupSelected=0,this.switchGroup(this.groupSelected))}createFormParameter(){this.form=this.fb.group({name:["",[j.kI.required,j.kI.minLength(4),j.kI.maxLength(200),a,_(4)]],description:["",[j.kI.maxLength(255),a,_(1)]],tp:["",[j.kI.maxLength(100)]],value:["",[j.kI.required,j.kI.maxLength(100),a,_(1)]],status:[this.status.active],groups:this.fb.array([]),isCampaign:[0]}),$(".select-status-create-param").val(this.status.active).trigger("change"),this.isUpdateForm||this.addGroup()}switchGroup(e){this.groupSelected=e,this.initGroupSelect2(this.getDetailGroup())}groups(){return this.form.get("groups")}createGroup(e){if(e){let i=this.groups().controls.length;return this.fb.group({groupId:i,key:[e.key,[j.kI.required,j.kI.maxLength(100),a,_(1)]],product:[""===e.product?this.productList[0].name:e.product,[]],prefix:[e.prefix,[j.kI.required,j.kI.maxLength(50),a,_(1)]],ex:[e.ex,[j.kI.maxLength(10),a,_]],name:[e.name,[j.kI.required,j.kI.maxLength(100),a,_(1)]],typeInput:[e.value,[]],multiple:[e.multiValue,[]],placeholder:[e.placeholder,[j.kI.maxLength(50),a,_(1)]],options:this.fb.array([]),isSearching:!0})}return this.fb.group({groupId:this.groups().controls.length,key:["",[j.kI.required,j.kI.maxLength(100),a,_(1)]],product:[this.productList[0].name,[]],prefix:["",[j.kI.required,j.kI.maxLength(50),a,_(1)]],ex:["",[j.kI.maxLength(10),a,_(1)]],name:["",[j.kI.required,j.kI.maxLength(100),a,_(1)]],typeInput:[this.typeCnf[0].text+this.subfixType,[]],multiple:["true",[]],placeholder:["",[j.kI.maxLength(50),a,_(1)]],options:this.fb.array([]),isSearching:!0})}addGroup(e){e?this.groups().push(this.createGroup(e)):this.groups().push(this.createGroup())}removeGroup(e){this.groups().removeAt(e),this.keywordSearchGroup="",this.searchGroup(),this.groupSelected=e-1,this.resetGroupIndex(e)}clearGroup(){this.groupSelected=0,this.form.setControl("groups",this.fb.array([]))}getDetailGroup(e){return e?this.groups().at(e):this.groups().at(this.groupSelected)}options(e){return e?this.getDetailGroup(e).get("options"):this.getDetailGroup().get("options")}createOptionGroup(e){return this.fb.group({value:[e?e.value:"",[j.kI.required,j.kI.maxLength(100),a,_(1)]],text:[e?e.text:"",[j.kI.required,j.kI.maxLength(100),a,_(1)]]})}addOption(e,i){return e?e.forEach(f=>{this.options(i).push(this.createOptionGroup(f))}):this.options().push(this.createOptionGroup()),this.options()}removeOption(e){this.options().removeAt(e)}clearOption(){this.getDetailGroup().setControl("options",this.fb.array([]))}changeKeyword(e){this.keywordSearchGroup=e.target.value}searchGroup(){this.groups().controls.forEach(e=>{const i=e,f=i.get("key"),I=i.get("prefix"),F=i.get("name"),st=i.get("placeholder"),ut=i.get("isSearching"),At=I?.value??"",Dt=F?.value??"",Pt=st?.value??"";if(ut){const Yt=(f?.value??"").includes(this.keywordSearchGroup)||At.includes(this.keywordSearchGroup)||Dt.includes(this.keywordSearchGroup)||Pt.includes(this.keywordSearchGroup);ut.setValue(Yt)}})}getFilteredGroups(){const e=this.groups().controls.filter(i=>!0===i.get("isSearching")?.value);return e.length>0&&(e.find(f=>f.get("groupId")?.value===this.groupSelected)||(this.groupSelected=e[0].get("groupId")?.value)),e}checkSearchingGroup(){return this.groups().controls.every(e=>!0===e.get("isSearching")?.value)}resetGroupIndex(e){for(let i=e;i<this.groups().length;i++)this.groups().at(i).get("groupId")?.setValue(i)}openRemoveGroupConfirmDialog(e){this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1}).afterClosed().subscribe(f=>{f&&this.removeGroup(e)})}openUpdateParameterConfirmDialog(){this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1}).afterClosed().subscribe(i=>{i&&this.updateParameter()})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(o),t.Y36(tt.so),t.Y36(tt.uw),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-parameters-entry-dialog"]],features:[t.qOj],decls:15,vars:8,consts:[[1,"col-xl-12","pt-2","pb-2","dialog-header"],["class","font-weight-bold m-0 ms-1",4,"ngIf"],["mat-dialog-close","",1,"icon-close-dialog"],[1,"ph","ph-x"],[1,"mat-typography","p-2","dialog-content"],[3,"formGroup",4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],["mat-dialog-close","",1,"btn","btn-danger","me-2"],[1,"ph-x","ms-1"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-sliders-horizontal","me-1","fw-bold"],[3,"formGroup"],[1,"mb-2"],[1,"form-label"],[1,"text-danger"],[1,"form-control-feedback"],["type","text","formControlName","name",1,"form-control",3,"ngClass","placeholder","blur"],["class","validation-invalid-label mt-2",4,"ngIf"],["type","text","formControlName","description",1,"form-control",3,"ngClass","placeholder"],[1,"col-xl-12","mb-3"],[1,"row"],[1,"col-xl-4"],[1,"form-group","form-select-2","cursor-pointer"],["name","tp","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-tp"],[1,"col-xl-4","input-margin"],["type","text","formControlName","value",1,"form-control",3,"ngClass","placeholder","blur"],["name","status","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-status-create-param"],[1,"card","card-body","mb-0","p-0"],[1,"col-xl-12"],[1,"d-flex","card-group"],[1,"group-list-cln"],[1,"card","p-0","mb-0","bd-t-right-0","bd-b-right-0"],[1,"card-header","f-16","fw-bold","text-center","bd-t-right-0","mb-0"],[1,"group-list","p-0","mb-0","card-body"],[1,"form-group","float-start","form-select-2","w-100"],[1,"input-group"],["type","text",1,"form-control","input-search-group","border-start-0","border-top-0",3,"value","placeholder","input","keydown.enter"],[1,"btn","btn-sm","btn-light","input-group-text","p-2","subfix-search-group","border-end-0","border-top-0",3,"click"],[1,"ph-magnifying-glass"],["class","btn w-100 btn-group-el",3,"ngClass","click",4,"ngFor","ngForOf"],["class","mt-5",4,"ngIf"],[1,"card-footer","p-0"],[1,"btn-add-group","btn","btn-sm","btn-warning","w-100",3,"disabled","click"],[1,"f-14"],[1,"ph-plus-circle","ms-1"],[1,"group-detail-cln","p-3"],[1,"card","mb-0"],["class","card-body",3,"formGroup",4,"ngIf"],["class","card card-body",4,"ngIf"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"],[1,"btn","w-100","btn-group-el",3,"ngClass","click"],[1,"mt-5"],[1,"text-center","text-warning","opacity-75"],[1,"card-body",3,"formGroup"],["class","text-end",4,"ngIf"],["type","text","formControlName","key",1,"form-control",3,"ngClass","placeholder","blur"],[1,"form-control-feedback","cursor-pointer"],["name","product","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-group-product"],["type","text","formControlName","prefix",1,"form-control",3,"ngClass","placeholder","blur"],["type","text","formControlName","ex",1,"form-control",3,"placeholder","blur"],["name","typeInput","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-group-type"],["name","multiple","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-group-multiple-value"],["type","text","formControlName","placeholder",1,"form-control",3,"placeholder","blur"],["formArrayName","options",4,"ngIf"],[1,"text-end"],[1,"ph","ph-trash","text-danger","cursor-pointer",3,"matTooltip","click"],["formArrayName","options"],["class","d-flex w-100 justify-content-between align-items-center",3,"formGroupName","ngClass",4,"ngFor","ngForOf"],[1,"d-flex","w-100","justify-content-between","align-items-center",3,"formGroupName","ngClass"],[1,"form-control-feedback","w-45"],["type","text","formControlName","text",1,"form-control",3,"ngClass","placeholder","blur"],["class","ph ph-plus-circle text-primary cursor-pointer",3,"matTooltip","click",4,"ngIf"],["class","ph ph-trash text-danger cursor-pointer",3,"matTooltip","click",4,"ngIf"],[1,"ph","ph-plus-circle","text-primary","cursor-pointer",3,"matTooltip","click"],[1,"card","card-body"],[1,"text-center"],[1,"btn","btn-success",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"div",0),t.YNc(2,s,4,3,"h5",1),t.YNc(3,d,4,6,"h5",1),t.TgZ(4,"span",2),t._UZ(5,"i",3),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,Fe,79,52,"form",5),t.qZA(),t.TgZ(8,"div",6)(9,"button",7),t._uU(10),t.ALo(11,"translate"),t._UZ(12,"i",8),t.qZA(),t.YNc(13,Be,4,4,"button",9),t.YNc(14,Ye,4,4,"button",9),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!i.isUpdateForm),t.xp6(1),t.Q6J("ngIf",i.isUpdateForm),t.xp6(4),t.Q6J("ngIf",i.form),t.xp6(3),t.hij("",t.lcZ(11,6,"common.button.cancel")," "),t.xp6(3),t.Q6J("ngIf",!i.isUpdateForm),t.xp6(1),t.Q6J("ngIf",i.isUpdateForm))},dependencies:[_t.mk,_t.sg,_t.O5,tt.ZT,y.gM,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,j.x0,j.CE,M.X$],styles:[".dmp-dialog-entry-parameter .dialog-content{max-height:70vh;overflow:auto}  .dmp-dialog-entry-parameter input.ng-invalid,   .dmp-dialog-entry-parameter textarea.ng-invalid{border-color:#d1d5db!important}  .dmp-dialog-entry-parameter input.ng-invalid-custom,   .dmp-dialog-entry-parameter textarea.ng-invalid-custom{border-color:#ef4444!important}  .dmp-dialog-entry-parameter .w-45{width:45%}  .dmp-dialog-entry-parameter .bg-group{background-color:#fbfbfb}  .dmp-dialog-entry-parameter .f-24{font-size:24px}  .dmp-dialog-entry-parameter .f-16{font-size:16px}  .dmp-dialog-entry-parameter .input-search-group,   .dmp-dialog-entry-parameter .subfix-search-group{border-radius:0}  .dmp-dialog-entry-parameter .group-list{list-style-type:none}  .dmp-dialog-entry-parameter .group-list li:hover{background-color:var(--primary);color:#fff}  .dmp-dialog-entry-parameter .card .card-group-params{max-height:350px;overflow-y:auto}  .dmp-dialog-entry-parameter .group-list-cln{width:30%}  .dmp-dialog-entry-parameter .group-list-cln .bd-t-right-0{border-top-right-radius:0}  .dmp-dialog-entry-parameter .group-list-cln .bd-b-right-0{border-bottom-right-radius:0}  .dmp-dialog-entry-parameter .group-list-cln .btn-add-group{border-radius:0 0 0 calc(.375rem - 1px);border:none}  .dmp-dialog-entry-parameter .group-list-cln .group-list{height:343px;max-height:343px;overflow-y:auto}  .dmp-dialog-entry-parameter .group-list-cln .group-list .btn-group-el{border-radius:0}  .dmp-dialog-entry-parameter .group-list-cln .group-list .btn-group-el:hover{background-color:#0c83ff;color:#fff}  .dmp-dialog-entry-parameter .group-detail-cln{width:70%}  .dmp-dialog-entry-parameter .group-detail-cln .card-body{max-height:395px;overflow-y:auto}@media (max-width: 1200px){  .dmp-dialog-entry-parameter .input-margin{margin-top:10px}}@media (max-width: 960px){  .dmp-dialog-entry-parameter .card-group{flex-direction:column}  .dmp-dialog-entry-parameter .card-group .group-list-cln{width:100%}  .dmp-dialog-entry-parameter .card-group .group-detail-cln{width:100%}}"]}),L})();class Ge{constructor(L){this.id=0,this.name="",this.description="",this.id=L.id??0,this.name=L.name??"",this.description=L.description??""}}let Re=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.product.list,i,(0,x.U)(f=>{const I=[],F=f.data.products??[];for(const st in F)I.push(new Ge({id:st,name:F[st]}));return{status:f?.status,code:f?.code,data:I}}))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();var Jt=Tt(7160),de=Tt(4859),ue=Tt(7392),oe=Tt(7117);function He(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openCreateParamDialog())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",46),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.createParameter")," "))}function Je(n,L){1&n&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"common.sequence")," "))}function ze(n,L){if(1&n&&(t.TgZ(0,"td",48)(1,"span",49),t._uU(2),t.qZA()()),2&n){const g=L.index,e=t.oxw();t.xp6(2),t.hij(" ",g+1+(e.pageIndex-1)*e.pageSize," ")}}function Qe(n,L){if(1&n&&(t.TgZ(0,"th",50),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const g=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"modules.dmp.parameters.titleTable")," "),t.xp6(3),t.hij("(",t.lcZ(5,4,g.length),")")}}const Ve=function(n){return{"cursor-pointer":n}};function We(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",51)(1,"a",52),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.ruleCheckerService.isAllow("dmp/configs/update")&&I.openEditParamDialog(f))}),t._uU(2),t.qZA()()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(2,Ve,e.ruleCheckerService.isAllow("dmp/configs/update"))),t.xp6(1),t.hij(" ",g.title," ")}}function Xe(n,L){1&n&&(t.TgZ(0,"th",50),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.description")," "))}function Ke(n,L){if(1&n&&(t.TgZ(0,"td",51)(1,"span",53),t._uU(2),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.Oqu(g.description)}}function $e(n,L){1&n&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.createdAt")," "))}function ti(n,L){if(1&n&&(t.TgZ(0,"td",55),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.hij(" ",g.createdAt," ")}}function ei(n,L){1&n&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.parameters.status")," "))}function ii(n,L){1&n&&(t.TgZ(0,"span",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.common.statusDisabled")," "))}function ni(n,L){1&n&&(t.TgZ(0,"span",59),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.common.statusActive")," "))}function oi(n,L){if(1&n&&(t.TgZ(0,"td",55),t.YNc(1,ii,3,3,"span",56),t.YNc(2,ni,3,3,"span",57),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.Q6J("ngIf",0===g.status),t.xp6(1),t.Q6J("ngIf",1===g.status)}}function ri(n,L){1&n&&t._UZ(0,"th",54)}function si(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li")(1,"a",66),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openEditParamDialog(i))}),t._UZ(2,"i",67),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"common.button.edit")," "))}function ai(n,L){1&n&&t._UZ(0,"li",68)}function li(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li")(1,"a",69),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openDeleteParamDialog(i.id))}),t._UZ(2,"i",70),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"common.button.delete")," "))}function ci(n,L){if(1&n&&(t.TgZ(0,"ul",63),t.YNc(1,si,5,3,"li",64),t.YNc(2,ai,1,0,"li",65),t.YNc(3,li,5,3,"li",64),t.qZA()),2&n){const g=t.oxw(2);t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/configs/update")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/configs/update")&&g.ruleCheckerService.isAllow("dmp/configs/delete")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/configs/delete"))}}function pi(n,L){if(1&n&&(t.TgZ(0,"td",48)(1,"div",60)(2,"button",61)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.YNc(5,ci,4,3,"ul",62),t.qZA()()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(5),t.Q6J("ngIf",e.currentUser&&(e.currentUser.isAdmin()||g.createdBy===e.currentUser.userId))}}function di(n,L){1&n&&t._UZ(0,"tr",71)}function ui(n,L){1&n&&t._UZ(0,"tr",72)}const hi=function(n){return{"border-top":n}};function mi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",73)(1,"app-paginator",74),t.NdJ("page",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.getPaginator(i))}),t.qZA()()}if(2&n){const g=t.oxw();t.Q6J("ngClass",t.VKq(7,hi,g.dataSourceManage)),t.xp6(1),t.Tol(0==g.length?"d-none":"rounded-bottom-start rounded-bottom-end"),t.Q6J("pageSizeOptions",g.pageSizeOptions)("pageSize",g.pageSize)("pageIndex",g.pageIndex)("length",g.length)}}function gi(n,L){1&n&&(t.TgZ(0,"div",75),t._UZ(1,"i",76),t.TgZ(2,"div",77),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const fi=function(){return["/"]};let vi=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.location=I,this.parameterService=F,this.productService=st,this.ruleCheckerService=ut,this.dialog=xt,this.keyword="",this.filterCondition={status:[{id:1,text:"modules.dmp.common.statusActive"},{id:0,text:"modules.dmp.common.statusDisabled"}]},this.dataFilter={status:-1},this.paramList=[],this.productList=[],this.pageSize=30,this.pageSizeOptions=[30,50,100],this.pageIndex=1,this.length=0,this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","title","description","createdAt","status","action"],this.activatedRoute.queryParams.subscribe(At=>{typeof At.limit<"u"&&(this.pageSize=At.limit),typeof At.status<"u"&&(this.dataFilter.status=parseInt(At.status)),typeof At.keyword<"u"&&(this.keyword=At.keyword),typeof At.page<"u"&&(this.pageIndex=At.page)})}ngOnInit(){this.getData(),this.getProduct()}ngAfterViewInit(){setTimeout(()=>{this.initSelect2()},100)}getData(){const e={limit:this.pageSize,page:this.pageIndex};this.keyword.length>0&&(e.keyword=this.keyword),typeof this.dataFilter.status<"u"&&-1!==this.dataFilter.status&&(e.status=this.dataFilter.status),this.parameterService.get(e).subscribe(f=>{if(1===f.status){const I=f.data;this.paramList=I,this.length=f.total,this.dataSourceManage=new z.by(I)}});const i=[];for(const f in e)i.push(f+"="+e[f]);this.location.replaceState("params/list",i.join("&"))}getProduct(){this.productService.get({}).subscribe(e=>{1===e.status&&(this.productList=e.data)})}initSelect2(){let e=this.filterCondition.status.map(i=>({...i,text:this.translate.instant(i.text),selected:this.dataFilter.status===i.id}));e.unshift({id:-1,text:this.translate.instant("modules.dmp.common.allStatus"),selected:!1}),$(".select-status").select2({data:e}).on("select2:select",i=>{this.dataFilter.status=parseInt(i.params.data.id)})}getPaginator(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getData(),this.scrollToTop()}scrollToTop(){const e=document.querySelector(".content-inner");e&&(e.scrollTop=0)}deleteParameter(e){this.parameterService.delete(e).subscribe(i=>{if(1===i.status)return this.getData(),void AppNoty.success([this.translate.instant("modules.dmp.parameters.notify.deleteSuccess")]);AppNoty.error([this.translate.instant("modules.dmp.parameters.notify.deleteSuccess")])})}openCreateParamDialog(){this.dialog.open(_e,{autoFocus:!1,disableClose:!0,width:"800px",height:"auto",panelClass:"dmp-dialog-entry-parameter",data:{params:this.paramList,products:this.productList,status:this.filterCondition.status.map(i=>({...i,text:this.translate.instant(i.text)}))}}).afterClosed().subscribe(i=>{i&&this.getData()})}openEditParamDialog(e){this.dialog.open(_e,{autoFocus:!1,disableClose:!0,height:"auto",width:"800px",panelClass:"dmp-dialog-entry-parameter",data:{params:this.paramList,paramEdit:e,products:this.productList,status:this.filterCondition.status.map(f=>({...f,text:this.translate.instant(f.text)}))}}).afterClosed().subscribe(f=>{f&&this.getData()})}openDeleteParamDialog(e){this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1}).afterClosed().subscribe(f=>{f&&this.deleteParameter(e)})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(_t.Ye),t.Y36(o),t.Y36(Re),t.Y36(Jt.H),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-parameters-list"]],features:[t.qOj],decls:59,vars:21,consts:[["id","wp-dmp-parameters"],[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","py-2",3,"routerLink"],[1,"ph-house","me-2"],[1,"breadcrumb-item","active","py-2"],[1,"content"],[1,"card","mb-0"],[1,"p-2","pb-0"],[1,"row"],[1,"col-xl-12"],[1,"wp-filter-parameters"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","input-search"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","form-select-status"],["data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-status"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"wp-action-buttons","mb-2","float-end"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-xl-12","p-0"],[1,"table-responsive","data-table-parameters"],["mat-table","","aria-label","Table displaying manage parameters data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["table",""],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-left ps-0",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","createdAt"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","rounded-bottom-start rounded-bottom-end d-flex justify-content-end",3,"ngClass",4,"ngIf"],["class","text-center p-2",4,"ngIf"],[1,"ph","ph-plus","ms-1","icon-small"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","text-left","ps-0"],[1,"fw-light-bold","d-inline-block","mb-0","f-20","limit-text",3,"ngClass","click"],[1,"limit-text-2l"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],["mat-cell","",1,"text-truncate","text-center"],["class","badge bg-danger fw-normal",4,"ngIf"],["class","badge bg-success fw-normal",4,"ngIf"],[1,"badge","bg-danger","fw-normal"],[1,"badge","bg-success","fw-normal"],[1,"dropdown"],["mat-icon-button","","data-bs-toggle","dropdown"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],[4,"ngIf"],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ph","ph-pencil-simple","me-2","text-warning"],[1,"dropdown-divider"],[1,"dropdown-item","cursor-pointer","bg-danger","text-white",3,"click"],[1,"ph","ph-trash","me-2"],["mat-header-row",""],["mat-row",""],[1,"rounded-bottom-start","rounded-bottom-end","d-flex","justify-content-end",3,"ngClass"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),t._UZ(21,"i",17),t.qZA(),t.TgZ(22,"input",18),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.getData()}),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"div",19),t._UZ(25,"select",20),t.qZA(),t.TgZ(26,"div",21)(27,"button",22),t.NdJ("click",function(){return i.getData()}),t._uU(28),t.ALo(29,"translate"),t._UZ(30,"i",23),t.qZA()()(),t.TgZ(31,"div",24),t.YNc(32,He,4,3,"button",25),t.qZA()(),t.TgZ(33,"div",26)(34,"div",27)(35,"table",28,29),t.ynx(37,30),t.YNc(38,Je,3,3,"th",31),t.YNc(39,ze,3,1,"td",32),t.BQk(),t.ynx(40,33),t.YNc(41,Qe,6,6,"th",34),t.YNc(42,We,3,4,"td",35),t.BQk(),t.ynx(43,36),t.YNc(44,Xe,3,3,"th",34),t.YNc(45,Ke,3,1,"td",35),t.BQk(),t.ynx(46,37),t.YNc(47,$e,3,3,"th",38),t.YNc(48,ti,2,1,"td",39),t.BQk(),t.ynx(49,40),t.YNc(50,ei,3,3,"th",38),t.YNc(51,oi,3,2,"td",39),t.BQk(),t.ynx(52,41),t.YNc(53,ri,1,0,"th",38),t.YNc(54,pi,6,1,"td",32),t.BQk(),t.YNc(55,di,1,0,"tr",42),t.YNc(56,ui,1,0,"tr",43),t.qZA()(),t.YNc(57,mi,2,9,"div",44),t.YNc(58,gi,5,3,"div",45),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(20,fi)),t.xp6(2),t.hij(" ",t.lcZ(8,12,"breadcrumbs.home")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"modules.dmp.parameters.title")," "),t.xp6(12),t.s9C("placeholder",t.lcZ(23,16,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(6),t.hij("",t.lcZ(29,18,"common.button.search")," "),t.xp6(4),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/configs/create")),t.xp6(3),t.Q6J("dataSource",i.dataSourceManage),t.xp6(20),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.length),t.xp6(1),t.Q6J("ngIf",0===i.length))},dependencies:[_t.mk,_t.O5,Y.rH,de.RK,ue.Hw,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,oe.J,j.Fj,j.JJ,j.On,_t.JJ,M.X$],styles:["#wp-dmp-parameters .form-select-status{width:250px}  #wp-dmp-parameters .data-table-parameters .mat-column-sequenceManage{width:65px}  #wp-dmp-parameters .data-table-parameters .mat-column-title{width:300px}  #wp-dmp-parameters .data-table-parameters .mat-column-action{width:70px}  #wp-dmp-parameters .data-table-parameters .mat-column-status{width:150px}  #wp-dmp-parameters .data-table-parameters .mat-column-createdAt{width:200px}  #wp-dmp-parameters .data-table-parameters .limit-text-2l{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:block!important;display:-webkit-box!important;overflow:hidden;white-space:normal}  #wp-dmp-parameters .data-table-parameters .limit-text{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:block!important;display:-webkit-box!important;overflow:hidden;white-space:normal}  #wp-dmp-parameters .data-table-parameters .f-12{font-size:12px}  #wp-dmp-parameters .data-table-parameters .f-13{font-size:13px}  #wp-dmp-parameters .data-table-parameters .title-param:hover{color:#0c83ff}@media (max-width: 1600px){  #wp-dmp-parameters .input-search{width:230px}}@media (max-width: 991px){  #wp-dmp-parameters .data-table-parameters .mat-column-title{width:200px}  #wp-dmp-parameters .data-table-parameters .mat-column-description{width:300px}}@media (max-width: 575px){  #wp-dmp-parameters .wp-filter-parameters .form-select-2{width:100%}}"]}),L})();var xi=Tt(6606);let yi=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}getReport(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.dashboard.report,i,(0,x.U)(f=>({status:f?.status,code:f?.code,data:f.data})))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();const _i=function(){return["/","audience","list"]};function bi(n,L){if(1&n&&(t.TgZ(0,"div",14)(1,"a",15)(2,"div",16)(3,"div",17)(4,"div",2)(5,"h3",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"span",18),t._UZ(9,"i",19),t.qZA()(),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("routerLink",t.DdM(8,_i))("routerLinkActive","active"),t.xp6(5),t.Oqu(t.lcZ(7,4,null!==(e=null==g.report?null:g.report.totalAudience)&&void 0!==e?e:0)),t.xp6(5),t.Oqu(t.lcZ(12,6,"modules.dmp.common.numberAudiences"))}}const Ai=function(){return["/","website","list"]};function Ci(n,L){if(1&n&&(t.TgZ(0,"div",14)(1,"a",15)(2,"div",20)(3,"div",17)(4,"div",2)(5,"h3",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"span",18),t._UZ(9,"i",21),t.qZA()(),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("routerLink",t.DdM(8,Ai))("routerLinkActive","active"),t.xp6(5),t.Oqu(t.lcZ(7,4,null!==(e=null==g.report?null:g.report.totalWebsite)&&void 0!==e?e:0)),t.xp6(5),t.Oqu(t.lcZ(12,6,"modules.dmp.common.numberWebsites"))}}const wi=function(){return["/","group","list"]};function Ti(n,L){if(1&n&&(t.TgZ(0,"div",14)(1,"a",15)(2,"div",22)(3,"div",17)(4,"div",2)(5,"h3",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"span",18),t._UZ(9,"i",23),t.qZA()(),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("routerLink",t.DdM(8,wi))("routerLinkActive","active"),t.xp6(5),t.Oqu(t.lcZ(7,4,null!==(e=null==g.report?null:g.report.totalGroup)&&void 0!==e?e:0)),t.xp6(5),t.Oqu(t.lcZ(12,6,"modules.dmp.common.numberGroups"))}}const Si=function(){return["/","segment","list"]};function ki(n,L){if(1&n&&(t.TgZ(0,"div",14)(1,"a",15)(2,"div",24)(3,"div",17)(4,"div",2)(5,"h3",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"span",18),t._UZ(9,"i",25),t.qZA()(),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("routerLink",t.DdM(8,Si))("routerLinkActive","active"),t.xp6(5),t.Oqu(t.lcZ(7,4,null!==(e=null==g.report?null:g.report.totalSegment)&&void 0!==e?e:0)),t.xp6(5),t.Oqu(t.lcZ(12,6,"modules.dmp.common.numberSegments"))}}const Di=function(){return["/","params","list"]};function Zi(n,L){if(1&n&&(t.TgZ(0,"div",14)(1,"a",15)(2,"div",26)(3,"div",17)(4,"div",2)(5,"h3",8),t._uU(6),t.ALo(7,"number"),t.qZA(),t.TgZ(8,"span",18),t._UZ(9,"i",27),t.qZA()(),t.TgZ(10,"div"),t._uU(11),t.ALo(12,"translate"),t.qZA()()()()()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("routerLink",t.DdM(8,Di))("routerLinkActive","active"),t.xp6(5),t.Oqu(t.lcZ(7,4,null!==(e=null==g.report?null:g.report.totalConfig)&&void 0!==e?e:0)),t.xp6(5),t.Oqu(t.lcZ(12,6,"modules.dmp.common.numberParams"))}}let Li=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.growthBookService=I,this.ruleCheckerService=F,this.dashboardService=st,this.report={}}ngOnInit(){this.getData()}getData(){this.ruleCheckerService.isAllow("dmp/dashboard")&&this.dashboardService.getReport({}).subscribe(e=>{1===e.status&&(this.report=e.data)})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(xi.n),t.Y36(Jt.H),t.Y36(yi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-home"]],features:[t.qOj],decls:25,vars:14,consts:[[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","active","py-2"],[1,"ph-house","me-2"],[1,"page-header-content","d-lg-flex","flex-lg-wrap"],[1,"page-title","pt-2","pb-0"],[1,"mb-0"],[1,"text-muted"],[1,"dashboard-report","p-3","pt-2"],[1,"row"],[1,"col-xl-12"],["class","col-lg-3",4,"ngIf"],[1,"col-lg-3"],[3,"routerLink","routerLinkActive"],[1,"card","bg-success","text-white"],[1,"card-body"],[1,"badge","bg-opacity-50","align-self-center","ms-auto"],[1,"ph","ph-user","ph-2x"],[1,"card","bg-website","text-white"],[1,"ph","ph-globe-hemisphere-west","ph-2x"],[1,"card","bg-group","text-white"],[1,"ph","ph-users-three","ph-2x"],[1,"card","bg-danger","text-white"],[1,"ph","ph-crosshair","ph-2x"],[1,"card","bg-primary","text-white"],[1,"ph-sliders-horizontal","ph-2x"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"i",5),t._uU(6),t.ALo(7,"translate"),t.qZA()()()(),t.TgZ(8,"div",6)(9,"div",7)(10,"h5",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",9),t._uU(14),t.ALo(15,"translate"),t.qZA()()()(),t.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",11),t.YNc(20,bi,13,9,"div",13),t.YNc(21,Ci,13,9,"div",13),t.YNc(22,Ti,13,9,"div",13),t.YNc(23,ki,13,9,"div",13),t.YNc(24,Zi,13,9,"div",13),t.qZA()()()()),2&e&&(t.xp6(6),t.hij(" ",t.lcZ(7,8,"breadcrumbs.home"),""),t.xp6(5),t.Oqu(t.lcZ(12,10,"modules.dmp.common.welcome")),t.xp6(3),t.Oqu(t.lcZ(15,12,"modules.dmp.common.statsWelcome")),t.xp6(6),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/audience/list")),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/website/list")),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/groupProduct/ofUser")),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/segment/list")),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/configs/list")))},dependencies:[_t.O5,Y.rH,Y.Od,_t.JJ,M.X$],styles:[".dashboard-report .bg-group{background-color:#17a2b8!important}  .dashboard-report .bg-website{background-color:#ffc107!important}"]}),L})();function Mi(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.valueIsRequired")," "))}function Ii(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Ei(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function Ui(n,L){if(1&n&&(t.TgZ(0,"div",36),t.YNc(1,Mi,3,3,"div",32),t.YNc(2,Ii,3,3,"div",32),t.YNc(3,Ei,3,3,"div",32),t.qZA()),2&n){const g=t.oxw(2).index,e=t.oxw().index,i=t.oxw().index,f=t.oxw();let I,F,st;t.xp6(1),t.Q6J("ngIf",null==(I=f.detailOption(i,e,g).get("value"))||null==I.errors?null:I.errors.required),t.xp6(1),t.Q6J("ngIf",null==(F=f.detailOption(i,e,g).get("value"))||null==F.errors?null:F.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(st=f.detailOption(i,e,g).get("value"))||null==st.errors?null:st.errors.excessWhiteSpace)}}const Pi=function(n){return{"ng-invalid-custom":n}};function Ni(n,L){if(1&n){const g=t.EpF();t.ynx(0),t.TgZ(1,"input",34),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw().index,I=t.oxw().index,F=t.oxw();return t.KtG(F.trimData(F.detailOption(I,f,i).get("value")))})("keydown.enter",function(i){return i.preventDefault()}),t.ALo(2,"translate"),t.qZA(),t.YNc(3,Ui,4,3,"div",35),t.BQk()}if(2&n){const g=t.oxw().index,e=t.oxw(),i=e.index,f=e.$implicit,I=t.oxw().index,F=t.oxw();let st,ut,xt;t.xp6(1),t.Q6J("ngClass",t.VKq(5,Pi,(null==(st=F.detailOption(I,i,g).get("value"))?null:st.invalid)&&((null==(st=F.detailOption(I,i,g).get("value"))?null:st.dirty)||(null==(st=F.detailOption(I,i,g).get("value"))?null:st.touched))))("placeholder",(null==(ut=f.get("groupSelected"))||null==ut.value||null==ut.value.placeholder?null:ut.value.placeholder.length)>0?null==(ut=f.get("groupSelected"))||null==ut.value?null:ut.value.placeholder:t.lcZ(2,3,"modules.dmp.segment.placeHolder.enterValue")),t.xp6(2),t.Q6J("ngIf",(null==(xt=F.detailOption(I,i,g).get("value"))?null:xt.invalid)&&((null==(xt=F.detailOption(I,i,g).get("value"))?null:xt.dirty)||(null==(xt=F.detailOption(I,i,g).get("value"))?null:xt.touched)))}}function Oi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",40),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3).index,f=t.oxw().index,I=t.oxw();return t.KtG(I.addOption({criteriaIdx:f,queryIdx:i}))}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.segment.addOption"))}function ji(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",41),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).index,f=t.oxw().index,I=t.oxw().index,F=t.oxw();return t.KtG(F.removeOption(I,f,i))}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.segment.removeOption"))}function qi(n,L){if(1&n&&(t.ynx(0),t._UZ(1,"select"),t.TgZ(2,"span",37),t.YNc(3,Oi,2,3,"i",38),t.YNc(4,ji,2,3,"i",39),t.qZA(),t.BQk()),2&n){const g=t.oxw().index,e=t.oxw().index,i=t.oxw().index;t.xp6(1),t.IyS("cursor-pointer form-control select select2-hidden-accessible select-criteria-",i,"-query-",e,"-option-",g,""),t.xp6(2),t.Q6J("ngIf",0===g),t.xp6(1),t.Q6J("ngIf",0!==g)}}function Fi(n,L){if(1&n&&(t.ynx(0),t._UZ(1,"select",42),t.BQk()),2&n){const g=t.oxw(2).index,e=t.oxw().index;t.xp6(1),t.MT6("form-control select select2-hidden-accessible select-tag select-criteria-",e,"-query-",g,"-tag")}}function Bi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3).index,f=t.oxw().index,I=t.oxw();return t.KtG(I.addOption({criteriaIdx:f,queryIdx:i}))}),t._UZ(1,"i",44),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"modules.dmp.segment.addOption")))}function Yi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).index,f=t.oxw().index,I=t.oxw().index,F=t.oxw();return t.KtG(F.removeOption(I,f,i))}),t._UZ(1,"i",45),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"modules.dmp.segment.removeOption")))}function Gi(n,L){if(1&n&&(t.TgZ(0,"span",37),t.YNc(1,Bi,3,3,"a",18),t.YNc(2,Yi,3,3,"a",18),t.qZA()),2&n){const g=t.oxw().index;t.xp6(1),t.Q6J("ngIf",0===g),t.xp6(1),t.Q6J("ngIf",0!==g)}}const be=function(n){return{"mt-2":n}};function Ri(n,L){if(1&n&&(t.TgZ(0,"div",31),t.YNc(1,Ni,4,7,"ng-container",32),t.YNc(2,qi,5,7,"ng-container",32),t.YNc(3,Fi,2,4,"ng-container",32),t.YNc(4,Gi,3,2,"span",33),t.qZA()),2&n){const g=L.index,e=t.oxw(),i=e.index,f=e.$implicit,I=t.oxw().index,F=t.oxw();let st,ut,xt;t.Q6J("ngClass",t.VKq(6,be,0!==g))("formGroupName",g),t.xp6(1),t.Q6J("ngIf",F.checkTypeInput(I,i)===F.typeInputValue.input&&(!0===(null==(st=f.get("viewAll"))?null:st.value)||g<=F.limitDisplayValue)),t.xp6(1),t.Q6J("ngIf",F.checkTypeInput(I,i)===F.typeInputValue.select&&(!0===(null==(ut=f.get("viewAll"))?null:ut.value)||g<=F.limitDisplayValue)),t.xp6(1),t.Q6J("ngIf",F.checkTypeInput(I,i)===F.typeInputValue.multipleSelect),t.xp6(1),t.Q6J("ngIf",(null==(xt=F.queries(I).at(i).get("groupSelected"))||null==xt.value?null:xt.value.multiValue)&&F.checkTypeInput(I,i)!==F.typeInputValue.multipleSelect&&(!0===(null==(xt=f.get("viewAll"))?null:xt.value)||g<=F.limitDisplayValue))}}function Hi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",46),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(),f=i.index,I=i.$implicit,F=t.oxw().index,st=t.oxw();return t.KtG(st.viewAll(F,f,I))}),t.TgZ(1,"span",47),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"modules.dmp.segment.viewAll")))}function Ji(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",48),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw().index,I=t.oxw();return t.KtG(I.removeQuery(f,i))}),t._UZ(1,"i",49),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"modules.dmp.segment.removeQuery")))}const zi=function(n){return{"cursor-pointer":n}},Qi=function(n){return{"border-condition":n}};function Vi(n,L){if(1&n&&(t.TgZ(0,"div",19)(1,"div",20)(2,"div",8),t._UZ(3,"select",9),t.qZA()(),t.TgZ(4,"div",21),t._UZ(5,"select",22),t.qZA(),t.TgZ(6,"div",23),t.YNc(7,Ri,5,8,"div",24),t.YNc(8,Hi,4,3,"div",25),t.qZA(),t.TgZ(9,"div",26)(10,"div",27)(11,"div",28),t._UZ(12,"select",29),t.qZA(),t.YNc(13,Ji,3,3,"a",30),t.qZA()()()),2&n){const g=L.$implicit,e=L.index,i=t.oxw().index,f=t.oxw();let I;t.Q6J("ngClass",t.VKq(20,be,0!==e))("formGroupName",e),t.xp6(3),t.MT6("form-control select select2-hidden-accessible select-param-criteria-",i,"-query-",e,""),t.xp6(1),t.Q6J("ngClass",t.VKq(22,zi,!f.checkPrTag(i,e))),t.xp6(1),t.MT6("form-control select select2-hidden-accessible select-group-criteria-",i,"-query-",e,""),t.Q6J("disabled",f.checkPrTag(i,e)),t.xp6(2),t.Q6J("ngForOf",f.options(i,e).controls),t.xp6(1),t.Q6J("ngIf",!1===(null==(I=g.get("viewAll"))?null:I.value)&&(null==(I=g.get("options"))?null:I.value.length)>f.limitDisplayValue+1),t.xp6(1),t.Q6J("ngClass",t.VKq(24,Qi,f.queries(i).length>1)),t.xp6(3),t.MT6("form-control select select2-hidden-accessible select-ex-option-",i,"-",e,""),t.xp6(1),t.Q6J("ngIf",0!==e)}}function Wi(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw();return t.KtG(f.removeCriteria(i))}),t._UZ(1,"i",45),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"modules.dmp.segment.removeCriteria")))}const Xi=function(n){return{"pt-0":n}};function Ki(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li",3)(1,"div",4),t._UZ(2,"div",5)(3,"hr",6),t.qZA(),t.TgZ(4,"div",7)(5,"div",8),t._UZ(6,"select",9),t.qZA()(),t.TgZ(7,"div",10)(8,"div",11)(9,"div",12),t.YNc(10,Vi,14,26,"div",13),t.qZA()(),t.TgZ(11,"div",14)(12,"a",15),t.NdJ("click",function(){const f=t.CHM(g).index,I=t.oxw();return t.KtG(I.addQuery({criteriaIdx:f}))}),t.TgZ(13,"span"),t._UZ(14,"i",16),t.qZA(),t.TgZ(15,"span"),t._uU(16),t.ALo(17,"translate"),t.qZA()()()(),t.TgZ(18,"div",17),t.YNc(19,Wi,3,3,"a",18),t.qZA()()}if(2&n){const g=L.index,e=t.oxw();t.Q6J("ngClass",t.VKq(10,Xi,0!==g))("formGroupName",g),t.xp6(6),t.Gre("form-control select select2-hidden-accessible select-ex-criteria-",g,""),t.xp6(4),t.Q6J("ngForOf",e.queries(g).controls),t.xp6(6),t.Oqu(t.lcZ(17,8,"modules.dmp.segment.addFilter")),t.xp6(3),t.Q6J("ngIf",0!==g)}}let he=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.fb=F,this.ruleCheckerService=st,this.paramList=[],this.tagList=[],this.treeTag=[],this.productList=[],this.formChange=new t.vpe,this.limitDisplayValue=2,this.typeInputValue={input:1,select:2,multipleSelect:3},this.exCnf=[{id:"and",text:"modules.dmp.segment.and"},{id:"or",text:"modules.dmp.segment.or"},{id:"not",text:"modules.dmp.segment.not"}]}ngOnInit(){this.criteria().clear(),this.segmentEdit?(this.startDate=this.segmentEdit.startedAt,this.endDate=this.segmentEdit.endedAt,this.fromDate=this.datePipe.transform(this.segmentEdit.startedAt,"yyyy-MM-dd"),this.toDate=this.datePipe.transform(this.segmentEdit.endedAt,"yyyy-MM-dd"),this.segmentEdit.v2Json.forEach((e,i)=>{this.addCriteria({criteria:e,index:i})})):this.addCriteria()}criteria(){return this.form.get("criteria")}addCriteria(e){this.criteria().push(this.createCriteria(e?e.criteria:null)),e?e.criteria.settings.forEach((i,f)=>{this.addQuery({query:i,criteriaIdx:e.index,queryIdx:f})}):this.addQuery({criteriaIdx:this.criteria().length-1}),setTimeout(()=>{this.initSelect2ExCriteria(e?e.index:this.criteria().length-1)},0)}createCriteria(e){return this.fb.group(e?{tp:[e?e.tp:"",[]],group:[e?e.group:"",[]],query:this.fb.array([]),ex:[e?e.ex:"",[]]}:{tp:["",[]],group:["",[]],query:this.fb.array([]),ex:["and",[]]})}removeCriteria(e){this.criteria().removeAt(e)}addOption(e,i){e?.option&&!i?this.queries(e.criteriaIdx).value[e.queryIdx].tp.includes("tag")?(this.options(e.criteriaIdx,e.queryIdx).push(this.createOption(e.criteriaIdx,e.queryIdx)),this.options(e.criteriaIdx,e.queryIdx).at(0).get("value")?.setValue(e.option.toString())):this.options(e.criteriaIdx,e.queryIdx).push(this.createOption(e.criteriaIdx,e.queryIdx,e.option)):this.options(e.criteriaIdx,e.queryIdx).push(this.createOption(e.criteriaIdx,e.queryIdx));const f=this.checkTypeInput(e.criteriaIdx,e.queryIdx);f&&(f===this.typeInputValue.select&&setTimeout(()=>{this.initSelect2Option(e.criteriaIdx,e.queryIdx,e.option?e.optionIdx:this.options(e.criteriaIdx,e.queryIdx).length-1)},0),f===this.typeInputValue.multipleSelect&&setTimeout(()=>{this.initSelect2TagValue(e.criteriaIdx,e.queryIdx)},0))}removeOption(e,i,f){this.options(e,i).removeAt(f),this.checkTypeInput(e,i)===this.typeInputValue.select&&setTimeout(()=>{this.initSelect2Option(e,i,f)},0)}createOption(e,i,f){if(!f){const I=this.queries(e).at(i).get("type")?.value.includes("select"),F=this.queries(e).at(i).get("groupSelected")?.value;if(I)return this.fb.group({value:[F.option[0].value,[j.kI.required,a,_(1)]]})}return this.fb.group({value:[f??"",[j.kI.required,a,_(1)]]})}options(e,i){return this.queries(e).at(i).get("options")}addQuery(e){if(e.query)if(setTimeout(()=>{this.initSelect2Param(e.criteriaIdx,e.queryIdx),this.initSelect2ExOption(e.criteriaIdx,e.queryIdx)},0),this.queries(e.criteriaIdx).push(this.createQuery(e)),this.queries(e.criteriaIdx).value[e.queryIdx].tp.includes("tag"))this.addOption({criteriaIdx:e.criteriaIdx,queryIdx:e.queryIdx,option:e.query.value});else if(e.query.value.length&&"string"!=typeof e.query.value)for(let i=0;i<e.query.value.length;++i)this.addOption({criteriaIdx:e.criteriaIdx,queryIdx:e.queryIdx,option:e.query.value[i],optionIdx:i});else this.addOption({criteriaIdx:e.criteriaIdx,queryIdx:e.queryIdx,option:e.query.value,optionIdx:0});else this.queries(e.criteriaIdx).push(this.createQuery()),setTimeout(()=>{this.initSelect2Param(e.criteriaIdx,this.queries(e.criteriaIdx).length-1),this.initSelect2ExOption(e.criteriaIdx,this.queries(e.criteriaIdx).length-1)},0),this.addOption({criteriaIdx:e.criteriaIdx,queryIdx:this.queries(e.criteriaIdx).length-1})}removeQuery(e,i){this.queries(e).removeAt(i)}createQuery(e){if(e){const i=this.paramList.find(F=>F.tp===e.query.type),f="tag"===i?.tp?e.query.products.toString():i?.configs.find(F=>F.key===e.query.key);let I="input";return i?.tp.includes("tag")&&(I="multiple"),"tag"!==i?.tp&&f?.value.includes("select")&&(I="select"),this.fb.group({tp:[e.query.type,[]],groupSelected:[f??new k,[]],paramSelected:[i,[D]],options:this.fb.array([]),ex:[e.query.ex,[]],type:[I],viewAll:!1})}return this.fb.group({tp:["",[]],groupSelected:[""],paramSelected:[new m,[D]],options:this.fb.array([]),ex:["and",[]],type:["input"],viewAll:!1})}detailOption(e,i,f){return this.options(e,i).at(f)}queries(e){return this.criteria().at(e).get("query")}checkTypeInput(e,i,f){if(f){const I=this.queries(e).at(i).value,F=I.groupSelected;return I.paramSelected.tp.includes("tag")?this.typeInputValue.multipleSelect:F.value.includes("input")?this.typeInputValue.input:F.value.includes("select")?this.typeInputValue.select:null}return!this.queries(e).at(i).get("type")?.value||this.queries(e).at(i).get("type")?.value.includes("input")?this.typeInputValue.input:this.queries(e).at(i).get("type")?.value.includes("select")?this.typeInputValue.select:this.queries(e).at(i).get("paramSelected")?.value?.tp.includes("tag")?this.typeInputValue.multipleSelect:null}initSelect2Option(e,i,f){const I=this.queries(e).at(i).get("paramSelected")?.value;if(I.id){const F=this.queries(e).at(i).get("groupSelected")?.value?.key,st=I.configs.find(xt=>xt.key===F);let ut;this.segmentEdit&&this.criteria().length<=this.segmentEdit.v2Json.length?ut=st.option.map(xt=>({id:xt.value,text:xt.text,selected:this.checkOptionSelected(e,i,f,xt.value)})):(ut=st.option.map(xt=>({id:xt.value,text:xt.text})),this.options(e,i).value[f].value=ut[0].id),$(`.select-criteria-${e}-query-${i}-option-${f}`).select2({data:ut}).on("select2:select",xt=>{const At=xt.target.value;this.options(e,i).at(f).get("value")?.setValue(At)})}}initSelect2TagValue(e,i){let f=this.treeTag,I=this.options(e,i).at(0).get("value")?.value??[];$(`.select-criteria-${e}-query-${i}-tag`).select2({data:f.map(F=>({...F,selected:!!this.segmentEdit&&I.split(",").includes(F.id.toString())})),closeOnSelect:!1,templateResult:function(F){if(!F.id)return F.text;let st=F.text;return F.level>0&&(st="--".repeat(F.level)+" "+st),0===F.level?$("<strong>"+st+"</strong>"):$("<span>"+st+"</span>")},placeholder:this.translate.instant("modules.dmp.segment.selectTag")}).on("select2:select",F=>{const st=F.params.data.id;let ut=this.options(e,i).at(0).get("value")?.value;ut.split(",").some(xt=>xt===st)||(ut+=ut.length>1?","+st:st,this.options(e,i).at(0).get("value")?.setValue(ut))}).on("select2:unselect",F=>{const st=F.params.data.id;let ut=this.options(e,i).at(0).get("value")?.value.split(",");-1!==ut.indexOf(st)&&ut.splice(ut.indexOf(st),1),this.options(e,i).at(0).get("value")?.setValue(ut.toString())})}initSelect2Param(e,i){let f=[],I=[];if(this.segmentEdit){let F=this.paramList.find(st=>this.queries(e).at(i).get("tp")?.value===st.tp);I=this.checkPrTag(e,i)?[{id:"pr_tags",text:"prTag",selected:!0}]:F?.configs.map(st=>({id:st.key,text:st.name,selected:"tag"===this.queries(e).at(i).get("paramSelected")?.value.tp?this.queries(e).at(i).get("groupSelected")?.value.split(",").includes(st.key):this.queries(e).at(i).get("groupSelected")?.value.key===st.key}))??[],"tag"!==this.queries(e).at(i).get("paramSelected")?.value.tag&&(f=this.paramList.map(st=>({id:st.id,text:st.title,selected:this.queries(e).at(i).get("tp")?.value===st.tp}))),this.queries(e).at(i).get("paramSelected")?.value||I.unshift({id:"-1",text:this.translate.instant("modules.dmp.segment.selectGroup"),selected:!1}),f.unshift({id:-1,text:this.translate.instant("modules.dmp.segment.selectParam"),selected:!1})}else I=[{id:-1,text:this.translate.instant("modules.dmp.segment.selectGroup"),selected:!0}],f=this.paramList.map(F=>({id:F.id,text:F.title,selected:!1})),f.unshift({id:-1,text:this.translate.instant("modules.dmp.segment.selectParam"),selected:!0});$(`.select-param-criteria-${e}-query-${i}`).select2({data:f}).on("select2:select",F=>{const st=parseInt(F.target.value);if(-1!==st){const ut=this.paramList.find(Dt=>Dt.id===st),xt=ut?.configs?.map(Dt=>({id:Dt.key,text:Dt.name})),At=ut?.configs[0];switch(this.queries(e).at(i).get("paramSelected")?.setValue(ut),this.queries(e).at(i).get("tp")?.setValue(ut?.tp),this.queries(e).at(i).get("groupSelected")?.setValue(At),this.checkPrTag(e,i)&&xt?.unshift({id:"pr_tags",text:"prTag"}),$(`.select-group-criteria-${e}-query-${i}`).empty().select2({data:xt,multiple:this.checkTag(e,i),placeholder:this.translate.instant("modules.dmp.segment.placeHolder.chooseGroup"),closeOnSelect:!this.checkTag(e,i)}),this.checkTypeInput(e,i,!0)){case this.typeInputValue.input:this.queries(e).at(i).get("type")?.setValue("input-text");break;case this.typeInputValue.select:this.queries(e).at(i).get("type")?.setValue("select");break;case this.typeInputValue.multipleSelect:this.queries(e).at(i).get("type")?.setValue("multiple")}this.options(e,i).clear(),this.addOption({criteriaIdx:e,queryIdx:i})}else I=[{id:-1,text:this.translate.instant("modules.dmp.segment.selectGroup"),selected:!0}],$(`.select-group-criteria-${e}-query-${i}`).empty().select2({data:I}),this.options(e,i).clear(),this.addOption({criteriaIdx:e,queryIdx:i}),this.queries(e).at(i).get("paramSelected")?.setValue(new m),this.queries(e).at(i).get("groupSelected")?.setValue(null),this.queries(e).at(i).get("tp")?.setValue(""),this.queries(e).at(i).get("type")?.setValue("input")}),$(`.select-group-criteria-${e}-query-${i}`).select2({data:I,multiple:this.checkTag(e,i),placeholder:this.translate.instant("modules.dmp.segment.placeHolder.chooseGroup"),closeOnSelect:!this.checkTag(e,i)}).on("select2:select",F=>{let st=this.queries(e).at(i).get("groupSelected")?.value;const ut=this.queries(e).at(i).get("paramSelected")?.value,xt=F.params.data.id,At=ut.configs.find(Yt=>Yt.key===xt),Dt=At.value;this.checkTag(e,i)?(st=st.length>0?st+","+At.key:At.key,this.queries(e).at(i).get("groupSelected")?.setValue(st)):this.queries(e).at(i).get("groupSelected")?.setValue(At),"multiple"===this.queries(e).at(i).get("type")?.value||this.queries(e).at(i).get("type")?.setValue(Dt),this.checkTag(e,i)||(this.options(e,i).clear(),this.addOption({criteriaIdx:e,queryIdx:i}))}).on("select2:unselect",F=>{let st=this.queries(e).at(i).get("groupSelected")?.value;"tag"===this.queries(e).at(i).get("paramSelected")?.value.tp&&(st=st.split(",").filter(ut=>ut!==F.params.data.id).toString(),this.queries(e).at(i).get("groupSelected")?.setValue(st))})}initSelect2ExCriteria(e){$(`.select-ex-criteria-${e}`).select2({data:this.exCnf.map(i=>({id:i.id,text:this.translate.instant(i.text),selected:this.segmentEdit?i.id===this.criteria().at(e).get("ex")?.value:"and"===i.id}))}).on("select2:select",i=>{const f=i.target.value;this.criteria().at(e).get("ex")?.setValue(f)})}initSelect2ExOption(e,i){$(`.select-ex-option-${e}-${i}`).select2({data:this.exCnf.map(f=>({id:f.id,text:this.translate.instant(f.text),selected:this.segmentEdit?f.id===this.queries(e).at(i).value.ex:"and"===f.id}))}).on("select2:select",f=>{const I=f.target.value;this.queries(e).at(i).get("option")?.setValue(I),this.queries(e).at(i).get("ex")?.setValue(I)})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}checkOptionSelected(e,i,f,I){let F=this.segmentEdit.v2Json[e].settings[i]?.value??null;return!!F&&(F="string"!=typeof this.segmentEdit.v2Json[e].settings[i].value?this.segmentEdit.v2Json[e].settings[i].value[f]:this.segmentEdit.v2Json[e].settings[i].value,I===F)}viewAll(e,i,f){if(f.get("viewAll")?.setValue(!0),this.checkTypeInput(e,i)===this.typeInputValue.select){let I=f.get("options").value??[];I=I.slice(this.limitDisplayValue+1);const F=this.limitDisplayValue+1;for(let st=0;st<I.length;st++)setTimeout(()=>{this.initSelect2Option(e,i,F+st)},0)}}checkPrTag(e,i){return!!this.queries(e).at(i).get("paramSelected")?.value?.tp.includes("pr_tag")}checkTag(e,i){return!(!this.queries(e).at(i).get("paramSelected")?.value?.tp.includes("tag")||this.checkPrTag(e,i))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(j.qu),t.Y36(Jt.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-segment-normal-criteria"]],inputs:{form:"form",segmentEdit:"segmentEdit",paramList:"paramList",tagList:"tagList",treeTag:"treeTag",productList:"productList"},outputs:{formChange:"formChange"},features:[t.qOj],decls:3,vars:2,consts:[[1,"form-criteria",3,"formGroup"],["formArrayName","criteria",1,"card-body","p-0","content-criteria"],["class","criteria-element p-2 d-flex justify-content-between align-items-center",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],[1,"criteria-element","p-2","d-flex","justify-content-between","align-items-center",3,"ngClass","formGroupName"],[1,"line-rule"],[1,"vertical-line"],[1,"line-point"],[1,"select-ex"],[1,"form-group","form-select-2","cursor-pointer"],["data-minimum-results-for-search","Infinity"],[1,"card","card-body","mb-0","p-2"],[1,"query-group"],["formArrayName","query",1,"col-xl-12"],["class","d-flex w-100",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],[1,"mt-2","text-primary"],[1,"cursor-pointer",3,"click"],[1,"ph-plus-circle","icon-mall","me-1"],[1,"action-btn-criteria"],[3,"click",4,"ngIf"],[1,"d-flex","w-100",3,"ngClass","formGroupName"],[1,"form-control-feedback","w-25","me-2"],[1,"form-control-feedback","w-25","me-2",3,"ngClass"],["data-minimum-results-for-search","Infinity",3,"disabled"],["formArrayName","options",1,"w-25"],["class","form-control-feedback me-2",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],["class","mt-2 text-end",3,"click",4,"ngIf"],[1,"form-group","form-select-2","cursor-pointer","w-25","ps-4",3,"ngClass"],[1,"w-100","d-flex","align-items-center","line-vertical-ex"],[1,"w-100"],["formControlName","ex","data-minimum-results-for-search","Infinity"],["class","icon-trash",3,"click",4,"ngIf"],[1,"form-control-feedback","me-2",3,"ngClass","formGroupName"],[4,"ngIf"],["class","action-btn-option",4,"ngIf"],["type","text","formControlName","value",1,"form-control",3,"ngClass","placeholder","blur","keydown.enter"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"validation-invalid-label","mt-2"],[1,"action-btn-option"],["class","ph ph-plus-circle icon-mall ms-2 text-primary cursor-pointer float-end",3,"matTooltip","click",4,"ngIf"],["class","ph ph-trash ms-2 text-danger cursor-pointer float-end",3,"matTooltip","click",4,"ngIf"],[1,"ph","ph-plus-circle","icon-mall","ms-2","text-primary","cursor-pointer","float-end",3,"matTooltip","click"],[1,"ph","ph-trash","ms-2","text-danger","cursor-pointer","float-end",3,"matTooltip","click"],["multiple","multiple"],[3,"click"],[1,"ph","ph-plus-circle","ms-2","text-primary","cursor-pointer","float-end",3,"matTooltip"],[1,"ph","ph-trash","ms-2","text-danger","cursor-pointer","float-end",3,"matTooltip"],[1,"mt-2","text-end",3,"click"],[1,"pe-2","text-primary","cursor-pointer"],[1,"icon-trash",3,"click"],[1,"ph-trash","ms-2","text-danger",3,"matTooltip"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"ul",1),t.YNc(2,Ki,20,12,"li",2),t.qZA()()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngForOf",i.criteria().controls))},dependencies:[_t.mk,_t.sg,_t.O5,y.gM,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u,j.x0,j.CE,M.X$]}),L})();function $i(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.domainIsRequired")," "))}function tn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.domainMaxLength")," "))}function en(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function nn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function on(n,L){if(1&n&&(t.TgZ(0,"div",34),t.YNc(1,$i,3,3,"div",35),t.YNc(2,tn,3,3,"div",35),t.YNc(3,en,3,3,"div",35),t.YNc(4,nn,3,3,"div",35),t.qZA()),2&n){const g=t.oxw().index,e=t.oxw(2).index,i=t.oxw();let f,I,F,st;t.xp6(1),t.Q6J("ngIf",null==(f=i.queries(e).at(g).get("domain"))||null==f.errors?null:f.errors.required),t.xp6(1),t.Q6J("ngIf",null==(I=i.queries(e).at(g).get("domain"))||null==I.errors?null:I.errors.maxLength),t.xp6(1),t.Q6J("ngIf",null==(F=i.queries(e).at(g).get("domain"))||null==F.errors?null:F.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(st=i.queries(e).at(g).get("domain"))||null==st.errors?null:st.errors.excessWhiteSpace)}}function rn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.versionIsRequired")," "))}function sn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.versionMaxLength")," "))}function an(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function ln(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function cn(n,L){if(1&n&&(t.TgZ(0,"div",34),t.YNc(1,rn,3,3,"div",35),t.YNc(2,sn,3,3,"div",35),t.YNc(3,an,3,3,"div",35),t.YNc(4,ln,3,3,"div",35),t.qZA()),2&n){const g=t.oxw().index,e=t.oxw(2).index,i=t.oxw();let f,I,F,st;t.xp6(1),t.Q6J("ngIf",null==(f=i.queries(e).at(g).get("version"))||null==f.errors?null:f.errors.required),t.xp6(1),t.Q6J("ngIf",null==(I=i.queries(e).at(g).get("version"))||null==I.errors?null:I.errors.maxLength),t.xp6(1),t.Q6J("ngIf",null==(F=i.queries(e).at(g).get("version"))||null==F.errors?null:F.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(st=i.queries(e).at(g).get("version"))||null==st.errors?null:st.errors.excessWhiteSpace)}}function pn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",36),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw(2).index,I=t.oxw();return t.KtG(I.removeQuery(f,i))}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.segment.removeQuery"))}const dn=function(n){return{"mt-2":n}},Ae=function(n){return{"ng-invalid-custom":n}},un=function(n){return{"border-condition":n}};function hn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",20)(1,"div",21)(2,"div",8),t._UZ(3,"select",9),t.qZA()(),t.TgZ(4,"div",22)(5,"div",8)(6,"input",23),t.NdJ("keydown.enter",function(i){return i.preventDefault()})("blur",function(){const f=t.CHM(g).index,I=t.oxw(2).index,F=t.oxw();return t.KtG(F.trimData(F.queries(I).at(f).get("domain")))}),t.ALo(7,"translate"),t.qZA(),t.YNc(8,on,5,4,"div",24),t.qZA()(),t.TgZ(9,"div",25)(10,"div",8),t._UZ(11,"select",9),t.qZA()(),t.TgZ(12,"div",26)(13,"div",8)(14,"input",27),t.NdJ("keydown.enter",function(i){return i.preventDefault()})("blur",function(){const f=t.CHM(g).index,I=t.oxw(2).index,F=t.oxw();return t.KtG(F.trimData(F.queries(I).at(f).get("version")))}),t.ALo(15,"translate"),t.qZA(),t.YNc(16,cn,5,4,"div",24),t.qZA()(),t.TgZ(17,"div",28)(18,"div",29)(19,"div",30),t._UZ(20,"select",31),t.qZA(),t.TgZ(21,"span",32),t.YNc(22,pn,2,3,"i",33),t.qZA()()()()}if(2&n){const g=L.index,e=t.oxw(2).index,i=t.oxw();let f,I,F,st;t.Q6J("ngClass",t.VKq(26,dn,0!==g))("formGroupName",g),t.xp6(3),t.MT6("form-control select select2-hidden-accessible select-tp-version-criteria-",e,"-query-",g,""),t.xp6(3),t.s9C("placeholder",t.lcZ(7,22,"modules.dmp.segment.placeHolder.enterDomain")),t.Q6J("ngClass",t.VKq(28,Ae,(null==(f=i.queries(e).at(g).get("domain"))?null:f.invalid)&&((null==(f=i.queries(e).at(g).get("domain"))?null:f.dirty)||(null==(f=i.queries(e).at(g).get("domain"))?null:f.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(I=i.queries(e).at(g).get("domain"))?null:I.invalid)&&((null==(I=i.queries(e).at(g).get("domain"))?null:I.dirty)||(null==(I=i.queries(e).at(g).get("domain"))?null:I.touched))),t.xp6(3),t.MT6("form-control select select2-hidden-accessible select-operator-version-criteria-",e,"-query-",g,""),t.xp6(3),t.s9C("placeholder",t.lcZ(15,24,"modules.dmp.segment.placeHolder.enterVersion")),t.Q6J("ngClass",t.VKq(30,Ae,(null==(F=i.queries(e).at(g).get("version"))?null:F.invalid)&&((null==(F=i.queries(e).at(g).get("version"))?null:F.dirty)||(null==(F=i.queries(e).at(g).get("version"))?null:F.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(st=i.queries(e).at(g).get("version"))?null:st.invalid)&&((null==(st=i.queries(e).at(g).get("version"))?null:st.dirty)||(null==(st=i.queries(e).at(g).get("version"))?null:st.touched))),t.xp6(1),t.Q6J("ngClass",t.VKq(32,un,i.queries(e).length>1)),t.xp6(3),t.MT6("form-control select select2-hidden-accessible select-ex-version-criteria-",e,"-query-",g,""),t.xp6(2),t.Q6J("ngIf",0!==g)}}function mn(n,L){if(1&n&&(t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,hn,23,34,"div",19),t.qZA()()),2&n){const g=t.oxw().index,e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.queries(g).controls)}}function gn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",37),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().index,f=t.oxw();return t.KtG(f.removeCriteria(i))}),t.ALo(1,"translate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.segment.removeCriteria"))}const fn=function(n){return{"pt-0":n}};function vn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li",3)(1,"div",4),t._UZ(2,"div",5)(3,"hr",6),t.qZA(),t.TgZ(4,"div",7)(5,"div",8),t._UZ(6,"select",9),t.qZA()(),t.TgZ(7,"div",10),t.YNc(8,mn,3,1,"div",11),t.TgZ(9,"div",12)(10,"span",13),t.NdJ("click",function(){const f=t.CHM(g).index,I=t.oxw();return t.KtG(I.addQueryVersion({criteriaIdx:f}))}),t.TgZ(11,"span"),t._UZ(12,"i",14),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.ALo(15,"translate"),t.qZA()()()(),t.TgZ(16,"div",15),t.YNc(17,gn,2,3,"i",16),t.qZA()()}if(2&n){const g=L.index,e=t.oxw();t.Q6J("ngClass",t.VKq(10,fn,0!==g))("formGroupName",g),t.xp6(6),t.Gre("form-control select select2-hidden-accessible select-ex-criteria-",g,""),t.xp6(2),t.Q6J("ngIf",e.form.controls.type.value===e.typeCnf[1].id),t.xp6(6),t.Oqu(t.lcZ(15,8,"modules.dmp.segment.addFilter")),t.xp6(3),t.Q6J("ngIf",0!==g)}}let me=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.fb=F,this.ruleCheckerService=st,this.exCnf=[{id:"and",text:"modules.dmp.segment.and"},{id:"or",text:"modules.dmp.segment.or"},{id:"not",text:"modules.dmp.segment.not"}],this.segmentVersionCnf={operators:[{id:"eq",text:"="},{id:"lt",text:"<"},{id:"gt",text:">"}],device:[{id:"app",text:"modules.dmp.segment.app"}],tp:[{id:"version",text:"modules.dmp.segment.version"}]}}ngOnInit(){this.criteria().clear(),this.segmentEdit?this.segmentEdit.v2Json.forEach((e,i)=>{this.addCriteria({criteria:e,index:i})}):this.addCriteria()}criteria(){return this.form.get("criteria")}addCriteria(e){this.criteria().push(this.createCriteria(e?e.criteria:null)),e?e.criteria.settings.forEach((i,f)=>{this.addQueryVersion({query:i,criteriaIdx:e.index,queryIdx:f})}):this.addQueryVersion({criteriaIdx:this.criteria().length-1})}createCriteria(e){return this.fb.group(e?{tp:["",[]],group:["",[]],query:this.fb.array([]),ex:[e.ex,[]]}:{tp:["",[]],group:["",[]],query:this.fb.array([]),ex:["and",[]]})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}removeCriteria(e){this.criteria().removeAt(e)}queries(e){return this.criteria().at(e).get("query")}initSelect2ExVersion(e,i){$(`.select-ex-version-criteria-${e}-query-${i}`).select2({data:this.exCnf.map(f=>({id:f.id,text:this.translate.instant(f.text),selected:this.segmentEdit?f.id===this.queries(e).at(i).get("ex")?.value:"and"===f.id}))}).on("select2:select",f=>{const I=f.target.value;this.queries(e).at(i).get("ex")?.setValue(I)})}initSelect2OperatorVersion(e,i){$(`.select-operator-version-criteria-${e}-query-${i}`).select2({data:this.segmentVersionCnf.operators.map((f,I)=>({id:f.id,text:this.translate.instant(f.text),selected:this.segmentEdit?f.id===this.queries(e).at(i).get("compare")?.value:0===I}))}).on("select2:select",f=>{const I=f.target.value;this.queries(e).at(i).get("compare")?.setValue(I)})}initSelect2TpVersion(e,i){$(`.select-tp-version-criteria-${e}-query-${i}`).select2({data:this.segmentVersionCnf.tp.map(f=>({id:f.id,text:this.translate.instant(f.text),selected:"version"===f.id}))})}createQueryVersion(e){return this.fb.group(e?{tp:[this.segmentVersionCnf.tp[0].id,[]],version:[e.version,[j.kI.required,j.kI.maxLength(200),a,_(1)]],ex:[e.ex,[]],compare:[e.operation,[]],domain:[e.domain,[j.kI.required,j.kI.maxLength(200),a,_(1)]]}:{tp:[this.segmentVersionCnf.tp[0].id,[]],version:["",[j.kI.required,j.kI.maxLength(200),a,_(1)]],ex:["and",[]],compare:[this.segmentVersionCnf.operators[0].id,[]],domain:["",[j.kI.required,j.kI.maxLength(200),a,_(1)]]})}addQueryVersion(e){const i=e.criteriaIdx,f=e.queryIdx,I=e.query;this.queries(i).push(this.createQueryVersion(I??null)),setTimeout(()=>{this.initSelect2ExCriteria(i),this.initSelect2ExVersion(i,I?f:this.queries(i).length-1),this.initSelect2TpVersion(i,I?f:this.queries(i).length-1),this.initSelect2OperatorVersion(i,I?f:this.queries(i).length-1)},0)}removeQuery(e,i){this.queries(e).removeAt(i)}initSelect2ExCriteria(e){$(`.select-ex-criteria-${e}`).select2({data:this.exCnf.map(i=>({id:i.id,text:this.translate.instant(i.text),selected:this.segmentEdit?i.id===this.criteria().at(e).get("ex")?.value:"and"===i.id}))}).on("select2:select",i=>{const f=i.target.value;this.criteria().at(e).get("ex")?.setValue(f)})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(j.qu),t.Y36(Jt.H))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-segment-version-criteria"]],inputs:{form:"form",typeCnf:"typeCnf",segmentEdit:"segmentEdit"},features:[t.qOj],decls:3,vars:2,consts:[[1,"form-criteria",3,"formGroup"],["formArrayName","criteria",1,"card-body","p-0","content-criteria"],["class","criteria-element p-2 d-flex justify-content-between align-items-center",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],[1,"criteria-element","p-2","d-flex","justify-content-between","align-items-center",3,"ngClass","formGroupName"],[1,"line-rule"],[1,"vertical-line"],[1,"line-point"],[1,"select-ex"],[1,"form-group","form-select-2","cursor-pointer"],["data-minimum-results-for-search","Infinity"],[1,"card","card-body","mb-0","p-2"],["class","query-group-version",4,"ngIf"],[1,"mt-2","text-primary"],[1,"cursor-pointer",3,"click"],[1,"ph-plus-circle","icon-mall","me-1"],[1,"action-btn-criteria"],["class","ph ph-trash ms-2 text-danger cursor-pointer float-end",3,"matTooltip","click",4,"ngIf"],[1,"query-group-version"],["formArrayName","query",1,"col-xl-12"],["class","d-flex w-100",3,"ngClass","formGroupName",4,"ngFor","ngForOf"],[1,"d-flex","w-100",3,"ngClass","formGroupName"],[1,"form-control-feedback","w-20","me-2"],[1,"form-control-feedback","w-25","me-2"],["type","text","formControlName","domain",1,"form-control",3,"ngClass","placeholder","keydown.enter","blur"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"form-control-feedback","w-15","me-2"],[1,"form-control-feedback","w-30","me-2"],["type","text","formControlName","version",1,"form-control",3,"ngClass","placeholder","keydown.enter","blur"],[1,"form-group","form-select-2","cursor-pointer","w-15",3,"ngClass"],[1,"w-100","d-flex","align-items-center","line-vertical-ex"],[1,"w-100"],["formControlName","ex","data-minimum-results-for-search","Infinity"],[1,"icon-trash"],["class","ph-trash ms-2 text-danger",3,"matTooltip","click",4,"ngIf"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"],[1,"ph-trash","ms-2","text-danger",3,"matTooltip","click"],[1,"ph","ph-trash","ms-2","text-danger","cursor-pointer","float-end",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"ul",1),t.YNc(2,vn,18,12,"li",2),t.qZA()()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngForOf",i.criteria().controls))},dependencies:[_t.mk,_t.sg,_t.O5,y.gM,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u,j.x0,j.CE,M.X$]}),L})();class ie{constructor(L){this.id=0,this.title="",this.description="",this.type=0,this.typeSegment=0,this.device="",this.status="",this.v2Json=[],this.criteriaJson=[],this.resultAnalytics={},this.createdBy={},this.id=L.id??0,this.title=L.title??"",this.description=L.description??"",this.criteriaJson=L.criteriaJson??"",this.v2Json=L.v2Json??[],this.resultAnalytics=L.resultAnalytics??{},this.status=L.status??"0",this.device=L.device??"",this.type=L.type??0,this.typeSegment=L.typeSegment??0,this.createdBy=L.createdBy??{},this.createdAt=L.createdAt?b(L.createdAt,b.ISO_8601).format("HH:mm:ss DD/MM/yyyy"):null,this.startedAt=L.start??"",this.endedAt=L.end??""}}let ne=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.segment.list,i,(0,x.U)(f=>{const I=[],F=f.data.rows??[],st=f.data.count??0;for(const ut in F)I.push(new ie(F[ut]));return{status:f?.status,code:f?.code,data:I,total:st}}))}create(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.segment.create,i,(0,x.U)(I=>I))}createVersion(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.segment.createVersion,i,(0,x.U)(I=>I))}update(e,i){const f=e;f.encryptBody=!0;let I=this.apiServerPaths.dmp.segment.update;return I=I.replace("{SEGMENT_ID}",i.toString()),this.backendService.put(I,f,(0,x.U)(F=>F))}updateVersion(e,i){const f=e;f.encryptBody=!0;let I=this.apiServerPaths.dmp.segment.updateVersion;return I=I.replace("{SEGMENT_ID}",i.toString()),this.backendService.put(I,f,(0,x.U)(F=>F))}delete(e){let i=this.apiServerPaths.dmp.segment.delete;return i=i.replace("{SEGMENT_ID}",e.toString()),this.backendService.delete(i,{encryptBody:!0},(0,x.U)(I=>I))}listAssign(e){let f=this.apiServerPaths.dmp.segment.listAssign;return f=f.replace("{SEGMENT_ID}",e),this.backendService.get(f,{params:{encryptParam:!0},headers:{Accept:"application/json"}},(0,x.U)(I=>I))}createAssign(e,i){e.encryptBody=!0;let f=this.apiServerPaths.dmp.segment.createAssign;return f=f.replace("{SEGMENT_ID}",i),this.backendService.post(f,e,(0,x.U)(I=>I))}unAssign(e,i){e.encryptBody=!0;let f=this.apiServerPaths.dmp.segment.unAssign;return f=f.replace("{SEGMENT_ID}",i),this.backendService.delete(f,e,(0,x.U)(I=>I))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();class xn{constructor(L){this.id=0,this.name="",this.id=L.id??0,this.name=L.name??"",this.parentId=L.parentId?parseInt(L.parentId):0}}let Ce=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.tag.list,i,(0,x.U)(f=>{const I=[],F=f.data?.tags??[],st=F.length;for(const ut in F)I.push(new xn(F[ut]));return{status:f?.status,code:f?.code,data:I,total:st}}))}createTree(e){const i=this.formatDataForSelect2(e);return this.flattenTree(i)}formatDataForSelect2(e){const i={};e.forEach(I=>{i[I.id]={id:I.id,text:I.name}});const f=[];return e.forEach(I=>{const F=i[I.id];if(0===I.parentId)f.push(F);else{const st=i[I.parentId];st&&(st.children||(st.children=[]),st.children.push(F))}}),f}flattenTree(e,i=0){let f=[];return e.forEach(I=>{f.push({id:I.id,text:`${I.text}`,level:i}),I.children&&(f=f.concat(this.flattenTree(I.children,i+1)))}),f}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();var yn=Tt(5081);const _n=Tt(9769);let we=(()=>{var n;class L{constructor(){}stringRandom(e=1,i=null,f=null){const I="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",F=I.length;let st=0,ut="";for(;st<=e;)ut+=I.charAt(Math.floor(Math.random()*F)),st++;return ut=i?`${i}-${ut}`:ut,ut=f?`${ut}-${f}`:ut,ut}addCommas(e,i=","){let f=(e+="").replaceAll(i,"");return f=f.replace(/\D/g,""),f.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+i)}randomUUID(){return yn.h.UUID()}md5(e){return _n(e)}clearDomain(e){let i=e.replace(/^(http:\/\/|https:\/\/)/,"");return i=i.replace(/^(www\.|app\.)/,""),i.includes("/")&&(i=i.split("/")[0]),i}isValidURL(e){try{const i=new URL(e);return!(0!==i.port.length||"https:"!==i.protocol)}catch{return!1}}}return(n=L).\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();var Te=Tt(3795),Vt=Tt(660);function bn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameIsRequired")," "))}function An(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameMinLength")," "))}function Cn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameMaxLength")," "))}function wn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function Tn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Sn(n,L){if(1&n&&(t.TgZ(0,"div",42),t.YNc(1,bn,3,3,"div",43),t.YNc(2,An,3,3,"div",43),t.YNc(3,Cn,3,3,"div",43),t.YNc(4,wn,3,3,"div",43),t.YNc(5,Tn,3,3,"div",43),t.qZA()),2&n){const g=t.oxw(2);let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("name"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.form.get("name"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.form.get("name"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.form.get("name"))||null==I.errors?null:I.errors.excessWhiteSpace),t.xp6(1),t.Q6J("ngIf",null==(F=g.form.get("name"))||null==F.errors?null:F.errors.htmlTag)}}function kn(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Dn(n,L){if(1&n&&(t.TgZ(0,"div",42),t.YNc(1,kn,3,3,"div",43),t.qZA()),2&n){const g=t.oxw(2);let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("description"))||null==e.errors?null:e.errors.htmlTag)}}function Zn(n,L){if(1&n&&t._UZ(0,"app-segment-normal-criteria",44),2&n){const g=t.oxw(2);t.Q6J("form",g.form)("treeTag",g.treeTag)("tagList",g.tagList)("segmentEdit",null)("paramList",g.paramList)("productList",g.productList)}}function Ln(n,L){if(1&n&&t._UZ(0,"app-segment-version-criteria",45),2&n){const g=t.oxw(2);t.Q6J("typeCnf",g.typeCnf)("segmentEdit",null)("form",g.form)}}const Se=function(n){return{"ng-invalid-custom":n}};function Mn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"form",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"label",16)(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.TgZ(8,"span",17),t._uU(9," * "),t.qZA()()(),t.TgZ(10,"div",18)(11,"input",19),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.trimData(i.form.get("name")))})("keydown.enter",function(i){return i.preventDefault()}),t.ALo(12,"translate"),t.qZA()(),t.YNc(13,Sn,6,5,"div",20),t.qZA(),t.TgZ(14,"div",21)(15,"label",16)(16,"strong"),t._uU(17),t.ALo(18,"translate"),t.qZA()(),t.TgZ(19,"div",22),t._UZ(20,"select",23),t.qZA()()()(),t.TgZ(21,"div",13)(22,"label",16)(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",18)(27,"textarea",24),t.ALo(28,"translate"),t._uU(29,"                    "),t.qZA(),t.YNc(30,Dn,2,1,"div",20),t.qZA()(),t.TgZ(31,"div",25)(32,"div",14)(33,"div",26)(34,"label",16)(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div")(39,"button",27),t._UZ(40,"i",28),t.TgZ(41,"span",29),t._UZ(42,"span"),t.qZA()()()(),t.TgZ(43,"div",21)(44,"label",16)(45,"strong"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.TgZ(48,"div",22),t._UZ(49,"select",30),t.qZA()(),t.TgZ(50,"div",21)(51,"label",16)(52,"strong"),t._uU(53),t.ALo(54,"translate"),t.qZA()(),t.TgZ(55,"div",22),t._UZ(56,"select",31),t.qZA()(),t.TgZ(57,"div",21)(58,"label",16)(59,"strong"),t._uU(60),t.ALo(61,"translate"),t.qZA()(),t.TgZ(62,"div",22),t._UZ(63,"select",32),t.qZA()()()(),t.TgZ(64,"div",33)(65,"div",34)(66,"div",35)(67,"strong"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"div")(71,"button",36),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.addCriteria())}),t._UZ(72,"i",37),t.TgZ(73,"span"),t._uU(74),t.ALo(75,"translate"),t.qZA()()()(),t.TgZ(76,"div",38),t.YNc(77,Zn,1,6,"app-segment-normal-criteria",39),t.qZA(),t.TgZ(78,"div",40),t.YNc(79,Ln,1,3,"app-segment-version-criteria",41),t.qZA()()()()}if(2&n){const g=t.oxw();let e,i,f,I;t.Q6J("formGroup",g.form),t.xp6(6),t.hij("",t.lcZ(7,18,"modules.dmp.segment.name")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(12,20,"modules.dmp.segment.placeHolder.name")),t.Q6J("ngClass",t.VKq(40,Se,(null==(e=g.form.get("name"))?null:e.invalid)&&((null==(e=g.form.get("name"))?null:e.dirty)||(null==(e=g.form.get("name"))?null:e.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(i=g.form.get("name"))?null:i.invalid)&&((null==(i=g.form.get("name"))?null:i.dirty)||(null==(i=g.form.get("name"))?null:i.touched))),t.xp6(4),t.Oqu(t.lcZ(18,22,"modules.dmp.segment.type")),t.xp6(7),t.Oqu(t.lcZ(25,24,"modules.dmp.segment.description")),t.xp6(3),t.s9C("placeholder",t.lcZ(28,26,"modules.dmp.segment.placeHolder.description")),t.Q6J("ngClass",t.VKq(42,Se,(null==(f=g.form.get("description"))?null:f.invalid)&&((null==(f=g.form.get("description"))?null:f.dirty)||(null==(f=g.form.get("description"))?null:f.touched)))),t.xp6(3),t.Q6J("ngIf",(null==(I=g.form.get("description"))?null:I.invalid)&&((null==(I=g.form.get("description"))?null:I.dirty)||(null==(I=g.form.get("description"))?null:I.touched))),t.xp6(6),t.Oqu(t.lcZ(37,28,"modules.dmp.segment.dateRanger")),t.xp6(10),t.Oqu(t.lcZ(47,30,"modules.dmp.segment.typeSegment")),t.xp6(7),t.Oqu(t.lcZ(54,32,"modules.dmp.segment.device")),t.xp6(7),t.Oqu(t.lcZ(61,34,"modules.dmp.segment.status")),t.xp6(8),t.Oqu(t.lcZ(69,36,"modules.dmp.segment.criteria")),t.xp6(6),t.hij(" ",t.lcZ(75,38,"modules.dmp.segment.addCriteria")," "),t.xp6(3),t.Q6J("ngIf",g.form.controls.type.value===g.typeCnf[0].id&&g.treeTag.length>0&&g.tagList.length>0&&g.paramList.length>0&&g.productList.length>0),t.xp6(2),t.Q6J("ngIf",g.form.controls.type.value===g.typeCnf[1].id)}}let In=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At,Dt,Pt,Yt,Gt){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.dialogRef=F,this.fb=st,this.parameterService=ut,this.segmentService=xt,this.tagService=At,this.utilService=Dt,this.deviceService=Pt,this.ruleCheckerService=Yt,this.globalService=Gt,this.statusCnf=[{id:"1",text:"modules.dmp.segment.statusActive"},{id:"0",text:"modules.dmp.segment.statusDisabled"}],this.deviceCnf=[{id:"pc",text:"modules.dmp.segment.pc"},{id:"mobile",text:"modules.dmp.segment.mobile"},{id:"all",text:"modules.dmp.segment.pcAndMobile"}],this.typeSegmentCnf=[{id:0,text:"modules.dmp.segment.perday"},{id:1,text:"modules.dmp.segment.fixed"}],this.typeCnf=[{id:0,text:"modules.dmp.segment.default"},{id:1,text:"modules.dmp.segment.version"}],this.paramList=[],this.tagList=[],this.treeTag=[],this.productList=[],this.startDate=new Date,this.endDate.setMonth(this.startDate.getMonth()+3),this.fromDate=this.datePipe.transform(this.startDate,"yyyy-MM-dd"),this.toDate=this.datePipe.transform(this.endDate,"yyyy-MM-dd"),this.productList=this.globalService.segment.products}ngOnInit(){this.createFormSegment()}ngAfterViewInit(){setTimeout(()=>{this.initSelect2(),this.initDatePicker("right",!this.isMobile,this.isMobile),this.getParams(),this.getTags()},100)}initSelect2(){let e=this.statusCnf.map(F=>({...F,text:this.translate.instant(F.text)})),i=this.deviceCnf.map(F=>({...F,text:this.translate.instant(F.text)})),f=this.typeCnf.map(F=>({...F,text:this.translate.instant(F.text)})),I=this.typeSegmentCnf.map(F=>({...F,text:this.translate.instant(F.text)}));$(".select-status-create-segment").select2({data:e}).on("select2:select",F=>{this.form.controls.status.setValue(F.target.value)}),$(".select-type-segment-create-segment").select2({data:I}).on("select2:select",F=>{this.form.controls.typeSegment.setValue(F.target.value)}),$(".select-type-create-segment").select2({data:f}).on("select2:select",F=>{const st=parseInt(F.target.value);this.form.controls.type.setValue(st)}),$(".select-device-create-segment").select2({data:i}).on("select2:select",F=>{this.form.controls.device.setValue(F.target.value)})}getParams(){this.ruleCheckerService.isAllow("dmp/configs/getAll")&&this.parameterService.getAll().subscribe(e=>{1===e.status&&(this.paramList=e.data)})}getTags(){this.tagService.get({}).subscribe(e=>{1===e.status&&(this.tagList=e.data,this.treeTag=this.tagService.createTree(this.tagList))})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}createFormSegment(){this.form=this.fb.group({name:["",[j.kI.required,j.kI.minLength(4),j.kI.maxLength(200),a,_(4)]],description:["",[a]],value:["",[]],status:[this.statusCnf[0].id],type:[this.typeCnf[0].id,[]],typeSegment:[this.typeSegmentCnf[0].id,[]],device:[this.deviceCnf[0].id,[]],startDate:[""],endDate:[""],criteria:this.fb.array([])})}createSegment(){const e=this.formatToSave();(this.form.controls.type.value===this.typeCnf[0].id?this.segmentService.create(e):this.segmentService.createVersion(e)).subscribe(f=>{if(1===f.status)return AppNoty.success([this.translate.instant("modules.dmp.segment.notify.createSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.segment.notify.createFailed")])})}formatToSave(){this.form.controls.startDate.setValue(b(this.fromDate).format("DD/MM/yyyy")),this.form.controls.endDate.setValue(b(this.toDate).format("DD/MM/yyyy"));const e={title:this.form.controls.name.value,description:this.form.controls.description.value,status:this.form.controls.status.value,typeSegment:this.form.controls.typeSegment.value,device:this.form.controls.device.value,start:this.form.controls.startDate.value,end:this.form.controls.endDate.value,result_json:{},groups:[]};return this.form.controls.criteria.value.forEach(f=>{const I={tp:"group",settings:[],ex:f.ex};f.query.forEach(F=>{let st;if(this.form.controls.type.value===this.typeCnf[0].id){switch(st={type:F.tp,value:F.paramSelected.tp.includes("tag")?F.options[0].value.split(","):F.options.filter(ut=>null!=ut.value&&""!==ut.value&&void 0!==ut.value).map(ut=>ut.value),ex:F.ex},F.tp){case"tag":st.key=F.tp;break;case"pr_tags":st.key="pr_tags";break;default:st.key=F.groupSelected.key}if(F.paramSelected.tp.includes("tag")){let ut=F.groupSelected.length?F.groupSelected.split(","):[];st.products=F.paramSelected.tp.includes("pr_tag")?this.productList:ut}}else st={ex:F.ex,domain:F.domain,operation:F.compare,version:F.version};I.settings.push(st)}),e.groups.push(I)}),e}get isMobile(){return this.deviceService.isMobile()}addCriteria(){this.form.controls.type.value===this.typeCnf[0].id?this.normalCriteriaCp.addCriteria():this.versionCriteriaCp.addCriteria()}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(tt.so),t.Y36(j.qu),t.Y36(o),t.Y36(ne),t.Y36(Ce),t.Y36(we),t.Y36(Te.x0),t.Y36(Jt.H),t.Y36(Vt.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-create-segment-dialog"]],viewQuery:function(e,i){if(1&e&&(t.Gf(he,5),t.Gf(me,5)),2&e){let f;t.iGM(f=t.CRH())&&(i.normalCriteriaCp=f.first),t.iGM(f=t.CRH())&&(i.versionCriteriaCp=f.first)}},features:[t.qOj],decls:19,vars:11,consts:[[1,"col-xl-12","pt-2","pb-2","dialog-header"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-crosshair","me-1","fw-bold"],["mat-dialog-close","",1,"icon-close-dialog"],[1,"ph","ph-x"],[1,"mat-typography","p-2","dialog-content"],[3,"formGroup",4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],["mat-dialog-close","",1,"btn","btn-danger","me-2"],[1,"ph-x","ms-1"],[1,"btn","btn-success",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[3,"formGroup"],[1,"mb-2"],[1,"row"],[1,"col-xl-9"],[1,"form-label"],[1,"text-danger"],[1,"form-control-feedback"],["type","text","formControlName","name",1,"form-control",3,"ngClass","placeholder","blur","keydown.enter"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"col-xl-3","input-margin"],[1,"form-group","form-select-2","cursor-pointer"],["name","type","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-type-create-segment"],["type","text","formControlName","description",1,"form-control",3,"ngClass","placeholder"],[1,"col-xl-12","mb-3"],[1,"col-xl-3"],["type","button",1,"btn","btn-light","button-datepicker","w-100"],[1,"ph-calendar","me-2"],[1,"date-range-picker"],["name","type-segment","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-type-segment-create-segment"],["name","device","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-device-create-segment"],["name","status","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-status-create-segment"],["formArrayName","criteria",1,"criteria-groups"],[1,"card","criteria-group","mb-1"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center","p-2"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"ph-plus-circle","me-1","text-white","cursor-pointer"],[1,"segment-normal"],[3,"form","treeTag","tagList","segmentEdit","paramList","productList",4,"ngIf"],[1,"segment-version"],[3,"typeCnf","segmentEdit","form",4,"ngIf"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"],[3,"form","treeTag","tagList","segmentEdit","paramList","productList"],[3,"typeCnf","segmentEdit","form"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"h5",1),t._UZ(3,"i",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"span",3),t._UZ(7,"i",4),t.qZA()(),t.TgZ(8,"div",5),t.YNc(9,Mn,80,44,"form",6),t.qZA(),t.TgZ(10,"div",7)(11,"button",8),t._uU(12),t.ALo(13,"translate"),t._UZ(14,"i",9),t.qZA(),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.createSegment()}),t._uU(16),t.ALo(17,"translate"),t._UZ(18,"i",11),t.qZA()()()),2&e&&(t.xp6(4),t.hij(" ",t.lcZ(5,5,"modules.dmp.segment.createSegment")," "),t.xp6(5),t.Q6J("ngIf",i.form),t.xp6(3),t.hij("",t.lcZ(13,7,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.form.invalid),t.xp6(1),t.hij("",t.lcZ(17,9,"common.button.save")," "))},dependencies:[_t.mk,_t.O5,tt.ZT,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,j.CE,he,me,M.X$],styles:['.dmp-dialog-create-segment .dialog-content{max-height:75vh;overflow:auto}  .dmp-dialog-create-segment input.ng-invalid,   .dmp-dialog-create-segment textarea.ng-invalid{border-color:#d1d5db!important}  .dmp-dialog-create-segment input.ng-invalid-custom,   .dmp-dialog-create-segment textarea.ng-invalid-custom{border-color:#ef4444!important}  .dmp-dialog-create-segment .select2-container .selection .select2-selection--multiple .select2-selection__rendered{max-height:100px;overflow-y:auto}  .dmp-dialog-create-segment .button-datepicker{position:relative;width:230px}  .dmp-dialog-create-segment .button-datepicker>i{position:absolute;top:9px;left:15px}  .dmp-dialog-create-segment .button-datepicker .date-range-picker{position:absolute;width:100%;height:100%;padding-top:8px;padding-left:24px}  .dmp-dialog-create-segment .criteria-groups .criteria-group .card-header{position:sticky;top:0;background:#fff;z-index:2}  .dmp-dialog-create-segment .criteria-groups .criteria-group .action-btn-query{width:10%}  .dmp-dialog-create-segment .criteria-groups .criteria-group .action-btn-option i{position:absolute;right:-30px;top:11px;z-index:1}  .dmp-dialog-create-segment .criteria-groups .criteria-group .border-condition{position:relative}  .dmp-dialog-create-segment .criteria-groups .criteria-group .border-condition .line-vertical-ex:before{content:"";position:absolute;top:0;bottom:0;left:50%;border-left:2px dashed #BFBFBF;transform:translate(-50%)}  .dmp-dialog-create-segment .criteria-groups .criteria-group .line-rule{width:120px}  .dmp-dialog-create-segment .criteria-groups .criteria-group .line-point{display:block;height:1px;border:0;border-top:2px dashed black;margin:1em 0;padding:0}  .dmp-dialog-create-segment .criteria-groups .criteria-group .select-ex{position:absolute;width:100px}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-25{width:25%!important;max-width:300px}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-30{width:30%!important}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-15{width:15%!important}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-60{width:60%!important}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-50{width:50%!important;max-width:440px}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-70{width:70%!important}  .dmp-dialog-create-segment .criteria-groups .criteria-group .w-35{width:35%!important}  .dmp-dialog-create-segment .criteria-groups .content-criteria .criteria-element:first-child{padding-right:40px!important}@media (max-width: 1200px){  .dmp-dialog-create-segment .input-margin{margin-top:10px}}@media (max-width: 1000px){  .dmp-dialog-create-segment .segment-normal,   .dmp-dialog-create-segment .segment-version{width:100%;overflow:auto;position:relative}  .dmp-dialog-create-segment .segment-normal .form-criteria,   .dmp-dialog-create-segment .segment-version .form-criteria{display:flex}  .dmp-dialog-create-segment .segment-normal .form-criteria .content-criteria .criteria-element .card-body,   .dmp-dialog-create-segment .segment-version .form-criteria .content-criteria .criteria-element .card-body{width:calc(100% - 120px)}  .dmp-dialog-create-segment .segment-normal .form-criteria .content-criteria .criteria-element .card-body .icon-trash i,   .dmp-dialog-create-segment .segment-version .form-criteria .content-criteria .criteria-element .card-body .icon-trash i{margin-left:3px!important}}@media (max-width: 890px){  .dmp-dialog-create-segment .segment-version .content-criteria .criteria-element .w-30{width:18%!important}  .dmp-dialog-create-segment .segment-version .content-criteria .criteria-element .w-20{width:15%}}']}),L})();function En(n,L){1&n&&(t.TgZ(0,"div",31)(1,"span",32),t._uU(2,"Loading..."),t.qZA()())}function Un(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.shareDialog.noElements")," "))}function Pn(n,L){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,Un,3,3,"div",26),t.qZA()),2&n){const g=t.oxw(2);let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("selectedTypes"))||null==e.errors?null:e.errors.noElements)}}function Nn(n,L){if(1&n&&(t.TgZ(0,"div",10)(1,"label",11)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"select",33),t.YNc(6,Pn,2,1,"div",34),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(3),t.Oqu(t.lcZ(4,2,"modules.dmp.segment.shareDialog.usernameLabel")),t.xp6(3),t.Q6J("ngIf",null==(e=g.form.get("selectedUser"))?null:e.invalid)}}function On(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw(2);return t.KtG(f.confirmDeleteUserAssign(i))}),t.ALo(1,"translate"),t._UZ(2,"i",39),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.segment.shareDialog.removeAccess"))}function jn(n,L){if(1&n&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17),t._UZ(5,"img",18),t.qZA(),t.TgZ(6,"div",20),t._uU(7),t._UZ(8,"br"),t.TgZ(9,"small",21),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",22),t.YNc(12,On,3,3,"a",37),t.qZA()()()),2&n){const g=L.$implicit,e=t.oxw(2);t.xp6(5),t.Q6J("src",(null==g?null:g.avatar)||e.imageSrc,t.LSH),t.xp6(2),t.hij("",null==g?null:g.username," "),t.xp6(3),t.Oqu(null==g?null:g.email),t.xp6(2),t.Q6J("ngIf",e.ruleCheckerService.isAllow("dmp/segments/assign/delete"))}}function qn(n,L){if(1&n&&(t.ynx(0),t.YNc(1,jn,13,4,"div",36),t.BQk()),2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngForOf",g.dataUserIsShares)}}function Fn(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.save())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",41),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",!g.dataUserAdd.length),t.xp6(1),t.hij(" ",t.lcZ(2,2,"common.button.share")," ")}}const Bn=function(n){return{"disabled-el":n}};class Yn{static nonEmpty(L){return L.value&&0!==L.value.length?null:{noElements:!0}}}let Gn=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.globalsService=F,this.segmentService=st,this.ruleCheckerService=ut,this.dialog=xt,this.fb=At,this.dataUserAdd=[],this.dataSegment=new ie({}),this.imageSrc=this.globalsService.user.avatar.default,this.userOwner={email:"",username:""},this.dataUserIsShares=[],this.stateLoading=!1,this.dataSegment=this.data.segment??new ie({}),this.userOwner.email=this.dataSegment.createdBy?.email??"",this.userOwner.username=this.dataSegment.createdBy?.username??""}ngOnInit(){super.ngOnInit(),this.createFormShare()}ngAfterViewInit(){this.initSelect2(),setTimeout(()=>{this.dataSegment.id&&this.getDataUser()},0)}initSelect2(){setTimeout(()=>{const e=this;$(".share-select-user").off("select2:select").empty().select2({placeholder:this.translate.instant("modules.dmp.segment.shareDialog.usersPlace"),minimumInputLength:1,language:{inputTooShort:()=>e.translate.instant("modules.dmp.segment.shareDialog.segmentSearchUser"),searching:()=>e.translate.instant("common.loading"),noResults:()=>e.translate.instant("common.dataNotFound")}}).on("select2:selecting",i=>{this.checkUser(i.params.args.data.id)&&i.preventDefault()}).on("select2:select",i=>{this.dataUserAdd.push(i.params.data.id)}).on("select2:unselect",i=>{const f=i.params.data.id;this.dataUserAdd=this.dataUserAdd.filter(I=>I!==f)})},0)}createFormShare(){this.form=this.fb.group({selectedUser:[this.dataUserAdd,[Yn.nonEmpty]]})}checkUser(e){let i;return i=this.dataUserAdd.some(f=>f==e),i||(i=this.dataUserIsShares.some(f=>f.username==e),i)?i:!(!this.userOwner.username||this.userOwner.username!==e)||i}getDataUser(){this.segmentService.listAssign(this.dataSegment.id).subscribe(e=>{1===e.status&&(this.dataUserIsShares=e.data.rows??[])})}confirmDeleteUserAssign(e){this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1}).afterClosed().subscribe(f=>{f&&this.deleteUserAssign(e)})}deleteUserAssign(e){this.segmentService.unAssign({userId:e?.userId},this.dataSegment.id).subscribe(f=>{if(1==f.status)return this.dataUserIsShares=this.dataUserIsShares.filter(I=>I.userId!==e?.userId),void AppNoty.success([this.translate.instant("common.notify.updateSuccess.message")]);AppNoty.error([f.message?f.message:this.translate.instant("common.notify.error.message")])})}save(){this.dataUserAdd.length&&this.segmentService.createAssign({users:this.dataUserAdd},this.dataSegment.id).subscribe(i=>{if(1==i.status)return this.dataUserAdd=[],this.initSelect2(),this.getDataUser(),void AppNoty.success([this.translate.instant("common.notify.updateSuccess.message")]);AppNoty.error([i.message?i.message:this.translate.instant("common.notify.error.message")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(ne),t.Y36(Jt.H),t.Y36(tt.uw),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-segment-dialog-share"]],features:[t.qOj],decls:44,vars:26,consts:[["id","wp-popup",3,"ngClass"],["class","spinner-border text-primary spinner-loading","role","status",4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","pe-4","dialog-header"],[1,"font-weight-bold","m-0","ms-1","limit-line-1"],[1,"ph","ph-share-network","me-1","fw-bold"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-segment-share","p-2"],[3,"formGroup"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label","d-block"],[1,"wp-user-access"],[1,"user-access"],[1,"row"],[1,"user-info","col-10"],[1,"navbar-nav-link","align-items-center","rounded-pill","p-1"],[1,"avatar","me-2"],["alt","",1,"w-32px","h-32px","rounded-pill","border",3,"src"],[1,"status-indicator","bg-success"],[1,"information","text-truncate"],[1,"font-size-12","text-muted"],[1,"action","col-2","d-flex","justify-content-center","align-items-center"],[1,"d-none","d-lg-block"],[1,"d-lg-none"],[1,"ph","ph-user"],[4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],[1,"btn","btn-danger",3,"mat-dialog-close"],[1,"ph-x","ms-1"],["class","btn btn-success ms-2",3,"disabled","click",4,"ngIf"],["role","status",1,"spinner-border","text-primary","spinner-loading"],[1,"visually-hidden"],["formControlName","selectedUser","data-container-css-class","select-lg","data-tags","true","multiple","multiple",1,"form-control","share-select-user"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"validation-invalid-label","mt-2"],["class","user-access",4,"ngFor","ngForOf"],["class","cursor-pointer",3,"matTooltip","click",4,"ngIf"],[1,"cursor-pointer",3,"matTooltip","click"],[1,"ph","ph-trash","text-danger"],[1,"btn","btn-success","ms-2",3,"disabled","click"],[1,"ph","ph-share-network","ms-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,En,3,0,"div",1),t.TgZ(2,"div",2)(3,"h5",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"span",5),t._UZ(8,"i",6),t.qZA()(),t.TgZ(9,"div",7)(10,"form",8),t.YNc(11,Nn,7,4,"div",9),t.TgZ(12,"div",10)(13,"label",11)(14,"strong"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",12),t.ynx(18),t.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17),t._UZ(24,"img",18)(25,"span",19),t.qZA(),t.TgZ(26,"div",20),t._uU(27),t._UZ(28,"br"),t.TgZ(29,"small",21),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",22)(32,"span",23),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"span",24),t._UZ(36,"i",25),t.qZA()()()(),t.BQk(),t.YNc(37,qn,2,1,"ng-container",26),t.qZA()()()(),t.TgZ(38,"div",27)(39,"button",28),t._uU(40),t.ALo(41,"translate"),t._UZ(42,"i",29),t.qZA(),t.YNc(43,Fn,4,4,"button",30),t.qZA()()),2&e&&(t.Q6J("ngClass",t.VKq(24,Bn,i.stateLoading)),t.xp6(1),t.Q6J("ngIf",i.stateLoading),t.xp6(4),t.AsE(" ",t.lcZ(6,16,"modules.dmp.segment.shareDialog.title"),' "',i.dataSegment.title,'" '),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/segments/assign")),t.xp6(4),t.Oqu(t.lcZ(16,18,"modules.dmp.segment.shareDialog.peopleAccess")),t.xp6(9),t.Q6J("src",i.currentUser&&i.currentUser.avatar||i.imageSrc,t.LSH),t.xp6(3),t.hij(" ",i.userOwner.username||""," "),t.xp6(3),t.Oqu(i.userOwner.email||""),t.xp6(3),t.Oqu(t.lcZ(34,20,"modules.dmp.segment.shareDialog.owner")),t.xp6(4),t.Q6J("ngIf",i.dataUserIsShares&&i.dataUserIsShares.length>0),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij("",t.lcZ(41,22,"common.button.cancel")," "),t.xp6(3),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/segments/assign")))},dependencies:[_t.mk,_t.sg,_t.O5,tt.ZT,y.gM,j._Y,j.K7,j.JJ,j.JL,j.sg,j.u,M.X$],styles:[".limit-line-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}  .dmp-segment-share .custom-class .wp-img{width:15px}  .dmp-segment-share .custom-class img{width:20px;height:20px}  .dmp-segment-share .wp-user-access{overflow-y:auto;min-height:165px;max-height:400px;overflow-x:hidden}  .dmp-segment-share .user-info .information{width:calc(100% - 42px)}"]}),L})();var te=Tt(3470),Rn=Tt(9257),Hn=Tt.n(Rn),ve=Tt(9681);let re=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0,siteLoading:e.siteLoading??!0},headers:{Accept:"application/json"}};for(const f in e)i.params[f]=e[f];return this.backendService.get(this.apiServerPaths.dmp.audience.list,i,(0,x.U)(f=>{const I=[];let F=0;if(1===f?.status){F=f.data.count??0;const st=f.data.audiences??[];for(const ut in st)I.push(new ve.q(st[ut]))}return{status:f?.status,code:f?.code,data:I,total:F}}))}create(e){return this.backendService.post(this.apiServerPaths.dmp.audience.create,e,(0,x.U)(i=>i))}update(e,i){let f=this.apiServerPaths.dmp.audience.update;return f=f.replace("{AUDIENCE_ID}",i),this.backendService.put(f,e,(0,x.U)(I=>I))}delete(e){let i=this.apiServerPaths.dmp.audience.delete;return i=i.replace("{AUDIENCE_ID}",e.toString()),this.backendService.delete(i,{encryptBody:!0},(0,x.U)(I=>I))}detail(e){let f=this.apiServerPaths.dmp.audience.detail;return f=f.replace("{AUDIENCE_ID}",e),this.backendService.get(f,{params:{encryptParam:!0},headers:{Accept:"application/json"}},(0,x.U)(I=>{let F;return 1===I.status&&(F=new ve.q(I.data.audience)),{status:I.status,code:I.code,data:F}}))}listAssign(e){let f=this.apiServerPaths.dmp.audience.listAssign;return f=f.replace("{AUDIENCE_ID}",e),this.backendService.get(f,{params:{encryptParam:!0},headers:{Accept:"application/json"}},(0,x.U)(I=>I))}createAssign(e,i){e.encryptBody=!0;let f=this.apiServerPaths.dmp.audience.createAssign;return f=f.replace("{AUDIENCE_ID}",i),this.backendService.post(f,e,(0,x.U)(I=>I))}unAssign(e,i){e.encryptBody=!0;let f=this.apiServerPaths.dmp.audience.unAssign;return f=f.replace("{AUDIENCE_ID}",i),this.backendService.delete(f,e,(0,x.U)(I=>I))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();const Jn=function(n){return{"active show fw-bold":n}};function zn(n,L){if(1&n){const g=t.EpF();t.ynx(0),t.TgZ(1,"li",30)(2,"a",31),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.setTab(f.key))}),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t.BQk()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.Tol(g.style+" nav-link pt-2 ps-3 pe-3"),t.Q6J("ngClass",t.VKq(6,Jn,e.tabCurrent==e.tabCurrentPrefix+g.key)),t.xp6(1),t.hij(" ",t.lcZ(4,4,g.text)," ")}}const Qn=function(n){return{type:n}};Hn()(te);let xe=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.audienceService=F,this.globalService=st,this.dataTabs=[{id:0,text:"modules.dmp.audience.analytics.demographic",key:"demographic",style:"text-primary"},{id:1,text:"modules.dmp.audience.analytics.device",key:"device",style:"text-warning"}],this.dataTabsHistory=[{id:1,text:"modules.dmp.audience.analytics.domain",style:"text-primary"},{id:2,text:"modules.dmp.audience.analytics.url",style:"text-success"}],this.tabCurrentPrefix="dmp-audience-analytics-tab",this.tabCurrent="",this.tabCurrentPrefixHistory="dmp-audience-analytics-history-tab",this.tabCurrentHistory="",this.stateLoading=!1,this.totalUser=0,this.percentage=0,this.dataFilter={tab:"demographic"},this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","name","numberUsers"],this.length=0,this.dataDomains=[{id:1,name:"antamhoangsa.com",numberUsers:1e3},{id:2,name:"routine.vn",numberUsers:2e3}],this.segment=new ie({}),this.analyticsName="",this.analyticsType="",this.activeInitChart=!1,this.minPercentChartBar=.3,this.fontDefault=this.globalService.fontDefault,this.tabCurrent=this.tabCurrentPrefix+this.dataFilter.tab,this.tabCurrentHistory=this.tabCurrentPrefixHistory+this.dataTabsHistory[0].id,this.audienceId=this.data?.audienceId??0,this.analyticsName=this.data.name??"",this.segment=this.data?.segment??new ie({})}ngOnInit(){super.ngOnInit(),this.dataSourceManage=new z.by(this.dataDomains),this.length=this.dataDomains.length}ngAfterViewInit(){setTimeout(()=>{this.audienceId&&(this.analyticsType="audience",this.getAudienceDetail()),this.segment.id&&(this.dataAnalytics=this.segment.resultAnalytics??null,this.analyticsName=this.segment.title??"",this.analyticsType="segment",this.drawChart(),this.formatDataAnalytics(this.dataAnalytics?.reports))},0)}setTab(e){this.tabCurrent=this.tabCurrentPrefix+e,this.dataFilter.tab=e,this.tabCurrent!==this.tabCurrentPrefix+this.dataTabs[0].key&&(this.activeInitChart||(this.activeInitChart=!0,this.drawChart(e)))}setTabHistory(e){this.tabCurrentHistory=this.tabCurrentPrefixHistory+e}getAudienceDetail(){this.stateLoading=!0,this.audienceService.detail(this.audienceId).subscribe(e=>{this.stateLoading=!1,this.dataAnalytics=e.data?.analytics?JSON.parse(e.data?.analytics):null,this.drawChart(),this.formatDataAnalytics(this.dataAnalytics?.reports)})}drawChart(e="demographic"){const i=typeof this.dataAnalytics?.reports<"u"?this.dataAnalytics?.reports:{};switch(e){case"device":const f=typeof i?.device?.oses<"u"?i?.device?.oses:null,I=typeof i?.device?.browsers<"u"?i?.device?.browsers:null,F=typeof i?.device?.locations<"u"?i?.device?.locations:null;setTimeout(()=>{this.formatDataChartColumn("os-chart-container",f,"oses"),this.formatDataChartPie("browser-chart-container",I,"browser"),this.formatDataChartBar("location-chart-container",F,"location")},0);break;case"history":break;default:const st=typeof i?.demographic?.genders<"u"?i?.demographic?.genders:null,ut=typeof i?.demographic?.ages<"u"?i?.demographic?.ages:null,xt=typeof i?.demographic?.interests<"u"?i?.demographic?.interests:null;setTimeout(()=>{this.formatDataChartColumn("age-chart-container",ut,"age"),this.formatDataChartPie("gender-chart-container",st,"gender"),this.formatDataChartBar("interest-chart-container",xt,"interest")},0)}}formatDataAnalytics(e){this.totalUser=e?.count?.number_user??0,this.percentage=e?.count?.percent??0}formatDataPercent(e){return e+"%"}formatDataNumber(e){const i=["K","M","B","T"];let f=-1;for(;e>=1e3&&++f<i.length-1;)e/=1e3;return f>=0?e.toFixed(0)+i[f]:e}getAgeValue(e){if("<18"===e)return 0;if(">50"===e)return 51;const[i]=e.split("-").map(Number);return i}formatDataChartColumn(e,i,f){let I={Android:"#3ddc84",Linux:"#f0b912",Ios:"#ee3fde",Windows:"#0379d4",OSX:"#076ccd","Windows Phone":"#0289e1",Others:"#CCFFFF"};const F="#ddd";let st=[];const ut=[];let xt=0;if(typeof i<"u"&&null!==i){"age"===f?(i.sort((At,Dt)=>this.getAgeValue(At.key)-this.getAgeValue(Dt.key)),I={"<18":"#308be2","18-24":"#49ac38","25-34":"#f3d729","35-50":"#eb8b18",">50":"#ef410e"}):i.sort((At,Dt)=>parseFloat(Dt.value)-parseFloat(At.value));for(const At in i)xt+=i[At].value;for(const At in i)st.push(i[At].key),ut.push(xt>0&&typeof i[At].value<"u"?{y:100*i[At].value/xt,color:I[i[At].key]?I[i[At].key]:F}:{y:0,color:I[i[At].key]?I[i[At].key]:F})}else if("age"===f){st=["<18","18-24","25-34","35-50",">50"];const At=[0,0,0,0,0];for(const Dt in At)ut.push({y:0,color:F})}this.initChartColumn(e,ut,st,xt,f)}formatDataChartPie(e,i,f){let I={"Google Chrome":"#416bcf","Samsung Browser":"#ba499b",Safari:"#009543",Firefox:"#ffba07",CocCoc:"#64ae55",Fbav:"#363c43","IE Mobile":"#e00d1e",Others:"#8164a3"};const F="#ddd",ut=[];let xt=0;if(typeof i<"u"&&null!==i){let At=0;"gender"===f?(I={Nam:"#2ca4d2",N\u1eef:"#b13173"},i.sort((Dt,Pt)=>"Nam"===Dt.key&&"N\u1eef"===Pt.key?-1:"N\u1eef"===Dt.key&&"Nam"===Pt.key?1:0)):i.sort((Dt,Pt)=>parseFloat(Pt.value)-parseFloat(Dt.value));for(const Dt in i)xt+=i[Dt].value;for(const Dt in i)Number(Dt)<4?ut.push({name:i[Dt].key,y:xt>0?100*i[Dt].value/xt:0,color:I[i[Dt].key]?I[i[Dt].key]:F}):At+=i[Dt].value;if(At&&xt){const Dt={name:this.translate.instant("modules.dmp.audience.analytics.other"),y:xt>0?At/xt:0,color:"#CCFFFF"};ut.push(Dt)}}else if("gender"===f){const At=["Nam","N\u1eef"];I={Nam:"#2ca4d2",N\u1eef:"#b13173"};for(const Dt in At)ut.push({name:At[Dt],y:0,color:I[At[Dt]]?I[At[Dt]]:F})}this.initChartPie(e,ut,xt,f)}formatDataChartBar(e,i,f){const I=[],F=[];let st=0;if(typeof i<"u"&&null!==i){i.sort((xt,At)=>parseFloat(At.value)-parseFloat(xt.value));let ut=0;for(const xt in i)st+=i[xt].value;for(const xt in i)(st>0?100*i[xt].value/st:0)>=this.minPercentChartBar?(I.push(i[xt].key),F.push(i[xt].value?{y:i[xt].value}:{y:0})):ut+=i[xt].value}this.initChartBar(e,F,I,st,f)}initChartColumn(e,i,f,I,F){const st=this;te.chart(e,{chart:{type:"column",style:{fontFamily:this.fontDefault}},title:{text:"",align:"left"},xAxis:{labels:{format:"{value:%b %e}",style:{fontSize:"12px",fontFamily:"Roboto, sans-serif",color:"#1F2937BF"}},categories:f},yAxis:{min:0,max:100,title:{text:""},labels:{formatter:function(){return st.formatDataPercent(this.value)},style:{fontSize:"12px",color:"#1F2937BF"},labels:{enabled:!1}}},legend:{align:"left",verticalAlign:"top",borderWidth:0,padding:15,symbolHeight:12,symbolWidth:12,symbolRadius:6,symbolPadding:6,itemMarginBottom:10,y:0,x:-15},tooltip:{formatter:function(){return this.points.reduce(function(ut,xt){return ut+"<br/><b>"+te.numberFormat(Math.round(xt.y*I/100),0,".",",")+" ("+xt.y.toFixed(2)+"%)</b>"},"<b>"+this.x+"</b>")},shared:!0},plotOptions:{series:{lineWidth:3,fillOpacity:.3}},credits:{enabled:!1},series:[{showInLegend:!1,name:this.translate.instant("modules.dmp.audience.analytics."+F),data:i}]})}initChartPie(e,i,f,I){te.chart(e,{credits:{enabled:!1},chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,type:"pie",style:{fontFamily:this.fontDefault}},title:{text:"",align:"left"},tooltip:{shared:!0,formatter:function(){const F=this.y;return this.point.name+"<br/><b>"+te.numberFormat(Math.round(F*f/100),0,".",",")+" ("+F.toFixed(2)+"%)</b>"}},accessibility:{point:{valueSuffix:"%"}},legend:{symbolHeight:12,symbolWidth:12,symbolRadius:0},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",borderRadius:5,dataLabels:{enabled:!0,format:"<b>{point.name}</b><br>{point.percentage:.1f} %",distance:-50,filter:{property:"percentage",operator:">",value:4}},showInLegend:!0}},series:[{name:this.translate.instant("modules.dmp.audience.analytics."+I),colorByPoint:!0,data:i}]})}initChartBar(e,i,f,I,F){const st=this;te.chart(e,{chart:{type:"bar",height:800,style:{fontFamily:this.fontDefault}},title:{text:"",align:"left"},xAxis:{categories:f,title:{text:null},gridLineWidth:1,lineWidth:0},yAxis:{min:0,title:{text:null,align:"high"},labels:{overflow:"justify",formatter:function(){return st.formatDataNumber(this.value)}},gridLineWidth:0},tooltip:{formatter:function(){return this.points.reduce(function(ut,xt){return ut+"<br/><b>"+Math.round(100*xt.y/I*100)/100+"%</b>"},"<b>"+this.x+"</b>")},shared:!0},plotOptions:{bar:{borderRadius:"0",dataLabels:{enabled:!0,formatter:function(){return te.numberFormat(this.y,0,".",",")}},groupPadding:.1}},legend:{layout:"vertical",align:"right",verticalAlign:"top",x:-40,y:80,floating:!0,borderWidth:1,backgroundColor:"#FFFFFF",shadow:!0},credits:{enabled:!1},series:[{name:this.translate.instant("modules.dmp.audience.analytics."+F),showInLegend:!1,data:i}]})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(re),t.Y36(Vt.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-segment-dialog-analytics"]],features:[t.qOj],decls:61,vars:46,consts:[[1,"dialog-header","pt-2","pb-2","pe-4"],[1,"font-weight-bold","m-0","ms-1","limit-line-1"],[1,"ph","ph-chart-bar","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"wp-dmp-analytics"],[1,"col-xl-12","p-2"],[1,"card-body","px-0","pb-0"],[1,"col-xl-12"],[1,"row"],[1,"nav","nav-tabs","mb-0"],[4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","mb-2","mt-2"],[1,"total-user","fw-bold"],[1,"percentage","fw-bold"],[1,"box-content","style-scroll"],[1,"col-xl-12","mb-2",3,"ngClass"],[1,"box-chart-column","mb-2"],[1,"chart-title","fw-bold"],["id","age-chart-container"],[1,"box-chart-pie","mb-2"],["id","gender-chart-container"],[1,"box-chart-bar"],["id","interest-chart-container"],["id","os-chart-container"],["id","browser-chart-container"],["id","location-chart-container"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"nav-item","ms-2"],["data-toggle","tab",3,"ngClass","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"span",3),t._UZ(7,"i",4),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"ul",10),t.YNc(14,zn,5,8,"ng-container",11),t.qZA(),t.TgZ(15,"div",12)(16,"div",13),t._uU(17),t.ALo(18,"translate"),t.ALo(19,"number"),t.qZA(),t.TgZ(20,"div",14),t._uU(21),t.ALo(22,"translate"),t.qZA()(),t.TgZ(23,"div",15)(24,"div",16)(25,"div",17)(26,"div",18),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"div",19),t.qZA(),t.TgZ(30,"div",20)(31,"div",18),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"div",21),t.qZA(),t.TgZ(35,"div",22)(36,"div",18),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"div",23),t.qZA()(),t.TgZ(40,"div",16)(41,"div",17)(42,"div",18),t._uU(43),t.ALo(44,"translate"),t.qZA(),t._UZ(45,"div",24),t.qZA(),t.TgZ(46,"div",20)(47,"div",18),t._uU(48),t.ALo(49,"translate"),t.qZA(),t._UZ(50,"div",25),t.qZA(),t.TgZ(51,"div",22)(52,"div",18),t._uU(53),t.ALo(54,"translate"),t.qZA(),t._UZ(55,"div",26),t.qZA()()()()()()()(),t.TgZ(56,"div",27)(57,"button",28),t._uU(58),t.ALo(59,"translate"),t._UZ(60,"i",29),t.qZA()()),2&e&&(t.xp6(3),t.lnq(" ",t.lcZ(4,19,"modules.dmp.audience.analytics.title")," ",i.analyticsType?t.xi3(5,21,"modules.dmp.audience.analytics.typeAnalytics",t.VKq(44,Qn,i.analyticsType)):"",' "',i.analyticsName,'" '),t.xp6(3),t.Q6J("mat-dialog-close",!1),t.xp6(8),t.Q6J("ngForOf",i.dataTabs),t.xp6(3),t.AsE(" ",t.lcZ(18,24,"modules.dmp.audience.analytics.totalUsers"),": ",t.lcZ(19,26,i.totalUser)," "),t.xp6(4),t.AsE(" ",t.lcZ(22,28,"modules.dmp.audience.analytics.percentage"),": ",i.percentage?i.percentage+"%":0," "),t.xp6(3),t.Q6J("ngClass",i.tabCurrent===i.tabCurrentPrefix+i.dataTabs[0].key?"d-block":"d-none"),t.xp6(3),t.Oqu(t.lcZ(28,30,"modules.dmp.audience.analytics.age")),t.xp6(5),t.Oqu(t.lcZ(33,32,"modules.dmp.audience.analytics.gender")),t.xp6(5),t.Oqu(t.lcZ(38,34,"modules.dmp.audience.analytics.interest")),t.xp6(3),t.Q6J("ngClass",i.tabCurrent===i.tabCurrentPrefix+i.dataTabs[1].key?"d-block":"d-none"),t.xp6(3),t.Oqu(t.lcZ(44,36,"modules.dmp.audience.analytics.oses")),t.xp6(5),t.Oqu(t.lcZ(49,38,"modules.dmp.audience.analytics.browser")),t.xp6(5),t.Oqu(t.lcZ(54,40,"modules.dmp.audience.analytics.location")),t.xp6(4),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(59,42,"common.button.cancel")," "))},dependencies:[_t.mk,_t.sg,tt.ZT,_t.JJ,M.X$],styles:[".segment-dialog-analytics .limit-line-1,   .audience-dialog-analytics .limit-line-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}  .wp-dmp-analytics .box-chart-column{width:calc(50% - 5px);margin-right:10px;float:left}  .wp-dmp-analytics .box-chart-pie{width:calc(50% - 5px);float:left}  .wp-dmp-analytics .box-chart-bar{width:100%;float:left}  .wp-dmp-analytics .box-content{max-height:608px;overflow-x:hidden;overflow-y:auto}  .wp-dmp-analytics .chart-title{margin-bottom:10px}  .wp-dmp-analytics .total-user,   .wp-dmp-analytics .percentage{font-size:16px}  .wp-dmp-analytics .mat-column-sequenceManage{width:65px}  .wp-dmp-analytics .mat-column-numberUsers{width:200px}@media (max-width: 1199px){  .wp-dmp-analytics .box-chart-column{width:100%;margin-right:0}  .wp-dmp-analytics .box-chart-pie{width:100%}}@media (max-width: 767px){  .wp-dmp-analytics .total-user,   .wp-dmp-analytics .percentage{font-size:14px}}"]}),L})();const Vn=function(n){return{name:n}};function Wn(n,L){if(1&n&&(t.TgZ(0,"h5",12),t._UZ(1,"i",13),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){const g=t.oxw();t.xp6(2),t.hij(" ",t.xi3(3,1,"modules.dmp.segment.editSegment",t.VKq(4,Vn,g.currentSegment.title))," ")}}function Xn(n,L){1&n&&(t.TgZ(0,"h5",14),t._UZ(1,"i",13),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"modules.dmp.segment.clone")," "))}function Kn(n,L){if(1&n&&(t.ynx(0),t.TgZ(1,"span",53),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n){const g=t.oxw(2);t.xp6(2),t.AsE("",t.lcZ(3,2,"modules.dmp.segment.createBy"),": ",null==g.currentSegment.createdBy?null:g.currentSegment.createdBy.username,"")}}function $n(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameIsRequired")," "))}function to(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameMinLength")," "))}function eo(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.validate.nameMaxLength")," "))}function io(n,L){if(1&n&&(t.TgZ(0,"div",54),t.YNc(1,$n,3,3,"div",21),t.YNc(2,to,3,3,"div",21),t.YNc(3,eo,3,3,"div",21),t.qZA()),2&n){const g=t.oxw(2);let e,i,f;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("name"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.form.get("name"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.form.get("name"))||null==f.errors?null:f.errors.maxlength)}}function no(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"span",55),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.openSegmentDialogAnalytics())}),t.ALo(1,"translate"),t._UZ(2,"i",56),t._uU(3),t.ALo(4,"number"),t.TgZ(5,"span",57),t._uU(6),t.qZA()()}if(2&n){const g=t.oxw(2);let e;t.uIk("data-bs-content",t.lcZ(1,3,"modules.dmp.audience.analytics.totalUsers")),t.xp6(3),t.hij(" ",t.lcZ(4,5,null!==(e=null==g.currentSegment.resultAnalytics.reports||null==g.currentSegment.resultAnalytics.reports.count?null:g.currentSegment.resultAnalytics.reports.count.number_user)&&void 0!==e?e:0)," "),t.xp6(3),t.hij(" (",null!=g.currentSegment.resultAnalytics.reports&&null!=g.currentSegment.resultAnalytics.reports.count&&g.currentSegment.resultAnalytics.reports.count.percent?(null==g.currentSegment.resultAnalytics.reports||null==g.currentSegment.resultAnalytics.reports.count?null:g.currentSegment.resultAnalytics.reports.count.percent)+"%":0,") ")}}function oo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",58)(1,"button",59),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2);return t.KtG(i.addCriteria())}),t._UZ(2,"i",60),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"modules.dmp.segment.addCriteria")," "))}function ro(n,L){if(1&n&&t._UZ(0,"app-segment-normal-criteria",61),2&n){const g=t.oxw(2);t.Q6J("form",g.form)("treeTag",g.treeTag)("tagList",g.tagList)("segmentEdit",g.currentSegment)("paramList",g.paramList)("productList",g.productList)}}function so(n,L){if(1&n&&t._UZ(0,"app-segment-version-criteria",62),2&n){const g=t.oxw(2);t.Q6J("typeCnf",g.typeCnf)("segmentEdit",g.currentSegment)("form",g.form)}}function ao(n,L){1&n&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"modules.dmp.segment.noData")))}const lo=function(n){return{"ng-invalid-custom":n}},co=function(n){return{"card-criteria":n}};function po(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"form",15)(1,"div",16)(2,"div",17)(3,"div",18)(4,"label",19)(5,"strong"),t._uU(6),t.ALo(7,"translate"),t.TgZ(8,"span",20),t._uU(9," * "),t.qZA()(),t.YNc(10,Kn,4,4,"ng-container",21),t.qZA(),t.TgZ(11,"div",22)(12,"input",23),t.NdJ("blur",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.trimData(i.form.get("name")))}),t.ALo(13,"translate"),t.qZA()(),t.YNc(14,io,4,3,"div",24),t.qZA(),t.TgZ(15,"div",25)(16,"label",26)(17,"strong"),t._uU(18),t.ALo(19,"translate"),t.qZA()(),t.TgZ(20,"div",27),t._UZ(21,"select",28),t.qZA()()()(),t.TgZ(22,"div",16)(23,"label",26)(24,"strong"),t._uU(25),t.ALo(26,"translate"),t.qZA()(),t.TgZ(27,"div",22)(28,"textarea",29),t.ALo(29,"translate"),t._uU(30,"                "),t.qZA()()(),t.TgZ(31,"div",30)(32,"div",17)(33,"div",31)(34,"label",26)(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"div")(39,"button",32),t._UZ(40,"i",33),t.TgZ(41,"span",34),t._UZ(42,"span"),t.qZA()()()(),t.TgZ(43,"div",25)(44,"label",26)(45,"strong"),t._uU(46),t.ALo(47,"translate"),t.qZA()(),t.TgZ(48,"div",35),t._UZ(49,"select",36),t.qZA()(),t.TgZ(50,"div",25)(51,"label",26)(52,"strong"),t._uU(53),t.ALo(54,"translate"),t.qZA()(),t.TgZ(55,"div",37),t._UZ(56,"select",38),t.qZA()(),t.TgZ(57,"div",25)(58,"label",26)(59,"strong"),t._uU(60),t.ALo(61,"translate"),t.qZA()(),t.TgZ(62,"div",39),t._UZ(63,"select",40),t.qZA()()()(),t.TgZ(64,"div",41)(65,"div",42)(66,"div",43)(67,"strong",44)(68,"span",45),t._uU(69),t.ALo(70,"translate"),t.qZA(),t.YNc(71,no,7,7,"span",46),t.qZA(),t.YNc(72,oo,6,3,"div",47),t.qZA(),t.TgZ(73,"div",48),t.YNc(74,ro,1,6,"app-segment-normal-criteria",49),t.qZA(),t.TgZ(75,"div",50),t.YNc(76,so,1,3,"app-segment-version-criteria",51),t.qZA(),t.YNc(77,ao,3,3,"span",52),t.qZA()()()}if(2&n){const g=t.oxw();let e,i;t.Q6J("formGroup",g.form),t.xp6(6),t.hij("",t.lcZ(7,20,"modules.dmp.segment.name")," "),t.xp6(4),t.Q6J("ngIf",null==g.currentSegment.createdBy?null:g.currentSegment.createdBy.username),t.xp6(2),t.s9C("placeholder",t.lcZ(13,22,"modules.dmp.segment.placeHolder.name")),t.Q6J("ngClass",t.VKq(40,lo,(null==(e=g.form.get("name"))?null:e.invalid)&&((null==(e=g.form.get("name"))?null:e.dirty)||(null==(e=g.form.get("name"))?null:e.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(i=g.form.get("name"))?null:i.invalid)&&((null==(i=g.form.get("name"))?null:i.dirty)||(null==(i=g.form.get("name"))?null:i.touched))),t.xp6(4),t.Oqu(t.lcZ(19,24,"modules.dmp.segment.type")),t.xp6(7),t.Oqu(t.lcZ(26,26,"modules.dmp.segment.description")),t.xp6(3),t.s9C("placeholder",t.lcZ(29,28,"modules.dmp.segment.placeHolder.description")),t.xp6(8),t.Oqu(t.lcZ(37,30,"modules.dmp.segment.dateRanger")),t.xp6(10),t.Oqu(t.lcZ(47,32,"modules.dmp.segment.typeSegment")),t.xp6(7),t.Oqu(t.lcZ(54,34,"modules.dmp.segment.device")),t.xp6(7),t.Oqu(t.lcZ(61,36,"modules.dmp.segment.status")),t.xp6(6),t.Q6J("ngClass",t.VKq(42,co,null==g.currentSegment.resultAnalytics.reports?null:g.currentSegment.resultAnalytics.reports.count)),t.xp6(3),t.Oqu(t.lcZ(70,38,"modules.dmp.segment.criteria")),t.xp6(2),t.Q6J("ngIf",null==g.currentSegment.resultAnalytics.reports||null==g.currentSegment.resultAnalytics.reports.count?null:g.currentSegment.resultAnalytics.reports.count.number_user),t.xp6(1),t.Q6J("ngIf",g.currentSegment.v2Json.length),t.xp6(2),t.Q6J("ngIf",g.form.controls.type.value===g.typeCnf[0].id&&g.treeTag.length>0&&g.tagList.length>0&&g.paramList.length>0&&g.productList.length>0),t.xp6(2),t.Q6J("ngIf",g.form.controls.type.value===g.typeCnf[1].id),t.xp6(1),t.Q6J("ngIf",!g.currentSegment.v2Json.length)}}function uo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openSegmentDialogAnalytics())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",65),t.qZA()}2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"common.button.analytic")," "))}function ho(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.editSegment())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",67),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",!!g.form&&g.form.invalid),t.xp6(1),t.hij("",t.lcZ(2,2,"common.button.save")," ")}}function mo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",66),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.cloneSegment())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",67),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",!!g.form&&g.form.invalid),t.xp6(1),t.hij("",t.lcZ(2,2,"modules.dmp.segment.clone")," ")}}let go=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At,Dt,Pt,Yt,Gt){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.dialogRef=F,this.dialog=st,this.fb=ut,this.parameterService=xt,this.segmentService=At,this.tagService=Dt,this.deviceService=Pt,this.ruleCheckerService=Yt,this.globalService=Gt,this.statusCnf=[{id:"1",text:"modules.dmp.segment.statusActive"},{id:"0",text:"modules.dmp.segment.statusDisabled"}],this.deviceCnf=[{id:"pc",text:"modules.dmp.segment.pc"},{id:"mobile",text:"modules.dmp.segment.mobile"},{id:"all",text:"modules.dmp.segment.pcAndMobile"}],this.typeSegmentCnf=[{id:0,text:"modules.dmp.segment.perday"},{id:1,text:"modules.dmp.segment.fixed"}],this.typeCnf=[{id:0,text:"modules.dmp.segment.default"},{id:1,text:"modules.dmp.segment.version"}],this.isClone=!1,this.paramList=[],this.tagList=[],this.treeTag=[],this.currentSegment=new ie({}),this.productList=[],this.currentSegment=this.data.segment,this.startDate=this.currentSegment.startedAt,this.endDate=this.currentSegment.endedAt,this.fromDate=this.datePipe.transform(this.startDate,"yyyy-MM-dd"),this.toDate=this.datePipe.transform(this.endDate,"yyyy-MM-dd"),this.productList=this.globalService.segment.products,this.isClone=this.data.isClone}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.getParams()},10)}initSelect2(){App.initPopover();let e=this.statusCnf.map(F=>({...F,text:this.translate.instant(F.text),selected:F.id===this.form.controls.status.value})),i=this.deviceCnf.map(F=>({...F,text:this.translate.instant(F.text),selected:F.id===this.form.controls.device.value})),f=this.typeCnf.map(F=>({...F,text:this.translate.instant(F.text),selected:F.id===this.form.controls.type.value})),I=this.typeSegmentCnf.map(F=>({...F,text:this.translate.instant(F.text),selected:F.id===this.form.controls.typeSegment.value}));$(".select-status-update-segment").select2({data:e}).on("select2:select",F=>{this.form.controls.status.setValue(F.target.value)}),$(".select-type-segment-update-segment").select2({data:I}).on("select2:select",F=>{this.form.controls.typeSegment.setValue(F.target.value)}),$(".select-type-update-segment").select2({data:f}).on("select2:select",F=>{}),$(".select-device-update-segment").select2({data:i}).on("select2:select",F=>{this.form.controls.device.setValue(F.target.value)})}getParams(){this.ruleCheckerService.isAllow("dmp/configs/getAll")&&this.parameterService.getAll().subscribe(e=>{1===e.status&&(this.paramList=e.data,this.getTags())})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}getTags(){this.tagService.get({}).subscribe(e=>{1===e.status&&(this.tagList=e.data,this.treeTag=this.tagService.createTree(this.tagList),this.createFormSegment())})}createFormSegment(){this.form=this.fb.group({name:[this.currentSegment.title,[j.kI.required,j.kI.minLength(4),j.kI.maxLength(200)]],description:[this.currentSegment.description,[]],value:["",[]],status:[this.currentSegment.status],type:[this.currentSegment.type,[]],typeSegment:[this.currentSegment.typeSegment,[]],device:[this.currentSegment.device,[]],startDate:[this.fromDate],endDate:[this.toDate],criteria:this.fb.array([])}),setTimeout(()=>{this.initSelect2(),this.initDatePicker("right",!this.isMobile,this.isMobile)},0)}addCriteria(){this.currentSegment.type===this.typeCnf[0].id?this.normalCriteriaCp.addCriteria():this.versionCriteriaCp.addCriteria()}editSegment(){const e=this.formatToSave();(this.currentSegment.type===this.typeCnf[0].id?this.segmentService.update(e,this.currentSegment.id):this.segmentService.updateVersion(e,this.currentSegment.id)).subscribe(f=>{if(1===f.status)return AppNoty.success([this.translate.instant("modules.dmp.segment.notify.updateSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.segment.notify.updateFailed")])})}cloneSegment(){const e=this.formatToSave();(this.form.controls.type.value===this.typeCnf[0].id?this.segmentService.create(e):this.segmentService.createVersion(e)).subscribe(f=>{if(1===f.status)return AppNoty.success([this.translate.instant("modules.dmp.segment.notify.cloneSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.segment.notify.cloneFailed")])})}formatToSave(){this.form.controls.startDate.setValue(b(this.fromDate).format("DD/MM/yyyy")),this.form.controls.endDate.setValue(b(this.toDate).format("DD/MM/yyyy"));const e={title:this.form.controls.name.value,description:this.form.controls.description.value,status:this.form.controls.status.value,typeSegment:this.form.controls.typeSegment.value,device:this.form.controls.device.value,start:this.form.controls.startDate.value,end:this.form.controls.endDate.value,result_json:{},groups:[]};return this.form.controls.criteria.value.forEach(f=>{const I={tp:"group",settings:[],ex:f.ex};f.query.forEach(F=>{let st;if(this.form.controls.type.value===this.typeCnf[0].id){switch(st={type:F.tp,value:F.paramSelected.tp.includes("tag")?F.options[0].value.split(","):F.options.filter(ut=>null!=ut.value&&""!==ut.value&&void 0!==ut.value).map(ut=>ut.value),ex:F.ex},F.tp){case"pr_tags":st.key="pr_tags";break;case"tag":st.key=F.tp;break;default:st.key=F.groupSelected.key}if(F.paramSelected.tp.includes("tag")){let ut=F.groupSelected.length?F.groupSelected.split(","):[];st.products=F.paramSelected.tp.includes("pr_tag")?this.productList:ut}}else st={ex:F.ex,domain:F.domain,operation:F.compare,version:F.version};I.settings.push(st)}),e.groups.push(I)}),e}get isMobile(){return this.deviceService.isMobile()}openSegmentDialogAnalytics(){this.dialog.open(xe,{autoFocus:!1,panelClass:"segment-dialog-analytics",width:"1600px",height:"auto",maxHeight:"90vh",data:{segment:this.currentSegment}})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(tt.so),t.Y36(tt.uw),t.Y36(j.qu),t.Y36(o),t.Y36(ne),t.Y36(Ce),t.Y36(Te.x0),t.Y36(Jt.H),t.Y36(Vt.d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-edit-segment-dialog"]],viewQuery:function(e,i){if(1&e&&(t.Gf(he,5),t.Gf(me,5)),2&e){let f;t.iGM(f=t.CRH())&&(i.normalCriteriaCp=f.first),t.iGM(f=t.CRH())&&(i.versionCriteriaCp=f.first)}},features:[t.qOj],decls:17,vars:9,consts:[[1,"col-xl-12","pt-2","pb-2","pe-4","dialog-header"],["class","font-weight-bold m-0 ms-1 limit-line-1",4,"ngIf"],["class","font-weight-bold m-0 ms-1",4,"ngIf"],["mat-dialog-close","",1,"icon-close-dialog"],[1,"ph","ph-x"],[1,"mat-typography","p-2","dialog-content"],[3,"formGroup",4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],["class","btn btn-primary",3,"click",4,"ngIf"],["mat-dialog-close","",1,"btn","btn-danger","me-2"],[1,"ph-x","ms-1"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"font-weight-bold","m-0","ms-1","limit-line-1"],[1,"ph","ph-crosshair","me-1","fw-bold"],[1,"font-weight-bold","m-0","ms-1"],[3,"formGroup"],[1,"mb-2"],[1,"row"],[1,"col-xl-9"],[1,"form-label","d-flex","justify-content-between"],[1,"text-danger"],[4,"ngIf"],[1,"form-control-feedback"],["type","text","formControlName","name",1,"form-control",3,"ngClass","placeholder","blur"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"col-xl-3","input-margin"],[1,"form-label"],[1,"form-group","form-select-2","select-type"],["name","type","data-minimum-results-for-search","Infinity","disabled","",1,"form-control","select","select2-hidden-accessible","select-type-update-segment"],["type","text","formControlName","description",1,"form-control",3,"placeholder"],[1,"col-xl-12","mb-3"],[1,"col-xl-3"],["type","button",1,"btn","btn-light","button-datepicker","w-100"],[1,"ph-calendar","me-2"],[1,"date-range-picker"],[1,"form-group","cursor-pointer","form-select-2"],["name","type-segment","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-type-segment-update-segment"],[1,"cursor-pointer","form-group","form-select-2"],["name","device","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-device-update-segment"],[1,"form-group","form-select-2","cursor-pointer"],["name","status","data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-status-update-segment"],["formArrayName","criteria",1,"criteria-groups"],[1,"card","criteria-group","mb-1"],[1,"card-header","bg-light","d-flex","justify-content-between","align-items-center","p-2",3,"ngClass"],[1,"d-flex","align-items-center"],[1,"fs-16"],["class","fw-normal ms-2 badge bg-success d-flex align-items-center popover-item cursor-pointer","data-bs-toggle","popover","data-bs-placement","right","data-bs-trigger","hover","data-bs-html","true",3,"click",4,"ngIf"],["class","btn-add-criteria",4,"ngIf"],[1,"segment-normal"],[3,"form","treeTag","tagList","segmentEdit","paramList","productList",4,"ngIf"],[1,"segment-version"],[3,"typeCnf","segmentEdit","form",4,"ngIf"],["class","text-center mb-3 mt-3",4,"ngIf"],[1,"fs-sm"],[1,"validation-invalid-label","mt-2"],["data-bs-toggle","popover","data-bs-placement","right","data-bs-trigger","hover","data-bs-html","true",1,"fw-normal","ms-2","badge","bg-success","d-flex","align-items-center","popover-item","cursor-pointer",3,"click"],[1,"ph","ph-user","fs-16","me-1"],[1,"ms-1"],[1,"btn-add-criteria"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"ph-plus-circle","me-1","text-white","cursor-pointer"],[3,"form","treeTag","tagList","segmentEdit","paramList","productList"],[3,"typeCnf","segmentEdit","form"],[1,"text-center","mb-3","mt-3"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-chart-bar","ms-1"],[1,"btn","btn-success",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,Wn,4,6,"h5",1),t.YNc(2,Xn,4,3,"h5",2),t.TgZ(3,"span",3),t._UZ(4,"i",4),t.qZA()(),t.TgZ(5,"div",5),t.YNc(6,po,78,44,"form",6),t.qZA(),t.TgZ(7,"div",7)(8,"div"),t.YNc(9,uo,4,3,"button",8),t.qZA(),t.TgZ(10,"div")(11,"button",9),t._uU(12),t.ALo(13,"translate"),t._UZ(14,"i",10),t.qZA(),t.YNc(15,ho,4,4,"button",11),t.YNc(16,mo,4,4,"button",11),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",!i.isClone),t.xp6(1),t.Q6J("ngIf",i.isClone),t.xp6(4),t.Q6J("ngIf",i.form),t.xp6(3),t.Q6J("ngIf",!i.isClone),t.xp6(3),t.hij("",t.lcZ(13,7,"common.button.cancel")," "),t.xp6(3),t.Q6J("ngIf",!i.isClone),t.xp6(1),t.Q6J("ngIf",i.isClone))},dependencies:[_t.mk,_t.O5,tt.ZT,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,j.CE,he,me,_t.JJ,M.X$],styles:['.dmp-dialog-edit-segment .dialog-content{max-height:75vh;overflow:auto}  .dmp-dialog-edit-segment .dialog-footer{justify-content:space-between}  .dmp-dialog-edit-segment .limit-line-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}  .dmp-dialog-edit-segment .fs-16{font-size:16px}  .dmp-dialog-edit-segment input.ng-invalid,   .dmp-dialog-edit-segment textarea.ng-invalid{border-color:#d1d5db!important}  .dmp-dialog-edit-segment input.ng-invalid-custom,   .dmp-dialog-edit-segment textarea.ng-invalid-custom{border-color:#ef4444!important}  .dmp-dialog-edit-segment .select-type{cursor:not-allowed}  .dmp-dialog-edit-segment .button-datepicker{position:relative;width:230px}  .dmp-dialog-edit-segment .button-datepicker>i{position:absolute;top:9px;left:15px}  .dmp-dialog-edit-segment .button-datepicker .date-range-picker{position:absolute;width:100%;height:100%;padding-top:8px;padding-left:24px}  .dmp-dialog-edit-segment .select2-container .selection .select2-selection--multiple .select2-selection__rendered{max-height:100px;overflow-y:auto}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .card-header{position:sticky;top:0;background:#fff;z-index:2}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .action-btn-query{width:10%}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .action-btn-option i{position:absolute;right:-30px;top:11px;z-index:1}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .border-condition{position:relative}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .border-condition .line-vertical-ex:before{content:"";position:absolute;top:0;bottom:0;left:50%;border-left:2px dashed #BFBFBF;transform:translate(-50%)}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .line-rule{width:120px}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .line-point{display:block;height:1px;border:0;border-top:2px dashed black;margin:1em 0;padding:0}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .select-ex{position:absolute;width:100px}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-25{width:25%!important}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-30{width:30%!important}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-15{width:15%!important}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-60{width:60%!important}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-70{width:70%!important}  .dmp-dialog-edit-segment .criteria-groups .criteria-group .w-35{width:35%!important}  .dmp-dialog-edit-segment .criteria-groups .content-criteria .criteria-element:first-child{padding-right:40px!important}@media (max-width: 1200px){  .dmp-dialog-edit-segment .input-margin{margin-top:10px}}@media (max-width: 1000px){  .dmp-dialog-edit-segment .segment-normal,   .dmp-dialog-edit-segment .segment-version{width:100%;overflow:auto;position:relative}  .dmp-dialog-edit-segment .segment-normal .form-criteria,   .dmp-dialog-edit-segment .segment-version .form-criteria{display:flex}  .dmp-dialog-edit-segment .segment-normal .form-criteria .content-criteria .criteria-element .card-body,   .dmp-dialog-edit-segment .segment-version .form-criteria .content-criteria .criteria-element .card-body{width:calc(100% - 120px)}  .dmp-dialog-edit-segment .segment-normal .form-criteria .content-criteria .criteria-element .card-body .icon-trash i,   .dmp-dialog-edit-segment .segment-version .form-criteria .content-criteria .criteria-element .card-body .icon-trash i{margin-left:3px!important}}@media (max-width: 890px){  .dmp-dialog-edit-segment .segment-version .content-criteria .criteria-element .w-30{width:18%!important}  .dmp-dialog-edit-segment .segment-version .content-criteria .criteria-element .w-20{width:15%}}@media (max-width: 480px){  .dmp-dialog-edit-segment .dialog-footer{flex-direction:column;align-items:self-end;gap:10px}  .dmp-dialog-edit-segment .criteria-group .card-criteria{flex-direction:column;gap:10px;align-items:self-start!important}  .dmp-dialog-edit-segment .criteria-group .card-criteria .btn-add-criteria,   .dmp-dialog-edit-segment .criteria-group .card-criteria .btn-add-criteria button{position:relative;width:100%}}']}),L})();function fo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openCreateSegmentDialog())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",60),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.createSegment")," "))}function vo(n,L){1&n&&(t.TgZ(0,"th",61),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"common.sequence")," "))}function xo(n,L){if(1&n&&(t.TgZ(0,"td",62)(1,"span",63),t._uU(2),t.qZA()()),2&n){const g=L.index,e=t.oxw();t.xp6(2),t.hij(" ",g+1+(e.pageIndex-1)*e.pageSize," ")}}function yo(n,L){if(1&n&&(t.TgZ(0,"th",64),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const g=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"modules.dmp.segment.segmentHeader")," "),t.xp6(3),t.hij("(",t.lcZ(5,4,g.length),")")}}const _o=function(n){return{"text-dark":n}};function bo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",74),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw();return t.KtG(f.openEditSegmentDialog(i))}),t._uU(1),t.qZA()}if(2&n){const g=t.oxw().$implicit,e=t.oxw();t.Q6J("ngClass",t.VKq(2,_o,g.createdBy.id!==(null==e.currentUser?null:e.currentUser.userId)&&!(null!=e.currentUser&&e.currentUser.isAdmin()))),t.xp6(1),t.hij(" ",g.title," ")}}function Ao(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",75),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw();return t.KtG(f.openSegmentDialogAnalytics(i))}),t._uU(1),t.qZA()}if(2&n){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.title," ")}}function Co(n,L){if(1&n&&(t.TgZ(0,"li",70),t._UZ(1,"i",76),t.ALo(2,"translate"),t._uU(3),t.qZA()),2&n){const g=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"modules.dmp.segment.userCreate")),t.xp6(2),t.hij(" ",null==g.createdBy?null:g.createdBy.username," ")}}function wo(n,L){if(1&n&&(t.TgZ(0,"td",65)(1,"div",66),t.YNc(2,bo,2,4,"a",67),t.YNc(3,Ao,2,1,"a",68),t.qZA(),t.TgZ(4,"ul",69)(5,"li",70),t._UZ(6,"i",71),t.ALo(7,"translate"),t._uU(8),t.qZA(),t.TgZ(9,"li",70),t._UZ(10,"i",72),t.ALo(11,"translate"),t._uU(12),t.qZA(),t.YNc(13,Co,4,4,"li",73),t.qZA()()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.ruleCheckerService.isAllow("dmp/segments/update")),t.xp6(1),t.Q6J("ngIf",!e.ruleCheckerService.isAllow("dmp/segments/update")),t.xp6(3),t.s9C("matTooltip",t.lcZ(7,7,"modules.dmp.segment.segmentId")),t.xp6(2),t.hij(" ",g.id," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(11,9,"modules.dmp.segment.createdAt")),t.xp6(2),t.hij("",g.createdAt," "),t.xp6(1),t.Q6J("ngIf",null==g.createdBy?null:g.createdBy.username)}}function To(n,L){1&n&&(t.TgZ(0,"th",77),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.description")," "))}function So(n,L){if(1&n&&(t.TgZ(0,"td",78)(1,"span",79),t._uU(2),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",g.description," ")}}function ko(n,L){1&n&&(t.TgZ(0,"th",80),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.device")," "))}function Do(n,L){1&n&&(t.O4$(),t.TgZ(0,"svg",85),t.ALo(1,"translate"),t._UZ(2,"path",86),t.qZA()),2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"modules.dmp.segment.pcAndMobile"))}function Zo(n,L){1&n&&(t._UZ(0,"i",87),t.ALo(1,"translate")),2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"modules.dmp.segment.mobile"))}function Lo(n,L){1&n&&(t._UZ(0,"i",88),t.ALo(1,"translate")),2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"modules.dmp.segment.pc"))}function Mo(n,L){if(1&n&&(t.TgZ(0,"td",62)(1,"span",81),t.YNc(2,Do,3,3,"svg",82),t.YNc(3,Zo,2,3,"i",83),t.YNc(4,Lo,2,3,"i",84),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.Q6J("ngIf","all"===g.device),t.xp6(1),t.Q6J("ngIf","mobile"===g.device),t.xp6(1),t.Q6J("ngIf","pc"===g.device)}}function Io(n,L){1&n&&(t.TgZ(0,"th",77),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.typeSegment")," "))}function Eo(n,L){if(1&n&&(t.TgZ(0,"td",89)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,1,e.typeSegmentCnf[g.typeSegment])," ")}}function Uo(n,L){1&n&&(t.TgZ(0,"th",77),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.type")," "))}function Po(n,L){if(1&n&&(t.TgZ(0,"td",89)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,1,e.typeCnf[g.type])," ")}}function No(n,L){1&n&&(t.TgZ(0,"th",90),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.audienceNumber")," "))}function Oo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",91)(1,"span",92),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.openSegmentDialogAnalytics(f))}),t._uU(2),t.qZA()()}if(2&n){const g=L.$implicit,e=t.oxw();let i;t.xp6(2),t.hij(" ",e.addCommas(null!==(i=null==g.resultAnalytics||null==g.resultAnalytics.reports||null==g.resultAnalytics.reports.count?null:g.resultAnalytics.reports.count.number_user)&&void 0!==i?i:0)," ")}}function jo(n,L){1&n&&(t.TgZ(0,"th",80),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.segment.status")," "))}function qo(n,L){1&n&&(t.TgZ(0,"span",96),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.common.statusDisabled")," "))}function Fo(n,L){1&n&&(t.TgZ(0,"span",97),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.common.statusActive")," "))}function Bo(n,L){if(1&n&&(t.TgZ(0,"td",93),t.YNc(1,qo,3,3,"span",94),t.YNc(2,Fo,3,3,"span",95),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.Q6J("ngIf","0"===g.status),t.xp6(1),t.Q6J("ngIf","1"===g.status)}}function Yo(n,L){1&n&&t._UZ(0,"th",80)}function Go(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",104),t.TgZ(2,"li")(3,"a",101),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openEditSegmentDialog(i))}),t._UZ(4,"i",105),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"common.button.edit")," "))}function Ro(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",104),t.TgZ(2,"li")(3,"a",101),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openEditSegmentDialog(i,!0))}),t._UZ(4,"i",106),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"modules.dmp.segment.clone")," "))}function Ho(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",104),t.TgZ(2,"li")(3,"a",101),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openSegmentDialogShare(i))}),t._UZ(4,"i",107),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"common.button.share")," "))}function Jo(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",104),t.TgZ(2,"li")(3,"a",108),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openDeleteSegmentDialog(i.id))}),t._UZ(4,"i",109),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"common.button.delete")," "))}function zo(n,L){if(1&n&&(t.ynx(0),t.YNc(1,Go,7,3,"ng-container",103),t.YNc(2,Ro,7,3,"ng-container",103),t.YNc(3,Ho,7,3,"ng-container",103),t.YNc(4,Jo,7,3,"ng-container",103),t.BQk()),2&n){const g=t.oxw(2);t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/segments/update")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/segments/create")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/segments/assign/list")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/segments/delete"))}}function Qo(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",62)(1,"div",98)(2,"button",99)(3,"mat-icon"),t._uU(4,"more_vert"),t.qZA()(),t.TgZ(5,"ul",100)(6,"li")(7,"a",101),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.openSegmentDialogAnalytics(f))}),t._UZ(8,"i",102),t._uU(9),t.ALo(10,"translate"),t.qZA()(),t.YNc(11,zo,5,4,"ng-container",103),t.qZA()()()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(9),t.hij(" ",t.lcZ(10,2,"common.button.analytic")," "),t.xp6(2),t.Q6J("ngIf",e.currentUser&&(e.currentUser.isAdmin()||(null==g.createdBy?null:g.createdBy.id)===e.currentUser.userId))}}function Vo(n,L){1&n&&t._UZ(0,"tr",110)}function Wo(n,L){1&n&&t._UZ(0,"tr",111)}const Xo=function(n){return{"border-top":n}};function Ko(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",112)(1,"app-paginator",113),t.NdJ("page",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.getPaginator(i))}),t.qZA()()}if(2&n){const g=t.oxw();t.Q6J("ngClass",t.VKq(7,Xo,g.dataSourceManage)),t.xp6(1),t.Tol(0==g.length?"d-none":"rounded-bottom-start rounded-bottom-end"),t.Q6J("pageSizeOptions",g.pageSizeOptions)("pageSize",g.pageSize)("pageIndex",g.pageIndex)("length",g.length)}}function $o(n,L){1&n&&(t.TgZ(0,"div",114),t._UZ(1,"i",115),t.TgZ(2,"div",116),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const tr=function(){return["/"]};let er=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.location=I,this.utilsService=F,this.segmentService=st,this.ruleCheckerService=ut,this.dialog=xt,this.keyword="",this.filterCondition={status:[{id:1,text:"modules.dmp.common.statusActive"},{id:0,text:"modules.dmp.common.statusDisabled"}],typeSegment:[{id:0,text:"modules.dmp.segment.perday"},{id:1,text:"modules.dmp.segment.fixed"}],type:[{id:0,text:"modules.dmp.segment.default"},{id:1,text:"modules.dmp.segment.version"}],device:[{id:"mobile",text:"modules.dmp.segment.mobile"},{id:"pc",text:"modules.dmp.segment.pc"},{id:"all",text:"modules.dmp.segment.pcAndMobile"}]},this.dataFilter={status:-1,device:"-1",type:-1,typeSegment:-1},this.typeSegmentCnf=["modules.dmp.segment.perday","modules.dmp.segment.fixed"],this.typeCnf=["modules.dmp.segment.default","modules.dmp.segment.version"],this.segmentList=[],this.pageSize=20,this.pageSizeOptions=[20,30,50,100],this.pageIndex=1,this.length=0,this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","title","description","device","typeSegment","type","audienceNumber","status","action"],this.activatedRoute.queryParams.subscribe(At=>{this.keyword=At.keyword??"",typeof At.limit<"u"&&(this.pageSize=At.limit),typeof At.page<"u"&&(this.pageIndex=At.page),typeof At.keyword<"u"&&(this.keyword=At.keyword),typeof At.status<"u"&&(this.dataFilter.status=parseInt(At.status)),typeof At.type<"u"&&(this.dataFilter.type=parseInt(At.type)),typeof At.typeSegment<"u"&&(this.dataFilter.typeSegment=parseInt(At.typeSegment)),typeof At.device<"u"&&(this.dataFilter.device=At.device)})}ngOnInit(){this.getData()}ngAfterViewInit(){setTimeout(()=>{this.initSelect2()},100)}initSelect2(){let e=this.filterCondition.status.map(F=>({...F,text:this.translate.instant(F.text),selected:this.dataFilter.status===F.id})),i=this.filterCondition.typeSegment.map(F=>({...F,text:this.translate.instant(F.text),selected:this.dataFilter.typeSegment===F.id})),f=this.filterCondition.type.map(F=>({...F,text:this.translate.instant(F.text),selected:this.dataFilter.type===F.id})),I=this.filterCondition.device.map(F=>({...F,text:this.translate.instant(F.text),selected:this.dataFilter.device===F.id}));e.unshift({id:-1,text:this.translate.instant("modules.dmp.common.allStatus"),selected:!1}),i.unshift({id:-1,text:this.translate.instant("modules.dmp.segment.allTypeSegment"),selected:!1}),f.unshift({id:-1,text:this.translate.instant("modules.dmp.segment.allType"),selected:!1}),I.unshift({id:"-1",text:this.translate.instant("modules.dmp.segment.allDevice"),selected:!1}),$(".select-status").select2({data:e}).on("select2:select",F=>{this.dataFilter.status=parseInt(F.params.data.id)}),$(".select-type").select2({data:f}).on("select2:select",F=>{this.dataFilter.type=parseInt(F.params.data.id)}),$(".select-type-segment").select2({data:i}).on("select2:select",F=>{this.dataFilter.typeSegment=parseInt(F.params.data.id)}),$(".select-device").select2({data:I}).on("select2:select",F=>{this.dataFilter.device=F.params.data.id})}getData(e){e&&(this.pageIndex=1);const i={limit:this.pageSize,page:this.pageIndex};this.keyword.length>0&&(i.keyword=this.keyword),typeof this.dataFilter.status<"u"&&-1!==this.dataFilter.status&&(i.status=this.dataFilter.status),typeof this.dataFilter.type<"u"&&-1!==this.dataFilter.type&&(i.type=this.dataFilter.type),typeof this.dataFilter.typeSegment<"u"&&-1!==this.dataFilter.typeSegment&&(i.typeSegment=this.dataFilter.typeSegment),typeof this.dataFilter.device<"u"&&"-1"!==this.dataFilter.device&&(i.device=this.dataFilter.device),this.segmentService.get(i).subscribe(I=>{1===I.status&&(this.segmentList=I.data??[],this.length=I.total??0,this.dataSourceManage=new z.by(this.segmentList))});const f=[];for(const I in i)f.push(I+"="+i[I]);this.location.replaceState("segment/list",f.join("&"))}getPaginator(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getData(),this.scrollToTop()}scrollToTop(){const e=document.querySelector(".content-inner");e&&(e.scrollTop=0)}addCommas(e){return this.utilsService.addCommas(e.toString())}deleteSegment(e){this.segmentService.delete(e).subscribe(i=>{if(1===i.status)return this.getData(),this.dialog.closeAll(),void AppNoty.success([this.translate.instant("modules.dmp.segment.notify.deleteSuccess")]);AppNoty.error([this.translate.instant("modules.dmp.segment.notify.deleteSuccess")])})}openCreateSegmentDialog(){this.dialog.open(In,{autoFocus:!1,disableClose:!0,width:"1300px",maxHeight:"95vh",height:"auto",panelClass:"dmp-dialog-create-segment",data:{status:this.filterCondition.status.map(i=>({...i,text:this.translate.instant(i.text)}))}}).afterClosed().subscribe(i=>{i&&this.getData()})}openEditSegmentDialog(e,i=!1){this.currentUser&&(this.currentUser.isAdmin()||e.createdBy?.id===this.currentUser.userId)&&this.dialog.open(go,{autoFocus:!1,disableClose:!0,width:"1300px",maxHeight:"95vh",height:"auto",panelClass:"dmp-dialog-edit-segment",data:{segment:e,isClone:i}}).afterClosed().subscribe(I=>{I&&this.getData()})}openDeleteSegmentDialog(e){this.dialog.open(V.$,{autoFocus:!1,disableClose:!0,width:"400px",panelClass:"dmp-dialog-delete-segment"}).afterClosed().subscribe(f=>{f&&this.deleteSegment(e)})}openSegmentDialogShare(e){this.dialog.open(Gn,{autoFocus:!1,panelClass:"segment-dialog-share",width:"600px",height:"auto",maxHeight:"800px",data:{segment:e}}).afterClosed().subscribe(f=>{})}openSegmentDialogAnalytics(e){this.dialog.open(xe,{autoFocus:!1,panelClass:"segment-dialog-analytics",width:"90%",maxWidth:"1600px",height:"auto",maxHeight:"90vh",data:{segment:e}}).afterClosed().subscribe(f=>{})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(_t.Ye),t.Y36(we),t.Y36(ne),t.Y36(Jt.H),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-segment-list"]],features:[t.qOj],decls:74,vars:21,consts:[["id","wp-dmp-segments"],[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","py-2",3,"routerLink"],[1,"ph-house","me-2"],[1,"breadcrumb-item","active","py-2"],[1,"content"],[1,"card","mb-0"],[1,"p-2","pb-0"],[1,"row"],[1,"col-xl-12"],[1,"wp-filter-segments"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","input-search"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","form-select-type","cursor-pointer"],["data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-type"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","form-select-type-segment","cursor-pointer"],["data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-type-segment"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","form-select-device","cursor-pointer"],["data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-device"],[1,"form-group","mb-2","float-start","me-0","me-sm-2","form-select-2","form-select-status","cursor-pointer"],["data-minimum-results-for-search","Infinity",1,"form-control","select","select2-hidden-accessible","select-status"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"wp-action-buttons","mb-2","float-end"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-xl-12","p-0"],[1,"table-responsive","data-table-segments"],["mat-table","","aria-label","Table displaying manage segments data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["table",""],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate ps-0",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","","class","bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","device"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["matColumnDef","typeSegment"],["mat-cell","","class","text-truncate",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","audienceNumber"],["mat-header-cell","","class","bg-dark text-white text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-end",4,"matCellDef"],["matColumnDef","status"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","rounded-bottom-start rounded-bottom-end d-flex justify-content-end",3,"ngClass",4,"ngIf"],["class","text-center p-2",4,"ngIf"],[1,"ph","ph-plus","ms-1","icon-small"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","ps-0"],[1,"d-flex","mb-1"],["class","fw-light-bold d-inline-block mb-0 f-20 limit-text cursor-pointer title-segment",3,"ngClass","click",4,"ngIf"],["class","fw-light-bold d-inline-block mb-0 f-20 limit-text cursor-pointer title-segment",3,"click",4,"ngIf"],[1,"list","list-unstyled","list-inline","mb-0"],[1,"list-inline-item","text-muted","fs-sm"],[1,"ph","ph-hash-straight","icon-small-17",3,"matTooltip"],[1,"ph","ph-timer","icon-small-17","me-1",3,"matTooltip"],["class","list-inline-item text-muted fs-sm",4,"ngIf"],[1,"fw-light-bold","d-inline-block","mb-0","f-20","limit-text","cursor-pointer","title-segment",3,"ngClass","click"],[1,"fw-light-bold","d-inline-block","mb-0","f-20","limit-text","cursor-pointer","title-segment",3,"click"],[1,"ph","ph-user","icon-small-17",3,"matTooltip"],["mat-header-cell","",1,"bg-dark","text-white"],["mat-cell",""],[1,"limit-text-2l"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],[1,""],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","fill","#000000","viewBox","0 0 256 256",3,"matTooltip",4,"ngIf"],["class","ph ph-device-mobile",3,"matTooltip",4,"ngIf"],["class","ph ph-desktop",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","fill","#000000","viewBox","0 0 256 256",3,"matTooltip"],["d","M224,72H208V64a24,24,0,0,0-24-24H40A24,24,0,0,0,16,64v96a24,24,0,0,0,24,24H152v8a24,24,0,0,0,24,24h48a24,24,0,0,0,24-24V96A24,24,0,0,0,224,72ZM40,168a8,8,0,0,1-8-8V64a8,8,0,0,1,8-8H184a8,8,0,0,1,8,8v8H176a24,24,0,0,0-24,24v72Zm192,24a8,8,0,0,1-8,8H176a8,8,0,0,1-8-8V96a8,8,0,0,1,8-8h48a8,8,0,0,1,8,8Zm-96,16a8,8,0,0,1-8,8H88a8,8,0,0,1,0-16h40A8,8,0,0,1,136,208Zm80-96a8,8,0,0,1-8,8H192a8,8,0,0,1,0-16h16A8,8,0,0,1,216,112Z"],[1,"ph","ph-device-mobile",3,"matTooltip"],[1,"ph","ph-desktop",3,"matTooltip"],["mat-cell","",1,"text-truncate"],["mat-header-cell","",1,"bg-dark","text-white","text-end"],["mat-cell","",1,"text-truncate","text-end"],[1,"cursor-pointer","hover-text",3,"click"],["mat-cell","",1,"text-truncate","text-center"],["class","badge bg-danger fw-normal",4,"ngIf"],["class","badge bg-success fw-normal",4,"ngIf"],[1,"badge","bg-danger","fw-normal"],[1,"badge","bg-success","fw-normal"],[1,"dropdown"],["mat-icon-button","","data-bs-toggle","dropdown"],[1,"dropdown-menu"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ph","ph-chart-bar","me-2","text-primary"],[4,"ngIf"],[1,"dropdown-divider"],[1,"ph","ph-pencil-simple","me-2","text-warning"],[1,"ph","ph-files","me-2","text-muted"],[1,"ph","ph-share-network","me-2","text-success"],[1,"dropdown-item","cursor-pointer","bg-danger","text-white",3,"click"],[1,"ph","ph-trash","me-2"],["mat-header-row",""],["mat-row",""],[1,"rounded-bottom-start","rounded-bottom-end","d-flex","justify-content-end",3,"ngClass"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),t._UZ(21,"i",17),t.qZA(),t.TgZ(22,"input",18),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.getData(!0)}),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"div",19),t._UZ(25,"select",20),t.qZA(),t.TgZ(26,"div",21),t._UZ(27,"select",22),t.qZA(),t.TgZ(28,"div",23),t._UZ(29,"select",24),t.qZA(),t.TgZ(30,"div",25),t._UZ(31,"select",26),t.qZA(),t.TgZ(32,"div",27)(33,"button",28),t.NdJ("click",function(){return i.getData()}),t._uU(34),t.ALo(35,"translate"),t._UZ(36,"i",29),t.qZA()(),t.TgZ(37,"div",30),t.YNc(38,fo,4,3,"button",31),t.qZA()()(),t.TgZ(39,"div",32)(40,"div",33)(41,"table",34,35),t.ynx(43,36),t.YNc(44,vo,3,3,"th",37),t.YNc(45,xo,3,1,"td",38),t.BQk(),t.ynx(46,39),t.YNc(47,yo,6,6,"th",40),t.YNc(48,wo,14,11,"td",41),t.BQk(),t.ynx(49,42),t.YNc(50,To,3,3,"th",43),t.YNc(51,So,3,1,"td",44),t.BQk(),t.ynx(52,45),t.YNc(53,ko,3,3,"th",46),t.YNc(54,Mo,5,3,"td",38),t.BQk(),t.ynx(55,47),t.YNc(56,Io,3,3,"th",43),t.YNc(57,Eo,4,3,"td",48),t.BQk(),t.ynx(58,49),t.YNc(59,Uo,3,3,"th",43),t.YNc(60,Po,4,3,"td",48),t.BQk(),t.ynx(61,50),t.YNc(62,No,3,3,"th",51),t.YNc(63,Oo,3,1,"td",52),t.BQk(),t.ynx(64,53),t.YNc(65,jo,3,3,"th",46),t.YNc(66,Bo,3,2,"td",54),t.BQk(),t.ynx(67,55),t.YNc(68,Yo,1,0,"th",46),t.YNc(69,Qo,12,4,"td",38),t.BQk(),t.YNc(70,Vo,1,0,"tr",56),t.YNc(71,Wo,1,0,"tr",57),t.qZA()(),t.YNc(72,Ko,2,9,"div",58),t.YNc(73,$o,5,3,"div",59),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(20,tr)),t.xp6(2),t.hij(" ",t.lcZ(8,12,"breadcrumbs.home")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"modules.dmp.segment.list")," "),t.xp6(12),t.s9C("placeholder",t.lcZ(23,16,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(12),t.hij("",t.lcZ(35,18,"common.button.search")," "),t.xp6(4),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/segments/create")),t.xp6(3),t.Q6J("dataSource",i.dataSourceManage),t.xp6(29),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.length),t.xp6(1),t.Q6J("ngIf",0===i.length))},dependencies:[_t.mk,_t.O5,Y.rH,de.RK,ue.Hw,y.gM,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,oe.J,j.Fj,j.JJ,j.On,_t.JJ,M.X$],styles:["#wp-dmp-segments .form-select-status,   #wp-dmp-segments .form-select-type,   #wp-dmp-segments .form-select-segment-type,   #wp-dmp-segments .form-select-device{width:200px}  #wp-dmp-segments .data-table-segments .mat-column-sequenceManage{width:55px}  #wp-dmp-segments .data-table-segments .mat-column-audienceNumber{width:180px}  #wp-dmp-segments .data-table-segments .mat-column-device{width:100px}  #wp-dmp-segments .data-table-segments .mat-column-typeSegment{width:125px}  #wp-dmp-segments .data-table-segments .mat-column-type{width:130px}  #wp-dmp-segments .data-table-segments .mat-column-action{width:70px}  #wp-dmp-segments .data-table-segments .mat-column-status{width:150px}  #wp-dmp-segments .data-table-segments .mat-column-description{width:200px}  #wp-dmp-segments .data-table-segments .mat-column-title{width:400px}  #wp-dmp-segments .data-table-segments .limit-text-2l{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:block!important;display:-webkit-box!important;overflow:hidden;white-space:normal}  #wp-dmp-segments .data-table-segments .limit-text{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}  #wp-dmp-segments .data-table-segments .f-12{font-size:12px}  #wp-dmp-segments .data-table-segments .f-13{font-size:13px}  #wp-dmp-segments .data-table-segments .title-segment:hover,   #wp-dmp-segments .data-table-segments .hover-text:hover{color:#0c83ff}@media (max-width: 1600px){  #wp-dmp-segments .data-table-segments.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}  #wp-dmp-segments .data-table-segments .mat-column-title{width:340px}  #wp-dmp-segments .data-table-segments .mat-column-description{width:180px}  #wp-dmp-segments .data-table-segments .mat-column-type{width:100px}  #wp-dmp-segments .data-table-segments .mat-column-status{width:105px}  #wp-dmp-segments .data-table-segments .mat-column-device{width:90px}  #wp-dmp-segments .input-search{width:230px}}@media (max-width: 575px){  #wp-dmp-segments .wp-filter-segments .form-select-2{width:100%}}"]}),L})();var ke=Tt(4968),ee=Tt(8372),De=Tt(6318);let se=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const I in e)i.params[I]=e[I];return this.backendService.get(this.apiServerPaths.dmp.website.list,i,(0,x.U)(I=>{const F=[],st=I.data.websites??[],ut=I.data.count??0;for(const xt in st)F.push(new De.E(st[xt]));return{status:I?.status,code:I?.code,data:F,total:ut}}))}create(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.website.create,i,(0,x.U)(I=>I))}getCodeTracking(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.website.getCodeTracking,i,(0,x.U)(I=>I))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();function ir(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameMinLength")," "))}function nr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameMaxLength")," "))}function or(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameIsRequired")," "))}function rr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function sr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function ar(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,ir,3,3,"div",59),t.YNc(2,nr,3,3,"div",59),t.YNc(3,or,3,3,"div",59),t.YNc(4,rr,3,3,"div",59),t.YNc(5,sr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("name"))||null==e.errors?null:e.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(i=g.formAudience.get("name"))||null==i.errors?null:i.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.formAudience.get("name"))||null==f.errors?null:f.errors.required),t.xp6(1),t.Q6J("ngIf",null==(I=g.formAudience.get("name"))||null==I.errors?null:I.errors.excessWhiteSpace),t.xp6(1),t.Q6J("ngIf",null==(F=g.formAudience.get("name"))||null==F.errors?null:F.errors.htmlTag)}}function lr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function cr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.descriptionMaxLength")," "))}function pr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,lr,3,3,"div",59),t.YNc(2,cr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e,i;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("description"))||null==e.errors?null:e.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(i=g.formAudience.get("description"))||null==i.errors?null:i.errors.maxlength)}}function dr(n,L){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function ur(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.segmentRequired")," "))}function hr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,ur,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.segment.value"))||null==e.errors?null:e.errors.required)}}function mr(n,L){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function gr(n,L){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function fr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.websiteRequired")," "))}function vr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,fr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.domain"))||null==e.errors?null:e.errors.required)}}function xr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.paramsRequired")," "))}function yr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,xr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.params"))||null==e.errors?null:e.errors.required)}}function _r(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.urlRequired")," "))}function br(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,_r,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.url"))||null==e.errors?null:e.errors.required)}}function Ar(n,L){1&n&&(t.TgZ(0,"div",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.urlPattern")," "))}function Cr(n,L){if(1&n&&(t.TgZ(0,"option",60),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function wr(n,L){1&n&&(t.TgZ(0,"div",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.fileTypeFormat")," "))}function Tr(n,L){1&n&&(t.TgZ(0,"div",58),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.maxFileSize")," "))}function Sr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.fileRequired")," "))}function kr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,Sr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.upload.file"))||null==e.errors?null:e.errors.required)}}function Dr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.selectAudienceRequired")," "))}function Zr(n,L){if(1&n&&(t.TgZ(0,"div",58),t.YNc(1,Dr,3,3,"div",59),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.lookALike.selectAudience"))||null==e.errors?null:e.errors.required)}}const Ze=function(n){return{"ng-invalid-custom":n}},Kt=function(n){return{"d-block":n}};let Lr=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At,Dt){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.globalsService=I,this.audienceService=F,this.websiteService=st,this.segmentService=ut,this.ruleCheckerService=xt,this.dialogRef=At,this.formBuilder=Dt,this.listType=this.globalsService.audience.listType,this.listTargetUser=this.globalsService.audience.listTargetUser,this.listFileType=this.globalsService.audience.listFileType,this.listTypeUrl=this.globalsService.audience.listTypeUrl,this.maxSizeFile=this.globalsService.audience.file.maxFileSize,this.selectedFileUploadName="",this.loadingState=!1,this.urlPattern="https?://.+",this.validateUrl=!1}ngOnInit(){this.ruleCheckerService.isAllow("dmp/segment/list")&&this.getDataSegment(),this.initForm()}ngAfterViewInit(){this.initSelect2()}ngOnDestroy(){this.searchFieldSubscription&&this.searchFieldSubscription.unsubscribe()}initForm(){this.formAudience=this.formBuilder.group({name:["",[j.kI.required,j.kI.minLength(4),j.kI.maxLength(150),a,_(4)]],description:["",[j.kI.maxLength(512),a]],selectedType:["segment"],type:this.formBuilder.group({segment:this.formBuilder.group({value:this.formBuilder.array([],j.kI.required)}),custom:this.formBuilder.group({targetUser:["visit-website"],domain:this.formBuilder.array([],j.kI.required),typeUrl:["contains"],url:this.formBuilder.array([],[j.kI.required,j.kI.pattern(this.urlPattern)]),params:this.formBuilder.array([],j.kI.required)}),upload:this.formBuilder.group({fileType:[1],file:["",[j.kI.required,c(["txt","csv"],this.maxSizeFile)]]}),lookALike:this.formBuilder.group({selectAudience:["",j.kI.required],reachUser:[100],users:new j.NI(0)})})}),this.formAudience.get("selectedType")?.valueChanges.pipe((0,ee.b)(0)).subscribe(e=>{switch(e){case"segment":this.listSegment||this.ruleCheckerService.isAllow("dmp/segment/list")&&this.getDataSegment(),this.initSegmentAudience();break;case"upload":this.initFileTypeAudience();break;case"custom":("visit-website"===this.getTargetUser()||"contains"===this.getTypeUrl())&&this.getDataWebsite(),this.initWebsiteAudience(),this.initTargetUserAudience();break;case"lookalike":this.listSelectAudience||this.getDataAudience(),this.initSelectAudience()}}),this.formAudience?.get("type.custom.targetUser")?.valueChanges.pipe((0,ee.b)(0)).subscribe(e=>{switch(e){case"visit-website":this.initWebsiteAudience();break;case"visit-webpage":"contains"===this.getTypeUrl()?(this.initWebsiteAudience(),this.initParamsAudience()):"exactly"==this.getTypeUrl()&&this.initTypeUrlAudience()}}),this.formAudience?.get("type")?.get("custom")?.get("typeUrl")?.valueChanges.pipe((0,ee.b)(0)).subscribe(e=>{switch(e){case"contains":this.initParamsAudience(),this.initWebsiteAudience();break;case"exactly":this.initUrlAudience()}})}getTargetUser(){return this.formAudience?.get("type.custom.targetUser")?.value}getTypeUrl(){return this.formAudience?.get("type.custom.typeUrl")?.value}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}onBlurReachUser(e){const f=Number(e.target.value);f<10?this.formAudience.get("type.lookALike.reachUser")?.setValue(10):f>100&&this.formAudience.get("type.lookALike.reachUser")?.setValue(100)}initSelect2(){this.initTypeAudience(),this.initFileTypeAudience(),this.initTargetUserAudience(),this.initSegmentAudience(),this.initSelectAudience(),this.initWebsiteAudience(),this.initParamsAudience(),this.initUrlAudience(),this.initTypeUrlAudience()}getDataWebsite(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=encodeURIComponent(e)),new Promise((I,F)=>{this.websiteService.get(f).subscribe(st=>{if(this.listWebsite=st.data??[],i)if(this.listWebsite&&this.listWebsite.length>0){const ut=this.listWebsite.map(xt=>({id:xt.name,text:xt.name}));I(ut)}else I([]);else this.listWebsite=st.data??[],this.listSelectWebsiteSuggest=st.data??[],this.initWebsiteAudience()},st=>{this.loadingState=!1,F(st)})})}getDataSegment(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=e),new Promise((I,F)=>{this.segmentService.get(f).subscribe(st=>{if(this.listSegment=st.data??[],i)if(this.listSegment&&this.listSegment.length>0){const ut=this.listSegment.map(xt=>({id:xt.id,text:xt.title}));I(ut)}else I([]);else this.listSegment=st.data??[],this.listSelectSegmentSuggest=st.data??[],this.initSegmentAudience()},st=>{this.loadingState=!1,F(st)})})}getDataAudience(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=encodeURIComponent(e)),new Promise((I,F)=>{this.audienceService.get(f).subscribe(st=>{if(this.listSelectAudience=st.data??[],i)if(this.listSelectAudience&&this.listSelectAudience.length>0){const ut=this.listSelectAudience.map(xt=>({id:xt.id,text:xt.name||"",activeUser:xt?.activeUser}));I(ut)}else I([]);else this.listSelectAudience=st.data??[],this.listSelectAudienceSuggest=st.data??[],this.initSelectAudience()},st=>{this.loadingState=!1,F(st)})})}onFileChange(e){const i=e.target;if(i.files&&i.files.length>0){const f=i.files[0];this.selectedFileUploadName=f?.name.length>20?f.name.substring(0,12)+"..."+f.name.slice(-8):f.name,this.formAudience.get("type.upload.file")?.setValue(f)}else this.formAudience.get("type.upload.file")?.setValue(null)}initTypeAudience(){$(".type-audience").select2({minimumResultsForSearch:1/0,width:"100%"}).on("select2:select",e=>{const i=e.params.data;this.formAudience.get("selectedType")?.setValue(i?.id)})}initFileTypeAudience(){$(".group-select-file-type-audience").select2({minimumResultsForSearch:1/0,width:"100%"}).on("select2:select",e=>{const i=e.params.data;this.formAudience.get("type.upload.fileType")?.setValue(i?.id)})}initTargetUserAudience(){$(".group-select-target-user-audience").select2({minimumResultsForSearch:1/0,width:"100%"}).on("select2:select",e=>{const i=e.params.data?.id;this.formAudience.get("type.custom.targetUser")?.setValue(i),"visit-website"===i&&this.initWebsiteAudience()})}getSegmentForm(){return this.formAudience.get("type.segment.value")}getCustomWebsiteForm(){return this.formAudience.get("type.custom.domain")}getCustomParamsForm(){return this.formAudience.get("type.custom.params")}getCustomUrlForm(){return this.formAudience.get("type.custom.url")}getLookALikeSelectAudienceForm(){return this.formAudience.get("type.lookALike.selectAudience")}shouldCallApi(e){return!this.listSelectAudience||e&&e.trim().length>=0||""===e}setDataInitSelectAudience(){const e=[{id:0,text:this.translate.instant("modules.dmp.audience.chooseAudienceSelect")}];if(this.listSelectAudience&&this.listSelectAudience.length>0)for(const i of this.listSelectAudience)e.push({id:i?.id,text:i?.name??""});return e}initSelectAudience(){const e=this.setDataInitSelectAudience();$(".group-select-select-audience").select2({data:e,ajax:{delay:700,transport:(i,f,I)=>{const F=i.data.term;this.shouldCallApi(F)?this.debounce(()=>{this.getDataAudience(F,!0).then(st=>{f({results:st})},st=>I(st))},500):f({results:this.listSelectAudience})},processResults:i=>{let f;return f=[],i.results?.map(I=>f.push({id:I.id,text:I.text??I.name,activeUser:I.activeUser})),this.listSelectAudienceSearch=f,{results:f}}},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")}}).on("select2:select",i=>{const f=i.params.data?.id;this.getLookALikeSelectAudienceForm()?.setValue(f);const I=this.listSelectAudienceSearch?.find(F=>F.id===f)?.activeUser;this.formAudience.get("type.lookALike.users")?.setValue(I),console.log(this.formAudience.get("type.lookALike.reachUser"))}).on("select2:open",()=>{const i=document.querySelector(".select2-search__field");i&&!this.listSelectAudience&&(this.searchFieldSubscription&&this.searchFieldSubscription.unsubscribe(),this.searchFieldSubscription=(0,ke.R)(i,"input").pipe((0,x.U)(f=>f.target.value),(0,ee.b)(300)).subscribe(f=>{this.shouldCallApi(f)&&this.getDataAudience(f,!0)}))}).on("select2:closing",()=>{this.listSelectAudience=this.listSelectAudienceSuggest})}debounce(e,i){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(e,i)}setInitDataSelectSegmentAudience(){let e=[];if(this.listSegment&&this.listSegment.length>0)for(const i of this.listSegment)e.push({id:i.id,text:i?.title,selected:!1});return e}initSegmentAudience(){const e=this.setInitDataSelectSegmentAudience();this.ruleCheckerService.isAllow("dmp/segment/list")?$(".group-select-segment-audience").select2({data:e,ajax:{delay:200,transport:(i,f,I)=>{const F=i.data.term;F||""===F?this.getDataSegment(F,!0).then(st=>{f({results:st})},st=>I(st)):f({results:this.listSegment?.map(st=>({id:st.id,text:st.title}))})},processResults:i=>({results:i.results})},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")},placeholder:this.translate.instant("modules.dmp.audience.chooseSegment"),closeOnSelect:!1,escapeMarkup:function(i){return i},minimumResultsForSearch:10,minimumInputLength:0}).on("select2:select",i=>{const f=i.params.data?.id;f&&!this.getSegmentForm().value.includes(f)&&this.getSegmentForm()?.push(new j.NI(f))}).on("select2:unselect",i=>{const f=$(".group-select-segment-audience"),I=i.params.data?.id,F=this.getSegmentForm(),st=F.controls.findIndex(ut=>ut.value===Number(I));if(-1!==st&&F.removeAt(st),i.params.originalEvent){if("mouseup"===i.params.originalEvent?.type){const ut=F.controls.map(At=>At.value.toString());f.val(ut).trigger("change"),$(".select2-results__option").each((At,Dt)=>{const Pt=$(Dt).text(),Yt=$(Dt).attr("id");(Pt===i.params.data.text||Yt===`select2-${I}-result`)&&$(Dt).attr("aria-selected","false")}),f.trigger("change.select2")}}else{const ut=F.controls.map(xt=>xt.value.toString());f.val(ut).trigger("change")}}).on("select2:closing",i=>{this.listSegment=this.listSelectSegmentSuggest,this.getSegmentForm().markAsTouched()}):$(".group-select-segment-audience").select2({data:[],placeholder:this.translate.instant("modules.dmp.audience.chooseSegment")})}initWebsiteAudience(){const e=[];if(this.listWebsite&&this.listWebsite.length>0)for(const i of this.listWebsite)e.push({id:i?.name,text:i?.name??"",selected:!1});$(".group-select-website-audience").select2({data:e,ajax:{delay:700,transport:(i,f,I)=>{const F=i.data.term;F?this.getDataWebsite(F,!0).then(st=>{f({results:st})},st=>I(st)):this.listWebsite&&this.listWebsite.length>0&&f({results:this.listWebsite?.map(st=>({id:st.name,text:st.name}))})},processResults:i=>({results:i.results})},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")},placeholder:this.translate.instant("modules.dmp.audience.chooseWebsite"),closeOnSelect:!1,escapeMarkup:function(i){return i},minimumResultsForSearch:10,minimumInputLength:0}).on("select2:select",i=>{const f=i.params.data?.id;f&&!this.getCustomWebsiteForm().value.includes(f)&&this.getCustomWebsiteForm()?.push(new j.NI(f))}).on("select2:unselect",i=>{const f=i.params.data?.id,I=this.getCustomWebsiteForm(),F=I.controls.findIndex(st=>st.value===f);-1!==F&&I.removeAt(F)}).on("select2:closing",i=>{this.listWebsite=this.listSelectWebsiteSuggest,this.getCustomWebsiteForm().markAsTouched()})}initParamsAudience(){$(".group-select-params-audience").select2({placeholder:this.translate.instant("modules.dmp.audience.placeHolder.params"),closeOnSelect:!0,tags:!0,tokenSeparators:[","," "],language:{noResults:()=>this.translate.instant("modules.dmp.audience.placeHolder.paramsNoResult")}}).on("select2:select",e=>{const i=e.params.data?.id;this.getCustomParamsForm()?.controls.some(I=>I.value===i)||this.getCustomParamsForm()?.push(new j.NI(i))}).on("select2:unselect",e=>{const i=e.params.data?.id,f=this.getCustomParamsForm(),I=f.controls.findIndex(F=>F.value===i);-1!==I&&f.removeAt(I)}).on("select2:closing",e=>{this.getCustomParamsForm().markAsTouched()})}initUrlAudience(){$(".group-select-url-audience").select2({placeholder:this.translate.instant("modules.dmp.audience.placeHolder.url"),closeOnSelect:!0,tags:!0,tokenSeparators:[","," "],dropdownCssClass:"no-suggestions",containerCssClass:"select-no-suggestions",minimumResultsForSearch:1/0,language:{noResults:()=>this.translate.instant("modules.dmp.audience.placeHolder.urlNoResult")}}).on("select2:select",e=>{const i=e.params.data?.id,f=$(e.target);if(new RegExp(this.urlPattern).test(i))this.validateUrl=!1,this.getCustomUrlForm()?.controls.some(F=>F.value===i)||this.getCustomUrlForm()?.push(new j.NI(i)),setTimeout(()=>{f.trigger("change").trigger("select2:close")},50);else{this.validateUrl=!0;const I=$(e.target),st=I.val().filter(ut=>ut!==i);I.val(st).trigger("change")}}).on("select2:unselect",e=>{const i=e.params.data?.id,f=this.getCustomUrlForm(),I=f.controls.findIndex(F=>F.value===i);-1!==I&&f.removeAt(I)}).on("select2:closing",e=>{this.getCustomUrlForm().markAsTouched()})}initTypeUrlAudience(){$(".group-select-type-url-audience").select2({minimumResultsForSearch:1/0,width:"100%",selected:!0}).val(this.getTypeUrl()).on("select2:select",e=>{const i=e.params.data?.id;this.formAudience.get("type.custom.typeUrl")?.setValue(i)})}onSave(){let e={name:this.formAudience.get("name")?.value?.trim(),description:this.formAudience.get("description")?.value,type:this.formAudience.get("selectedType")?.value};switch(this.formAudience.get("selectedType")?.value){case"segment":e.segments=this.formAudience.get("type.segment.value")?.value?.join(",");break;case"upload":const i=new FormData;i.append("description",this.formAudience.get("description")?.value),i.append("name",this.formAudience.get("name")?.value),i.append("type",this.formAudience.get("selectedType")?.value),i.append("uploadType",this.formAudience.get("type.upload.fileType")?.value),i.append("file",this.formAudience.get("type.upload.file")?.value),e=i;break;case"custom":"visit-website"===this.getTargetUser()?(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.domains=this.formAudience.get("type.custom.domain")?.value?.join(",")):"visit-webpage"===this.getTargetUser()&&("contains"===this.getTypeUrl()?(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.typeUrl=this.formAudience.get("type.custom.typeUrl")?.value,e.domains=this.formAudience.get("type.custom.domain")?.value?.join(","),e.keywordParams=this.formAudience.get("type.custom.params")?.value?.join(",")):"exactly"===this.getTypeUrl()&&(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.typeUrl=this.formAudience.get("type.custom.typeUrl")?.value,e.urls=this.formAudience.get("type.custom.url")?.value?.join(",")));break;case"lookalike":e.reachUser=this.formAudience.get("type.lookALike.reachUser")?.value,e.audiences=String(this.formAudience.get("type.lookALike.selectAudience")?.value)}this.audienceService.create(e).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.audience.notify.createSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.audience.notify.createFailed")])})}checkInvalid(){let e;switch(this.formAudience?.get("selectedType")?.value){case"segment":e=this.formAudience.get("type.segment.value")?.invalid;break;case"upload":e=this.formAudience.get("type.upload.file")?.invalid;break;case"custom":"visit-website"===this.formAudience.get("type.custom.targetUser")?.value?e=this.formAudience.get("type.custom.domain")?.invalid:"contains"===this.getTypeUrl()?e=this.formAudience.get("type.custom.domain")?.invalid||this.formAudience.get("type.custom.params")?.invalid:"exactly"===this.getTypeUrl()&&(e=this.formAudience.get("type.custom.url")?.invalid);break;case"lookalike":e=this.formAudience.get("type.lookALike.selectAudience")?.invalid||this.formAudience.get("type.lookAlike.reachUser")?.invalid}return this.formAudience.get("name")?.invalid||this.formAudience.get("description")?.invalid||e}setReachUser(){console.log("reachUser",this.formAudience.get("type.lookAlike.reachUser"))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(re),t.Y36(se),t.Y36(ne),t.Y36(Jt.H),t.Y36(tt.so),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-audience-create"]],features:[t.qOj],decls:165,vars:111,consts:[[1,"col-xl-12","pt-2","pb-2","dialog-header"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-user","me-1","fw-bold"],["mat-dialog-close","",1,"icon-close-dialog"],[1,"ph","ph-x"],[1,"mat-typography","p-2","dialog-content","fix-scroll"],[3,"formGroup"],[1,"mb-2"],[1,"form-label"],[1,"text-danger"],[1,"form-control-name"],["type","text","name","name","formControlName","name",1,"form-control",3,"ngClass","placeholder","blur","keydown.enter"],["class","validation-invalid-label mt-1",4,"ngIf"],[1,"form-control-feedback"],["type","text","name","description","formControlName","description",1,"form-control",3,"placeholder"],[1,""],[1,"form-group","form-select-2","form-control-feedback"],[1,"row"],[1,"col-12","col-xl-3"],["formControlName","selectedType",1,"form-control","select","select2-hidden-accessible","type-audience"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","type"],["formGroupName","segment",1,"mt-2","select-type-class",3,"ngClass"],[1,"form-group","mb-1","float-start","me-2","form-select-2","form-select-status","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-segment-audience"],[1,"select-type-class",3,"ngClass"],[1,"row","mb-2"],[1,"col-12","col-xl-3","mt-2"],[1,"form-group","float-start","me-2","form-select-2","w-100"],[1,"form-control","select","select2-hidden-accessible","group-select-target-user-audience"],[1,"col-xl-3","col-12","mt-2"],[1,"form-control","select","select2-hidden-accessible","group-select-type-url-audience"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-website-audience"],[1,"col-12"],[1,"select-type-class","mt-2",3,"ngClass"],[1,"form-group","mb-1","float-start","me-2","form-select-2","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-params-audience"],[1,"form-control-feedback","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-url-audience"],["formGroupName","upload",1,"row"],[1,"col-xl-6","col-12","mt-2"],[1,"form-group","float-start","me-2","form-select-2","form-select-status","w-100"],["formControlName","fileType",1,"form-control","select","select2-hidden-accessible","group-select-file-type-audience"],[1,"list-file","d-flex","flex-wrap","align-items-center"],[1,"upload-files","cursor-pointer"],["type","file",1,"form-control",3,"ngClass","accept","change"],[1,"label-selected-file"],["formGroupName","lookALike",1,"row"],[1,"form-control","select","select2-hidden-accessible","group-select-select-audience"],[1,"col-xl-2","col-4","mt-2","text-center"],[1,"form-label","mb-3"],[1,"col-xl-4","col-8","mt-2"],["type","number","max","100","min","10","formControlName","reachUser","name","reachUser",1,"form-control",3,"blur"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],["mat-dialog-close","",1,"btn","btn-danger","me-2"],[1,"ph-x","ms-1"],[1,"btn","btn-success",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[1,"validation-invalid-label","mt-1"],[4,"ngIf"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"label",8)(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"span",9),t._uU(15,"* "),t.qZA()()(),t.TgZ(16,"div",10)(17,"input",11),t.NdJ("blur",function(){return i.trimData(i.formAudience.get("name"))})("keydown.enter",function(I){return I.preventDefault()}),t.ALo(18,"translate"),t.qZA()(),t.YNc(19,ar,6,5,"div",12),t.qZA(),t.TgZ(20,"div",7)(21,"label",8)(22,"strong"),t._uU(23),t.ALo(24,"translate"),t.qZA()(),t.TgZ(25,"div",13)(26,"textarea",14),t.ALo(27,"translate"),t._uU(28,"                    "),t.qZA()(),t.YNc(29,pr,3,2,"div",12),t.qZA(),t.TgZ(30,"div",15)(31,"div",16)(32,"div",17)(33,"div",18)(34,"label",8)(35,"strong"),t._uU(36),t.ALo(37,"translate"),t.qZA()(),t.TgZ(38,"select",19),t.YNc(39,dr,2,2,"option",20),t.qZA()()()()(),t.TgZ(40,"div",21)(41,"div",22)(42,"label",8)(43,"strong"),t._uU(44),t.ALo(45,"translate"),t.TgZ(46,"span",9),t._uU(47,"* "),t.qZA()()(),t.TgZ(48,"div",23),t._UZ(49,"select",24),t.YNc(50,hr,2,1,"div",12),t.qZA()(),t.TgZ(51,"div",25)(52,"div",26)(53,"div",27)(54,"label",8)(55,"strong"),t._uU(56),t.ALo(57,"translate"),t.qZA()(),t.TgZ(58,"div",28)(59,"select",29),t.YNc(60,mr,2,2,"option",20),t.qZA()()(),t.TgZ(61,"div",30)(62,"div",25)(63,"label",8)(64,"strong"),t._uU(65),t.ALo(66,"translate"),t.qZA()(),t.TgZ(67,"div",28)(68,"select",31),t.YNc(69,gr,2,2,"option",20),t.qZA()()()()(),t.TgZ(70,"div",17)(71,"div",25)(72,"label",8)(73,"strong"),t._uU(74),t.ALo(75,"translate"),t.TgZ(76,"span",9),t._uU(77,"*"),t.qZA()()(),t.TgZ(78,"div",28),t._UZ(79,"select",32),t.YNc(80,vr,2,1,"div",12),t.qZA()()(),t.TgZ(81,"div",33)(82,"div",34)(83,"label",8)(84,"strong"),t._uU(85),t.ALo(86,"translate"),t.TgZ(87,"span",9),t._uU(88,"*"),t.qZA()()(),t.TgZ(89,"div",35),t._UZ(90,"select",36),t.YNc(91,yr,2,1,"div",12),t.qZA()(),t.TgZ(92,"div",25)(93,"label",8)(94,"strong"),t._uU(95,"Url "),t.TgZ(96,"span",9),t._uU(97,"*"),t.qZA()()(),t.TgZ(98,"div",37),t._UZ(99,"select",38),t.YNc(100,br,2,1,"div",12),t.YNc(101,Ar,3,3,"div",12),t.qZA()()()(),t.TgZ(102,"div",25)(103,"div",39)(104,"div",40)(105,"label",8)(106,"strong"),t._uU(107),t.ALo(108,"translate"),t.qZA()(),t.TgZ(109,"div",41)(110,"select",42),t.YNc(111,Cr,2,2,"option",20),t.qZA()()(),t.TgZ(112,"div",40)(113,"label",8)(114,"strong"),t._uU(115),t.ALo(116,"translate"),t.TgZ(117,"span",9),t._uU(118,"*"),t.qZA()()(),t.TgZ(119,"div",43)(120,"div",44)(121,"input",45),t.NdJ("change",function(I){return i.onFileChange(I)}),t.qZA(),t._uU(122),t.ALo(123,"translate"),t.qZA(),t.TgZ(124,"div",46),t._uU(125),t.ALo(126,"translate"),t.qZA()(),t.YNc(127,wr,3,3,"div",12),t.YNc(128,Tr,3,3,"div",12),t.YNc(129,kr,2,1,"div",12),t.qZA()()(),t.TgZ(130,"div",25)(131,"div",47)(132,"div",40)(133,"label",8)(134,"strong"),t._uU(135),t.ALo(136,"translate"),t.TgZ(137,"span",9),t._uU(138,"*"),t.qZA()()(),t.TgZ(139,"div",41),t._UZ(140,"select",48),t.YNc(141,Zr,2,1,"div",12),t.qZA()(),t.TgZ(142,"div",49)(143,"p",50)(144,"strong"),t._uU(145),t.ALo(146,"translate"),t.qZA()(),t.TgZ(147,"strong"),t._uU(148),t.ALo(149,"number"),t.qZA()(),t.TgZ(150,"div",51)(151,"label",8)(152,"strong"),t._uU(153),t.ALo(154,"translate"),t.qZA()(),t.TgZ(155,"input",52),t.NdJ("blur",function(I){return i.onBlurReachUser(I)}),t.qZA()()()()()()(),t.TgZ(156,"div",53)(157,"button",54),t._uU(158),t.ALo(159,"translate"),t._UZ(160,"i",55),t.qZA(),t.TgZ(161,"button",56),t.NdJ("click",function(){return i.onSave()}),t._uU(162),t.ALo(163,"translate"),t._UZ(164,"i",57),t.qZA()()),2&e){let f,I,F,st,ut,xt,At,Dt,Pt,Yt,Gt,ae,le,zt,ce,Wt,pe;t.xp6(3),t.hij(" ",t.lcZ(4,49,"modules.dmp.audience.createAudience")," "),t.xp6(5),t.Q6J("formGroup",i.formAudience),t.xp6(4),t.hij("",t.lcZ(13,51,"modules.dmp.audience.name")," "),t.xp6(5),t.s9C("placeholder",t.lcZ(18,53,"modules.dmp.audience.placeHolder.name")),t.Q6J("ngClass",t.VKq(91,Ze,(null==(f=i.formAudience.get("name"))?null:f.invalid)&&((null==(f=i.formAudience.get("name"))?null:f.dirty)||(null==(f=i.formAudience.get("name"))?null:f.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(I=i.formAudience.get("name"))?null:I.invalid)&&((null==(I=i.formAudience.get("name"))?null:I.dirty)||(null==(I=i.formAudience.get("name"))?null:I.touched))),t.xp6(4),t.Oqu(t.lcZ(24,55,"modules.dmp.audience.description")),t.xp6(3),t.s9C("placeholder",t.lcZ(27,57,"modules.dmp.audience.placeHolder.description")),t.xp6(3),t.Q6J("ngIf",(null==(F=i.formAudience.get("description"))?null:F.invalid)&&((null==(F=i.formAudience.get("description"))?null:F.dirty)||(null==(F=i.formAudience.get("description"))?null:F.touched))),t.xp6(7),t.Oqu(t.lcZ(37,59,"modules.dmp.audience.type")),t.xp6(3),t.Q6J("ngForOf",i.listType),t.xp6(2),t.Q6J("ngClass",t.VKq(93,Kt,"segment"===(null==(st=i.formAudience.get("selectedType"))?null:st.value))),t.xp6(3),t.hij("",t.lcZ(45,61,"modules.dmp.audience.segment")," "),t.xp6(6),t.Q6J("ngIf",(null==(ut=i.formAudience.get("type.segment.value"))?null:ut.invalid)&&(null==(ut=i.formAudience.get("type.segment.value"))?null:ut.touched)),t.xp6(1),t.Q6J("ngClass",t.VKq(95,Kt,"custom"===(null==(xt=i.formAudience.get("selectedType"))?null:xt.value))),t.xp6(5),t.Oqu(t.lcZ(57,63,"modules.dmp.audience.targetUser")),t.xp6(4),t.Q6J("ngForOf",i.listTargetUser),t.xp6(2),t.Q6J("ngClass",t.VKq(97,Kt,"visit-webpage"===i.getTargetUser())),t.xp6(3),t.Oqu(t.lcZ(66,65,"modules.dmp.audience.typeUrl")),t.xp6(4),t.Q6J("ngForOf",i.listTypeUrl),t.xp6(2),t.Q6J("ngClass",t.VKq(99,Kt,"visit-website"===i.getTargetUser()||"visit-webpage"===i.getTargetUser()&&"exactly"!==i.getTypeUrl())),t.xp6(3),t.hij("",t.lcZ(75,67,"modules.dmp.audience.website")," "),t.xp6(6),t.Q6J("ngIf",(null==(At=i.formAudience.get("type.custom.domain"))?null:At.invalid)&&(null==(At=i.formAudience.get("type.custom.domain"))?null:At.touched)),t.xp6(2),t.Q6J("ngClass",t.VKq(101,Kt,"visit-webpage"===i.getTargetUser()&&"contains"===i.getTypeUrl())),t.xp6(3),t.hij("",t.lcZ(86,69,"modules.dmp.audience.params")," "),t.xp6(6),t.Q6J("ngIf",(null==(Dt=i.formAudience.get("type.custom.params"))?null:Dt.invalid)&&(null==(Dt=i.formAudience.get("type.custom.params"))?null:Dt.touched)),t.xp6(1),t.Q6J("ngClass",t.VKq(103,Kt,"visit-webpage"===i.getTargetUser()&&"exactly"===i.getTypeUrl())),t.xp6(8),t.Q6J("ngIf",(null==(Pt=i.formAudience.get("type.custom.url"))?null:Pt.invalid)&&(null==(Pt=i.formAudience.get("type.custom.url"))?null:Pt.touched)&&!i.validateUrl),t.xp6(1),t.Q6J("ngIf",i.validateUrl),t.xp6(1),t.Q6J("ngClass",t.VKq(105,Kt,"upload"===(null==(Yt=i.formAudience.get("selectedType"))?null:Yt.value))),t.xp6(5),t.Oqu(t.lcZ(108,71,"modules.dmp.audience.fileType")),t.xp6(4),t.Q6J("ngForOf",i.listFileType),t.xp6(4),t.hij("",t.lcZ(116,73,"modules.dmp.audience.chooseFile")," (.txt, .csv) "),t.xp6(6),t.Q6J("ngClass",t.VKq(107,Ze,(null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.invalid)&&((null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.dirty)||(null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.touched))))("accept",".txt, .csv"),t.xp6(1),t.hij(" ",t.lcZ(123,75,"modules.dmp.audience.chooseFile")," "),t.xp6(3),t.hij(" ",i.selectedFileUploadName?i.selectedFileUploadName:t.lcZ(126,77,"modules.dmp.audience.noFileChosen")," "),t.xp6(2),t.Q6J("ngIf",null==i.formAudience||null==(ae=i.formAudience.get("type.upload.file"))?null:ae.hasError("invalidFileType")),t.xp6(1),t.Q6J("ngIf",null==i.formAudience||null==(le=i.formAudience.get("type.upload.file"))?null:le.hasError("fileSize")),t.xp6(1),t.Q6J("ngIf",(null==i.formAudience||null==(zt=i.formAudience.get("type.upload.file"))?null:zt.invalid)&&((null==(zt=i.formAudience.get("type.upload.file"))?null:zt.dirty)||(null==(zt=i.formAudience.get("type.upload.file"))?null:zt.touched))),t.xp6(1),t.Q6J("ngClass",t.VKq(109,Kt,"lookalike"===(null==(ce=i.formAudience.get("selectedType"))?null:ce.value))),t.xp6(5),t.hij("",t.lcZ(136,79,"modules.dmp.audience.selectAudience")," "),t.xp6(6),t.Q6J("ngIf",(null==(Wt=i.formAudience.get("type.lookALike.selectAudience"))?null:Wt.invalid)&&(null==(Wt=i.formAudience.get("type.lookALike.selectAudience"))?null:Wt.touched)),t.xp6(4),t.Oqu(t.lcZ(146,81,"modules.dmp.audience.user")),t.xp6(3),t.Oqu(t.lcZ(149,83,null==(pe=i.formAudience.get("type.lookALike.users"))?null:pe.value)),t.xp6(5),t.hij("",t.lcZ(154,85,"modules.dmp.audience.reachUser")," (%)"),t.xp6(5),t.hij("",t.lcZ(159,87,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.checkInvalid()),t.xp6(1),t.hij(" ",t.lcZ(163,89,"common.button.save")," ")}},dependencies:[_t.mk,_t.sg,_t.O5,tt.ZT,j._Y,j.YN,j.Kr,j.Fj,j.wV,j.EJ,j.JJ,j.JL,j.qQ,j.Fd,j.sg,j.u,j.x0,_t.JJ,M.X$],styles:[".custom-message{color:#999;padding:8px 12px}  app-dmp-audience-create .select-no-suggestions{border-radius:var(--s2-border-radius)!important}  app-dmp-audience-create .fix-scroll{overflow-x:hidden;overflow-y:auto;max-height:625px}  app-dmp-audience-create .select-type-class{display:none}  app-dmp-audience-create .list-file{border:1px solid #D1D5DB;border-radius:6px;position:relative;display:flex;overflow:hidden}  app-dmp-audience-create .list-file .upload-files{width:30%;height:40px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#333;background-color:#f3f4f6;border-right:1px solid #D1D5DB}  app-dmp-audience-create .list-file .upload-files input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:2}  app-dmp-audience-create .list-file .label-selected-file{width:calc(100% - 114px);padding:9px 15px}  app-dmp-audience-create .ng-invalid-custom .select2.select2-container .selection .select2-selection.select2-selection--multiple{border-color:#ef4444!important}  app-dmp-audience-create input.ng-invalid{border-color:#d1d5db!important}  app-dmp-audience-create input.ng-invalid,   app-dmp-audience-create textarea.ng-invalid{border-color:#d1d5db!important}  app-dmp-audience-create input.ng-invalid-custom,   app-dmp-audience-create textarea.ng-invalid-custom{border-color:#ef4444!important}"]}),L})();function Mr(n,L){if(1&n&&(t.ynx(0),t.TgZ(1,"span",59),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.BQk()),2&n){const g=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"modules.dmp.audience.createBy"),": ",null==g.dataAudience.userCreateInfo?null:g.dataAudience.userCreateInfo.username,"")}}function Ir(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameMinLength")," "))}function Er(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function Ur(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameMaxLength")," "))}function Pr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.nameIsRequired")," "))}function Nr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Ir,3,3,"div",10),t.YNc(2,Er,3,3,"div",10),t.YNc(3,Ur,3,3,"div",10),t.YNc(4,Pr,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e,i,f,I;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("name"))||null==e.errors?null:e.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(i=g.formAudience.get("name"))||null==i.errors?null:i.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(f=g.formAudience.get("name"))||null==f.errors?null:f.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.formAudience.get("name"))||null==I.errors?null:I.errors.required)}}function Or(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.notHtmlTag")," "))}function jr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.descriptionMaxLength")," "))}function qr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Or,3,3,"div",10),t.YNc(2,jr,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e,i;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("description"))||null==e.errors?null:e.errors.htmlTag),t.xp6(1),t.Q6J("ngIf",null==(i=g.formAudience.get("description"))||null==i.errors?null:i.errors.maxlength)}}function Fr(n,L){if(1&n&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function Br(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.segmentRequired")," "))}function Yr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Br,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.segment.value"))||null==e.errors?null:e.errors.required)}}function Gr(n,L){if(1&n&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function Rr(n,L){if(1&n&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function Hr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.websiteRequired")," "))}function Jr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Hr,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.domain"))||null==e.errors?null:e.errors.required)}}function zr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.paramsRequired")," "))}function Qr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,zr,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.params"))||null==e.errors?null:e.errors.required)}}function Vr(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.urlRequired")," "))}function Wr(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,Vr,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.custom.url"))||null==e.errors?null:e.errors.required)}}function Xr(n,L){1&n&&(t.TgZ(0,"div",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.urlPattern")," "))}function Kr(n,L){if(1&n&&(t.TgZ(0,"option",61),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.Q6J("value",g.value),t.xp6(1),t.Oqu(g.label)}}function $r(n,L){1&n&&(t.TgZ(0,"div",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.fileTypeFormat")," "))}function ts(n,L){1&n&&(t.TgZ(0,"div",60),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.maxFileSize")," "))}function es(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.fileRequired")," "))}function is(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,es,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.upload.file"))||null==e.errors?null:e.errors.required)}}function ns(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.validate.selectAudienceRequired")," "))}function os(n,L){if(1&n&&(t.TgZ(0,"div",60),t.YNc(1,ns,3,3,"div",10),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.formAudience.get("type.lookALike.selectAudience"))||null==e.errors?null:e.errors.required)}}const Le=function(n){return{"ng-invalid-custom":n}},$t=function(n){return{"d-block":n}};let rs=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At,Dt,Pt){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.globalsService=F,this.audienceService=st,this.websiteService=ut,this.segmentService=xt,this.ruleCheckerService=At,this.dialogRef=Dt,this.formBuilder=Pt,this.listType=this.globalsService.audience.listType,this.listTargetUser=this.globalsService.audience.listTargetUser,this.listFileType=this.globalsService.audience.listFileType,this.listTypeUrl=this.globalsService.audience.listTypeUrl,this.selectedFileUploadName="",this.loadingState=!1,this.dataAudience=new ve.q,this.urlPattern="https?://.+",this.validateUrl=!1,this.maxSizeFile=this.globalsService.audience.file.maxFileSize}ngOnInit(){this.initForm(),setTimeout(()=>{this.getDetailAudience()},0)}ngAfterViewInit(){}getDetailAudience(){this.loadingState=!0,this.audienceService.detail(this.data.audience?.id).subscribe(e=>{this.loadingState=!1,1===e.status&&(this.dataAudience=e.data,this.setDataEdit())})}initForm(){let e;switch(this.data.audience?.type){case 0:e="segment";break;case 1:e="custom";break;case 2:e="lookalike";break;case 3:e="upload"}this.formAudience=this.formBuilder.group({name:[this.data.audience.name,[u(4,150),a]],description:[this.data.audience.description,[j.kI.maxLength(512),a]],selectedType:[e],type:this.formBuilder.group({segment:this.formBuilder.group({value:this.formBuilder.array([],j.kI.required)}),custom:this.formBuilder.group({targetUser:["visit-website"],domain:this.formBuilder.array([],j.kI.required),typeUrl:["contains"],url:this.formBuilder.array([],[j.kI.required]),params:this.formBuilder.array([],j.kI.required)}),upload:this.formBuilder.group({fileType:[1],file:["",[j.kI.required,c(["txt","csv"],this.maxSizeFile)]]}),lookALike:this.formBuilder.group({selectAudience:["",j.kI.required],reachUser:[10],users:new j.NI(0)})})}),this.formAudience?.get("type.custom.targetUser")?.valueChanges.pipe((0,ee.b)(0)).subscribe(i=>{switch(i){case"visit-website":(!this.listWebsite||0===this.listWebsite?.length)&&this.getDataWebsite(),this.initWebsiteAudience();break;case"visit-webpage":this.initParamsAudience(),this.initTypeUrlAudience()}}),this.formAudience?.get("type")?.get("custom")?.get("typeUrl")?.valueChanges.pipe((0,ee.b)(0)).subscribe(i=>{switch(i){case"contains":this.initParamsAudience(),(!this.listWebsite||0===this.listWebsite?.length)&&this.getDataWebsite(),this.initWebsiteAudience();break;case"exactly":this.initUrlAudience()}})}onBlurReachUser(e){const f=Number(e.target.value);f<10?this.formAudience.get("type.lookALike.reachUser")?.setValue(10):f>100&&this.formAudience.get("type.lookALike.reachUser")?.setValue(100)}setDataEdit(){switch(this.dataAudience?.type){case 0:this.listSegment||this.ruleCheckerService.isAllow("dmp/segment/list")&&this.getDataSegment(),this.setDataSegment();break;case 3:this.formAudience.get("type.upload.fileType")?.setValue(this.dataAudience?.uploadType);break;case 1:let i;switch(this.dataAudience?.customTargetType){case 1:i="visit-website";break;case 3:i="visit-webpage"}if(this.getTargetUser()!==i&&this.formAudience.get("type.custom.targetUser")?.setValue(i),"visit-website"===i)this.listWebsite||this.getDataWebsite(),this.setDataWebSite();else if("visit-webpage"===i){let f;switch(this.dataAudience.customWebpageUrlType){case 1:f="contains",this.formAudience.get("type.custom.typeUrl")?.value!==f&&this.formAudience.get("type.custom.typeUrl")?.setValue(f),this.setDataParams(),(!this.listWebsite||0===this.listWebsite?.length)&&this.getDataWebsite(),this.setDataWebSite();break;case 2:f="exactly",this.formAudience.get("type.custom.typeUrl")?.setValue(f),this.setDataUrl()}}break;case 2:this.listSelectAudience||this.getDataAudience(),this.formAudience.get("type.lookALike.selectAudience")?.setValue(this.dataAudience?.lookalikeAudienceBase),this.formAudience.get("type.lookALike.users")?.setValue(this.dataAudience?.activeUser),this.formAudience.get("type.lookALike.reachUser")?.setValue(this.dataAudience?.lookalikeUserReach)}this.initSelect2()}setDataWebSite(){this.dataAudience.dataWebsite?.forEach(e=>{this.getCustomWebsiteForm()?.push(new j.NI(e))})}trimData(e){e.setValue(e.value.trim().replace(/\s+/g," "))}setDataSegment(){this.dataAudience.dataSegments?.forEach(e=>{this.getCustomSegmentForm()?.push(new j.NI(e?.id))})}setDataParams(){this.dataAudience.customWebpageParam?.forEach(e=>{this.getCustomParamsForm()?.push(new j.NI(e))})}setDataUrl(){this.dataAudience?.customWebpageUrl?.forEach(e=>{this.getCustomUrlForm()?.push(new j.NI(e))})}getTargetUser(){return this.formAudience?.get("type.custom.targetUser")?.value}getTypeUrl(){return this.formAudience?.get("type.custom.typeUrl")?.value}initSelect2(){this.initTypeAudience(),this.initFileTypeAudience(),this.initTargetUserAudience(),this.initSegmentAudience(),this.initSelectAudience(),this.initWebsiteAudience(),this.initParamsAudience(),this.initUrlAudience(),this.initTypeUrlAudience()}setDataInitSelectAudience(){const e=[{id:0,text:this.dataAudience?.audienceLookalike?.name??this.translate.instant("modules.dmp.audience.chooseAudienceSelect")}];if(this.listSelectAudience&&this.listSelectAudience.length>0)for(const i of this.listSelectAudience)e.push({id:i?.id,text:i?.name??""});return e}initSelectAudience(){const e=this.setDataInitSelectAudience();$(".group-select-select-audience").select2({data:e,ajax:{delay:700,transport:(i,f,I)=>{const F=this.dataAudience?.audienceLookalike||null,st=i.data.term;if(this.shouldCallApi(st))this.debounce(()=>{this.getDataAudience(st,!0).then(ut=>{f({results:ut})},ut=>I(ut))},500);else{let ut=this.listSelectAudience||[];F&&!ut.find(xt=>xt.id==F.id)&&(ut=[{id:F.id,name:F.name},...ut]),f({results:ut})}},processResults:i=>{let f;return f=[],i.results?.map(I=>f.push({id:I.id,text:I.text??I.name,activeUser:I.activeUser})),this.listSelectAudienceSearch=f,{results:f}}},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")}}).on("select2:select",i=>{const f=i.params.data?.id;let I;this.formAudience.get("type.lookALike.selectAudience")?.setValue(f),I=f===this.dataAudience?.audienceLookalike?.id?this.dataAudience?.activeUser:this.listSelectAudienceSearch?.find(F=>F.id===f)?.activeUser,this.formAudience.get("type.lookALike.users")?.setValue(I)}).on("select2:open",()=>{const i=document.querySelector(".select2-search__field");i&&!this.listSelectAudience&&(this.searchFieldSubscription&&this.searchFieldSubscription.unsubscribe(),this.searchFieldSubscription=(0,ke.R)(i,"input").pipe((0,x.U)(f=>f.target.value),(0,ee.b)(300)).subscribe(f=>{this.shouldCallApi(f)&&this.getDataAudience(f,!0)}))}).on("select2:closing",()=>{this.listSelectAudience=this.listSelectAudienceSuggest})}debounce(e,i){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout(e,i)}setDataInitSegmentAudience(){let e=[];const i=this.dataAudience.dataSegments;if(i?.forEach(f=>{e.push({id:f?.id,text:f?.name??"",selected:!0})}),this.listSegment&&this.listSegment.length>0)for(const f of this.listSegment)e.push({id:f.id,text:f?.title,selected:i?.some(I=>I.id===f.id)});return e}initSegmentAudience(){const e=this.setDataInitSegmentAudience();this.ruleCheckerService.isAllow("dmp/segment/list")?$(".group-select-segment-audience").select2({data:e,ajax:{delay:200,transport:(i,f,I)=>{const F=i.data.term;F||""===F?this.getDataSegment(F,!0).then(st=>{f({results:st})},st=>I(st)):f({results:this.listSegment?.map(st=>({id:st.id,text:st.title}))})},processResults:i=>({results:i.results})},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")},placeholder:this.translate.instant("modules.dmp.audience.chooseSegment"),closeOnSelect:!1,escapeMarkup:function(i){return i},minimumResultsForSearch:10,minimumInputLength:0}).val(this.getCustomSegmentForm().value).trigger("change").on("select2:select",i=>{const f=i.params.data?.id;f&&!this.getCustomSegmentForm().value.includes(f)&&this.getCustomSegmentForm()?.push(new j.NI(f))}).on("select2:unselect",i=>{const f=i.params.data?.id,I=$(".group-select-segment-audience"),F=this.getCustomSegmentForm(),st=F.controls.findIndex(ut=>ut.value==Number(f));if(-1!==st&&F.removeAt(st),i.params.originalEvent){if("mouseup"===i.params.originalEvent.type){const ut=F.controls.map(At=>At.value.toString());I.val(ut).trigger("change"),$(".select2-results__option").each((At,Dt)=>{const Pt=$(Dt).text(),Yt=$(Dt).attr("id");(Pt===i.params.data.text||Yt===`select2-${f}-result`)&&$(Dt).attr("aria-selected","false")}),I.trigger("change.select2")}}else{const ut=F.controls.map(xt=>xt.value.toString());I.val(ut).trigger("change")}$(i.currentTarget).data("select2:selecting",!1)}).on("select2:selecting",i=>{$(i.currentTarget).data("select2:selecting",!0)}).on("select2:closing",i=>{this.listSegment=this.listSelectSegmentSuggest,this.getCustomSegmentForm().markAsTouched()}):$(".group-select-segment-audience").select2({data:[],placeholder:this.translate.instant("modules.dmp.audience.chooseSegment")})}initWebsiteAudience(){const e=[],i=this.getCustomWebsiteForm().value;if(i?.forEach(f=>{e.push({id:f,text:f??"",selected:!0})}),this.listWebsite&&this.listWebsite.length>0)for(const f of this.listWebsite)e.push({id:f?.name,text:f?.name??"",selected:i.includes(f.name)});$(".group-select-website-audience").select2({data:e,ajax:{delay:700,transport:(f,I,F)=>{const st=f.data.term;st?this.getDataWebsite(st,!0).then(ut=>{I({results:ut})},ut=>F(ut)):this.listWebsite&&this.listWebsite.length>0&&I({results:this.listWebsite?.map(ut=>({id:ut.name,text:ut.name}))})},processResults:f=>({results:f.results})},language:{searching:()=>this.translate.instant("common.loading"),noResults:()=>this.translate.instant("common.dataNotFound")},placeholder:this.translate.instant("modules.dmp.audience.chooseWebsite"),closeOnSelect:!1,escapeMarkup:function(f){return f},minimumResultsForSearch:10,minimumInputLength:0}).on("select2:select",f=>{const I=f.params.data?.id;I&&!this.getCustomWebsiteForm().value.includes(I)&&this.getCustomWebsiteForm()?.push(new j.NI(I))}).on("select2:unselect",f=>{const I=f.params.data?.id,F=this.getCustomWebsiteForm(),st=F.controls.findIndex(ut=>ut.value===I);-1!==st&&F.removeAt(st)}).on("select2:closing",f=>{this.listWebsite=this.listSelectWebsiteSuggest,this.getCustomWebsiteForm().markAsTouched()})}getDataWebsite(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=encodeURIComponent(e)),new Promise((I,F)=>{this.websiteService.get(f).subscribe(st=>{if(this.listWebsite=st.data??[],i)if(this.listWebsite&&this.listWebsite.length>0){const ut=this.listWebsite.map(xt=>({id:xt.name,text:xt.name}));I(ut)}else I([]);else this.listWebsite=st.data??[],this.listSelectWebsiteSuggest=st.data??[],this.initWebsiteAudience()},st=>{this.loadingState=!1,F(st)})})}getDataSegment(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=e),new Promise((I,F)=>{this.segmentService.get(f).subscribe(st=>{if(this.listSegment=st.data??[],i)if(this.listSegment&&this.listSegment.length>0){const ut=this.listSegment.map(xt=>({id:xt.id,text:xt.title}));I(ut)}else I([]);else this.listSegment=st.data??[],this.listSelectSegmentSuggest=st.data??[],this.initSegmentAudience()},st=>{this.loadingState=!1,F(st)})})}getDataAudience(e="",i=!1){const f={siteLoading:!1};return""!==e&&(f.keyword=encodeURIComponent(e)),new Promise((I,F)=>{this.audienceService.get(f).subscribe(st=>{if(this.listSelectAudience=st.data??[],i)if(this.listSelectAudience&&this.listSelectAudience.length>0){const ut=this.listSelectAudience.map(xt=>({id:xt.id,text:xt.name||"",activeUser:xt?.activeUser}));I(ut)}else I([]);else this.listSelectAudience=st.data??[],this.listSelectAudienceSuggest=st.data??[],this.initSelectAudience()},st=>{this.loadingState=!1,F(st)})})}onFileChange(e){const i=e.target;if(i.files&&i.files.length>0){const f=i.files[0];this.selectedFileUploadName=f?.name.length>20?f.name.substring(0,12)+"..."+f.name.slice(-8):f.name,this.formAudience.get("type.upload.file")?.setValue(f)}else this.formAudience.get("type.upload.file")?.setValue(null)}initTypeAudience(){$(".type-audience").select2({minimumResultsForSearch:1/0,width:"100%",selected:!0}).on("select2:opening",function(e){e.preventDefault()}).on("select2:select",e=>{const i=e.params.data;this.formAudience.get("selectedType")?.setValue(i?.id)})}initFileTypeAudience(){$(".group-select-file-type-audience").select2({minimumResultsForSearch:1/0,width:"100%",selected:!0}).on("select2:select",e=>{const i=e.params.data;this.formAudience.get("type.upload.fileType")?.setValue(i?.id)})}initTargetUserAudience(){$(".group-select-target-user-audience").select2({minimumResultsForSearch:1/0,width:"100%"}).val(this.getTargetUser()).trigger("change").on("select2:select",e=>{const i=e.params.data?.id;this.formAudience.get("type.custom.targetUser")?.setValue(i),"visit-website"===i?(this.formAudience.get("type.custom.typeUrl")?.setValue(this.getTypeUrl()),this.initWebsiteAudience()):(this.initParamsAudience(),this.initTypeUrlAudience(),this.initUrlAudience())})}getCustomWebsiteForm(){return this.formAudience.get("type.custom.domain")}getCustomSegmentForm(){return this.formAudience.get("type.segment.value")}getCustomParamsForm(){return this.formAudience.get("type.custom.params")}getCustomUrlForm(){return this.formAudience.get("type.custom.url")}initParamsAudience(){const e=$(".group-select-params-audience");e.select2({data:this.data.audience?.params??[],placeholder:this.translate.instant("modules.dmp.audience.placeHolder.params"),closeOnSelect:!0,tags:!0,tokenSeparators:[","," "],language:{noResults:()=>this.translate.instant("modules.dmp.audience.placeHolder.paramsNoResult")}}),this.getCustomParamsForm().value.forEach(i=>{if(!e.find(`option[value="${i}"]`).length){const f=new Option(i,i,!0,!0);e.append(f)}}),e.val(this.getCustomParamsForm().value).trigger("change"),e.on("select2:select",i=>{const f=i.params.data?.id;this.getCustomParamsForm()?.controls.some(F=>F.value===f)||this.getCustomParamsForm()?.push(new j.NI(f))}),e.on("select2:unselect",i=>{const f=i.params.data?.id,I=this.getCustomParamsForm(),F=I.controls.findIndex(st=>st.value===f);-1!==F&&I.removeAt(F)}),e.on("select2:closing",i=>{this.getCustomParamsForm().markAsTouched()})}initUrlAudience(){const e=$(".group-select-url-audience");e.select2({placeholder:this.translate.instant("modules.dmp.audience.placeHolder.url"),closeOnSelect:!0,tags:!0,tokenSeparators:[","," "],dropdownCssClass:"no-suggestions",containerCssClass:"select-no-suggestions",minimumResultsForSearch:1/0,language:{noResults:()=>this.translate.instant("modules.dmp.audience.placeHolder.urlNoResult")}}),this.getCustomUrlForm().value.forEach(i=>{if(!e.find(`option[value="${i}"]`).length){const f=new Option(i,i,!0,!0);e.append(f)}}),e.val(this.getCustomUrlForm().value).trigger("change"),e.on("select2:select",i=>{const f=i.params.data?.id,I=$(i.target);if(new RegExp(this.urlPattern).test(f))this.validateUrl=!1,this.getCustomUrlForm()?.controls.some(st=>st.value===f)||this.getCustomUrlForm()?.push(new j.NI(f)),setTimeout(()=>{I.trigger("change").trigger("select2:close")},50);else{this.validateUrl=!0;const st=I.val().filter(ut=>ut!==f);I.val(st).trigger("change")}}),e.on("select2:unselect",i=>{const f=i.params.data?.id,I=this.getCustomUrlForm(),F=I.controls.findIndex(st=>st.value===f);-1!==F&&I.removeAt(F)}),e.on("select2:closing",i=>{this.getCustomUrlForm().markAsTouched()})}initTypeUrlAudience(){$(".group-select-type-url-audience").select2({minimumResultsForSearch:1/0,width:"100%",selected:!0}).val(this.getTypeUrl()).trigger("change").on("select2:select",e=>{const i=e.params.data?.id;this.formAudience.get("type.custom.typeUrl")?.setValue(i)})}shouldCallApi(e){return!this.listSelectAudience||e&&e.trim().length>=0||""===e}onSave(){let e={name:this.formAudience.get("name")?.value?.trim(),description:this.formAudience.get("description")?.value};switch(e.type=this.formAudience.get("selectedType")?.value,this.formAudience.get("selectedType")?.value){case"segment":e.segments=this.formAudience.get("type.segment.value")?.value?.join(",");break;case"upload":const i=new FormData;i.append("description",this.formAudience.get("description")?.value),i.append("name",this.formAudience.get("name")?.value),i.append("type",this.formAudience.get("selectedType")?.value),i.append("uploadType",this.formAudience.get("type.upload.fileType")?.value),i.append("file",this.formAudience.get("type.upload.file")?.value),e=i;break;case"custom":"visit-website"===this.formAudience.get("type.custom.targetUser")?.value?(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.domains=this.formAudience.get("type.custom.domain")?.value?.join(",")):"contains"===this.getTypeUrl()?(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.typeUrl=this.formAudience.get("type.custom.typeUrl")?.value,e.domains=this.formAudience.get("type.custom.domain")?.value?.join(","),e.keywordParams=this.formAudience.get("type.custom.params")?.value?.join(",")):"exactly"===this.getTypeUrl()&&(e.typeTarget=this.formAudience.get("type.custom.targetUser")?.value,e.typeUrl=this.formAudience.get("type.custom.typeUrl")?.value,e.urls=this.formAudience.get("type.custom.url")?.value?.join(","));break;case"lookalike":e.reachUser=this.formAudience.get("type.lookALike.reachUser")?.value,e.audiences=String(this.formAudience.get("type.lookALike.selectAudience")?.value)}this.audienceService.update(e,this.dataAudience?.id).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.audience.notify.updateSuccess")]),void this.dialogRef.close(!0);AppNoty.error([this.translate.instant("modules.dmp.audience.notify.createFailed")])})}checkInvalid(){let e;switch(this.formAudience?.get("selectedType")?.value){case"segment":e=this.formAudience.get("type.segment.value")?.invalid;break;case"upload":e=this.formAudience.get("type.upload.file")?.invalid;break;case"custom":"visit-website"===this.formAudience.get("type.custom.targetUser")?.value?e=this.formAudience.get("type.custom.domain")?.invalid:"contains"===this.getTypeUrl()?e=this.formAudience.get("type.custom.domain")?.invalid||this.formAudience.get("type.custom.params")?.invalid:"exactly"===this.getTypeUrl()&&(e=this.formAudience.get("type.custom.url")?.invalid);break;case"lookalike":e=this.formAudience.get("type.lookALike.selectAudience")?.invalid}return this.formAudience.get("name")?.invalid||this.formAudience.get("description")?.invalid||e}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(re),t.Y36(se),t.Y36(ne),t.Y36(Jt.H),t.Y36(tt.so),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-audience-edit"]],features:[t.qOj],decls:166,vars:112,consts:[[1,"col-xl-12","pt-2","pb-2","dialog-header"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-user","me-1","fw-bold"],["mat-dialog-close","",1,"icon-close-dialog"],[1,"ph","ph-x"],[1,"mat-typography","p-2","dialog-content","fix-scroll"],[3,"formGroup"],[1,"mb-2"],[1,"form-label","d-flex","justify-content-between"],[1,"text-danger"],[4,"ngIf"],[1,"form-control-name"],["type","text","name","name","formControlName","name",1,"form-control",3,"ngClass","placeholder","blur","keydown.enter"],["class","validation-invalid-label mt-1",4,"ngIf"],[1,"form-label"],[1,"form-control-feedback"],["type","text","name","description","formControlName","description",1,"form-control",3,"placeholder"],[1,"form-group","form-select-2","form-control-feedback"],[1,"row"],[1,"col-12","col-xl-3","select-type"],["formControlName","selectedType",1,"form-control","select","select2-hidden-accessible","type-audience","disabled-type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","type"],["formGroupName","segment",1,"mt-2","select-type-class",3,"ngClass"],[1,"form-group","mb-1","float-start","me-2","form-select-2","form-select-status","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-segment-audience"],[1,"select-type-class",3,"ngClass"],[1,"col-12","col-xl-3","mt-2"],[1,"form-group","float-start","me-2","form-select-2","w-100"],[1,"form-control","select","select2-hidden-accessible","group-select-target-user-audience"],[1,"col-xl-3","col-12","mt-2"],[1,"form-control","select","select2-hidden-accessible","group-select-type-url-audience"],[1,"row","mt-2"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-website-audience"],[1,"col-12"],[1,"select-type-class","mt-2",3,"ngClass"],[1,"form-group","mb-1","float-start","me-2","form-select-2","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-params-audience"],[1,"form-control-feedback","w-100"],["multiple","",1,"form-control","select","select2-hidden-accessible","group-select-url-audience"],["formGroupName","upload",1,"row"],[1,"col-xl-6","col-12","mt-2"],[1,"form-group","float-start","me-2","form-select-2","form-select-status","w-100"],["formControlName","fileType",1,"form-control","select","select2-hidden-accessible","group-select-file-type-audience"],[1,"list-file","d-flex","flex-wrap","align-items-center"],[1,"upload-files","cursor-pointer"],["type","file",1,"form-control",3,"ngClass","accept","change"],[1,"label-selected-file"],["formGroupName","lookALike",1,"row"],[1,"form-control","select","select2-hidden-accessible","group-select-select-audience"],[1,"col-xl-2","col-4","text-center","mt-2"],[1,"form-label","mb-3"],[1,"col-xl-4","col-8","mt-2"],["type","number","max","100","min","10","formControlName","reachUser","name","reachUser",1,"form-control",3,"blur"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],["mat-dialog-close","",1,"btn","btn-danger","me-2"],[1,"ph-x","ms-1"],[1,"btn","btn-success",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[1,"fs-sm"],[1,"validation-invalid-label","mt-1"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"form",6)(9,"div",7)(10,"label",8)(11,"strong"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"span",9),t._uU(15,"* "),t.qZA()(),t.YNc(16,Mr,4,4,"ng-container",10),t.qZA(),t.TgZ(17,"div",11)(18,"input",12),t.NdJ("blur",function(){return i.trimData(i.formAudience.get("name"))})("keydown.enter",function(I){return I.preventDefault()}),t.ALo(19,"translate"),t.qZA()(),t.YNc(20,Nr,5,4,"div",13),t.qZA(),t.TgZ(21,"div",7)(22,"label",14)(23,"strong"),t._uU(24),t.ALo(25,"translate"),t.qZA()(),t.TgZ(26,"div",15)(27,"textarea",16),t.ALo(28,"translate"),t._uU(29,"                    "),t.qZA()(),t.YNc(30,qr,3,2,"div",13),t.qZA(),t.TgZ(31,"div")(32,"div",17)(33,"div",18)(34,"div",19)(35,"label",14)(36,"strong"),t._uU(37),t.ALo(38,"translate"),t.qZA()(),t.TgZ(39,"select",20),t.YNc(40,Fr,2,2,"option",21),t.qZA()()()()(),t.TgZ(41,"div",22)(42,"div",23)(43,"label",14)(44,"strong"),t._uU(45),t.ALo(46,"translate"),t.TgZ(47,"span",9),t._uU(48,"*"),t.qZA()()(),t.TgZ(49,"div",24),t._UZ(50,"select",25),t.YNc(51,Yr,2,1,"div",13),t.qZA()(),t.TgZ(52,"div",26)(53,"div",18)(54,"div",27)(55,"label",14)(56,"strong"),t._uU(57),t.ALo(58,"translate"),t.qZA()(),t.TgZ(59,"div",28)(60,"select",29),t.YNc(61,Gr,2,2,"option",21),t.qZA()()(),t.TgZ(62,"div",30)(63,"div",26)(64,"label",14)(65,"strong"),t._uU(66),t.ALo(67,"translate"),t.qZA()(),t.TgZ(68,"div",28)(69,"select",31),t.YNc(70,Rr,2,2,"option",21),t.qZA()()()()(),t.TgZ(71,"div",32)(72,"div",26)(73,"label",14)(74,"strong"),t._uU(75),t.ALo(76,"translate"),t.TgZ(77,"span",9),t._uU(78,"*"),t.qZA()()(),t.TgZ(79,"div",28),t._UZ(80,"select",33),t.YNc(81,Jr,2,1,"div",13),t.qZA()()(),t.TgZ(82,"div",34)(83,"div",35)(84,"label",14)(85,"strong"),t._uU(86),t.ALo(87,"translate"),t.TgZ(88,"span",9),t._uU(89,"*"),t.qZA()()(),t.TgZ(90,"div",36),t._UZ(91,"select",37),t.YNc(92,Qr,2,1,"div",13),t.qZA()(),t.TgZ(93,"div",26)(94,"label",14)(95,"strong"),t._uU(96,"Url "),t.TgZ(97,"span",9),t._uU(98,"*"),t.qZA()()(),t.TgZ(99,"div",38),t._UZ(100,"select",39),t.YNc(101,Wr,2,1,"div",13),t.YNc(102,Xr,3,3,"div",13),t.qZA()()()(),t.TgZ(103,"div",26)(104,"div",40)(105,"div",41)(106,"label",14)(107,"strong"),t._uU(108),t.ALo(109,"translate"),t.qZA()(),t.TgZ(110,"div",42)(111,"select",43),t.YNc(112,Kr,2,2,"option",21),t.qZA()()(),t.TgZ(113,"div",41)(114,"label",14)(115,"strong"),t._uU(116),t.ALo(117,"translate"),t.TgZ(118,"span",9),t._uU(119,"*"),t.qZA()()(),t.TgZ(120,"div",44)(121,"div",45)(122,"input",46),t.NdJ("change",function(I){return i.onFileChange(I)}),t.qZA(),t._uU(123),t.ALo(124,"translate"),t.qZA(),t.TgZ(125,"div",47),t._uU(126),t.ALo(127,"translate"),t.qZA()(),t.YNc(128,$r,3,3,"div",13),t.YNc(129,ts,3,3,"div",13),t.YNc(130,is,2,1,"div",13),t.qZA()()(),t.TgZ(131,"div",26)(132,"div",48)(133,"div",41)(134,"label",14)(135,"strong"),t._uU(136),t.ALo(137,"translate"),t.TgZ(138,"span",9),t._uU(139,"*"),t.qZA()()(),t.TgZ(140,"div",42),t._UZ(141,"select",49),t.YNc(142,os,2,1,"div",13),t.qZA()(),t.TgZ(143,"div",50)(144,"p",51)(145,"strong"),t._uU(146),t.ALo(147,"translate"),t.qZA()(),t.TgZ(148,"strong"),t._uU(149),t.ALo(150,"number"),t.qZA()(),t.TgZ(151,"div",52)(152,"label",14)(153,"strong"),t._uU(154),t.ALo(155,"translate"),t.qZA()(),t.TgZ(156,"input",53),t.NdJ("blur",function(I){return i.onBlurReachUser(I)}),t.qZA()()()()()()(),t.TgZ(157,"div",54)(158,"button",55),t._uU(159),t.ALo(160,"translate"),t._UZ(161,"i",56),t.qZA(),t.TgZ(162,"button",57),t.NdJ("click",function(){return i.onSave()}),t._uU(163),t.ALo(164,"translate"),t._UZ(165,"i",58),t.qZA()()),2&e){let f,I,F,st,ut,xt,At,Dt,Pt,Yt,Gt,ae,le,zt,ce,Wt,pe;t.xp6(3),t.hij(" ",t.lcZ(4,50,"modules.dmp.audience.editAudience")," "),t.xp6(5),t.Q6J("formGroup",i.formAudience),t.xp6(4),t.hij("",t.lcZ(13,52,"modules.dmp.audience.name")," "),t.xp6(4),t.Q6J("ngIf",i.dataAudience.userCreateInfo),t.xp6(2),t.s9C("placeholder",t.lcZ(19,54,"modules.dmp.audience.placeHolder.name")),t.Q6J("ngClass",t.VKq(92,Le,(null==(f=i.formAudience.get("name"))?null:f.invalid)&&((null==(f=i.formAudience.get("name"))?null:f.dirty)||(null==(f=i.formAudience.get("name"))?null:f.touched)))),t.xp6(2),t.Q6J("ngIf",(null==(I=i.formAudience.get("name"))?null:I.invalid)&&((null==(I=i.formAudience.get("name"))?null:I.dirty)||(null==(I=i.formAudience.get("name"))?null:I.touched))),t.xp6(4),t.Oqu(t.lcZ(25,56,"modules.dmp.audience.description")),t.xp6(3),t.s9C("placeholder",t.lcZ(28,58,"modules.dmp.audience.placeHolder.description")),t.xp6(3),t.Q6J("ngIf",(null==(F=i.formAudience.get("description"))?null:F.invalid)&&((null==(F=i.formAudience.get("description"))?null:F.dirty)||(null==(F=i.formAudience.get("description"))?null:F.touched))),t.xp6(7),t.Oqu(t.lcZ(38,60,"modules.dmp.audience.type")),t.xp6(3),t.Q6J("ngForOf",i.listType),t.xp6(2),t.Q6J("ngClass",t.VKq(94,$t,"segment"===(null==(st=i.formAudience.get("selectedType"))?null:st.value))),t.xp6(3),t.hij("",t.lcZ(46,62,"modules.dmp.audience.segment")," "),t.xp6(6),t.Q6J("ngIf",(null==(ut=i.formAudience.get("type.segment.value"))?null:ut.invalid)&&(null==(ut=i.formAudience.get("type.segment.value"))?null:ut.touched)),t.xp6(1),t.Q6J("ngClass",t.VKq(96,$t,"custom"===(null==(xt=i.formAudience.get("selectedType"))?null:xt.value))),t.xp6(5),t.Oqu(t.lcZ(58,64,"modules.dmp.audience.targetUser")),t.xp6(4),t.Q6J("ngForOf",i.listTargetUser),t.xp6(2),t.Q6J("ngClass",t.VKq(98,$t,"visit-webpage"===i.getTargetUser())),t.xp6(3),t.Oqu(t.lcZ(67,66,"modules.dmp.audience.typeUrl")),t.xp6(4),t.Q6J("ngForOf",i.listTypeUrl),t.xp6(2),t.Q6J("ngClass",t.VKq(100,$t,"visit-website"===i.getTargetUser()||"visit-webpage"===i.getTargetUser()&&"exactly"!==i.getTypeUrl())),t.xp6(3),t.hij("",t.lcZ(76,68,"modules.dmp.audience.website")," "),t.xp6(6),t.Q6J("ngIf",(null==(At=i.formAudience.get("type.custom.domain"))?null:At.invalid)&&(null==(At=i.formAudience.get("type.custom.domain"))?null:At.touched)),t.xp6(2),t.Q6J("ngClass",t.VKq(102,$t,"visit-webpage"===i.getTargetUser()&&"contains"===i.getTypeUrl())),t.xp6(3),t.hij("",t.lcZ(87,70,"modules.dmp.audience.params")," "),t.xp6(6),t.Q6J("ngIf",(null==(Dt=i.formAudience.get("type.custom.params"))?null:Dt.invalid)&&(null==(Dt=i.formAudience.get("type.custom.params"))?null:Dt.touched)),t.xp6(1),t.Q6J("ngClass",t.VKq(104,$t,"visit-webpage"===i.getTargetUser()&&"exactly"===i.getTypeUrl())),t.xp6(8),t.Q6J("ngIf",(null==(Pt=i.formAudience.get("type.custom.url"))?null:Pt.invalid)&&(null==(Pt=i.formAudience.get("type.custom.url"))?null:Pt.touched)&&!i.validateUrl),t.xp6(1),t.Q6J("ngIf",i.validateUrl),t.xp6(1),t.Q6J("ngClass",t.VKq(106,$t,"upload"===(null==(Yt=i.formAudience.get("selectedType"))?null:Yt.value))),t.xp6(5),t.Oqu(t.lcZ(109,72,"modules.dmp.audience.fileType")),t.xp6(4),t.Q6J("ngForOf",i.listFileType),t.xp6(4),t.hij("",t.lcZ(117,74,"modules.dmp.audience.chooseFile")," (.txt, .csv) "),t.xp6(6),t.Q6J("ngClass",t.VKq(108,Le,(null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.invalid)&&((null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.dirty)||(null==(Gt=i.formAudience.get("type.upload.file"))?null:Gt.touched))))("accept",".txt, .csv"),t.xp6(1),t.hij(" ",t.lcZ(124,76,"modules.dmp.audience.chooseFile")," "),t.xp6(3),t.hij(" ",i.selectedFileUploadName?i.selectedFileUploadName:t.lcZ(127,78,"modules.dmp.audience.noFileChosen")," "),t.xp6(2),t.Q6J("ngIf",null==i.formAudience||null==(ae=i.formAudience.get("type.upload.file"))?null:ae.hasError("invalidFileType")),t.xp6(1),t.Q6J("ngIf",null==i.formAudience||null==(le=i.formAudience.get("type.upload.file"))?null:le.hasError("fileSize")),t.xp6(1),t.Q6J("ngIf",(null==i.formAudience||null==(zt=i.formAudience.get("type.upload.file"))?null:zt.invalid)&&((null==(zt=i.formAudience.get("type.upload.file"))?null:zt.dirty)||(null==(zt=i.formAudience.get("type.upload.file"))?null:zt.touched))),t.xp6(1),t.Q6J("ngClass",t.VKq(110,$t,"lookalike"===(null==(ce=i.formAudience.get("selectedType"))?null:ce.value))),t.xp6(5),t.hij("",t.lcZ(137,80,"modules.dmp.audience.selectAudience")," "),t.xp6(6),t.Q6J("ngIf",(null==(Wt=i.formAudience.get("type.lookALike.selectAudience"))?null:Wt.invalid)&&(null==(Wt=i.formAudience.get("type.lookALike.selectAudience"))?null:Wt.touched)),t.xp6(4),t.Oqu(t.lcZ(147,82,"modules.dmp.audience.user")),t.xp6(3),t.Oqu(t.lcZ(150,84,null==(pe=i.formAudience.get("type.lookALike.users"))?null:pe.value)),t.xp6(5),t.hij("",t.lcZ(155,86,"modules.dmp.audience.reachUser"),"(%)"),t.xp6(5),t.hij("",t.lcZ(160,88,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.checkInvalid()),t.xp6(1),t.hij(" ",t.lcZ(164,90,"common.button.save")," ")}},dependencies:[_t.mk,_t.sg,_t.O5,tt.ZT,j._Y,j.YN,j.Kr,j.Fj,j.wV,j.EJ,j.JJ,j.JL,j.qQ,j.Fd,j.sg,j.u,j.x0,_t.JJ,M.X$],styles:[".select-type .select2-selection{background-color:#e5e7eb!important;cursor:no-drop}  app-dmp-audience-edit .select-no-suggestions{border-radius:var(--s2-border-radius)!important}  app-dmp-audience-edit .fix-scroll{overflow-x:hidden;overflow-y:auto;max-height:625px}  app-dmp-audience-edit .select-type-class{display:none}  app-dmp-audience-edit .list-file{border:1px solid #D1D5DB;border-radius:6px;position:relative;display:flex;overflow:hidden}  app-dmp-audience-edit .list-file .upload-files{width:30%;height:40px;display:flex;align-items:center;justify-content:center;font-size:14px;color:#333;background-color:#f3f4f6;border-right:1px solid #D1D5DB}  app-dmp-audience-edit .list-file .upload-files input{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;z-index:2}  app-dmp-audience-edit .list-file .label-selected-file{width:calc(100% - 114px);padding:9px 15px}  app-dmp-audience-edit .ng-invalid-custom .select2.select2-container .selection .select2-selection.select2-selection--multiple{border-color:#ef4444!important}  app-dmp-audience-edit input.ng-invalid{border-color:#d1d5db!important}  app-dmp-audience-edit input.ng-invalid,   app-dmp-audience-edit textarea.ng-invalid{border-color:#d1d5db!important}  app-dmp-audience-edit input.ng-invalid-custom,   app-dmp-audience-edit textarea.ng-invalid-custom{border-color:#ef4444!important}"]}),L})();var ye=Tt(9646),ss=Tt(4128),Me=Tt(8505);function as(n,L){1&n&&(t.TgZ(0,"div",31)(1,"span",32),t._uU(2,"Loading..."),t.qZA()())}function ls(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.share.noElements")," "))}function cs(n,L){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,ls,3,3,"div",26),t.qZA()),2&n){const g=t.oxw(2);let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.form.get("selectedTypes"))||null==e.errors?null:e.errors.noElements)}}function ps(n,L){if(1&n&&(t.TgZ(0,"div",10)(1,"label",11)(2,"strong"),t._uU(3),t.ALo(4,"translate"),t.qZA()(),t._UZ(5,"select",33),t.YNc(6,cs,2,1,"div",34),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(3),t.Oqu(t.lcZ(4,2,"modules.dmp.audience.share.usernameLabel")),t.xp6(3),t.Q6J("ngIf",null==(e=g.form.get("selectedUser"))?null:e.invalid)}}function ds(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw(2);return t.KtG(f.removeUserIsShare(i))}),t.ALo(1,"translate"),t._UZ(2,"i",39),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.audience.share.removeAccess"))}function us(n,L){if(1&n&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16)(4,"div",17),t._UZ(5,"img",18),t.qZA(),t.TgZ(6,"div",20),t._uU(7),t._UZ(8,"br"),t.TgZ(9,"small",21),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",22),t.YNc(12,ds,3,3,"a",37),t.qZA()()()),2&n){const g=L.$implicit,e=t.oxw(2);t.xp6(5),t.Q6J("src",(null==g?null:g.avatar)||e.imageSrc,t.LSH),t.xp6(2),t.hij("",null==g?null:g.username," "),t.xp6(3),t.Oqu(null==g?null:g.email),t.xp6(2),t.Q6J("ngIf",e.ruleCheckerService.isAllow("dmp/audience/unAssign"))}}function hs(n,L){if(1&n&&(t.ynx(0),t.YNc(1,us,13,4,"div",36),t.BQk()),2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngForOf",g.dataUserIsShares)}}function ms(n,L){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",41),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.button.share")," "))}function gs(n,L){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",42),t.BQk()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.share.apply")," "))}function fs(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.save())}),t.YNc(1,ms,4,3,"ng-container",26),t.YNc(2,gs,4,3,"ng-container",26),t.qZA()}if(2&n){const g=t.oxw();t.Q6J("disabled",!g.controller.isSave),t.xp6(1),t.Q6J("ngIf",g.controller.isShare),t.xp6(1),t.Q6J("ngIf",g.controller.isApply)}}const vs=function(n){return{"disabled-el":n}};class xs{static nonEmpty(L){return L.value&&0!==L.value.length?null:{noElements:!0}}}let ys=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(i,f,I),this.data=e,this.authenticationService=i,this.activatedRoute=f,this.translate=I,this.globalsService=F,this.audienceService=st,this.ruleCheckerService=ut,this.fb=xt,this.dataUserAdd=[],this.dataUserRemove=[],this.imageSrc=this.globalsService.user.avatar.default,this.userOwner={email:"",username:""},this.dataUserIsShares=[],this.controller={isSave:!1,isShare:!1,isApply:!0},this.stateLoading=!1,this.loadingState=!1,this.audienceId=this.data.audienceId??0,this.dataAudienceName=this.data.dataAudienceName??""}ngOnInit(){super.ngOnInit(),this.createFormShare()}ngAfterViewInit(){this.initSelect2(),setTimeout(()=>{this.audienceId&&(this.getAudienceDetail(),this.getDataUser())},0)}initSelect2(){setTimeout(()=>{const e=this;$(".share-select-user").off("select2:select").empty().select2({placeholder:this.translate.instant("modules.dmp.audience.share.usersPlace"),minimumInputLength:1,language:{inputTooShort:()=>e.translate.instant("modules.dmp.audience.share.audienceSearchUser"),searching:()=>e.translate.instant("common.loading"),noResults:()=>e.translate.instant("common.dataNotFound")}}).on("select2:selecting",i=>{this.checkUser(i.params.args.data.id)&&i.preventDefault()}).on("select2:select",i=>{this.dataUserAdd.push(i.params.data.id),this.checkAction()}).on("select2:unselect",i=>{const f=i.params.data.id;this.dataUserAdd=this.dataUserAdd.filter(I=>I!==f),this.checkAction()})},0)}createFormShare(){this.form=this.fb.group({selectedUser:[this.dataUserAdd,[xs.nonEmpty]]})}checkUser(e){let i;return i=this.dataUserAdd.some(f=>f==e),i||(i=this.dataUserIsShares.some(f=>f.username==e),i)?i:!(!this.userOwner.username||this.userOwner.username!==e)||i}getDataUser(){this.audienceService.listAssign(this.audienceId).subscribe(i=>{1===i.status&&(this.dataUserIsShares=i.data.users??[])})}getAudienceDetail(){this.stateLoading=!0,this.audienceService.detail(this.audienceId).subscribe(e=>{if(this.stateLoading=!1,1===e.status){const i=e.data;this.userOwner.email=i?.userCreateInfo?.email??"",this.userOwner.username=i?.userCreateInfo?.username??""}})}removeUserIsShare(e){this.dataUserIsShares=this.dataUserIsShares.filter(i=>i.userId!==e.userId),this.dataUserRemove.push(e.userId),this.checkAction()}checkAction(){this.controller.isSave=!1,this.controller.isApply=!0,this.controller.isShare=!1,this.dataUserAdd.length?(this.controller.isSave=!0,this.controller.isApply=!1,this.controller.isShare=!0):this.dataUserRemove.length&&(this.controller.isSave=!0)}save(){if(this.dataUserAdd.length||this.dataUserRemove.length){let e=(0,ye.of)(null),i=(0,ye.of)(null);this.dataUserAdd.length&&(e=this.audienceService.createAssign({users:this.dataUserAdd},this.audienceId).pipe((0,Me.b)(I=>{1==I.status?AppNoty.success([this.translate.instant("common.notify.updateSuccess.message")]):AppNoty.error([I.message?I.message:this.translate.instant("common.notify.error.message")])}))),this.dataUserRemove.length&&(i=this.audienceService.unAssign({userId:this.dataUserRemove},this.audienceId).pipe((0,Me.b)(I=>{1==I.status?AppNoty.success([this.translate.instant("common.notify.updateSuccess.message")]):AppNoty.error([I.message?I.message:this.translate.instant("common.notify.error.message")])}))),(0,ss.D)([e,i]).subscribe(()=>{this.dataUserAdd=[],this.dataUserRemove=[],this.controller.isSave=!1,this.controller.isApply=!0,this.controller.isShare=!1,this.initSelect2(),this.getDataUser()})}}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(re),t.Y36(Jt.H),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-audience-dialog-share"]],features:[t.qOj],decls:44,vars:26,consts:[["id","wp-popup",3,"ngClass"],["class","spinner-border text-primary spinner-loading","role","status",4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","pe-4","dialog-header"],[1,"font-weight-bold","m-0","ms-1","limit-line-1"],[1,"ph","ph-share-network","me-1","fw-bold"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-audience-share","p-2"],[3,"formGroup"],["class","mb-2",4,"ngIf"],[1,"mb-2"],[1,"form-label","d-block"],[1,"wp-user-access"],[1,"user-access"],[1,"row"],[1,"user-info","col-10"],[1,"navbar-nav-link","align-items-center","rounded-pill","p-1"],[1,"avatar","me-2"],["alt","",1,"w-32px","h-32px","rounded-pill","border",3,"src"],[1,"status-indicator","bg-success"],[1,"information","text-truncate"],[1,"font-size-12","text-muted"],[1,"action","col-2","d-flex","justify-content-center","align-items-center"],[1,"d-none","d-lg-block"],[1,"d-lg-none"],[1,"ph","ph-user"],[4,"ngIf"],[1,"col-xl-12","pt-2","pb-2","dialog-footer"],[1,"btn","btn-danger",3,"mat-dialog-close"],[1,"ph-x","ms-1"],["class","btn btn-success ms-2",3,"disabled","click",4,"ngIf"],["role","status",1,"spinner-border","text-primary","spinner-loading"],[1,"visually-hidden"],["formControlName","selectedUser","data-container-css-class","select-lg","data-tags","true","multiple","multiple",1,"form-control","share-select-user"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"validation-invalid-label","mt-2"],["class","user-access",4,"ngFor","ngForOf"],["class","cursor-pointer",3,"matTooltip","click",4,"ngIf"],[1,"cursor-pointer",3,"matTooltip","click"],[1,"ph","ph-trash","text-danger"],[1,"btn","btn-success","ms-2",3,"disabled","click"],[1,"ph","ph-share-network","ms-1"],[1,"ph","ph-check","ms-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,as,3,0,"div",1),t.TgZ(2,"div",2)(3,"h5",3),t._UZ(4,"i",4),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"span",5),t._UZ(8,"i",6),t.qZA()(),t.TgZ(9,"div",7)(10,"form",8),t.YNc(11,ps,7,4,"div",9),t.TgZ(12,"div",10)(13,"label",11)(14,"strong"),t._uU(15),t.ALo(16,"translate"),t.qZA()(),t.TgZ(17,"div",12),t.ynx(18),t.TgZ(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17),t._UZ(24,"img",18)(25,"span",19),t.qZA(),t.TgZ(26,"div",20),t._uU(27),t._UZ(28,"br"),t.TgZ(29,"small",21),t._uU(30),t.qZA()()()(),t.TgZ(31,"div",22)(32,"span",23),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"span",24),t._UZ(36,"i",25),t.qZA()()()(),t.BQk(),t.YNc(37,hs,2,1,"ng-container",26),t.qZA()()()(),t.TgZ(38,"div",27)(39,"button",28),t._uU(40),t.ALo(41,"translate"),t._UZ(42,"i",29),t.qZA(),t.YNc(43,fs,3,3,"button",30),t.qZA()()),2&e&&(t.Q6J("ngClass",t.VKq(24,vs,i.stateLoading)),t.xp6(1),t.Q6J("ngIf",i.stateLoading),t.xp6(4),t.AsE(" ",t.lcZ(6,16,"modules.dmp.audience.share.title"),' "',i.dataAudienceName,'" '),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/audience/assign")),t.xp6(4),t.Oqu(t.lcZ(16,18,"modules.dmp.audience.share.peopleAccess")),t.xp6(9),t.Q6J("src",i.currentUser&&i.currentUser.avatar||i.imageSrc,t.LSH),t.xp6(3),t.hij(" ",i.userOwner.username||""," "),t.xp6(3),t.Oqu(i.userOwner.email||""),t.xp6(3),t.Oqu(t.lcZ(34,20,"modules.dmp.audience.share.owner")),t.xp6(4),t.Q6J("ngIf",i.dataUserIsShares&&i.dataUserIsShares.length>0),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij("",t.lcZ(41,22,"common.button.cancel")," "),t.xp6(3),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/audience/assign")||i.ruleCheckerService.isAllow("dmp/audience/unAssign")))},dependencies:[_t.mk,_t.sg,_t.O5,tt.ZT,y.gM,j._Y,j.K7,j.JJ,j.JL,j.sg,j.u,M.X$],styles:[".limit-line-1{-webkit-line-clamp:1;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}  .dmp-audience-share .custom-class .wp-img{width:15px}  .dmp-audience-share .custom-class img{width:20px;height:20px}  .dmp-audience-share .wp-user-access{overflow-y:auto;min-height:165px;max-height:400px;overflow-x:hidden}  .dmp-audience-share .user-info .information{width:calc(100% - 42px)}"]}),L})();function _s(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openCreateAudienceDialog())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",52),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.createAudience")," "))}function bs(n,L){1&n&&(t.TgZ(0,"th",53),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"common.sequence")," "))}function As(n,L){if(1&n&&(t.TgZ(0,"td",54)(1,"span",55),t._uU(2),t.qZA()()),2&n){const g=L.index,e=t.oxw();t.xp6(2),t.hij(" ",g+1+(e.pageIndex-1)*e.pageSize," ")}}function Cs(n,L){if(1&n&&(t.TgZ(0,"th",56),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const g=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"modules.dmp.audience.titleTable")," "),t.xp6(3),t.hij("(",t.lcZ(5,4,g.length),")")}}function ws(n,L){if(1&n&&(t.TgZ(0,"li",64),t._UZ(1,"i",65),t.ALo(2,"translate"),t._uU(3),t.qZA()),2&n){const g=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"modules.dmp.segment.userCreate")),t.xp6(2),t.hij(" ",g.usernameCreate," ")}}const Ts=function(n){return{"cursor-pointer title-audience":n}};function Ss(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",57)(1,"a",58),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.ruleCheckerService.isAllow("dmp/audience/update")&&I.openEditAudienceDialog(f))}),t._uU(2),t.qZA(),t.TgZ(3,"ul",59)(4,"li",60),t._UZ(5,"i",61),t.ALo(6,"translate"),t._uU(7),t.qZA(),t.TgZ(8,"li",60),t._UZ(9,"i",62),t.ALo(10,"translate"),t._uU(11),t.qZA(),t.YNc(12,ws,4,4,"li",63),t.qZA()()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(11,Ts,e.currentUser&&e.currentUser.isAdmin()||g.isOwner)),t.xp6(1),t.hij(" ",g.name," "),t.xp6(3),t.s9C("matTooltip",t.lcZ(6,7,"modules.dmp.audience.audienceId")),t.xp6(2),t.hij(" ",g.id," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(10,9,"modules.dmp.audience.timeCreate")),t.xp6(2),t.hij("",g.timeCreate," "),t.xp6(1),t.Q6J("ngIf",g.usernameCreate)}}function ks(n,L){1&n&&(t.TgZ(0,"th",66),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.description")," "))}function Ds(n,L){if(1&n&&(t.TgZ(0,"td",67)(1,"span",68),t._uU(2),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",g.description," ")}}function Zs(n,L){1&n&&(t.TgZ(0,"th",69),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.estimateUserLabel")," "))}function Ls(n,L){if(1&n&&(t.TgZ(0,"td",70)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,g.estimateUser)," ")}}function Ms(n,L){1&n&&(t.TgZ(0,"th",69),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.realUserLabel")," "))}function Is(n,L){if(1&n&&(t.TgZ(0,"td",70)(1,"span"),t._uU(2),t.ALo(3,"number"),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",t.lcZ(3,1,null==g?null:g.activeUser)," ")}}function Es(n,L){1&n&&(t.TgZ(0,"th",71),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.expireDate")," "))}function Us(n,L){if(1&n&&(t.TgZ(0,"td",72)(1,"span"),t._uU(2),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",null==g?null:g.timeExpire," ")}}function Ps(n,L){1&n&&(t.TgZ(0,"th",71),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.estimateTimeLabel")," "))}function Ns(n,L){if(1&n&&(t.TgZ(0,"td",72)(1,"span"),t._uU(2),t.qZA()()),2&n){const g=L.$implicit;t.xp6(2),t.hij(" ",null==g?null:g.timeEstimate," ")}}function Os(n,L){1&n&&(t.TgZ(0,"th",71),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.typeLabel")," "))}function js(n,L){1&n&&(t.TgZ(0,"span",77),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.typeSegment")," "))}function qs(n,L){1&n&&(t.TgZ(0,"span",78),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.upload")," "))}function Fs(n,L){1&n&&(t.TgZ(0,"span",79),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.custom")," "))}function Bs(n,L){1&n&&(t.TgZ(0,"span",80),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.lookALike")," "))}function Ys(n,L){if(1&n&&(t.TgZ(0,"td",72),t.YNc(1,js,3,3,"span",73),t.YNc(2,qs,3,3,"span",74),t.YNc(3,Fs,3,3,"span",75),t.YNc(4,Bs,3,3,"span",76),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.Q6J("ngIf",0===g.type),t.xp6(1),t.Q6J("ngIf",3===g.type),t.xp6(1),t.Q6J("ngIf",1===g.type),t.xp6(1),t.Q6J("ngIf",2===g.type)}}function Gs(n,L){1&n&&(t.TgZ(0,"th",71),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.status")," "))}function Rs(n,L){1&n&&(t.TgZ(0,"span",79),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.statusActive")," "))}function Hs(n,L){1&n&&(t.TgZ(0,"span",82),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.audience.statusUnActive")," "))}function Js(n,L){if(1&n&&(t.TgZ(0,"td",72),t.YNc(1,Rs,3,3,"span",75),t.YNc(2,Hs,3,3,"span",81),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.Q6J("ngIf",1===g.status),t.xp6(1),t.Q6J("ngIf",0===g.status)}}function zs(n,L){1&n&&t._UZ(0,"th",71)}function Qs(n,L){if(1&n){const g=t.EpF();t.ynx(0),t.TgZ(1,"li")(2,"a",88),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openAudienceDialogAnalytics(i))}),t._UZ(3,"i",89),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"common.button.analytic")," "))}function Vs(n,L){1&n&&t._UZ(0,"li",92)}function Ws(n,L){if(1&n){const g=t.EpF();t.ynx(0),t.YNc(1,Vs,1,0,"li",90),t.TgZ(2,"li")(3,"a",88),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3).$implicit,f=t.oxw();return t.KtG(f.openEditAudienceDialog(i))}),t._UZ(4,"i",91),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}if(2&n){const g=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",0===g.type),t.xp6(4),t.hij(" ",t.lcZ(6,2,"common.button.edit")," ")}}function Xs(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",92),t.TgZ(2,"li")(3,"a",88),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3).$implicit,f=t.oxw();return t.KtG(f.openAudienceDialogShare(i))}),t._UZ(4,"i",93),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"common.button.share")," "))}function Ks(n,L){if(1&n){const g=t.EpF();t.ynx(0),t._UZ(1,"li",92),t.TgZ(2,"li")(3,"a",94),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(3).$implicit,f=t.oxw();return t.KtG(f.openDeleteAudienceDialog(i))}),t._UZ(4,"i",95),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.BQk()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"common.button.delete")," "))}function $s(n,L){if(1&n&&(t.ynx(0),t.YNc(1,Ws,7,4,"ng-container",87),t.YNc(2,Xs,7,3,"ng-container",87),t.YNc(3,Ks,7,3,"ng-container",87),t.BQk()),2&n){const g=t.oxw(3);t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/audience/update")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/audience/listAssign")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/audience/delete"))}}function ta(n,L){if(1&n&&(t.TgZ(0,"div",84)(1,"button",85)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"ul",86),t.YNc(5,Qs,6,3,"ng-container",87),t.YNc(6,$s,4,3,"ng-container",87),t.qZA()()),2&n){const g=t.oxw().$implicit,e=t.oxw();t.xp6(5),t.Q6J("ngIf",0===g.type),t.xp6(1),t.Q6J("ngIf",e.currentUser&&e.currentUser.isAdmin()||g.isOwner)}}function ea(n,L){if(1&n&&(t.TgZ(0,"td",54),t.YNc(1,ta,7,2,"div",83),t.qZA()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.currentUser&&e.currentUser.isAdmin()||g.isOwner||0===g.type)}}function ia(n,L){1&n&&t._UZ(0,"tr",96)}function na(n,L){1&n&&t._UZ(0,"tr",97)}const oa=function(n){return{"border-top":n}};function ra(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",98)(1,"app-paginator",99),t.NdJ("page",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.getPaginator(i))}),t.qZA()()}if(2&n){const g=t.oxw();t.Q6J("ngClass",t.VKq(7,oa,g.dataAudience)),t.xp6(1),t.Tol(0==g.length?"d-none":"rounded-bottom-start rounded-bottom-end"),t.Q6J("pageSizeOptions",g.pageSizeOptions)("pageSize",g.pageSize)("pageIndex",g.pageIndex)("length",g.length)}}function sa(n,L){1&n&&(t.TgZ(0,"div",100),t._UZ(1,"i",101),t.TgZ(2,"div",102),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const aa=function(){return["/"]};let la=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.audienceService=I,this.location=F,this.ruleCheckerService=st,this.dialog=ut,this.loadingState=!1,this.dataAudience=new z.by([]),this.pageSize=20,this.pageSizeOptions=[20,30,50,100],this.keyword="",this.pageIndex=1,this.length=0,this.displayedColumns=["sequenceManage","name","description","estimateUser","activeUser","timeExpire","timeEstimate","type","action"],this.activatedRoute.queryParams.subscribe(xt=>{this.pageSize=xt.limit??this.pageSize,this.pageIndex=xt.page??this.pageIndex,this.keyword=xt.keyword??""})}ngOnInit(){this.getData()}getData(){this.loadingState=!0;const e={limit:this.pageSize};this.pageIndex>0&&(e.page=this.pageIndex),""!==this.keyword&&(e.keyword=encodeURIComponent(this.keyword)),this.audienceService.get(e).subscribe(f=>{this.loadingState=!1,this.dataAudience=new z.by(f.data)??[],this.length=f.total});const i=[];for(const f in e)i.push(f+"="+e[f]);this.location.replaceState("/audience/list",i.join("&"))}openCreateAudienceDialog(){this.dialog.open(Lr,{autoFocus:!1,disableClose:!0,width:"750px",maxHeight:"80vh",panelClass:"app-dmp-audience-create",data:{}}).afterClosed().subscribe(i=>{i&&this.getData()})}openEditAudienceDialog(e){this.checkPermissionAudience(e),this.checkPermissionAudience(e)&&this.dialog.open(rs,{autoFocus:!1,disableClose:!0,width:"750px",maxHeight:"80vh",height:"auto",panelClass:"app-dmp-audience-edit",data:{audience:e}}).afterClosed().subscribe(f=>{f&&this.getData()})}openAudienceDialogAnalytics(e){this.dialog.open(xe,{autoFocus:!1,panelClass:"audience-dialog-analytics",width:"90%",maxWidth:"1600px",height:"auto",maxHeight:"90vh",data:{audienceId:e.id,name:e.name}})}openAudienceDialogShare(e){this.checkPermissionAudience(e),this.checkPermissionAudience(e)&&this.dialog.open(ys,{autoFocus:!1,panelClass:"audience-dialog-share",width:"600px",height:"auto",maxHeight:"800px",data:{audienceId:e.id,dataAudienceName:e.name}})}openDeleteAudienceDialog(e){this.checkPermissionAudience(e),this.checkPermissionAudience(e)&&this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1,data:{message:this.translate.instant("modules.dmp.audience.confirm.confirmDelete",{name:e.name})}}).afterClosed().subscribe(f=>{f&&this.deleteAudience(e.id)})}deleteAudience(e){this.audienceService.delete(e).subscribe(i=>{if(1===i.status)return this.getData(),void AppNoty.success([this.translate.instant("modules.dmp.audience.notify.deleteSuccess")]);AppNoty.error([this.translate.instant("modules.dmp.audience.notify.deleteFailed")])})}checkPermissionAudience(e){return this.currentUser&&this.currentUser.isAdmin()||e.isOwner}getPaginator(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getData(),this.scrollToTop()}scrollToTop(){const e=document.querySelector(".content-inner");e&&(e.scrollTop=0)}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(re),t.Y36(_t.Ye),t.Y36(Jt.H),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-audience-list"]],features:[t.qOj],decls:69,vars:21,consts:[["id","wp-dmp-audience"],[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","py-2",3,"routerLink"],[1,"ph-house","me-2"],[1,"breadcrumb-item","active","py-2"],[1,"content"],[1,"card","mb-0"],[1,"p-2","pb-0"],[1,"row"],[1,"col-xl-12"],[1,"wp-filter-parameters"],[1,"form-group","mb-2","float-start","me-2","form-select-2","input-search"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"wp-action-buttons","mb-2","float-end"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-xl-12","p-0"],[1,"table-responsive","data-table-audience"],["mat-table","","aria-label","Table displaying manage parameters data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["table",""],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate ps-0",4,"matCellDef"],["matColumnDef","description"],["mat-header-cell","","class","bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","estimateUser"],["mat-header-cell","","class","bg-dark text-white text-end",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-end",4,"matCellDef"],["matColumnDef","activeUser"],["matColumnDef","timeExpire"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","timeEstimate"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","rounded-bottom-start rounded-bottom-end d-flex justify-content-end",3,"ngClass",4,"ngIf"],["class","text-center p-2",4,"ngIf"],[1,"ph","ph-plus","ms-1","icon-small"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","ps-0"],[1,"text-dark","fw-light-bold",3,"ngClass","click"],[1,"list","list-unstyled","list-inline","mb-0"],[1,"list-inline-item","text-muted","fs-sm","me-2"],[1,"ph","ph-hash-straight","icon-small-17",3,"matTooltip"],[1,"ph","ph-timer","icon-small-17","me-1",3,"matTooltip"],["class","list-inline-item text-muted fs-sm",4,"ngIf"],[1,"list-inline-item","text-muted","fs-sm"],[1,"ph","ph-user","icon-small-17",3,"matTooltip"],["mat-header-cell","",1,"bg-dark","text-white"],["mat-cell",""],[1,"limit-line-description"],["mat-header-cell","",1,"bg-dark","text-white","text-end"],["mat-cell","",1,"text-truncate","text-end"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],["mat-cell","",1,"text-truncate","text-center"],["class","badge bg-warning fw-normal",4,"ngIf"],["class","badge bg-info fw-normal",4,"ngIf"],["class","badge bg-success fw-normal",4,"ngIf"],["class","badge bg-secondary fw-normal",4,"ngIf"],[1,"badge","bg-warning","fw-normal"],[1,"badge","bg-info","fw-normal"],[1,"badge","bg-success","fw-normal"],[1,"badge","bg-secondary","fw-normal"],["class","badge bg-danger fw-normal",4,"ngIf"],[1,"badge","bg-danger","fw-normal"],["class","dropdown",4,"ngIf"],[1,"dropdown"],["mat-icon-button","","data-bs-toggle","dropdown"],[1,"dropdown-menu"],[4,"ngIf"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ph","ph-chart-bar","me-2","text-primary"],["class","dropdown-divider",4,"ngIf"],[1,"ph","ph-pencil-simple","me-2","text-warning"],[1,"dropdown-divider"],[1,"ph","ph-share-network","me-2","text-success"],[1,"dropdown-item","cursor-pointer","bg-danger","text-white",3,"click"],[1,"ph","ph-trash","me-2"],["mat-header-row",""],["mat-row",""],[1,"rounded-bottom-start","rounded-bottom-end","d-flex","justify-content-end",3,"ngClass"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),t._UZ(21,"i",17),t.qZA(),t.TgZ(22,"input",18),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.getData()}),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"div",19)(25,"button",20),t.NdJ("click",function(){return i.getData()}),t._uU(26),t.ALo(27,"translate"),t._UZ(28,"i",21),t.qZA()()(),t.TgZ(29,"div",22),t.YNc(30,_s,4,3,"button",23),t.qZA()(),t.TgZ(31,"div",24)(32,"div",25)(33,"table",26,27),t.ynx(35,28),t.YNc(36,bs,3,3,"th",29),t.YNc(37,As,3,1,"td",30),t.BQk(),t.ynx(38,31),t.YNc(39,Cs,6,6,"th",32),t.YNc(40,Ss,13,13,"td",33),t.BQk(),t.ynx(41,34),t.YNc(42,ks,3,3,"th",35),t.YNc(43,Ds,3,1,"td",36),t.BQk(),t.ynx(44,37),t.YNc(45,Zs,3,3,"th",38),t.YNc(46,Ls,4,3,"td",39),t.BQk(),t.ynx(47,40),t.YNc(48,Ms,3,3,"th",38),t.YNc(49,Is,4,3,"td",39),t.BQk(),t.ynx(50,41),t.YNc(51,Es,3,3,"th",42),t.YNc(52,Us,3,1,"td",43),t.BQk(),t.ynx(53,44),t.YNc(54,Ps,3,3,"th",42),t.YNc(55,Ns,3,1,"td",43),t.BQk(),t.ynx(56,45),t.YNc(57,Os,3,3,"th",42),t.YNc(58,Ys,5,4,"td",43),t.BQk(),t.ynx(59,46),t.YNc(60,Gs,3,3,"th",42),t.YNc(61,Js,3,2,"td",43),t.BQk(),t.ynx(62,47),t.YNc(63,zs,1,0,"th",42),t.YNc(64,ea,2,1,"td",30),t.BQk(),t.YNc(65,ia,1,0,"tr",48),t.YNc(66,na,1,0,"tr",49),t.qZA()(),t.YNc(67,ra,2,9,"div",50),t.YNc(68,sa,5,3,"div",51),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(20,aa)),t.xp6(2),t.hij(" ",t.lcZ(8,12,"breadcrumbs.home")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"modules.dmp.audience.list")," "),t.xp6(12),t.s9C("placeholder",t.lcZ(23,16,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(4),t.hij("",t.lcZ(27,18,"common.button.search")," "),t.xp6(4),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/audience/create")),t.xp6(3),t.Q6J("dataSource",i.dataAudience),t.xp6(32),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.length),t.xp6(1),t.Q6J("ngIf",0===i.length))},dependencies:[_t.mk,_t.O5,Y.rH,de.RK,ue.Hw,y.gM,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,oe.J,j.Fj,j.JJ,j.On,_t.JJ,M.X$],styles:["#wp-dmp-audience .form-select-status{width:250px}  #wp-dmp-audience .limit-line-description{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:-webkit-box;overflow:hidden}  #wp-dmp-audience .data-table-audience .mat-column-sequenceManage{width:68px}  #wp-dmp-audience .data-table-audience .mat-column-audienceId{width:120px}  #wp-dmp-audience .data-table-audience .mat-column-name{width:350px;overflow:hidden!important}  #wp-dmp-audience .data-table-audience .mat-column-description{width:250px}  #wp-dmp-audience .data-table-audience .mat-column-timeEstimate{width:120px}  #wp-dmp-audience .data-table-audience .mat-column-activeUser{width:120px}  #wp-dmp-audience .data-table-audience .mat-column-timeExpire{width:130px}  #wp-dmp-audience .data-table-audience .mat-column-estimateUser{width:130px}  #wp-dmp-audience .data-table-audience .mat-column-type{width:120px}  #wp-dmp-audience .data-table-audience .mat-column-action{width:70px}  #wp-dmp-audience .data-table-audience .title-audience{color:#0a6fd9!important}  #wp-dmp-audience .data-table-audience .title-audience:hover{color:#0aa7ef!important}  #wp-dmp-audience .data-table-audience .limit-text-2l{-webkit-line-clamp:2;-webkit-box-orient:vertical;display:block!important;display:-webkit-box!important;overflow:hidden;white-space:normal}  #wp-dmp-audience .data-table-audience .f-12{font-size:12px}  #wp-dmp-audience .data-table-audience .f-13{font-size:13px}@media (max-width: 1600px){  #wp-dmp-audience .data-table-audience.table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}  #wp-dmp-audience .data-table-audience .mat-column-description{width:155px}  #wp-dmp-audience .data-table-audience .mat-column-estimateUser{width:130px}  #wp-dmp-audience .data-table-audience .mat-column-activeUser{width:120px}  #wp-dmp-audience .data-table-audience .mat-column-type{width:100px}  #wp-dmp-audience .data-table-audience .mat-column-timeEstimate{width:130px}  #wp-dmp-audience .input-search{width:230px}}"]}),L})();class ge{constructor(L){this.role=0,this.userId=0,this.name="",this.email="",this.role=L.role??null,this.userId=L.userId??null,this.name=L.group??"",this.email=L.email??""}}class Ie{constructor(L){this.fullName="",this.role=0,this.group="",this.userId=L?.userId??null,this.fullName=L?.fullName??"",this.role=L?.role??0,this.group=L?.group??"",this.createdAt=L?.createTime?b(L.createTime,"MMM DD, YYYY h:mm:ss A").format("HH:mm:ss DD/MM/YYYY"):null}}let fe=(()=>{var n;class L{constructor(e,i){this.http=e,this.backendService=i,this.apiServerPaths=w.N.backendServer.paths}get(e={}){const i={params:{encryptParam:!0},headers:{Accept:"application/json"}};for(const I in e)i.params[I]=e[I];return this.backendService.get(this.apiServerPaths.dmp.groupProduct.list,i,(0,x.U)(I=>{const F=[],st=I.data.groups??[],ut=I.data.count??0;for(const xt in st)F.push(new ge(st[xt]));return{status:I?.status,code:I?.code,data:F,total:ut}}))}getListMember(e=""){const f=this.apiServerPaths.dmp.groupProduct.user.list.replace("{GROUP_NAME}",e);return this.backendService.get(f,{params:{encryptParam:!0,siteLoading:!1},headers:{Accept:"application/json"}},(0,x.U)(I=>{const F=[],st=I.data.members??[],ut=I.data.count??0;for(const xt in st)F.push(new Ie(st[xt]));return{status:I?.status,code:I?.code,data:F,total:ut}}))}registerUser(e){const i=e;return i.encryptBody=!0,this.backendService.post(this.apiServerPaths.dmp.groupProduct.user.register,i,(0,x.U)(I=>I))}updateUser(e){const i=e;return i.encryptBody=!0,this.backendService.put(this.apiServerPaths.dmp.groupProduct.user.update,i,(0,x.U)(I=>I))}deleteUser(e){const i=e;return i.encryptBody=!0,this.backendService.delete(this.apiServerPaths.dmp.groupProduct.user.delete,i,(0,x.U)(I=>I))}}return(n=L).\u0275fac=function(e){return new(e||n)(t.LFG(h.eN),t.LFG(l.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),L})();function ca(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.addUser.emailRequired")," "))}function pa(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.addUser.emailInvalid")," "))}function da(n,L){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,ca,3,3,"div",25),t.YNc(2,pa,3,3,"div",25),t.qZA()),2&n){const g=t.oxw();let e,i;t.xp6(1),t.Q6J("ngIf",null==(e=g.addUserForm.get("email"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.addUserForm.get("email"))||null==i.errors?null:i.errors.email)}}function ua(n,L){if(1&n&&(t.ynx(0),t.TgZ(1,"option",26),t._uU(2),t.qZA(),t.BQk()),2&n){const g=L.$implicit;t.xp6(1),t.s9C("value",g.id),t.xp6(1),t.Oqu(g.name)}}function ha(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.addUser.roleNameRequired")," "))}function ma(n,L){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,ha,3,3,"div",25),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.addUserForm.get("roleId"))||null==e.errors?null:e.errors.required)}}let ga=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(f,I,F),this.data=e,this.dialogRef=i,this.authenticationService=f,this.activatedRoute=I,this.translate=F,this.globalsService=st,this.groupService=ut,this.formBuilder=xt,this.group=new ge({}),this.dataRoleGroup=this.globalsService.group.dataRoleGroup,i.disableClose=!0,this.dialogRef.keydownEvents().subscribe(At=>{"Escape"===At.key&&this.dialogRef.close()}),this.group=this.data.group,this.dataRoleGroup=this.dataRoleGroup.filter(At=>At.id>=this.group.role)}ngOnInit(){super.ngOnInit(),this.createFormAddUser(),this.initSelectRole()}initSelectRole(){setTimeout(()=>{$(".select-fixed-single.select-role").select2({minimumResultsForSearch:1/0,width:200}).on("select2:select",e=>{const i=e.params.data.id?parseInt(e.params.data.id):"";this.addUserForm.controls.roleId.setValue(i)})},0)}createFormAddUser(){this.addUserForm=this.formBuilder.group({email:["",[j.kI.required,j.kI.email]],group:[this.group.name],roleId:["",[j.kI.required]]})}saveInfoAddUser(){if(this.addUserForm.invalid)return;const e={email:this.addUserForm.controls.email.value.trim(),group:this.addUserForm.controls.group.value,role:this.addUserForm.controls.roleId.value};this.groupService.registerUser(e).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.group.addUser.createSuccess")]),void this.dialogRef.close(!0);AppNoty.error([i.message?i.message:this.translate.instant("modules.dmp.group.addUser.createFailed")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(tt.so),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(fe),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-group-dialog-add-user"]],features:[t.qOj],decls:49,vars:33,consts:[[1,"dialog-header","pt-2","pb-2"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-users-three","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-add-user"],[1,"col-xl-12","p-2"],[1,"card-body","px-0","pb-0"],[3,"formGroup"],[1,"form-group","mb-2"],[1,"form-label","d-block"],["type","text","formControlName","group","readonly","",1,"form-control"],[1,"ms-1","text-danger"],["type","text","formControlName","email",1,"form-control",3,"placeholder"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"form-group"],["formControlName","roleId",1,"form-control","select","w-100","select-fixed-single","select-role"],["value","",1,"text-capitalize"],[4,"ngFor","ngForOf"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger","me-2",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"btn","btn-primary",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9)(12,"label",10)(13,"strong"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"div",9)(18,"label",10)(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span",12),t._uU(23,"*"),t.qZA()(),t._UZ(24,"input",13),t.ALo(25,"translate"),t.YNc(26,da,3,2,"div",14),t.qZA(),t.TgZ(27,"div",15)(28,"label",10)(29,"strong"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"span",12),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"select",16)(35,"option",17),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.YNc(38,ua,3,2,"ng-container",18),t.qZA(),t.YNc(39,ma,2,1,"div",14),t.qZA()()()()(),t.TgZ(40,"div",19)(41,"button",20),t._uU(42),t.ALo(43,"translate"),t._UZ(44,"i",21),t.qZA(),t.TgZ(45,"button",22),t.NdJ("click",function(){return i.saveInfoAddUser()}),t._uU(46),t.ALo(47,"translate"),t._UZ(48,"i",23),t.qZA()()),2&e){let f,I,F;t.xp6(3),t.hij(" ",t.lcZ(4,17,"modules.dmp.group.addUser.title")," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(5),t.Q6J("formGroup",i.addUserForm),t.xp6(4),t.Oqu(t.lcZ(15,19,"modules.dmp.group.addUser.group")),t.xp6(6),t.Oqu(t.lcZ(21,21,"modules.dmp.group.addUser.email")),t.xp6(4),t.ekj("ng-invalid",(null==(f=i.addUserForm.get("email"))?null:f.touched)&&(null==(f=i.addUserForm.get("email"))?null:f.invalid)),t.s9C("placeholder",t.lcZ(25,23,"modules.dmp.group.addUser.emailPlaceholder")),t.xp6(2),t.Q6J("ngIf",(null==(I=i.addUserForm.get("email"))?null:I.invalid)&&((null==(I=i.addUserForm.get("email"))?null:I.dirty)||(null==(I=i.addUserForm.get("email"))?null:I.touched))),t.xp6(4),t.Oqu(t.lcZ(31,25,"modules.dmp.group.addUser.roleName")),t.xp6(6),t.Oqu(t.lcZ(37,27,"modules.dmp.group.addUser.selectRole")),t.xp6(2),t.Q6J("ngForOf",i.dataRoleGroup),t.xp6(1),t.Q6J("ngIf",(null==(F=i.addUserForm.get("roleId"))?null:F.invalid)&&((null==(F=i.addUserForm.get("roleId"))?null:F.dirty)||(null==(F=i.addUserForm.get("roleId"))?null:F.touched))),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(43,29,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.addUserForm.invalid),t.xp6(1),t.hij(" ",t.lcZ(47,31,"common.button.save")," ")}},dependencies:[_t.sg,_t.O5,tt.ZT,j._Y,j.YN,j.Kr,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u,M.X$],styles:[".dmp-add-user input[readonly]{background-color:#9797974d;border-color:#76767680;color:#000000b3;cursor:no-drop}  .dmp-add-user input[readonly]:focus{border-color:#76767680}"]}),L})();function fa(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.editUser.fullNameRequired")," "))}function va(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.editUser.fullNameMinLength")," "))}function xa(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.editUser.fullNameMaxLength")," "))}function ya(n,L){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,fa,3,3,"div",25),t.YNc(2,va,3,3,"div",25),t.YNc(3,xa,3,3,"div",25),t.qZA()),2&n){const g=t.oxw();let e,i,f;t.xp6(1),t.Q6J("ngIf",null==(e=g.editUserForm.get("fullName"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.editUserForm.get("fullName"))||null==i.errors?null:i.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(f=g.editUserForm.get("fullName"))||null==f.errors?null:f.errors.maxlength)}}function _a(n,L){if(1&n&&(t.ynx(0),t.TgZ(1,"option",26),t._uU(2),t.qZA(),t.BQk()),2&n){const g=L.$implicit;t.xp6(1),t.s9C("value",g.id),t.xp6(1),t.Oqu(g.name)}}function ba(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.addUser.roleNameRequired")," "))}function Aa(n,L){if(1&n&&(t.TgZ(0,"div",24),t.YNc(1,ba,3,3,"div",25),t.qZA()),2&n){const g=t.oxw();let e;t.xp6(1),t.Q6J("ngIf",null==(e=g.editUserForm.get("roleId"))||null==e.errors?null:e.errors.required)}}let Ca=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(f,I,F),this.data=e,this.dialogRef=i,this.authenticationService=f,this.activatedRoute=I,this.translate=F,this.globalsService=st,this.groupService=ut,this.formBuilder=xt,this.group=new ge({}),this.user=new Ie({}),this.dataRoleGroup=this.globalsService.group.dataRoleGroup,i.disableClose=!0,this.dialogRef.keydownEvents().subscribe(At=>{"Escape"===At.key&&this.dialogRef.close()}),this.group=this.data.group,this.user=this.data.user,this.dataRoleGroup=this.dataRoleGroup.filter(At=>At.id>=this.group.role)}ngOnInit(){super.ngOnInit(),this.createFormEditUser(),this.initSelectRole()}initSelectRole(){setTimeout(()=>{$(".select-fixed-single.select-role").select2({minimumResultsForSearch:1/0,width:200}).on("select2:select",e=>{const i=e.params.data.id?parseInt(e.params.data.id):"";this.editUserForm.controls.roleId.setValue(i)})},0)}createFormEditUser(){this.editUserForm=this.formBuilder.group({fullName:[this.user.fullName,[j.kI.required,j.kI.minLength(3),j.kI.maxLength(100),this.noWhitespaceValidator]],group:[this.user.group],roleId:[this.user.role,[j.kI.required]]})}noWhitespaceValidator(e){return 0===(e.value||"").trim().length?{whitespace:!0}:null}saveInfoEditUser(){this.editUserForm.invalid||this.groupService.updateUser({fullName:this.editUserForm.controls.fullName.value,userId:this.user.userId,group:this.editUserForm.controls.group.value,role:this.editUserForm.controls.roleId.value}).subscribe(i=>{if(1===i.status)return AppNoty.success([this.translate.instant("modules.dmp.group.editUser.updateSuccess")]),void this.dialogRef.close(!0);AppNoty.error([i.message?i.message:this.translate.instant("modules.dmp.group.editUser.updateFailed")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(tt.so),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(fe),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-group-dialog-edit-user"]],features:[t.qOj],decls:49,vars:33,consts:[[1,"dialog-header","pt-2","pb-2"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-users-three","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-edit-user"],[1,"col-xl-12","p-2"],[1,"card-body","px-0","pb-0"],[3,"formGroup"],[1,"form-group","mb-2"],[1,"form-label","d-block"],["type","text","formControlName","group","readonly","",1,"form-control"],[1,"ms-1","text-danger"],["type","text","formControlName","fullName",1,"form-control",3,"placeholder"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"form-group"],["formControlName","roleId",1,"form-control","select","w-100","select-fixed-single","select-role"],["value","",1,"text-capitalize"],[4,"ngFor","ngForOf"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger","me-2",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"btn","btn-primary",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"],[3,"value"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9)(12,"label",10)(13,"strong"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t._UZ(16,"input",11),t.qZA(),t.TgZ(17,"div",9)(18,"label",10)(19,"strong"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"span",12),t._uU(23,"*"),t.qZA()(),t._UZ(24,"input",13),t.ALo(25,"translate"),t.YNc(26,ya,4,3,"div",14),t.qZA(),t.TgZ(27,"div",15)(28,"label",10)(29,"strong"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"span",12),t._uU(33,"*"),t.qZA()(),t.TgZ(34,"select",16)(35,"option",17),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.YNc(38,_a,3,2,"ng-container",18),t.qZA(),t.YNc(39,Aa,2,1,"div",14),t.qZA()()()()(),t.TgZ(40,"div",19)(41,"button",20),t._uU(42),t.ALo(43,"translate"),t._UZ(44,"i",21),t.qZA(),t.TgZ(45,"button",22),t.NdJ("click",function(){return i.saveInfoEditUser()}),t._uU(46),t.ALo(47,"translate"),t._UZ(48,"i",23),t.qZA()()),2&e){let f,I,F;t.xp6(3),t.hij(" ",t.lcZ(4,17,"modules.dmp.group.editUser.title")," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(5),t.Q6J("formGroup",i.editUserForm),t.xp6(4),t.Oqu(t.lcZ(15,19,"modules.dmp.group.editUser.group")),t.xp6(6),t.Oqu(t.lcZ(21,21,"modules.dmp.group.editUser.fullName")),t.xp6(4),t.ekj("ng-invalid",(null==(f=i.editUserForm.get("fullName"))?null:f.touched)&&(null==(f=i.editUserForm.get("fullName"))?null:f.invalid)),t.s9C("placeholder",t.lcZ(25,23,"modules.dmp.group.editUser.fullNamePlaceholder")),t.xp6(2),t.Q6J("ngIf",(null==(I=i.editUserForm.get("fullName"))?null:I.invalid)&&((null==(I=i.editUserForm.get("fullName"))?null:I.dirty)||(null==(I=i.editUserForm.get("fullName"))?null:I.touched))),t.xp6(4),t.Oqu(t.lcZ(31,25,"modules.dmp.group.addUser.roleName")),t.xp6(6),t.Oqu(t.lcZ(37,27,"modules.dmp.group.addUser.selectRole")),t.xp6(2),t.Q6J("ngForOf",i.dataRoleGroup),t.xp6(1),t.Q6J("ngIf",(null==(F=i.editUserForm.get("roleId"))?null:F.invalid)&&((null==(F=i.editUserForm.get("roleId"))?null:F.dirty)||(null==(F=i.editUserForm.get("roleId"))?null:F.touched))),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(43,29,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.editUserForm.invalid),t.xp6(1),t.hij(" ",t.lcZ(47,31,"common.button.save")," ")}},dependencies:[_t.sg,_t.O5,tt.ZT,j._Y,j.YN,j.Kr,j.Fj,j.EJ,j.JJ,j.JL,j.sg,j.u,M.X$],styles:[".dmp-edit-user input[readonly]{background-color:#9797974d;border-color:#76767680;color:#000000b3;cursor:no-drop}  .dmp-edit-user input[readonly]:focus{border-color:#76767680}"]}),L})();function wa(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.ruleCheckerService.isAllow("dmp/groupProduct/user/register")&&i.openGroupDialogAddUser())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",43),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.btnAddUser")," "))}function Ta(n,L){1&n&&(t.TgZ(0,"th",44),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.sequence")," "))}function Sa(n,L){if(1&n&&(t.TgZ(0,"td",45)(1,"span",46),t._uU(2),t.qZA()()),2&n){const g=L.index;t.xp6(2),t.hij(" ",g+1," ")}}function ka(n,L){1&n&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.userId")," "))}function Da(n,L){if(1&n&&(t.TgZ(0,"td",48),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.hij(" ",g.userId," ")}}function Za(n,L){1&n&&(t.TgZ(0,"th",47),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.fullName")," "))}const La=function(n){return{"cursor-pointer name-user":n}};function Ma(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw();return t.KtG(f.checkAllowAction(i)&&f.ruleCheckerService.isAllow("dmp/groupProduct/user/update")&&f.openGroupDialogEditUser(i))}),t._uU(1),t.qZA()}if(2&n){const g=t.oxw().$implicit,e=t.oxw();t.Q6J("ngClass",t.VKq(2,La,e.checkAllowAction(g)&&e.ruleCheckerService.isAllow("dmp/groupProduct/user/update"))),t.xp6(1),t.hij(" ",g.fullName," ")}}function Ia(n,L){if(1&n&&(t.TgZ(0,"div",53),t._uU(1),t.qZA()),2&n){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.fullName," ")}}function Ea(n,L){if(1&n&&(t.TgZ(0,"td",48)(1,"div",49),t.YNc(2,Ma,2,4,"a",50),t.YNc(3,Ia,2,1,"div",51),t.qZA()()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.currentUser&&e.currentUser.userId!==g.userId&&(e.group.role===e.dataRoleGroup[0].id||e.group.role===e.dataRoleGroup[1].id)),t.xp6(1),t.Q6J("ngIf",e.currentUser&&e.currentUser.userId===g.userId||e.group.role===e.dataRoleGroup[2].id||e.group.role===e.dataRoleGroup[3].id)}}function Ua(n,L){1&n&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.createdAt")," "))}function Pa(n,L){if(1&n&&(t.TgZ(0,"td",55),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.hij(" ",g.createdAt," ")}}function Na(n,L){1&n&&(t.TgZ(0,"th",54),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.roleName")," "))}function Oa(n,L){if(1&n&&(t.TgZ(0,"span",58),t._uU(1),t.qZA()),2&n){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.name," ")}}function ja(n,L){if(1&n&&(t.ynx(0),t.YNc(1,Oa,2,1,"span",57),t.BQk()),2&n){const g=L.$implicit,e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",g.id===e.role)}}function qa(n,L){if(1&n&&(t.TgZ(0,"td",55),t.YNc(1,ja,2,1,"ng-container",56),t.qZA()),2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngForOf",g.dataRoleGroup)}}function Fa(n,L){1&n&&t._UZ(0,"th",54)}function Ba(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li")(1,"a",65),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openGroupDialogEditUser(i))}),t._UZ(2,"i",66),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"common.button.edit")," "))}function Ya(n,L){1&n&&t._UZ(0,"li",67)}function Ga(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"li")(1,"a",68),t.NdJ("click",function(){t.CHM(g);const i=t.oxw(2).$implicit,f=t.oxw();return t.KtG(f.openGroupDialogDeleteUser(i))}),t._UZ(2,"i",69),t._uU(3),t.ALo(4,"translate"),t.qZA()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"common.button.delete")," "))}function Ra(n,L){if(1&n&&(t.TgZ(0,"div",60)(1,"button",61)(2,"mat-icon"),t._uU(3,"more_vert"),t.qZA()(),t.TgZ(4,"ul",62),t.YNc(5,Ba,5,3,"li",63),t.YNc(6,Ya,1,0,"li",64),t.YNc(7,Ga,5,3,"li",63),t.qZA()()),2&n){const g=t.oxw(2);t.xp6(5),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/groupProduct/user/update")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/groupProduct/user/update")&&g.ruleCheckerService.isAllow("dmp/groupProduct/user/delete")),t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/groupProduct/user/delete"))}}function Ha(n,L){if(1&n&&(t.TgZ(0,"td",45),t.YNc(1,Ra,8,3,"div",59),t.qZA()),2&n){const g=L.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.currentUser&&e.currentUser.userId!==g.userId&&e.checkAllowAction(g))}}function Ja(n,L){1&n&&t._UZ(0,"tr",70)}function za(n,L){1&n&&t._UZ(0,"tr",71)}function Qa(n,L){1&n&&(t.TgZ(0,"div",72),t._UZ(1,"i",73),t.TgZ(2,"div",74),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const Va=function(n){return{name:n}};let Wa=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt,At){super(f,I,F),this.data=e,this.dialogRef=i,this.authenticationService=f,this.activatedRoute=I,this.translate=F,this.globalsService=st,this.groupService=ut,this.ruleCheckerService=xt,this.dialog=At,this.length=0,this.keyword="",this.group=new ge({}),this.dataRoleGroup=this.globalsService.group.dataRoleGroup,this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","fullName","timeCreate","roleName"],this.dataUsers=[],i.disableClose=!0,this.dialogRef.keydownEvents().subscribe(Dt=>{"Escape"===Dt.key&&this.dialogRef.close()}),this.group=this.data.group}ngOnInit(){super.ngOnInit()}ngAfterViewInit(){setTimeout(()=>{this.getData()},0)}getData(){this.groupService.getListMember(this.group.name).subscribe(e=>{1===e.status&&(this.dataUsers=e.data,this.dataUsers.length&&this.dataUsers.sort((i,f)=>i.role-f.role),this.length=e.total,(this.group.role===this.dataRoleGroup[0].id||this.group.role===this.dataRoleGroup[1].id)&&(this.displayedColumns=["sequenceManage","userId","fullName","timeCreate","roleName","action"]),this.dataSourceManage=new z.by(this.dataUsers))})}searchData(){const e=this.dataUsers.filter(i=>i.fullName.toLowerCase().includes(this.keyword.toLowerCase().trim()));this.length=e.length,this.dataSourceManage=new z.by(e)}openGroupDialogAddUser(){this.dialog.open(ga,{autoFocus:!1,panelClass:"group-dialog-add-user",width:"440px",height:"auto",maxHeight:"90vh",data:{group:this.group}}).afterClosed().subscribe(i=>{i&&this.getData()})}openGroupDialogEditUser(e){this.dialog.open(Ca,{autoFocus:!1,panelClass:"group-dialog-edit-user",width:"440px",height:"auto",maxHeight:"90vh",data:{group:this.group,user:e}}).afterClosed().subscribe(f=>{f&&this.getData()})}openGroupDialogDeleteUser(e){this.dialog.open(V.$,{width:"400px",autoFocus:!1,disableClose:!1}).afterClosed().subscribe(f=>{f&&this.deleteUser(e)})}checkAllowAction(e){return this.group.role<=e.role}deleteUser(e){this.groupService.deleteUser({userId:e.userId,group:e.group}).subscribe(f=>{if(1===f.status)return AppNoty.success([this.translate.instant("modules.dmp.group.deleteSuccess")]),this.dataUsers=this.dataUsers.filter(I=>I.userId!==e.userId),this.length=this.dataUsers.length,void(this.dataSourceManage=new z.by(this.dataUsers));AppNoty.error([f.message?f.message:this.translate.instant("modules.dmp.group.deleteFailed")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(tt.so),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(Vt.d),t.Y36(fe),t.Y36(Jt.H),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-group-dialog-detail"]],features:[t.qOj],decls:56,vars:23,consts:[[1,"dialog-header","pt-2","pb-2","pe-4"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-users-three","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-group-detail"],[1,"col-12","p-2"],[1,"card-body","px-0","pb-0"],[1,"d-flex","flex-wrap"],[1,"col-12"],[1,"wp-filter-groups"],[1,"form-group","mb-2","float-start","me-2","form-select-2"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"wp-action-buttons","mb-2","float-end"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-12","pb-0"],[1,"card","mb-0"],[1,"table-responsive","fix-scroll-table","data-table-groups"],["mat-table","","aria-label","Table displaying manage groups data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","userId"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate ps-0",4,"matCellDef"],["matColumnDef","fullName"],["matColumnDef","timeCreate"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","roleName"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","text-center p-2",4,"ngIf"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"ph","ph-plus","ms-1","icon-small"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","ps-0"],[1,"d-flex","mb-1"],["class","fw-light-bold d-inline-block mb-0 f-20 text-dark",3,"ngClass","click",4,"ngIf"],["class","fw-bold d-inline-block mb-0 f-20",4,"ngIf"],[1,"fw-light-bold","d-inline-block","mb-0","f-20","text-dark",3,"ngClass","click"],[1,"fw-bold","d-inline-block","mb-0","f-20"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],["mat-cell","",1,"text-truncate","text-center"],[4,"ngFor","ngForOf"],["class","badge bg-primary w-80 fw-normal text-capitalize",4,"ngIf"],[1,"badge","bg-primary","w-80","fw-normal","text-capitalize"],["class","dropdown",4,"ngIf"],[1,"dropdown"],["mat-icon-button","","data-bs-toggle","dropdown"],[1,"dropdown-menu"],[4,"ngIf"],["class","dropdown-divider",4,"ngIf"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ph","ph-pencil-simple","me-2","text-warning"],[1,"dropdown-divider"],[1,"dropdown-item","cursor-pointer","bg-danger","text-white",3,"click"],[1,"ph","ph-trash","me-2"],["mat-header-row",""],["mat-row",""],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"span",13),t._UZ(16,"i",14),t.qZA(),t.TgZ(17,"input",15),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.searchData()}),t.ALo(18,"translate"),t.qZA()()(),t.TgZ(19,"div",16)(20,"button",17),t.NdJ("click",function(){return i.searchData()}),t._uU(21),t.ALo(22,"translate"),t._UZ(23,"i",18),t.qZA()()(),t.TgZ(24,"div",19),t.YNc(25,wa,4,3,"button",20),t.qZA()(),t.TgZ(26,"div",21)(27,"div",22)(28,"div",23)(29,"table",24),t.ynx(30,25),t.YNc(31,Ta,3,3,"th",26),t.YNc(32,Sa,3,1,"td",27),t.BQk(),t.ynx(33,28),t.YNc(34,ka,3,3,"th",29),t.YNc(35,Da,2,1,"td",30),t.BQk(),t.ynx(36,31),t.YNc(37,Za,3,3,"th",29),t.YNc(38,Ea,4,2,"td",30),t.BQk(),t.ynx(39,32),t.YNc(40,Ua,3,3,"th",33),t.YNc(41,Pa,2,1,"td",34),t.BQk(),t.ynx(42,35),t.YNc(43,Na,3,3,"th",33),t.YNc(44,qa,2,1,"td",34),t.BQk(),t.ynx(45,36),t.YNc(46,Fa,1,0,"th",33),t.YNc(47,Ha,2,1,"td",27),t.BQk(),t.YNc(48,Ja,1,0,"tr",37),t.YNc(49,za,1,0,"tr",38),t.qZA()(),t.YNc(50,Qa,5,3,"div",39),t.qZA()()()()()(),t.TgZ(51,"div",40)(52,"button",41),t._uU(53),t.ALo(54,"translate"),t._UZ(55,"i",42),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",t.xi3(4,12,"modules.dmp.group.groupDetail",t.VKq(21,Va,i.group.name))," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(12),t.s9C("placeholder",t.lcZ(18,15,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(4),t.hij("",t.lcZ(22,17,"common.button.search")," "),t.xp6(4),t.Q6J("ngIf",(i.group.role===i.dataRoleGroup[0].id||i.group.role===i.dataRoleGroup[1].id)&&i.ruleCheckerService.isAllow("dmp/groupProduct/user/register")),t.xp6(4),t.Q6J("dataSource",i.dataSourceManage),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===i.length),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(54,19,"common.button.cancel")," "))},dependencies:[_t.mk,_t.sg,_t.O5,de.RK,ue.Hw,tt.ZT,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,j.Fj,j.JJ,j.On,M.X$],styles:[".dmp-group-detail .mat-column-sequenceManage{width:65px}  .dmp-group-detail .mat-column-userId{width:100px}  .dmp-group-detail .mat-column-roleName{width:140px}  .dmp-group-detail .mat-column-timeCreate{width:200px}  .dmp-group-detail .w-80{width:80px}  .dmp-group-detail .mat-column-action{width:70px}  .dmp-group-detail .name-user:hover{color:#0c83ff}  .dmp-group-detail .fix-scroll-table{overflow-x:hidden;overflow-y:auto;max-height:645px}  .dmp-group-detail .fix-scroll-table thead tr{background:white;position:sticky;top:0;box-shadow:0 2px 1px -2px #b7b7b7}  .dmp-group-detail .fix-scroll-table tr:first-child{z-index:1}@media (max-width: 991px){  .dmp-group-detail .mat-column-fullName{width:250px}  .dmp-group-detail .fix-scroll-table{overflow-x:auto;overflow-y:auto;max-height:500px}}@media (max-width: 575px){  .dmp-group-detail .fix-scroll-table{max-height:400px}}"]}),L})();function Xa(n,L){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.sequence")," "))}function Ka(n,L){if(1&n&&(t.TgZ(0,"td",40)(1,"span",41),t._uU(2),t.qZA()()),2&n){const g=L.index,e=t.oxw();t.xp6(2),t.hij(" ",g+1+(e.pageIndex-1)*e.pageSize," ")}}function $a(n,L){if(1&n&&(t.TgZ(0,"th",42),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const g=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"modules.dmp.group.groupName")," "),t.xp6(3),t.hij("(",t.lcZ(5,4,g.length),")")}}const tl=function(n){return{"cursor-pointer title-group":n}};function el(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",43)(1,"div",44)(2,"a",45),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.ruleCheckerService.isAllow("dmp/groupProduct/memberList")&&I.openGroupDialogDetail(f))}),t._uU(3),t.qZA()()()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(2,tl,e.ruleCheckerService.isAllow("dmp/groupProduct/memberList"))),t.xp6(1),t.hij(" ",g.name," ")}}function il(n,L){1&n&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.group.roleName")," "))}function nl(n,L){if(1&n&&(t.TgZ(0,"span",50),t._uU(1),t.qZA()),2&n){const g=t.oxw().$implicit;t.xp6(1),t.hij(" ",g.name," ")}}function ol(n,L){if(1&n&&(t.ynx(0),t.YNc(1,nl,2,1,"span",49),t.BQk()),2&n){const g=L.$implicit,e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",g.id===e.role)}}function rl(n,L){if(1&n&&(t.TgZ(0,"td",47),t.YNc(1,ol,2,1,"ng-container",48),t.qZA()),2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngForOf",g.dataRoleGroup)}}function sl(n,L){1&n&&t._UZ(0,"th",46)}function al(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",52),t.NdJ("click",function(){t.CHM(g);const i=t.oxw().$implicit,f=t.oxw();return t.KtG(f.openGroupDialogDetail(i))}),t.ALo(1,"translate"),t._UZ(2,"i",53),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"common.button.info"))}function ll(n,L){if(1&n&&(t.TgZ(0,"td",40),t.YNc(1,al,3,3,"a",51),t.qZA()),2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngIf",g.ruleCheckerService.isAllow("dmp/groupProduct/memberList"))}}function cl(n,L){1&n&&t._UZ(0,"tr",54)}function pl(n,L){1&n&&t._UZ(0,"tr",55)}const dl=function(n){return{"border-top":n}};function ul(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",56)(1,"app-paginator",57),t.NdJ("page",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.getPaginator(i))}),t.qZA()()}if(2&n){const g=t.oxw();t.Q6J("ngClass",t.VKq(7,dl,g.dataSourceManage)),t.xp6(1),t.Tol(0==g.length?"d-none":"rounded-bottom-start rounded-bottom-end"),t.Q6J("pageSizeOptions",g.pageSizeOptions)("pageSize",g.pageSize)("pageIndex",g.pageIndex)("length",g.length)}}function hl(n,L){1&n&&(t.TgZ(0,"div",58),t._UZ(1,"i",59),t.TgZ(2,"div",60),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const ml=function(){return["/"]};let gl=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.groupService=I,this.globalsService=F,this.ruleCheckerService=st,this.location=ut,this.dialog=xt,this.pageSize=30,this.pageSizeOptions=[30,50,100],this.pageIndex=1,this.length=0,this.keyword="",this.groups=[],this.dataRoleGroup=this.globalsService.group.dataRoleGroup,this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","name","roleName","action"]}ngOnInit(){this.getData(),this.dataSourceManage=new z.by(this.groups),this.length=this.groups.length}getData(){this.groupService.get({}).subscribe(e=>{1===e.status&&(this.groups=e.data,this.length=e.total,this.dataSourceManage=new z.by(this.groups))}),this.location.replaceState("group/list")}searchData(){const e=this.groups.filter(i=>i.name.toLowerCase().includes(this.keyword.toLowerCase().trim()));this.length=e.length,this.dataSourceManage=new z.by(e)}openGroupDialogDetail(e){this.dialog.open(Wa,{autoFocus:!1,panelClass:"group-dialog-detail",width:"1600px",height:"auto",maxHeight:"90vh",data:{group:e}}).afterClosed().subscribe(f=>{})}getPaginator(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getData()}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(fe),t.Y36(Vt.d),t.Y36(Jt.H),t.Y36(_t.Ye),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-group-list"]],features:[t.qOj],decls:48,vars:20,consts:[["id","wp-dmp-groups"],[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","py-2",3,"routerLink"],[1,"ph-house","me-2"],[1,"breadcrumb-item","active","py-2"],[1,"content"],[1,"card","mb-0"],[1,"p-2","pb-0"],[1,"row"],[1,"col-xl-12"],[1,"wp-filter-groups"],[1,"form-group","mb-2","float-start","me-2","form-select-2","input-search"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"col-xl-12","p-0"],[1,"table-responsive","data-table-groups"],["mat-table","","aria-label","Table displaying manage groups data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate ps-0",4,"matCellDef"],["matColumnDef","roleName"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","rounded-bottom-start rounded-bottom-end d-flex justify-content-end",3,"ngClass",4,"ngIf"],["class","text-center p-2",4,"ngIf"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","ps-0"],[1,"d-flex","mb-1"],[1,"fw-light-bold","d-inline-block","mb-0","f-20",3,"ngClass","click"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],["mat-cell","",1,"text-truncate","text-center"],[4,"ngFor","ngForOf"],["class","badge bg-primary w-80 fw-normal",4,"ngIf"],[1,"badge","bg-primary","w-80","fw-normal"],["class","cursor-pointer",3,"matTooltip","click",4,"ngIf"],[1,"cursor-pointer",3,"matTooltip","click"],[1,"ph","ph-info","text-primary"],["mat-header-row",""],["mat-row",""],[1,"rounded-bottom-start","rounded-bottom-end","d-flex","justify-content-end",3,"ngClass"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),t._UZ(21,"i",17),t.qZA(),t.TgZ(22,"input",18),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.searchData()}),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"div",19)(25,"button",20),t.NdJ("click",function(){return i.searchData()}),t._uU(26),t.ALo(27,"translate"),t._UZ(28,"i",21),t.qZA()()()(),t.TgZ(29,"div",22)(30,"div",23)(31,"table",24),t.ynx(32,25),t.YNc(33,Xa,3,3,"th",26),t.YNc(34,Ka,3,1,"td",27),t.BQk(),t.ynx(35,28),t.YNc(36,$a,6,6,"th",29),t.YNc(37,el,4,4,"td",30),t.BQk(),t.ynx(38,31),t.YNc(39,il,3,3,"th",32),t.YNc(40,rl,2,1,"td",33),t.BQk(),t.ynx(41,34),t.YNc(42,sl,1,0,"th",32),t.YNc(43,ll,2,1,"td",27),t.BQk(),t.YNc(44,cl,1,0,"tr",35),t.YNc(45,pl,1,0,"tr",36),t.qZA()(),t.YNc(46,ul,2,9,"div",37),t.YNc(47,hl,5,3,"div",38),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(19,ml)),t.xp6(2),t.hij(" ",t.lcZ(8,11,"breadcrumbs.home")," "),t.xp6(3),t.hij(" ",t.lcZ(11,13,"modules.dmp.group.title")," "),t.xp6(12),t.s9C("placeholder",t.lcZ(23,15,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(4),t.hij("",t.lcZ(27,17,"common.button.search")," "),t.xp6(5),t.Q6J("dataSource",i.dataSourceManage),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.length),t.xp6(1),t.Q6J("ngIf",0===i.length))},dependencies:[_t.mk,_t.sg,_t.O5,Y.rH,y.gM,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,oe.J,j.Fj,j.JJ,j.On,_t.JJ,M.X$],styles:["#wp-dmp-groups .data-table-groups .mat-column-sequenceManage{width:65px}  #wp-dmp-groups .data-table-groups .mat-column-roleName{width:150px}  #wp-dmp-groups .data-table-groups .mat-column-action{width:62px}  #wp-dmp-groups .data-table-groups .w-80{width:80px}  #wp-dmp-groups .data-table-groups .title-group:hover{color:#0c83ff}@media (max-width: 1600px){  #wp-dmp-groups .input-search{width:230px}}@media (max-width: 575px){  #wp-dmp-groups .data-table-groups .mat-column-name{width:200px}}"]}),L})();function fl(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.domainRequired")," "))}function vl(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"common.validator.excessSpace")," "))}function xl(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.domainMinLength")," "))}function yl(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.domainMaxLength")," "))}function _l(n,L){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.domainPattern")," "))}function bl(n,L){if(1&n&&(t.TgZ(0,"div",19),t.YNc(1,fl,3,3,"div",20),t.YNc(2,vl,3,3,"div",20),t.YNc(3,xl,3,3,"div",20),t.YNc(4,yl,3,3,"div",20),t.YNc(5,_l,3,3,"div",20),t.qZA()),2&n){const g=t.oxw();let e,i,f,I,F;t.xp6(1),t.Q6J("ngIf",null==(e=g.websiteForm.get("domain"))||null==e.errors?null:e.errors.required),t.xp6(1),t.Q6J("ngIf",null==(i=g.websiteForm.get("domain"))||null==i.errors?null:i.errors.excessWhiteSpace),t.xp6(1),t.Q6J("ngIf",null==(f=g.websiteForm.get("domain"))||null==f.errors?null:f.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(I=g.websiteForm.get("domain"))||null==I.errors?null:I.errors.maxlength),t.xp6(1),t.Q6J("ngIf",null==(F=g.websiteForm.get("domain"))||null==F.errors?null:F.errors.pattern)}}let Al=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut){super(f,I,F),this.data=e,this.dialogRef=i,this.authenticationService=f,this.activatedRoute=I,this.translate=F,this.websiteService=st,this.formBuilder=ut,this.dialogRef.keydownEvents().subscribe(xt=>{"Escape"===xt.key&&this.dialogRef.close()})}ngOnInit(){super.ngOnInit(),this.createFormWebsite()}createFormWebsite(){this.websiteForm=this.formBuilder.group({domain:["",[Cl(3,255)]]})}saveWebsiteInfo(){if(this.websiteForm.invalid)return;const e={domain:this.websiteForm.controls.domain.value.trim()};this.websiteService.create(e).subscribe(i=>{if("ok"===i.message)return AppNoty.success([this.translate.instant("modules.dmp.website.createSuccess")]),void this.dialogRef.close(!0);AppNoty.error([i.message?i.message:this.translate.instant("modules.dmp.website.createFailed")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(tt.so),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(se),t.Y36(j.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-website-dialog-create"]],features:[t.qOj],decls:30,vars:22,consts:[[1,"dialog-header","pt-2","pb-2"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-globe-hemisphere-west","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-create-website"],[1,"col-xl-12","p-2"],[1,"card-body","px-0","pb-0","mb-2"],[3,"formGroup"],[1,"form-group"],[1,"form-label","d-block"],[1,"ms-1","text-danger"],["type","text","formControlName","domain",1,"form-control",3,"placeholder"],["class","validation-invalid-label mt-2",4,"ngIf"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger","me-2",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"btn","btn-primary",3,"disabled","click"],[1,"ph-floppy-disk","ms-1"],[1,"validation-invalid-label","mt-2"],[4,"ngIf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",9)(12,"label",10)(13,"strong"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"span",11),t._uU(17,"*"),t.qZA()(),t._UZ(18,"input",12),t.ALo(19,"translate"),t.YNc(20,bl,6,5,"div",13),t.qZA()()()()(),t.TgZ(21,"div",14)(22,"button",15),t._uU(23),t.ALo(24,"translate"),t._UZ(25,"i",16),t.qZA(),t.TgZ(26,"button",17),t.NdJ("click",function(){return i.saveWebsiteInfo()}),t._uU(27),t.ALo(28,"translate"),t._UZ(29,"i",18),t.qZA()()),2&e){let f,I;t.xp6(3),t.hij(" ",t.lcZ(4,12,"modules.dmp.website.createWebsite")," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(5),t.Q6J("formGroup",i.websiteForm),t.xp6(4),t.Oqu(t.lcZ(15,14,"modules.dmp.website.domain")),t.xp6(4),t.ekj("ng-invalid",(null==(f=i.websiteForm.get("domain"))?null:f.touched)&&(null==(f=i.websiteForm.get("domain"))?null:f.invalid)),t.s9C("placeholder",t.lcZ(19,16,"modules.dmp.website.domainPlaceholder")),t.xp6(2),t.Q6J("ngIf",(null==(I=i.websiteForm.get("domain"))?null:I.invalid)&&((null==(I=i.websiteForm.get("domain"))?null:I.dirty)||(null==(I=i.websiteForm.get("domain"))?null:I.touched))),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(24,18,"common.button.cancel")," "),t.xp6(3),t.Q6J("disabled",i.websiteForm.invalid),t.xp6(1),t.hij(" ",t.lcZ(28,20,"common.button.save")," ")}},dependencies:[_t.O5,tt.ZT,j._Y,j.Fj,j.JJ,j.JL,j.sg,j.u,M.X$]}),L})();function Cl(n,L){const g=/^(((http|https):\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6})\/?$/;return e=>{if(!e.value)return{required:!0};if(!e.value?.trim())return{excessWhiteSpace:!0};const i=e.value.trim(),f=i.length;return f<n?{minlength:{requiredLength:n,actualLength:f}}:f>L?{maxlength:{requiredLength:L,actualLength:f}}:g.test(i)?null:{pattern:{requiredPattern:g.toString(),actualValue:i}}}}var wl=Tt(630),Tl=Tt(4425);function Sl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"a",22),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.downloadFile())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",23),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.downloadFileCode")," "))}function kl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"i",24),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.copyScript(i.website.trackingScript))}),t.ALo(1,"translate"),t._uU(2,"\n                            "),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.website.copyScript"))}let Dl=(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut,xt){super(f,I,F),this.data=e,this.dialogRef=i,this.authenticationService=f,this.activatedRoute=I,this.translate=F,this.highlightService=st,this.websiteService=ut,this.clipboard=xt,this.website=new De.E({}),this.highlighted=!1,this.setting={element:{dynamicDownload:null}},i.disableClose=!0,this.dialogRef.keydownEvents().subscribe(At=>{"Escape"===At.key&&this.dialogRef.close()}),this.website=this.data.website}ngOnInit(){super.ngOnInit()}ngAfterViewInit(){setTimeout(()=>{this.getCodeTracking()},0)}downloadFile(){this.getDataScript().subscribe(e=>{const i=this.website.domain.replaceAll(".","_");this.dynamicDownloadByHtmlTag({fileName:i+"_script",text:e})})}copyScript(e){e&&(this.clipboard.copy(e),AppNoty.success([this.translate.instant("modules.dmp.website.copyScriptSuccess")]))}getDataScript(){return(0,ye.of)(this.website.trackingScript)}dynamicDownloadByHtmlTag(e){this.setting.element.dynamicDownload||(this.setting.element.dynamicDownload=document.createElement("a"));const i=this.setting.element.dynamicDownload,f=e.fileName.indexOf(".json")>-1?"text/json":"text/plain";i.setAttribute("href",`data:${f};charset=utf-8,${encodeURIComponent(e.text)}`),i.setAttribute("download",e.fileName);const I=new MouseEvent("click");i.dispatchEvent(I)}openLinkNewTab(e){e.indexOf("//")<0&&(e="https://"+e),window.open(e,"_blank")}getCodeTracking(){this.websiteService.getCodeTracking({domain:this.website.domain}).subscribe(i=>{if(1===i.status)return this.website.trackingScript=i.data.script,void setTimeout(()=>{this.highlighted||(this.highlightService.highlightAll(),this.highlighted=!0)},0);AppNoty.error([i.message?i.message:this.translate.instant("modules.dmp.website.getTrackingCodeFailed")])})}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(tt.WI),t.Y36(tt.so),t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(wl.l),t.Y36(se),t.Y36(Tl.TU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-website-dialog-detail"]],features:[t.qOj],decls:46,vars:27,consts:[[1,"dialog-header","pt-2","pb-2"],[1,"font-weight-bold","m-0","ms-1"],[1,"ph","ph-globe-hemisphere-west","mr-2"],[1,"icon-close-dialog",3,"mat-dialog-close"],[1,"ph","ph-x"],[1,"dmp-website-detail"],[1,"col-xl-12","p-2"],[1,"card-body","px-0","pb-0"],[1,"col-xl-12"],[1,"form-group","mb-2"],[1,"form-label","mb-0"],[1,"mx-1","cursor-pointer",3,"click"],[1,"ph","ph-link","icon-small-17"],[1,"form-label","d-block","d-flex","justify-content-between"],["class","download-file cursor-pointer",3,"click",4,"ngIf"],[1,"form-control-feedback","code-toolbar","border","border-radius"],[1,"language-javascript","mt-0","body-code"],["class","ph ph-copy-simple me-1 text-muted",3,"matTooltip","click",4,"ngIf"],[1,"form-group","mb-1"],[1,"dialog-footer","pt-2","pb-2"],[1,"btn","btn-danger",3,"mat-dialog-close"],[1,"ph-x","ms-1"],[1,"download-file","cursor-pointer",3,"click"],[1,"ph","ph-download","icon-small"],[1,"ph","ph-copy-simple","me-1","text-muted",3,"matTooltip","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h5",1),t._UZ(2,"i",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"span",3),t._UZ(6,"i",4),t.qZA()(),t.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10)(13,"strong"),t._uU(14),t.ALo(15,"translate"),t.qZA()(),t.TgZ(16,"strong"),t._uU(17),t.qZA(),t.TgZ(18,"a",11),t.NdJ("click",function(){return i.openLinkNewTab(i.website.domain)}),t._UZ(19,"i",12),t.qZA()(),t.TgZ(20,"div",9)(21,"label",13)(22,"strong"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.YNc(25,Sl,4,3,"a",14),t.qZA(),t.TgZ(26,"div",15)(27,"pre",16)(28,"code"),t._uU(29),t.qZA(),t._uU(30,"\n                            "),t.YNc(31,kl,3,3,"i",17),t._uU(32,"\n                        "),t.qZA()()(),t.TgZ(33,"div",18),t._uU(34),t.ALo(35,"translate"),t.TgZ(36,"strong"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._uU(39),t.ALo(40,"translate"),t.qZA()()()()(),t.TgZ(41,"div",19)(42,"button",20),t._uU(43),t.ALo(44,"translate"),t._UZ(45,"i",21),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,13,"modules.dmp.website.trackingScript")," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(9),t.hij("",t.lcZ(15,15,"modules.dmp.website.domain"),":"),t.xp6(3),t.hij(" ",i.website.domain,""),t.xp6(6),t.Oqu(t.lcZ(24,17,"modules.dmp.website.admicroTagManager")),t.xp6(2),t.Q6J("ngIf",i.website.trackingScript),t.xp6(4),t.Oqu(i.website.trackingScript||""),t.xp6(2),t.Q6J("ngIf",i.website.trackingScript),t.xp6(3),t.hij(" ",t.lcZ(35,19,"modules.dmp.website.noteGuideCopyScript1")," "),t.xp6(3),t.Oqu(t.lcZ(38,21,"modules.dmp.website.tagHead")),t.xp6(2),t.hij(" ",t.lcZ(40,23,"modules.dmp.website.noteGuideCopyScript2")," "),t.xp6(3),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij("",t.lcZ(44,25,"common.button.cancel")," "))},dependencies:[_t.O5,tt.ZT,y.gM,M.X$],styles:[".dmp-website-detail .download-file{color:#0c83ff}  .language-javascript{position:relative}  .language-javascript .ph-copy-simple{position:absolute;bottom:10px;right:4px;cursor:pointer;height:20px}  pre code{white-space:normal!important}"]}),L})();function Zl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(g);const i=t.oxw();return t.KtG(i.openWebsiteDialogCreate())}),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",44),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.createWebsite")," "))}function Ll(n,L){1&n&&(t.TgZ(0,"th",45),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"common.sequence")," "))}function Ml(n,L){if(1&n&&(t.TgZ(0,"td",46)(1,"span",47),t._uU(2),t.qZA()()),2&n){const g=L.index,e=t.oxw();t.xp6(2),t.hij(" ",g+1+(e.pageIndex-1)*e.pageSize," ")}}function Il(n,L){if(1&n&&(t.TgZ(0,"th",48),t._uU(1),t.ALo(2,"translate"),t.TgZ(3,"span"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const g=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"modules.dmp.website.domain")," "),t.xp6(3),t.hij("(",t.lcZ(5,4,g.length),")")}}const El=function(n){return{"cursor-pointer title-website":n}};function Ul(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",49)(1,"div",3)(2,"a",50),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.ruleCheckerService.isAllow("dmp/website/getCodeTracking")&&I.openWebsiteDialogDetail(f))}),t._uU(3),t.qZA()()()}if(2&n){const g=L.$implicit,e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(2,El,e.ruleCheckerService.isAllow("dmp/website/getCodeTracking"))),t.xp6(1),t.hij(" ",g.domain," ")}}function Pl(n,L){1&n&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.trackingCode")," "))}function Nl(n,L){if(1&n&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.hij(" ",g.trackingId," ")}}function Ol(n,L){1&n&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.url")," "))}function jl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",52)(1,"a",53),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.openLinkNewTab(f.domain))}),t._UZ(2,"i",54),t.qZA()()}}function ql(n,L){1&n&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.trackingScript")," "))}const Fl=function(n){return{"cursor-pointer script-code":n}};function Bl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"td",52)(1,"a",55),t.NdJ("click",function(){const f=t.CHM(g).$implicit,I=t.oxw();return t.KtG(I.ruleCheckerService.isAllow("dmp/website/getCodeTracking")&&I.openWebsiteDialogDetail(f))}),t._UZ(2,"i",56),t.qZA()()}if(2&n){const g=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(1,Fl,g.ruleCheckerService.isAllow("dmp/website/getCodeTracking")))}}function Yl(n,L){1&n&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.createdAt")," "))}function Gl(n,L){if(1&n&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.hij(" ",g.createdAt," ")}}function Rl(n,L){1&n&&(t.TgZ(0,"th",51),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"modules.dmp.website.status")," "))}function Hl(n,L){1&n&&(t._UZ(0,"i",59),t.ALo(1,"translate")),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.website.notAuthenticated"))}function Jl(n,L){1&n&&(t._UZ(0,"i",60),t.ALo(1,"translate")),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"modules.dmp.website.verified"))}function zl(n,L){if(1&n&&(t.TgZ(0,"td",52),t.YNc(1,Hl,2,3,"i",57),t.YNc(2,Jl,2,3,"i",58),t.qZA()),2&n){const g=L.$implicit;t.xp6(1),t.Q6J("ngIf",0===g.status),t.xp6(1),t.Q6J("ngIf",1===g.status)}}function Ql(n,L){1&n&&t._UZ(0,"tr",61)}function Vl(n,L){1&n&&t._UZ(0,"tr",62)}const Wl=function(n){return{"border-top":n}};function Xl(n,L){if(1&n){const g=t.EpF();t.TgZ(0,"div",63)(1,"app-paginator",64),t.NdJ("page",function(i){t.CHM(g);const f=t.oxw();return t.KtG(f.getPaginator(i))}),t.qZA()()}if(2&n){const g=t.oxw();t.Q6J("ngClass",t.VKq(7,Wl,g.dataSourceManage)),t.xp6(1),t.Tol(0==g.length?"d-none":"rounded-bottom-start rounded-bottom-end"),t.Q6J("pageSizeOptions",g.pageSizeOptions)("pageSize",g.pageSize)("pageIndex",g.pageIndex)("length",g.length)}}function Kl(n,L){1&n&&(t.TgZ(0,"div",65),t._UZ(1,"i",66),t.TgZ(2,"div",67),t._uU(3),t.ALo(4,"translate"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(t.lcZ(4,1,"common.dataNotFound")))}const $l=function(){return["/"]},ec=[{path:"home",component:Li,title:"modules.dmp.common.home",canActivate:[H.a]},{path:"segment/list",component:er,title:"modules.dmp.segment.title",canActivate:[H.a],data:{route:"segment/list"}},{path:"audience/list",component:la,title:"modules.dmp.audience.title",canActivate:[H.a],data:{route:"audience/list"}},{path:"params/list",component:vi,title:"modules.dmp.parameters.title",canActivate:[H.a],data:{route:"params/list"}},{path:"website/list",component:(()=>{var n;class L extends X.H{constructor(e,i,f,I,F,st,ut){super(e,i,f),this.authenticationService=e,this.activatedRoute=i,this.translate=f,this.websiteService=I,this.location=F,this.ruleCheckerService=st,this.dialog=ut,this.pageSize=20,this.pageSizeOptions=[20,30,50,100],this.pageIndex=1,this.length=0,this.keyword="",this.websites=[],this.dataSourceManage=new z.by([]),this.displayedColumns=["sequenceManage","domain","trackingCode","url","trackingScript","createdAt","status"],this.activatedRoute.queryParams.subscribe(xt=>{typeof xt.limit<"u"&&(this.pageSize=xt.limit),typeof xt.keyword<"u"&&(this.keyword=xt.keyword),typeof xt.page<"u"&&(this.pageIndex=xt.page)})}ngOnInit(){this.getData(),this.dataSourceManage=new z.by(this.websites),this.length=this.websites.length}getData(){const e={limit:this.pageSize,page:this.pageIndex};this.keyword.length>0&&(e.keyword=this.keyword),this.websiteService.get(e).subscribe(f=>{1===f.status&&(this.websites=f.data,this.length=f.total,this.dataSourceManage=new z.by(this.websites))});const i=[];for(const f in e)i.push(f+"="+e[f]);this.location.replaceState("website/list",i.join("&"))}openWebsiteDialogCreate(){this.dialog.open(Al,{autoFocus:!1,panelClass:"website-dialog-create",width:"440px",height:"auto",maxHeight:"80vh"}).afterClosed().subscribe(i=>{i&&this.getData()})}openWebsiteDialogDetail(e){this.dialog.open(Dl,{autoFocus:!1,panelClass:"website-dialog-detail",width:"660px",height:"auto",maxHeight:"80vh",data:{website:e}}).afterClosed().subscribe(f=>{})}openLinkNewTab(e){e.indexOf("//")<0&&(e="https://"+e),window.open(e,"_blank")}getPaginator(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.getData()}}return(n=L).\u0275fac=function(e){return new(e||n)(t.Y36(B.$),t.Y36(Y.gz),t.Y36(M.sK),t.Y36(se),t.Y36(_t.Ye),t.Y36(Jt.H),t.Y36(tt.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dmp-website-list"]],features:[t.qOj],decls:59,vars:21,consts:[["id","wp-dmp-websites"],[1,"page-header"],[1,"page-header-content","d-lg-flex","flex-lg-wrap","border-bottom"],[1,"d-flex"],[1,"breadcrumb"],[1,"breadcrumb-item","py-2",3,"routerLink"],[1,"ph-house","me-2"],[1,"breadcrumb-item","active","py-2"],[1,"content"],[1,"card","mb-0"],[1,"p-2","pb-0"],[1,"row"],[1,"col-xl-12"],[1,"wp-filter-websites"],[1,"form-group","mb-2","float-start","me-2","form-select-2","input-search"],[1,"input-group"],[1,"input-group-text"],[1,"ph-funnel"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange","keydown.enter"],[1,"form-group","mb-2","float-start"],[1,"btn","btn-primary",3,"click"],[1,"ph","ph-magnifying-glass","ms-1","icon-small"],[1,"wp-action-buttons","mb-2","float-end"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-xl-12","p-0"],[1,"table-responsive","data-table-websites"],["mat-table","","aria-label","Table displaying manage websites data",1,"table","table-sm","table-hover","table-layout-fixed",3,"dataSource"],["matColumnDef","sequenceManage"],["mat-header-cell","","class","text-center bg-dark text-white",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","domain"],["mat-header-cell","","class","bg-dark text-white ps-0",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate ps-0",4,"matCellDef"],["matColumnDef","trackingCode"],["mat-header-cell","","class","bg-dark text-white text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-truncate text-center",4,"matCellDef"],["matColumnDef","url"],["matColumnDef","trackingScript"],["matColumnDef","createdAt"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","rounded-bottom-start rounded-bottom-end d-flex justify-content-end",3,"ngClass",4,"ngIf"],["class","text-center p-2",4,"ngIf"],[1,"ph","ph-plus","ms-1","icon-small"],["mat-header-cell","",1,"text-center","bg-dark","text-white"],["mat-cell","",1,"text-center"],[1,"stt-table"],["mat-header-cell","",1,"bg-dark","text-white","ps-0"],["mat-cell","",1,"text-truncate","ps-0"],[1,"fw-light-bold","d-inline-block","mb-0","f-20",3,"ngClass","click"],["mat-header-cell","",1,"bg-dark","text-white","text-center"],["mat-cell","",1,"text-truncate","text-center"],[1,"cursor-pointer",3,"click"],[1,"ph","ph-link"],[3,"ngClass","click"],[1,"ph","ph-code"],["class","ph ph-timer text-danger",3,"matTooltip",4,"ngIf"],["class","ph ph-check-circle text-success",3,"matTooltip",4,"ngIf"],[1,"ph","ph-timer","text-danger",3,"matTooltip"],[1,"ph","ph-check-circle","text-success",3,"matTooltip"],["mat-header-row",""],["mat-row",""],[1,"rounded-bottom-start","rounded-bottom-end","d-flex","justify-content-end",3,"ngClass"],[3,"pageSizeOptions","pageSize","pageIndex","length","page"],[1,"text-center","p-2"],[1,"mi-inbox"],[1,"text-muted"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"a",5),t._UZ(6,"i",6),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",7),t._uU(10),t.ALo(11,"translate"),t.qZA()()()()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"span",16),t._UZ(21,"i",17),t.qZA(),t.TgZ(22,"input",18),t.NdJ("ngModelChange",function(I){return i.keyword=I})("keydown.enter",function(){return i.getData()}),t.ALo(23,"translate"),t.qZA()()(),t.TgZ(24,"div",19)(25,"button",20),t.NdJ("click",function(){return i.getData()}),t._uU(26),t.ALo(27,"translate"),t._UZ(28,"i",21),t.qZA()()(),t.TgZ(29,"div",22),t.YNc(30,Zl,4,3,"button",23),t.qZA()(),t.TgZ(31,"div",24)(32,"div",25)(33,"table",26),t.ynx(34,27),t.YNc(35,Ll,3,3,"th",28),t.YNc(36,Ml,3,1,"td",29),t.BQk(),t.ynx(37,30),t.YNc(38,Il,6,6,"th",31),t.YNc(39,Ul,4,4,"td",32),t.BQk(),t.ynx(40,33),t.YNc(41,Pl,3,3,"th",34),t.YNc(42,Nl,2,1,"td",35),t.BQk(),t.ynx(43,36),t.YNc(44,Ol,3,3,"th",34),t.YNc(45,jl,3,0,"td",35),t.BQk(),t.ynx(46,37),t.YNc(47,ql,3,3,"th",34),t.YNc(48,Bl,3,3,"td",35),t.BQk(),t.ynx(49,38),t.YNc(50,Yl,3,3,"th",34),t.YNc(51,Gl,2,1,"td",35),t.BQk(),t.ynx(52,39),t.YNc(53,Rl,3,3,"th",34),t.YNc(54,zl,3,2,"td",35),t.BQk(),t.YNc(55,Ql,1,0,"tr",40),t.YNc(56,Vl,1,0,"tr",41),t.qZA()(),t.YNc(57,Xl,2,9,"div",42),t.YNc(58,Kl,5,3,"div",43),t.qZA()()()()()()),2&e&&(t.xp6(5),t.Q6J("routerLink",t.DdM(20,$l)),t.xp6(2),t.hij(" ",t.lcZ(8,12,"breadcrumbs.home")," "),t.xp6(3),t.hij(" ",t.lcZ(11,14,"modules.dmp.website.list")," "),t.xp6(12),t.s9C("placeholder",t.lcZ(23,16,"common.placeholder")),t.Q6J("ngModel",i.keyword),t.xp6(4),t.hij("",t.lcZ(27,18,"common.button.search")," "),t.xp6(4),t.Q6J("ngIf",i.ruleCheckerService.isAllow("dmp/website/create")),t.xp6(3),t.Q6J("dataSource",i.dataSourceManage),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.length),t.xp6(1),t.Q6J("ngIf",0===i.length))},dependencies:[_t.mk,_t.O5,Y.rH,y.gM,z.BZ,z.fO,z.as,z.w1,z.Dz,z.nj,z.ge,z.ev,z.XQ,z.Gk,oe.J,j.Fj,j.JJ,j.On,_t.JJ,M.X$],styles:["#wp-dmp-websites .data-table-websites .w-100-px{width:100px}  #wp-dmp-websites .data-table-websites .mat-column-sequenceManage{width:70px}  #wp-dmp-websites .data-table-websites .mat-column-trackingCode{width:150px}  #wp-dmp-websites .data-table-websites .mat-column-url{width:65px}  #wp-dmp-websites .data-table-websites .mat-column-trackingScript{width:150px}  #wp-dmp-websites .data-table-websites .mat-column-status{width:150px}  #wp-dmp-websites .data-table-websites .mat-column-createdAt{width:200px}  #wp-dmp-websites .data-table-websites .title-website:hover{color:#0c83ff}  #wp-dmp-websites .data-table-websites .script-code:hover{color:#0c83ff}@media (max-width: 1600px){  #wp-dmp-websites .input-search{width:230px}}@media (max-width: 1199px){  #wp-dmp-websites .data-table-websites .mat-column-domain{width:270px}  #wp-dmp-websites .table-responsive{overflow-x:auto;-webkit-overflow-scrolling:touch}}@media (max-width: 991px){  #wp-dmp-websites .data-table-websites .mat-column-domain{width:270px}}"]}),L})(),title:"modules.dmp.website.title",canActivate:[H.a],data:{route:"website/list"}},{path:"group/list",component:gl,title:"modules.dmp.group.title",canActivate:[H.a],data:{route:"group/list"}}];let ic=(()=>{var n;class L{}return(n=L).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[Y.Bz.forChild(ec),Y.Bz]}),L})(),nc=(()=>{var n;class L{}return(n=L).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[_t.ez,ic,ot.m,j.u5,j.UX,St.sQ.forFeature()]}),L})()},5081:(Bt,Ft)=>{"use strict";var Tt=function(){function _t(){}return _t.UUID=function(){if(typeof window<"u"&&typeof window.crypto<"u"&&typeof window.crypto.getRandomValues<"u"){var St=new Uint16Array(8);return window.crypto.getRandomValues(St),this.pad4(St[0])+this.pad4(St[1])+"-"+this.pad4(St[2])+"-"+this.pad4(St[3])+"-"+this.pad4(St[4])+"-"+this.pad4(St[5])+this.pad4(St[6])+this.pad4(St[7])}return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},_t.pad4=function(St){for(var j=St.toString(16);j.length<4;)j="0"+j;return j},_t.random4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},_t}();Ft.h=Tt},3018:Bt=>{var Ft={utf8:{stringToBytes:function(Tt){return Ft.bin.stringToBytes(unescape(encodeURIComponent(Tt)))},bytesToString:function(Tt){return decodeURIComponent(escape(Ft.bin.bytesToString(Tt)))}},bin:{stringToBytes:function(Tt){for(var _t=[],St=0;St<Tt.length;St++)_t.push(255&Tt.charCodeAt(St));return _t},bytesToString:function(Tt){for(var _t=[],St=0;St<Tt.length;St++)_t.push(String.fromCharCode(Tt[St]));return _t.join("")}}};Bt.exports=Ft},5585:Bt=>{var Ft,Tt;Ft="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Bt.exports=Tt={rotl:function(_t,St){return _t<<St|_t>>>32-St},rotr:function(_t,St){return _t<<32-St|_t>>>St},endian:function(_t){if(_t.constructor==Number)return 16711935&Tt.rotl(_t,8)|4278255360&Tt.rotl(_t,24);for(var St=0;St<_t.length;St++)_t[St]=Tt.endian(_t[St]);return _t},randomBytes:function(_t){for(var St=[];_t>0;_t--)St.push(Math.floor(256*Math.random()));return St},bytesToWords:function(_t){for(var St=[],j=0,ot=0;j<_t.length;j++,ot+=8)St[ot>>>5]|=_t[j]<<24-ot%32;return St},wordsToBytes:function(_t){for(var St=[],j=0;j<32*_t.length;j+=8)St.push(_t[j>>>5]>>>24-j%32&255);return St},bytesToHex:function(_t){for(var St=[],j=0;j<_t.length;j++)St.push((_t[j]>>>4).toString(16)),St.push((15&_t[j]).toString(16));return St.join("")},hexToBytes:function(_t){for(var St=[],j=0;j<_t.length;j+=2)St.push(parseInt(_t.substr(j,2),16));return St},bytesToBase64:function(_t){for(var St=[],j=0;j<_t.length;j+=3)for(var ot=_t[j]<<16|_t[j+1]<<8|_t[j+2],Y=0;Y<4;Y++)St.push(8*j+6*Y<=8*_t.length?Ft.charAt(ot>>>6*(3-Y)&63):"=");return St.join("")},base64ToBytes:function(_t){_t=_t.replace(/[^A-Z0-9+\/]/gi,"");for(var St=[],j=0,ot=0;j<_t.length;ot=++j%4)0!=ot&&St.push((Ft.indexOf(_t.charAt(j-1))&Math.pow(2,-2*ot+8)-1)<<2*ot|Ft.indexOf(_t.charAt(j))>>>6-2*ot);return St}}},3470:function(Bt,Ft,Tt){var _t,St,j;St=typeof window<"u"?window:this,j=function(St){function j(Y,H,X,z){Y.hasOwnProperty(H)||(Y[H]=z.apply(null,X),"function"==typeof CustomEvent&&St.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:H,module:Y[H]}})))}var ot={};return j(ot,"Core/Globals.js",[],function(){var Y,H;return(H=Y||(Y={})).SVG_NS="http://www.w3.org/2000/svg",H.product="Highcharts",H.version="10.3.3",H.win=typeof St<"u"?St:{},H.doc=H.win.document,H.svg=H.doc&&H.doc.createElementNS&&!!H.doc.createElementNS(H.SVG_NS,"svg").createSVGRect,H.userAgent=H.win.navigator&&H.win.navigator.userAgent||"",H.isChrome=-1!==H.userAgent.indexOf("Chrome"),H.isFirefox=-1!==H.userAgent.indexOf("Firefox"),H.isMS=/(edge|msie|trident)/i.test(H.userAgent)&&!H.win.opera,H.isSafari=!H.isChrome&&-1!==H.userAgent.indexOf("Safari"),H.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(H.userAgent),H.isWebKit=-1!==H.userAgent.indexOf("AppleWebKit"),H.deg2rad=2*Math.PI/360,H.hasBidiBug=H.isFirefox&&4>parseInt(H.userAgent.split("Firefox/")[1],10),H.hasTouch=!!H.win.TouchEvent,H.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],H.noop=function(){},H.supportsPassiveEvents=function(){var X=!1;if(!H.isMS){var z=Object.defineProperty({},"passive",{get:function(){X=!0}});H.win.addEventListener&&H.win.removeEventListener&&(H.win.addEventListener("testPassive",H.noop,z),H.win.removeEventListener("testPassive",H.noop,z))}return X}(),H.charts=[],H.dateFormats={},H.seriesTypes={},H.symbolSizes={},H.chartCount=0,Y}),j(ot,"Core/Utilities.js",[ot["Core/Globals.js"]],function(Y){function H(s,r,d,p){var T=r?"Highcharts error":"Highcharts warning";32===s&&(s=T+": Deprecated member");var U=Z(s),G=U?T+" #"+s+": www.highcharts.com/errors/"+s+"/":s.toString();if(typeof p<"u"){var O="";U&&(G+="?"),t(p,function(v,C){O+="\n - ".concat(C,": ").concat(v),U&&(G+=encodeURI(C)+"="+encodeURI(v))}),G+=O}M(Y,"displayError",{chart:d,code:s,message:G,params:p},function(){if(r)throw Error(G);h.console&&-1===H.messages.indexOf(G)&&console.warn(G)}),H.messages.push(G)}function z(s,r){return parseInt(s,r||10)}function tt(s){return"string"==typeof s}function V(s){return"[object Array]"===(s=Object.prototype.toString.call(s))||"[object Array Iterator]"===s}function W(s,r){return!(!s||"object"!=typeof s||r&&V(s))}function P(s){return W(s)&&"number"==typeof s.nodeType}function S(s){var r=s&&s.constructor;return!(!W(s,!0)||P(s)||!r||!r.name||"Object"===r.name)}function Z(s){return"number"==typeof s&&!isNaN(s)&&1/0>s&&-1/0<s}function k(s){return typeof s<"u"&&null!==s}function b(s,r,d){var T,p=tt(r)&&!k(d),U=function(G,O){k(G)?s.setAttribute(O,G):p?(T=s.getAttribute(O))||"class"!==O||(T=s.getAttribute(O+"Name")):s.removeAttribute(O)};return tt(r)?U(d,r):t(r,U),T}function m(s,r){var d;for(d in s||(s={}),r)s[d]=r[d];return s}function a(){for(var s=arguments,r=s.length,d=0;d<r;d++){var p=s[d];if(typeof p<"u"&&null!==p)return p}}function c(s,r){Y.isMS&&!Y.svg&&r&&k(r.opacity)&&(r.filter="alpha(opacity=".concat(100*r.opacity,")")),m(s.style,r)}function u(s){return Math.pow(10,Math.floor(Math.log(s)/Math.LN10))}function _(s,r){return 1e14<s?s:parseFloat(s.toPrecision(r||14))}function t(s,r,d){for(var p in s)Object.hasOwnProperty.call(s,p)&&r.call(d||s[p],s[p],p,s)}function B(s,r,d){function p(O,v){var C=s.removeEventListener||Y.removeEventListenerPolyfill;C&&C.call(s,O,v,!1)}function T(O){var v;if(s.nodeName){if(r){var C={};C[r]=!0}else C=O;t(C,function(q,J){if(O[J])for(v=O[J].length;v--;)p(J,O[J][v].fn)})}}var U="function"==typeof s&&s.prototype||s;if(Object.hasOwnProperty.call(U,"hcEvents")){var G=U.hcEvents;r?(U=G[r]||[],d?(G[r]=U.filter(function(O){return d!==O.fn}),p(r,d)):(T(G),G[r]=[])):(T(G),delete U.hcEvents)}}function M(s,r,d,p){if(d=d||{},w.createEvent&&(s.dispatchEvent||s.fireEvent&&s!==Y)){var T=w.createEvent("Events");T.initEvent(r,!0,!0),d=m(T,d),s.dispatchEvent?s.dispatchEvent(d):s.fireEvent(r,d)}else if(s.hcEvents){d.target||m(d,{preventDefault:function(){d.defaultPrevented=!0},target:s,type:r}),T=[];for(var U=s,G=!1;U.hcEvents;)Object.hasOwnProperty.call(U,"hcEvents")&&U.hcEvents[r]&&(T.length&&(G=!0),T.unshift.apply(T,U.hcEvents[r])),U=Object.getPrototypeOf(U);G&&T.sort(function(O,v){return O.order-v.order}),T.forEach(function(O){!1===O.fn.call(s,d)&&d.preventDefault()})}p&&!d.defaultPrevented&&p.call(s,d)}var x=Y.charts,w=Y.doc,h=Y.win;(H||(H={})).messages=[],Math.easeInOutSine=function(s){return-.5*(Math.cos(Math.PI*s)-1)};var l=Array.prototype.find?function(s,r){return s.find(r)}:function(s,r){var d,p=s.length;for(d=0;d<p;d++)if(r(s[d],d))return s[d]};t({map:"map",each:"forEach",grep:"filter",reduce:"reduce",some:"some"},function(s,r){Y[r]=function(d){var p;return H(32,!1,void 0,((p={})["Highcharts.".concat(r)]="use Array.".concat(s),p)),Array.prototype[s].apply(d,[].slice.call(arguments,1))}});var o,s,r,y=(s=Math.random().toString(36).substring(2,9)+"-",r=0,function(){return"highcharts-"+(o?"":s)+r++});return h.jQuery&&(h.jQuery.fn.highcharts=function(){var s=[].slice.call(arguments);if(this[0])return s[0]?(new(Y[tt(s[0])?s.shift():"Chart"])(this[0],s[0],s[1]),this):x[b(this[0],"data-highcharts-chart")]}),l={addEvent:function(s,r,d,p){void 0===p&&(p={});var T="function"==typeof s&&s.prototype||s;Object.hasOwnProperty.call(T,"hcEvents")||(T.hcEvents={}),T=T.hcEvents,Y.Point&&s instanceof Y.Point&&s.series&&s.series.chart&&(s.series.chart.runTrackerClick=!0);var U=s.addEventListener||Y.addEventListenerPolyfill;return U&&U.call(s,r,d,!!Y.supportsPassiveEvents&&{passive:void 0===p.passive?-1!==r.indexOf("touch"):p.passive,capture:!1}),T[r]||(T[r]=[]),T[r].push({fn:d,order:"number"==typeof p.order?p.order:1/0}),T[r].sort(function(G,O){return G.order-O.order}),function(){B(s,r,d)}},arrayMax:function(s){for(var r=s.length,d=s[0];r--;)s[r]>d&&(d=s[r]);return d},arrayMin:function(s){for(var r=s.length,d=s[0];r--;)s[r]<d&&(d=s[r]);return d},attr:b,clamp:function(s,r,d){return s>r?s<d?s:d:r},cleanRecursively:function X(s,r){var d={};return t(s,function(p,T){W(s[T],!0)&&!s.nodeType&&r[T]?(p=X(s[T],r[T]),Object.keys(p).length&&(d[T]=p)):(W(s[T])||s[T]!==r[T]||T in s&&!(T in r))&&(d[T]=s[T])}),d},clearTimeout:function(s){k(s)&&clearTimeout(s)},correctFloat:_,createElement:function(s,r,d,p,T){return s=w.createElement(s),r&&m(s,r),T&&c(s,{padding:"0",border:"none",margin:"0"}),d&&c(s,d),p&&p.appendChild(s),s},css:c,defined:k,destroyObjectProperties:function(s,r){t(s,function(d,p){d&&d!==r&&d.destroy&&d.destroy(),delete s[p]})},discardElement:function(s){s&&s.parentElement&&s.parentElement.removeChild(s)},erase:function(s,r){for(var d=s.length;d--;)if(s[d]===r){s.splice(d,1);break}},error:H,extend:m,extendClass:function(s,r){var d=function(){};return m(d.prototype=new s,r),d},find:l,fireEvent:M,getMagnitude:u,getNestedProperty:function(s,r){for(s=s.split(".");s.length&&k(r);){var d=s.shift();if(typeof d>"u"||"__proto__"===d||!k(r=r[d])||"function"==typeof r||"number"==typeof r.nodeType||r===h)return}return r},getStyle:function D(s,r,d){var p=Y.getStyle||D;if("width"===r)return r=Math.min(s.offsetWidth,s.scrollWidth),(d=s.getBoundingClientRect&&s.getBoundingClientRect().width)<r&&d>=r-1&&(r=Math.floor(d)),Math.max(0,r-(p(s,"padding-left",!0)||0)-(p(s,"padding-right",!0)||0));if("height"===r)return Math.max(0,Math.min(s.offsetHeight,s.scrollHeight)-(p(s,"padding-top",!0)||0)-(p(s,"padding-bottom",!0)||0));if(h.getComputedStyle||H(27,!0),s=h.getComputedStyle(s,void 0)){var T=s.getPropertyValue(r);a(d,"opacity"!==r)&&(T=z(T))}return T},inArray:function(s,r,d){return H(32,!1,void 0,{"Highcharts.inArray":"use Array.indexOf"}),r.indexOf(s,d)},isArray:V,isClass:S,isDOMElement:P,isFunction:function(s){return"function"==typeof s},isNumber:Z,isObject:W,isString:tt,keys:function(s){return H(32,!1,void 0,{"Highcharts.keys":"use Object.keys"}),Object.keys(s)},merge:function(){var s,r=arguments,d={},p=function(U,G){return"object"!=typeof U&&(U={}),t(G,function(O,v){"__proto__"!==v&&"constructor"!==v&&(U[v]=!W(O,!0)||S(O)||P(O)?G[v]:p(U[v]||{},O))}),U};!0===r[0]&&(d=r[1],r=Array.prototype.slice.call(r,2));var T=r.length;for(s=0;s<T;s++)d=p(d,r[s]);return d},normalizeTickInterval:function(s,r,d,p,T){var U=s,G=s/(d=a(d,u(s)));for(r||(r=T?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===p&&(1===d?r=r.filter(function(O){return O%1==0}):.1>=d&&(r=[1/d]))),p=0;p<r.length&&(U=r[p],!(T&&U*d>=s||!T&&G<=(r[p]+(r[p+1]||r[p]))/2));p++);return _(U*d,-Math.round(Math.log(.001)/Math.LN10))},objectEach:t,offset:function(s){var r=w.documentElement;return{top:(s=s.parentElement||s.parentNode?s.getBoundingClientRect():{top:0,left:0,width:0,height:0}).top+(h.pageYOffset||r.scrollTop)-(r.clientTop||0),left:s.left+(h.pageXOffset||r.scrollLeft)-(r.clientLeft||0),width:s.width,height:s.height}},pad:function(s,r,d){return Array((r||2)+1-String(s).replace("-","").length).join(d||"0")+s},pick:a,pInt:z,relativeLength:function(s,r,d){return/%$/.test(s)?r*parseFloat(s)/100+(d||0):parseFloat(s)},removeEvent:B,splat:function(s){return V(s)?s:[s]},stableSort:function(s,r){var p,T,d=s.length;for(T=0;T<d;T++)s[T].safeI=T;for(s.sort(function(U,G){return 0===(p=r(U,G))?U.safeI-G.safeI:p}),T=0;T<d;T++)delete s[T].safeI},syncTimeout:function(s,r,d){return 0<r?setTimeout(s,r,d):(s.call(0,d),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},uniqueKey:y,useSerialIds:function(s){return o=a(s,o)},wrap:function(s,r,d){var p=s[r];s[r]=function(){var T=arguments,U=this;return d.apply(this,[function(){return p.apply(U,arguments.length?arguments:T)}].concat([].slice.call(arguments)))}}},l}),j(ot,"Core/Chart/ChartDefaults.js",[],function(){return{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}},zoomBySingleTouch:!1,zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#335cad",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"}}),j(ot,"Core/Color/Color.js",[ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H){var X=H.isNumber,z=H.merge,tt=H.pInt;return function(){function V(W){this.rgba=[NaN,NaN,NaN,NaN],this.input=W;var P=Y.Color;return P&&P!==V?new P(W):this instanceof V?void this.init(W):new V(W)}return V.parse=function(W){return W?new V(W):V.None},V.prototype.init=function(W){var P;if("object"==typeof W&&typeof W.stops<"u")this.stops=W.stops.map(function(b){return new V(b[1])});else if("string"==typeof W){if(this.input=W=V.names[W.toLowerCase()]||W,"#"===W.charAt(0)){var S=W.length,Z=parseInt(W.substr(1),16);7===S?P=[(16711680&Z)>>16,(65280&Z)>>8,255&Z,1]:4===S&&(P=[(3840&Z)>>4|(3840&Z)>>8,(240&Z)>>4|240&Z,(15&Z)<<4|15&Z,1])}if(!P)for(Z=V.parsers.length;Z--&&!P;){var k=V.parsers[Z];(S=k.regex.exec(W))&&(P=k.parse(S))}}P&&(this.rgba=P)},V.prototype.get=function(W){var P=this.input,S=this.rgba;if("object"==typeof P&&typeof this.stops<"u"){var Z=z(P);return Z.stops=[].slice.call(Z.stops),this.stops.forEach(function(k,b){Z.stops[b]=[Z.stops[b][0],k.get(W)]}),Z}return S&&X(S[0])?"rgb"===W||!W&&1===S[3]?"rgb("+S[0]+","+S[1]+","+S[2]+")":"a"===W?"".concat(S[3]):"rgba("+S.join(",")+")":P},V.prototype.brighten=function(W){var P=this.rgba;if(this.stops)this.stops.forEach(function(Z){Z.brighten(W)});else if(X(W)&&0!==W)for(var S=0;3>S;S++)P[S]+=tt(255*W),0>P[S]&&(P[S]=0),255<P[S]&&(P[S]=255);return this},V.prototype.setOpacity=function(W){return this.rgba[3]=W,this},V.prototype.tweenTo=function(W,P){var S=this.rgba,Z=W.rgba;return X(S[0])&&X(Z[0])?((W=1!==Z[3]||1!==S[3])?"rgba(":"rgb(")+Math.round(Z[0]+(S[0]-Z[0])*(1-P))+","+Math.round(Z[1]+(S[1]-Z[1])*(1-P))+","+Math.round(Z[2]+(S[2]-Z[2])*(1-P))+(W?","+(Z[3]+(S[3]-Z[3])*(1-P)):"")+")":W.input||"none"},V.names={white:"#ffffff",black:"#000000"},V.parsers=[{regex:/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,parse:function(W){return[tt(W[1]),tt(W[2]),tt(W[3]),parseFloat(W[4],10)]}},{regex:/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,parse:function(W){return[tt(W[1]),tt(W[2]),tt(W[3]),1]}}],V.None=new V(""),V}()}),j(ot,"Core/Color/Palettes.js",[],function(){return{colors:"#7cb5ec #434348 #90ed7d #f7a35c #8085e9 #f15c80 #e4d354 #2b908f #f45b5b #91e8e1".split(" ")}}),j(ot,"Core/Time.js",[ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H){var X=Y.win,z=H.defined,tt=H.error,V=H.extend,W=H.isObject,P=H.merge,S=H.objectEach,Z=H.pad,k=H.pick,b=H.splat,m=H.timeUnits,a=Y.isSafari&&X.Intl&&X.Intl.DateTimeFormat.prototype.formatRange,c=Y.isSafari&&X.Intl&&!X.Intl.DateTimeFormat.prototype.formatRange;return H=function(){function u(_){this.options={},this.variableTimezone=this.useUTC=!1,this.Date=X.Date,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.update(_)}return u.prototype.get=function(_,D){if(this.variableTimezone||this.timezoneOffset){var t=D.getTime(),B=t-this.getTimezoneOffset(D);return D.setTime(B),_=D["getUTC"+_](),D.setTime(t),_}return this.useUTC?D["getUTC"+_]():D["get"+_]()},u.prototype.set=function(_,D,t){if(this.variableTimezone||this.timezoneOffset){if("Milliseconds"===_||"Seconds"===_||"Minutes"===_&&this.getTimezoneOffset(D)%36e5==0)return D["setUTC"+_](t);var B=this.getTimezoneOffset(D);return B=D.getTime()-B,D.setTime(B),D["setUTC"+_](t),_=this.getTimezoneOffset(D),B=D.getTime()+_,D.setTime(B)}return this.useUTC||a&&"FullYear"===_?D["setUTC"+_](t):D["set"+_](t)},u.prototype.update=function(_){void 0===_&&(_={});var D=k(_.useUTC,!0);this.options=_=P(!0,this.options,_),this.Date=_.Date||X.Date||Date,this.timezoneOffset=(this.useUTC=D)&&_.timezoneOffset||void 0,this.getTimezoneOffset=this.timezoneOffsetFunction(),this.variableTimezone=D&&!(!_.getTimezoneOffset&&!_.timezone)},u.prototype.makeTime=function(_,D,t,B,M,x){if(this.useUTC){var w=this.Date.UTC.apply(0,arguments),h=this.getTimezoneOffset(w),l=this.getTimezoneOffset(w+=h);h!==l?w+=l-h:h-36e5!==this.getTimezoneOffset(w-36e5)||c||(w-=36e5)}else w=new this.Date(_,D,k(t,1),k(B,0),k(M,0),k(x,0)).getTime();return w},u.prototype.timezoneOffsetFunction=function(){var _=this,D=this.options,t=D.getTimezoneOffset,B=D.moment||X.moment;if(!this.useUTC)return function(M){return 6e4*new Date(M.toString()).getTimezoneOffset()};if(D.timezone){if(B)return function(M){return 6e4*-B.tz(M,D.timezone).utcOffset()};tt(25)}return this.useUTC&&t?function(M){return 6e4*t(M.valueOf())}:function(){return 6e4*(_.timezoneOffset||0)}},u.prototype.dateFormat=function(_,D,t){if(!z(D)||isNaN(D))return Y.defaultOptions.lang&&Y.defaultOptions.lang.invalidDate||"";_=k(_,"%Y-%m-%d %H:%M:%S");var B=this,M=new this.Date(D),x=this.get("Hours",M),w=this.get("Day",M),h=this.get("Date",M),l=this.get("Month",M),o=this.get("FullYear",M),y=Y.defaultOptions.lang,s=y&&y.weekdays,r=y&&y.shortWeekdays;return M=V({a:r?r[w]:s[w].substr(0,3),A:s[w],d:Z(h),e:Z(h,2," "),w,b:y.shortMonths[l],B:y.months[l],m:Z(l+1),o:l+1,y:o.toString().substr(2,2),Y:o,H:Z(x),k:x,I:Z(x%12||12),l:x%12||12,M:Z(this.get("Minutes",M)),p:12>x?"AM":"PM",P:12>x?"am":"pm",S:Z(M.getSeconds()),L:Z(Math.floor(D%1e3),3)},Y.dateFormats),S(M,function(d,p){for(;-1!==_.indexOf("%"+p);)_=_.replace("%"+p,"function"==typeof d?d.call(B,D):d)}),t?_.substr(0,1).toUpperCase()+_.substr(1):_},u.prototype.resolveDTLFormat=function(_){return W(_,!0)?_:{main:(_=b(_))[0],from:_[1],to:_[2]}},u.prototype.getTimeTicks=function(_,D,t,B){var y,M=this,x=[],w={},h=new M.Date(D),l=_.unitRange,o=_.count||1;if(B=k(B,1),z(D)){if(M.set("Milliseconds",h,l>=m.second?0:o*Math.floor(M.get("Milliseconds",h)/o)),l>=m.second&&M.set("Seconds",h,l>=m.minute?0:o*Math.floor(M.get("Seconds",h)/o)),l>=m.minute&&M.set("Minutes",h,l>=m.hour?0:o*Math.floor(M.get("Minutes",h)/o)),l>=m.hour&&M.set("Hours",h,l>=m.day?0:o*Math.floor(M.get("Hours",h)/o)),l>=m.day&&M.set("Date",h,l>=m.month?1:Math.max(1,o*Math.floor(M.get("Date",h)/o))),l>=m.month){M.set("Month",h,l>=m.year?0:o*Math.floor(M.get("Month",h)/o));var s=M.get("FullYear",h)}l>=m.year&&M.set("FullYear",h,s-s%o),l===m.week&&(s=M.get("Day",h),M.set("Date",h,M.get("Date",h)-s+B+(s<B?-7:0))),s=M.get("FullYear",h),B=M.get("Month",h);var r=M.get("Date",h),d=M.get("Hours",h);for(D=h.getTime(),!M.variableTimezone&&M.useUTC||!z(t)||(y=t-D>4*m.month||M.getTimezoneOffset(D)!==M.getTimezoneOffset(t)),D=h.getTime(),h=1;D<t;)x.push(D),D=l===m.year?M.makeTime(s+h*o,0):l===m.month?M.makeTime(s,B+h*o):!y||l!==m.day&&l!==m.week?y&&l===m.hour&&1<o?M.makeTime(s,B,r,d+h*o):D+l*o:M.makeTime(s,B,r+h*o*(l===m.day?1:7)),h++;x.push(D),l<=m.hour&&1e4>x.length&&x.forEach(function(p){p%18e5==0&&"000000000"===M.dateFormat("%H%M%S%L",p)&&(w[p]="day")})}return x.info=V(_,{higherRanks:w,totalRange:l*o}),x},u.prototype.getDateFormat=function(_,D,t,B){var M=this.dateFormat("%m-%d %H:%M:%S.%L",D),x={millisecond:15,second:12,minute:9,hour:6,day:3},w="millisecond";for(h in m){if(_===m.week&&+this.dateFormat("%w",D)===t&&"00:00:00.000"===M.substr(6)){var h="week";break}if(m[h]>_){h=w;break}if(x[h]&&M.substr(x[h])!=="01-01 00:00:00.000".substr(x[h]))break;"week"!==h&&(w=h)}return this.resolveDTLFormat(B[h]).main},u}(),H}),j(ot,"Core/Defaults.js",[ot["Core/Chart/ChartDefaults.js"],ot["Core/Color/Color.js"],ot["Core/Globals.js"],ot["Core/Color/Palettes.js"],ot["Core/Time.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V){H=H.parse;var W=V.merge,P={colors:z.colors,symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),decimalPoint:".",numericSymbols:"kMGTPE".split(""),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{},time:{Date:void 0,getTimezoneOffset:void 0,timezone:void 0,timezoneOffset:0,useUTC:!0},chart:Y,title:{text:"Chart title",align:"center",margin:15,widthAdjust:-44},subtitle:{text:"",align:"center",widthAdjust:-44},caption:{margin:15,text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},labels:{style:{position:"absolute",color:"#333333"}},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{activeColor:"#003399",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"12px",fontWeight:"bold",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#cccccc"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:X.svg,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,shape:"callout",shared:!1,snap:X.isTouchDevice?25:10,headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:H("#f7f7f7").setOpacity(.85).get(),borderWidth:1,shadow:!0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"12px",whiteSpace:"nowrap"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"9px"},text:"Highcharts.com"}};P.chart.styledMode=!1;var S=new tt(W(P.global,P.time));return{defaultOptions:P,defaultTime:S,getOptions:function(){return P},setOptions:function(Z){return W(!0,P,Z),(Z.time||Z.global)&&(X.time?X.time.update(W(P.global,P.time,Z.global,Z.time)):X.time=S),P}}}),j(ot,"Core/Animation/Fx.js",[ot["Core/Color/Color.js"],ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H,X){var z=Y.parse,tt=H.win,V=X.isNumber,W=X.objectEach;return function(){function P(S,Z,k){this.pos=NaN,this.options=Z,this.elem=S,this.prop=k}return P.prototype.dSetter=function(){var S=this.paths,Z=S&&S[0];S=S&&S[1];var k=this.now||0,b=[];if(1!==k&&Z&&S)if(Z.length===S.length&&1>k)for(var m=0;m<S.length;m++){for(var a=Z[m],c=S[m],u=[],_=0;_<c.length;_++){var D=a[_],t=c[_];u[_]=V(D)&&V(t)&&("A"!==c[0]||4!==_&&5!==_)?D+k*(t-D):t}b.push(u)}else b=S;else b=this.toD||[];this.elem.attr("d",b,void 0,!0)},P.prototype.update=function(){var S=this.elem,Z=this.prop,k=this.now,b=this.options.step;this[Z+"Setter"]?this[Z+"Setter"]():S.attr?S.element&&S.attr(Z,k,null,!0):S.style[Z]=k+this.unit,b&&b.call(S,k,this)},P.prototype.run=function(S,Z,k){var b=this,m=b.options,a=function(_){return!a.stopped&&b.step(_)},c=tt.requestAnimationFrame||function(_){setTimeout(_,13)},u=function(){for(var _=0;_<P.timers.length;_++)P.timers[_]()||P.timers.splice(_--,1);P.timers.length&&c(u)};S!==Z||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=S,this.end=Z,this.unit=k,this.now=this.start,this.pos=0,a.elem=this.elem,a.prop=this.prop,a()&&1===P.timers.push(a)&&c(u)):(delete m.curAnim[this.prop],m.complete&&0===Object.keys(m.curAnim).length&&m.complete.call(this.elem))},P.prototype.step=function(S){var Z=+new Date,k=this.options,b=this.elem,m=k.complete,a=k.duration,c=k.curAnim;if(b.attr&&!b.element)S=!1;else if(S||Z>=a+this.startTime){this.now=this.end,this.pos=1,this.update();var u=c[this.prop]=!0;W(c,function(_){!0!==_&&(u=!1)}),u&&m&&m.call(b),S=!1}else this.pos=k.easing((Z-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),S=!0;return S},P.prototype.initPath=function(S,Z,k){function b(M,x){for(;M.length<B;){var w=M[0],h=x[B-M.length];h&&"M"===w[0]&&(M[0]="C"===h[0]?["C",w[1],w[2],w[1],w[2],w[1],w[2]]:["L",w[1],w[2]]),M.unshift(w),u&&(w=M.pop(),M.push(M[M.length-1],w))}}function m(M,x){for(;M.length<B;)if("C"===(x=M[Math.floor(M.length/_)-1].slice())[0]&&(x[1]=x[5],x[2]=x[6]),u){var w=M[Math.floor(M.length/_)].slice();M.splice(M.length/2,0,x,w)}else M.push(x)}var a=S.startX,c=S.endX;k=k.slice();var u=S.isArea,_=u?2:1;if(!(Z=Z&&Z.slice()))return[k,k];if(a&&c&&c.length){for(S=0;S<a.length;S++){if(a[S]===c[0]){var D=S;break}if(a[0]===c[c.length-a.length+S]){D=S;var t=!0;break}if(a[a.length-1]===c[c.length-a.length+S]){D=a.length-S;break}}typeof D>"u"&&(Z=[])}if(Z.length&&V(D)){var B=k.length+D*_;t?(b(Z,k),m(k,Z)):(b(k,Z),m(Z,k))}return[Z,k]},P.prototype.fillSetter=function(){P.prototype.strokeSetter.apply(this,arguments)},P.prototype.strokeSetter=function(){this.elem.attr(this.prop,z(this.start).tweenTo(z(this.end),this.pos),void 0,!0)},P.timers=[],P}()}),j(ot,"Core/Animation/AnimationUtilities.js",[ot["Core/Animation/Fx.js"],ot["Core/Utilities.js"]],function(Y,H){function X(m){return S(m)?Z({duration:500,defer:0},m):{duration:m?500:0,defer:0}}function z(m,a){for(var c=Y.timers.length;c--;)Y.timers[c].elem!==m||a&&a!==Y.timers[c].prop||(Y.timers[c].stopped=!0)}var tt=H.defined,V=H.getStyle,W=H.isArray,P=H.isNumber,S=H.isObject,Z=H.merge,k=H.objectEach,b=H.pick;return{animate:function(m,a,c){var u,D,t,_="";if(!S(c)){var B=arguments;c={duration:B[2],easing:B[3],complete:B[4]}}P(c.duration)||(c.duration=400),c.easing="function"==typeof c.easing?c.easing:Math[c.easing]||Math.easeInOutSine,c.curAnim=Z(a),k(a,function(M,x){z(m,x),t=new Y(m,c,x),D=void 0,"d"===x&&W(a.d)?(t.paths=t.initPath(m,m.pathArray,a.d),t.toD=a.d,u=0,D=1):m.attr?u=m.attr(x):(u=parseFloat(V(m,x))||0,"opacity"!==x&&(_="px")),D||(D=M),"string"==typeof D&&D.match("px")&&(D=D.replace(/px/g,"")),t.run(u,D,_)})},animObject:X,getDeferredAnimation:function(m,a,c){var u=X(a),_=0,D=0;return(c?[c]:m.series).forEach(function(t){t=X(t.options.animation),_=a&&tt(a.defer)?u.defer:Math.max(_,t.duration+t.defer),D=Math.min(u.duration,t.duration)}),m.renderer.forExport&&(_=0),{defer:Math.max(0,_-D),duration:Math.min(_,D)}},setAnimation:function(m,a){a.renderer.globalAnimation=b(m,a.options.chart.animation,!0)},stop:z}}),j(ot,"Core/Renderer/HTML/AST.js",[ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H){var X=Y.SVG_NS,z=H.attr,tt=H.createElement,V=H.css,W=H.error,P=H.isFunction,S=H.isString,Z=H.objectEach,k=H.splat,b=(H=Y.win.trustedTypes)&&P(H.createPolicy)&&H.createPolicy("highcharts",{createHTML:function(c){return c}}),m=b?b.createHTML(""):"";try{var a=!!(new DOMParser).parseFromString(m,"text/html")}catch{a=!1}return function(){function c(u){this.nodes="string"==typeof u?this.parseMarkup(u):u}return c.filterUserAttributes=function(u){return Z(u,function(_,D){var t=!0;-1===c.allowedAttributes.indexOf(D)&&(t=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(D)&&(t=S(_)&&c.allowedReferences.some(function(B){return 0===_.indexOf(B)})),t||(W(33,!1,void 0,{"Invalid attribute in config":"".concat(D)}),delete u[D]),S(_)&&u[D]&&(u[D]=_.replace(/</g,"&lt;"))}),u},c.parseStyle=function(u){return u.split(";").reduce(function(_,D){var t=(D=D.split(":").map(function(B){return B.trim()})).shift();return t&&D.length&&(_[t.replace(/-([a-z])/g,function(B){return B[1].toUpperCase()})]=D.join(":")),_},{})},c.setElementHTML=function(u,_){u.innerHTML=c.emptyHTML,_&&new c(_).addToDOM(u)},c.prototype.addToDOM=function(u){return function _(D,t){var B;return k(D).forEach(function(M){var x=M.tagName,w=M.textContent?Y.doc.createTextNode(M.textContent):void 0,h=c.bypassHTMLFiltering;if(x)if("#text"===x)var l=w;else if(-1!==c.allowedTags.indexOf(x)||h){x=Y.doc.createElementNS("svg"===x?X:t.namespaceURI||X,x);var o=M.attributes||{};Z(M,function(y,s){"tagName"!==s&&"attributes"!==s&&"children"!==s&&"style"!==s&&"textContent"!==s&&(o[s]=y)}),z(x,h?o:c.filterUserAttributes(o)),M.style&&V(x,M.style),w&&x.appendChild(w),_(M.children||[],x),l=x}else W(33,!1,void 0,{"Invalid tagName in config":x});l&&t.appendChild(l),B=l}),B}(this.nodes,u)},c.prototype.parseMarkup=function(u){var _=[];if(u=u.trim().replace(/ style=(["'])/g," data-style=$1"),a)u=(new DOMParser).parseFromString(b?b.createHTML(u):u,"text/html");else{var D=tt("div");D.innerHTML=u,u={body:D}}var t=function(B,M){var x=B.nodeName.toLowerCase(),w={tagName:x};if("#text"===x&&(w.textContent=B.textContent||""),x=B.attributes){var h={};[].forEach.call(x,function(o){"data-style"===o.name?w.style=c.parseStyle(o.value):h[o.name]=o.value}),w.attributes=h}if(B.childNodes.length){var l=[];[].forEach.call(B.childNodes,function(o){t(o,l)}),l.length&&(w.children=l)}M.push(w)};return[].forEach.call(u.body.childNodes,function(B){return t(B,_)}),_},c.allowedAttributes="aria-controls aria-describedby aria-expanded aria-haspopup aria-hidden aria-label aria-labelledby aria-live aria-pressed aria-readonly aria-roledescription aria-selected class clip-path color colspan cx cy d dx dy disabled fill height href id in markerHeight markerWidth offset opacity orient padding paddingLeft paddingRight patternUnits r refX refY role scope slope src startOffset stdDeviation stroke stroke-linecap stroke-width style tableValues result rowspan summary target tabindex text-align text-anchor textAnchor textLength title type valign width x x1 x2 xlink:href y y1 y2 zIndex".split(" "),c.allowedReferences="https:// http:// mailto: / ../ ./ #".split(" "),c.allowedTags="a abbr b br button caption circle clipPath code dd defs div dl dt em feComponentTransfer feFuncA feFuncB feFuncG feFuncR feGaussianBlur feOffset feMerge feMergeNode filter h1 h2 h3 h4 h5 h6 hr i img li linearGradient marker ol p path pattern pre rect small span stop strong style sub sup svg table text textPath thead title tbody tspan td th tr u ul #text".split(" "),c.emptyHTML=m,c.bypassHTMLFiltering=!1,c}()}),j(ot,"Core/FormatUtilities.js",[ot["Core/Defaults.js"],ot["Core/Utilities.js"]],function(Y,H){function X(Z,k,b,m){k=+k;var a=z.lang,c=((Z=+Z||0).toString().split(".")[1]||"").split("e")[0].length,u=Z.toString().split("e"),_=k;if(-1===k)k=Math.min(c,20);else if(W(k)){if(k&&u[1]&&0>u[1]){var D=k+ +u[1];0<=D?(u[0]=(+u[0]).toExponential(D).split("e")[0],k=D):(u[0]=u[0].split(".")[0]||0,Z=20>k?(u[0]*Math.pow(10,u[1])).toFixed(k):0,u[1]=0)}}else k=2;D=(Math.abs(u[1]?u[0]:Z)+Math.pow(10,-Math.max(k,c)-1)).toFixed(k);var t=3<(c=String(S(D))).length?c.length%3:0;return b=P(b,a.decimalPoint),m=P(m,a.thousandsSep),Z=(0>Z?"-":"")+(t?c.substr(0,t)+m:""),Z=0>+u[1]&&!_?"0":Z+c.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+m),k&&(Z+=b+D.slice(-k)),u[1]&&0!=+Z&&(Z+="e"+u[1]),Z}var z=Y.defaultOptions,tt=Y.defaultTime,V=H.getNestedProperty,W=H.isNumber,P=H.pick,S=H.pInt;return{dateFormat:function(Z,k,b){return tt.dateFormat(Z,k,b)},format:function(Z,k,b){var m="{",a=!1,c=/f$/,u=/\.([0-9])/,_=z.lang,D=b&&b.time||tt;b=b&&b.numberFormatter||X;for(var t=[];Z;){var B=Z.indexOf(m);if(-1===B)break;var M=Z.slice(0,B);if(a){if(M=M.split(":"),m=V(M.shift()||"",k),M.length&&"number"==typeof m)if(M=M.join(":"),c.test(M)){var x=parseInt((M.match(u)||["","-1"])[1],10);null!==m&&(m=b(m,x,_.decimalPoint,-1<M.indexOf(",")?_.thousandsSep:""))}else m=D.dateFormat(M,m);t.push(m)}else t.push(M);Z=Z.slice(B+1),m=(a=!a)?"}":"{"}return t.push(Z),t.join("")},numberFormat:X}}),j(ot,"Core/Renderer/RendererUtilities.js",[ot["Core/Utilities.js"]],function(Y){var tt,H=Y.clamp,X=Y.pick,z=Y.stableSort;return(tt||(tt={})).distribute=function W(P,S,Z){var c,k=P,b=k.reducedLen||S,m=function(t,B){return(B.rank||0)-(t.rank||0)},a=function(t,B){return t.target-B.target},u=!0,_=[],D=0;for(c=P.length;c--;)D+=P[c].size;if(D>b){for(z(P,m),D=c=0;D<=b;)D+=P[c].size,c++;_=P.splice(c-1,P.length)}for(z(P,a),P=P.map(function(t){return{size:t.size,targets:[t.target],align:X(t.align,.5)}});u;){for(c=P.length;c--;)b=P[c],m=(Math.min.apply(0,b.targets)+Math.max.apply(0,b.targets))/2,b.pos=H(m-b.size*b.align,0,S-b.size);for(c=P.length,u=!1;c--;)0<c&&P[c-1].pos+P[c-1].size>P[c].pos&&(P[c-1].size+=P[c].size,P[c-1].targets=P[c-1].targets.concat(P[c].targets),P[c-1].align=.5,P[c-1].pos+P[c-1].size>S&&(P[c-1].pos=S-P[c-1].size),P.splice(c,1),u=!0)}return k.push.apply(k,_),c=0,P.some(function(t){var B=0;return(t.targets||[]).some(function(){return k[c].pos=t.pos+B,typeof Z<"u"&&Math.abs(k[c].pos-k[c].target)>Z?(k.slice(0,c+1).forEach(function(M){return delete M.pos}),k.reducedLen=(k.reducedLen||S)-.1*S,k.reducedLen>.1*S&&W(k,S,Z),!0):(B+=k[c].size,c++,!1)})}),z(k,a),k},tt}),j(ot,"Core/Renderer/SVG/SVGElement.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Color/Color.js"],ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var tt=Y.animate,V=Y.animObject,W=Y.stop,P=X.deg2rad,S=X.doc,Z=X.svg,k=X.SVG_NS,b=X.win,m=z.addEvent,a=z.attr,c=z.createElement,u=z.css,_=z.defined,D=z.erase,t=z.extend,B=z.fireEvent,M=z.isArray,x=z.isFunction,w=z.isString,h=z.merge,l=z.objectEach,o=z.pick,y=z.pInt,s=z.syncTimeout,r=z.uniqueKey;return Y=function(){function d(){this.element=void 0,this.onEvents={},this.opacity=1,this.renderer=void 0,this.SVG_NS=k,this.symbolCustomAttribs="x y width height r start end innerR anchorX anchorY rounded".split(" ")}return d.prototype._defaultGetter=function(p){return p=o(this[p+"Value"],this[p],this.element?this.element.getAttribute(p):null,0),/^[\-0-9\.]+$/.test(p)&&(p=parseFloat(p)),p},d.prototype._defaultSetter=function(p,T,U){U.setAttribute(T,p)},d.prototype.add=function(p){var T=this.renderer,U=this.element;if(p&&(this.parentGroup=p),typeof this.textStr<"u"&&"text"===this.element.nodeName&&T.buildText(this),this.added=!0,!p||p.handleZ||this.zIndex)var G=this.zIndexSetter();return G||(p?p.element:T.box).appendChild(U),this.onAdd&&this.onAdd(),this},d.prototype.addClass=function(p,T){var U=T?"":this.attr("class")||"";return(p=(p||"").split(/ /g).reduce(function(G,O){return-1===U.indexOf(O)&&G.push(O),G},U?[U]:[]).join(" "))!==U&&this.attr("class",p),this},d.prototype.afterSetters=function(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)},d.prototype.align=function(p,T,U){var C,q,J,G={},O=this.renderer,v=O.alignedObjects;p?(this.alignOptions=p,this.alignByTranslate=T,(!U||w(U))&&(this.alignTo=C=U||"renderer",D(v,this),v.push(this),U=void 0)):(p=this.alignOptions,T=this.alignByTranslate,C=this.alignTo),U=o(U,O[C],"scrollablePlotBox"===C?O.plotBox:void 0,O);var R=p.verticalAlign;return O=(U.x||0)+(p.x||0),v=(U.y||0)+(p.y||0),"right"===(C=p.align)?q=1:"center"===C&&(q=2),q&&(O+=(U.width-(p.width||0))/q),G[T?"translateX":"x"]=Math.round(O),"bottom"===R?J=1:"middle"===R&&(J=2),J&&(v+=(U.height-(p.height||0))/J),G[T?"translateY":"y"]=Math.round(v),this[this.placed?"animate":"attr"](G),this.placed=!0,this.alignAttr=G,this},d.prototype.alignSetter=function(p){var T={left:"start",center:"middle",right:"end"};T[p]&&(this.alignValue=p,this.element.setAttribute("text-anchor",T[p]))},d.prototype.animate=function(p,T,U){var G=this,O=V(o(T,this.renderer.globalAnimation,!0));return T=O.defer,o(S.hidden,S.msHidden,S.webkitHidden,!1)&&(O.duration=0),0!==O.duration?(U&&(O.complete=U),s(function(){G.element&&tt(G,p,O)},T)):(this.attr(p,void 0,U||O.complete),l(p,function(v,C){O.step&&O.step.call(this,v,{prop:C,pos:1,elem:this})},this)),this},d.prototype.applyTextOutline=function(p){var T=this.element;-1!==p.indexOf("contrast")&&(p=p.replace(/contrast/g,this.renderer.getContrast(T.style.fill)));var U=p.split(" ");if(p=U[U.length-1],(U=U[0])&&"none"!==U&&X.svg){this.fakeTS=!0,U=U.replace(/(^[\d\.]+)(.*?)$/g,function(v,C,q){return 2*Number(C)+q}),this.removeTextOutline();var G=S.createElementNS(k,"tspan");a(G,{class:"highcharts-text-outline",fill:p,stroke:p,"stroke-width":U,"stroke-linejoin":"round"}),p=T.querySelector("textPath")||T,[].forEach.call(p.childNodes,function(v){var C=v.cloneNode(!0);C.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach(function(q){return C.removeAttribute(q)}),G.appendChild(C)});var O=0;[].forEach.call(p.querySelectorAll("text tspan"),function(v){O+=Number(v.getAttribute("dy"))}),(U=S.createElementNS(k,"tspan")).textContent="\u200b",a(U,{x:Number(T.getAttribute("x")),dy:-O}),G.appendChild(U),p.insertBefore(G,p.firstChild)}},d.prototype.attr=function(p,T,U,G){var C,J,R,O=this.element,v=this.symbolCustomAttribs,q=this;if("string"==typeof p&&typeof T<"u"){var A=p;(p={})[A]=T}return"string"==typeof p?q=(this[p+"Getter"]||this._defaultGetter).call(this,p,O):(l(p,function(N,E){J=!1,G||W(this,E),this.symbolName&&-1!==v.indexOf(E)&&(C||(this.symbolAttr(p),C=!0),J=!0),!this.rotation||"x"!==E&&"y"!==E||(this.doTransform=!0),J||((R=this[E+"Setter"]||this._defaultSetter).call(this,N,E,O),!this.styledMode&&this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(E)&&this.updateShadows(E,N,R))},this),this.afterSetters()),U&&U.call(this),q},d.prototype.clip=function(p){return this.attr("clip-path",p?"url("+this.renderer.url+"#"+p.id+")":"none")},d.prototype.crisp=function(p,T){T=T||p.strokeWidth||0;var U=Math.round(T)%2/2;return p.x=Math.floor(p.x||this.x||0)+U,p.y=Math.floor(p.y||this.y||0)+U,p.width=Math.floor((p.width||this.width||0)-2*U),p.height=Math.floor((p.height||this.height||0)-2*U),_(p.strokeWidth)&&(p.strokeWidth=T),p},d.prototype.complexColor=function(p,T,U){var O,v,C,q,J,R,A,N,E,K,et,G=this.renderer,Q=[];B(this.renderer,"complexColor",{args:arguments},function(){if(p.radialGradient?v="radialGradient":p.linearGradient&&(v="linearGradient"),v){if(J=G.gradients,R=p.stops,E=U.radialReference,M(C=p[v])&&(p[v]=C={x1:C[0],y1:C[1],x2:C[2],y2:C[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===v&&E&&!_(C.gradientUnits)&&(C=h(C,G.getRadialAttr(E,q=C),{gradientUnits:"userSpaceOnUse"})),l(C,function(at,lt){"id"!==lt&&Q.push(lt,at)}),l(R,function(at){Q.push(at)}),Q=Q.join(","),J[Q])K=J[Q].attr("id");else{C.id=K=r();var rt=J[Q]=G.createElement(v).attr(C).add(G.defs);rt.radAttr=q,rt.stops=[],R.forEach(function(at){0===at[1].indexOf("rgba")?(O=H.parse(at[1]),A=O.get("rgb"),N=O.get("a")):(A=at[1],N=1),at=G.createElement("stop").attr({offset:at[0],"stop-color":A,"stop-opacity":N}).add(rt),rt.stops.push(at)})}U.setAttribute(T,et="url("+G.url+"#"+K+")"),U.gradient=Q,p.toString=function(){return et}}})},d.prototype.css=function(p){var T=this.styles,U={},G=this.element,O=!T;if(p.color&&(p.fill=p.color),T&&l(p,function(q,J){T&&T[J]!==q&&(U[J]=q,O=!0)}),O){if(T&&(p=t(T,U)),null===p.width||"auto"===p.width)delete this.textWidth;else if("text"===G.nodeName.toLowerCase()&&p.width)var v=this.textWidth=y(p.width);this.styles=p,v&&!Z&&this.renderer.forExport&&delete p.width;var C=h(p);G.namespaceURI===this.SVG_NS&&["textOutline","textOverflow","width"].forEach(function(q){return C&&delete C[q]}),u(G,C),this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),p.textOutline&&this.applyTextOutline(p.textOutline))}return this},d.prototype.dashstyleSetter=function(p){var T=this["stroke-width"];if("inherit"===T&&(T=1),p=p&&p.toLowerCase()){var U=p.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(p=U.length;p--;)U[p]=""+y(U[p])*o(T,NaN);p=U.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",p)}},d.prototype.destroy=function(){var p=this,T=p.element||{},U=p.renderer,G=T.ownerSVGElement,O=U.isSVG&&"SPAN"===T.nodeName&&p.parentGroup||void 0;if(T.onclick=T.onmouseout=T.onmouseover=T.onmousemove=T.point=null,W(p),p.clipPath&&G){var v=p.clipPath;[].forEach.call(G.querySelectorAll("[clip-path],[CLIP-PATH]"),function(C){-1<C.getAttribute("clip-path").indexOf(v.element.id)&&C.removeAttribute("clip-path")}),p.clipPath=v.destroy()}if(p.stops){for(G=0;G<p.stops.length;G++)p.stops[G].destroy();p.stops.length=0,p.stops=void 0}for(p.safeRemoveChild(T),U.styledMode||p.destroyShadows();O&&O.div&&0===O.div.childNodes.length;)T=O.parentGroup,p.safeRemoveChild(O.div),delete O.div,O=T;p.alignTo&&D(U.alignedObjects,p),l(p,function(C,q){p[q]&&p[q].parentGroup===p&&p[q].destroy&&p[q].destroy(),delete p[q]})},d.prototype.destroyShadows=function(){(this.shadows||[]).forEach(function(p){this.safeRemoveChild(p)},this),this.shadows=void 0},d.prototype.dSetter=function(p,T,U){M(p)&&("string"==typeof p[0]&&(p=this.renderer.pathToSegments(p)),this.pathArray=p,p=p.reduce(function(G,O,v){return O&&O.join?(v?G+" ":"")+O.join(" "):(O||"").toString()},"")),/(NaN| {2}|^$)/.test(p)&&(p="M 0 0"),this[T]!==p&&(U.setAttribute(T,p),this[T]=p)},d.prototype.fadeOut=function(p){var T=this;T.animate({opacity:0},{duration:o(p,150),complete:function(){T.hide()}})},d.prototype.fillSetter=function(p,T,U){"string"==typeof p?U.setAttribute(T,p):p&&this.complexColor(p,T,U)},d.prototype.getBBox=function(p,T){var U=this.alignValue,G=this.element,O=this.renderer,v=this.styles,C=this.textStr,q=O.cache,J=O.cacheKeys,R=G.namespaceURI===this.SVG_NS;T=o(T,this.rotation,0);var N,A=O.styledMode?G&&d.prototype.getStyle.call(G,"font-size"):v&&v.fontSize;if(_(C)){var E=C.toString();-1===E.indexOf("<")&&(E=E.replace(/[0-9]/g,"0")),E+=["",T,A,this.textWidth,U,v&&v.textOverflow,v&&v.fontWeight].join()}if(E&&!p&&(N=q[E]),!N){if(R||O.forExport){try{var K=this.fakeTS&&function(et){var rt=G.querySelector(".highcharts-text-outline");rt&&u(rt,{display:et})};x(K)&&K("none"),N=G.getBBox?t({},G.getBBox()):{width:G.offsetWidth,height:G.offsetHeight,x:0,y:0},x(K)&&K("")}catch{}(!N||0>N.width)&&(N={x:0,y:0,width:0,height:0})}else N=this.htmlGetBBox();if(O.isSVG&&(O=N.width,p=N.height,R&&(N.height=p={"11px,17":14,"13px,20":16}[""+(A||"")+",".concat(Math.round(p))]||p),T)){R=Number(G.getAttribute("y")||0)-N.y,U={right:1,center:.5}[U||0]||0,v=T*P,A=(T-90)*P;var Q=O*Math.cos(v);T=O*Math.sin(v),K=Math.cos(A),v=Math.sin(A),Q=(K=(A=(O=N.x+U*(O-Q)+R*K)+Q)-p*K)-Q,T=(p=(U=(R=N.y+R-U*T+R*v)+T)-p*v)-T,N.x=Math.min(O,A,K,Q),N.y=Math.min(R,U,p,T),N.width=Math.max(O,A,K,Q)-N.x,N.height=Math.max(R,U,p,T)-N.y}if(E&&(""===C||0<N.height)){for(;250<J.length;)delete q[J.shift()];q[E]||J.push(E),q[E]=N}}return N},d.prototype.getStyle=function(p){return b.getComputedStyle(this.element||this,"").getPropertyValue(p)},d.prototype.hasClass=function(p){return-1!==(""+this.attr("class")).split(" ").indexOf(p)},d.prototype.hide=function(){return this.attr({visibility:"hidden"})},d.prototype.htmlGetBBox=function(){return{height:0,width:0,x:0,y:0}},d.prototype.init=function(p,T){this.element="span"===T?c(T):S.createElementNS(this.SVG_NS,T),this.renderer=p,B(this,"afterInit")},d.prototype.on=function(p,T){var U=this.onEvents;return U[p]&&U[p](),U[p]=m(this.element,p,T),this},d.prototype.opacitySetter=function(p,T,U){this.opacity=p=Number(Number(p).toFixed(3)),U.setAttribute(T,p)},d.prototype.removeClass=function(p){return this.attr("class",(""+this.attr("class")).replace(w(p)?new RegExp("(^| )".concat(p,"( |$)")):p," ").replace(/ +/g," ").trim())},d.prototype.removeTextOutline=function(){var p=this.element.querySelector("tspan.highcharts-text-outline");p&&this.safeRemoveChild(p)},d.prototype.safeRemoveChild=function(p){var T=p.parentNode;T&&T.removeChild(p)},d.prototype.setRadialReference=function(p){var T=this.element.gradient&&this.renderer.gradients[this.element.gradient];return this.element.radialReference=p,T&&T.radAttr&&T.animate(this.renderer.getRadialAttr(p,T.radAttr)),this},d.prototype.setTextPath=function(p,T){var U=this;T=h(!0,{enabled:!0,attributes:{dy:-5,startOffset:"50%",textAnchor:"middle"}},T);var G=this.renderer.url,O=this.text||this,v=O.textPath,C=T.attributes,q=T.enabled;return p=p||v&&v.path,v&&v.undo(),p&&q?(T=m(O,"afterModifyTree",function(J){if(p&&q){var R=p.attr("id");R||p.attr("id",R=r());var A={x:0,y:0};_(C.dx)&&(A.dx=C.dx,delete C.dx),_(C.dy)&&(A.dy=C.dy,delete C.dy),O.attr(A),U.attr({transform:""}),U.box&&(U.box=U.box.destroy()),A=J.nodes.slice(0),J.nodes.length=0,J.nodes[0]={tagName:"textPath",attributes:t(C,{"text-anchor":C.textAnchor,href:""+G+"#".concat(R)}),children:A}}}),O.textPath={path:p,undo:T}):(O.attr({dx:0,dy:0}),delete O.textPath),this.added&&(O.textCache="",this.renderer.buildText(O)),this},d.prototype.shadow=function(p,T,U){var G=[],O=this.element,v=this.oldShadowOptions,C=this.parentGroup,q=C&&90===C.rotation;C={color:"#000000",offsetX:q?-1:1,offsetY:q?-1:1,opacity:.15,width:3};var R,J=!1;if(!0===p?R=C:"object"==typeof p&&(R=t(C,p)),R&&(R&&v&&l(R,function(K,Q){K!==v[Q]&&(J=!0)}),J&&this.destroyShadows(),this.oldShadowOptions=R),R){if(!this.shadows){C=R.opacity/R.width;var A=q?"translate(".concat(R.offsetY,", ").concat(R.offsetX,")"):"translate(".concat(R.offsetX,", ").concat(R.offsetY,")");for(q=1;q<=R.width;q++){var N=O.cloneNode(!1),E=2*R.width+1-2*q;a(N,{stroke:p.color||"#000000","stroke-opacity":C*q,"stroke-width":E,transform:A,fill:"none"}),N.setAttribute("class",(N.getAttribute("class")||"")+" highcharts-shadow"),U&&(a(N,"height",Math.max(a(N,"height")-E,0)),N.cutHeight=E),T?T.element.appendChild(N):O.parentNode&&O.parentNode.insertBefore(N,O),G.push(N)}this.shadows=G}}else this.destroyShadows();return this},d.prototype.show=function(p){return void 0===p&&(p=!0),this.attr({visibility:p?"inherit":"visible"})},d.prototype["stroke-widthSetter"]=function(p,T,U){this[T]=p,U.setAttribute(T,p)},d.prototype.strokeWidth=function(){if(!this.renderer.styledMode)return this["stroke-width"]||0;var p=this.getStyle("stroke-width"),T=0;if(p.indexOf("px")===p.length-2)T=y(p);else if(""!==p){var U=S.createElementNS(k,"rect");a(U,{width:p,"stroke-width":0}),this.element.parentNode.appendChild(U),T=U.getBBox().width,U.parentNode.removeChild(U)}return T},d.prototype.symbolAttr=function(p){var T=this;"x y r start end width height innerR anchorX anchorY clockwise".split(" ").forEach(function(U){T[U]=o(p[U],T[U])}),T.attr({d:T.renderer.symbols[T.symbolName](T.x,T.y,T.width,T.height,T)})},d.prototype.textSetter=function(p){p!==this.textStr&&(delete this.textPxLength,this.textStr=p,this.added&&this.renderer.buildText(this))},d.prototype.titleSetter=function(p){var T=this.element,U=T.getElementsByTagName("title")[0]||S.createElementNS(this.SVG_NS,"title");T.insertBefore?T.insertBefore(U,T.firstChild):T.appendChild(U),U.textContent=String(o(p,"")).replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">")},d.prototype.toFront=function(){var p=this.element;return p.parentNode.appendChild(p),this},d.prototype.translate=function(p,T){return this.attr({translateX:p,translateY:T})},d.prototype.updateShadows=function(p,T,U){var G=this.shadows;if(G)for(var O=G.length;O--;)U.call(G[O],"height"===p?Math.max(T-(G[O].cutHeight||0),0):"d"===p?this.d:T,p,G[O])},d.prototype.updateTransform=function(){var p=this.element,T=this.matrix,U=this.rotation;U=void 0===U?0:U;var G=this.scaleX,O=this.scaleY,v=this.translateX,C=this.translateY;v=["translate("+(void 0===v?0:v)+","+(void 0===C?0:C)+")"],_(T)&&v.push("matrix("+T.join(",")+")"),U&&v.push("rotate("+U+" "+o(this.rotationOriginX,p.getAttribute("x"),0)+" "+o(this.rotationOriginY,p.getAttribute("y")||0)+")"),(_(G)||_(O))&&v.push("scale("+o(G,1)+" "+o(O,1)+")"),v.length&&!(this.text||this).textPath&&p.setAttribute("transform",v.join(" "))},d.prototype.visibilitySetter=function(p,T,U){"inherit"===p?U.removeAttribute(T):this[T]!==p&&U.setAttribute(T,p),this[T]=p},d.prototype.xGetter=function(p){return"circle"===this.element.nodeName&&("x"===p?p="cx":"y"===p&&(p="cy")),this._defaultGetter(p)},d.prototype.zIndexSetter=function(p,T){var U=this.renderer,G=this.parentGroup,O=(G||U).element||U.box,v=this.element;U=O===U.box;var J,C=!1,q=this.added;if(_(p)?(v.setAttribute("data-z-index",p),this[T]===(p=+p)&&(q=!1)):_(this[T])&&v.removeAttribute("data-z-index"),this[T]=p,q){for((p=this.zIndex)&&G&&(G.handleZ=!0),J=(T=O.childNodes).length-1;0<=J&&!C;J--){q=(G=T[J]).getAttribute("data-z-index");var R=!_(q);G!==v&&(0>p&&R&&!U&&!J?(O.insertBefore(v,T[J]),C=!0):(y(q)<=p||R&&(!_(p)||0<=p))&&(O.insertBefore(v,T[J+1]||null),C=!0))}C||(O.insertBefore(v,T[U?3:0]||null),C=!0)}return C},d}(),Y.prototype.strokeSetter=Y.prototype.fillSetter,Y.prototype.yGetter=Y.prototype.xGetter,Y.prototype.matrixSetter=Y.prototype.rotationOriginXSetter=Y.prototype.rotationOriginYSetter=Y.prototype.rotationSetter=Y.prototype.scaleXSetter=Y.prototype.scaleYSetter=Y.prototype.translateXSetter=Y.prototype.translateYSetter=Y.prototype.verticalAlignSetter=function(d,p){this[p]=d,this.doTransform=!0},Y}),j(ot,"Core/Renderer/RendererRegistry.js",[ot["Core/Globals.js"]],function(Y){var H,X,z;return(X=H||(H={})).rendererTypes={},X.getRendererType=function(tt){return void 0===tt&&(tt=z),X.rendererTypes[tt]||X.rendererTypes[z]},X.registerRendererType=function(tt,V,W){X.rendererTypes[tt]=V,(!z||W)&&(z=tt,Y.Renderer=V)},H}),j(ot,"Core/Renderer/SVG/SVGLabel.js",[ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Utilities.js"]],function(Y,H){var Z,X=this&&this.__extends||(Z=function(k,b){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a}||function(m,a){for(var c in a)a.hasOwnProperty(c)&&(m[c]=a[c])})(k,b)},function(k,b){function m(){this.constructor=k}Z(k,b),k.prototype=null===b?Object.create(b):(m.prototype=b.prototype,new m)}),z=H.defined,tt=H.extend,V=H.isNumber,W=H.merge,P=H.pick,S=H.removeEvent;return function(Z){function k(b,m,a,c,u,_,D,t,B,M){var w,x=Z.call(this)||this;return x.paddingLeftSetter=x.paddingSetter,x.paddingRightSetter=x.paddingSetter,x.init(b,"g"),x.textStr=m,x.x=a,x.y=c,x.anchorX=_,x.anchorY=D,x.baseline=B,x.className=M,x.addClass("button"===M?"highcharts-no-tooltip":"highcharts-label"),M&&x.addClass("highcharts-"+M),x.text=b.text(void 0,0,0,t).attr({zIndex:1}),"string"==typeof u&&((w=/^url\((.*?)\)$/.test(u))||x.renderer.symbols[u])&&(x.symbolKey=u),x.bBox=k.emptyBBox,x.padding=3,x.baselineOffset=0,x.needsBox=b.styledMode||w,x.deferredAttr={},x.alignFactor=0,x}return X(k,Z),k.prototype.alignSetter=function(b){(b={left:0,center:.5,right:1}[b])!==this.alignFactor&&(this.alignFactor=b,this.bBox&&V(this.xSetting)&&this.attr({x:this.xSetting}))},k.prototype.anchorXSetter=function(b,m){this.anchorX=b,this.boxAttr(m,Math.round(b)-this.getCrispAdjust()-this.xSetting)},k.prototype.anchorYSetter=function(b,m){this.anchorY=b,this.boxAttr(m,b-this.ySetting)},k.prototype.boxAttr=function(b,m){this.box?this.box.attr(b,m):this.deferredAttr[b]=m},k.prototype.css=function(b){if(b){var m={};b=W(b),k.textProps.forEach(function(a){typeof b[a]<"u"&&(m[a]=b[a],delete b[a])}),this.text.css(m),"fontSize"in m||"fontWeight"in m?this.updateTextPadding():("width"in m||"textOverflow"in m)&&this.updateBoxSize()}return Y.prototype.css.call(this,b)},k.prototype.destroy=function(){S(this.element,"mouseenter"),S(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),Y.prototype.destroy.call(this)},k.prototype.fillSetter=function(b,m){b&&(this.needsBox=!0),this.fill=b,this.boxAttr(m,b)},k.prototype.getBBox=function(){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();var b=this.padding,m=P(this.paddingLeft,b);return{width:this.width,height:this.height,x:this.bBox.x-m,y:this.bBox.y-b}},k.prototype.getCrispAdjust=function(){return this.renderer.styledMode&&this.box?this.box.strokeWidth()%2/2:(this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2},k.prototype.heightSetter=function(b){this.heightSetting=b},k.prototype.onAdd=function(){this.text.add(this),this.attr({text:P(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&z(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})},k.prototype.paddingSetter=function(b,m){V(b)?b!==this[m]&&(this[m]=b,this.updateTextPadding()):this[m]=void 0},k.prototype.rSetter=function(b,m){this.boxAttr(m,b)},k.prototype.shadow=function(b){return b&&!this.renderer.styledMode&&(this.updateBoxSize(),this.box&&this.box.shadow(b)),this},k.prototype.strokeSetter=function(b,m){this.stroke=b,this.boxAttr(m,b)},k.prototype["stroke-widthSetter"]=function(b,m){b&&(this.needsBox=!0),this["stroke-width"]=b,this.boxAttr(m,b)},k.prototype["text-alignSetter"]=function(b){this.textAlign=b},k.prototype.textSetter=function(b){typeof b<"u"&&this.text.attr({text:b}),this.updateTextPadding()},k.prototype.updateBoxSize=function(){var b=this.text,m=b.element.style,a={},c=this.padding,u=this.bBox=V(this.widthSetting)&&V(this.heightSetting)&&!this.textAlign||!z(b.textStr)?k.emptyBBox:b.getBBox();this.width=this.getPaddedWidth(),this.height=(this.heightSetting||u.height||0)+2*c,m=this.renderer.fontMetrics(m&&m.fontSize,b),this.baselineOffset=c+Math.min((this.text.firstLineMetrics||m).b,u.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-m.h)/2),this.needsBox&&!b.textPath&&(this.box||((b=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect()).addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),b.add(this)),b=this.getCrispAdjust(),a.x=b,a.y=(this.baseline?-this.baselineOffset:0)+b,a.width=Math.round(this.width),a.height=Math.round(this.height),this.box.attr(tt(a,this.deferredAttr)),this.deferredAttr={})},k.prototype.updateTextPadding=function(){var b=this.text;if(!b.textPath){this.updateBoxSize();var m=this.baseline?0:this.baselineOffset,a=P(this.paddingLeft,this.padding);z(this.widthSetting)&&this.bBox&&("center"===this.textAlign||"right"===this.textAlign)&&(a+={center:.5,right:1}[this.textAlign]*(this.widthSetting-this.bBox.width)),(a!==b.x||m!==b.y)&&(b.attr("x",a),b.hasBoxWidthChanged&&(this.bBox=b.getBBox(!0)),typeof m<"u"&&b.attr("y",m)),b.x=a,b.y=m}},k.prototype.widthSetter=function(b){this.widthSetting=V(b)?b:void 0},k.prototype.getPaddedWidth=function(){var b=this.padding,m=P(this.paddingLeft,b);return b=P(this.paddingRight,b),(this.widthSetting||this.bBox.width||0)+m+b},k.prototype.xSetter=function(b){this.x=b,this.alignFactor&&(b-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.xSetting=Math.round(b),this.attr("translateX",this.xSetting)},k.prototype.ySetter=function(b){this.ySetting=this.y=Math.round(b),this.attr("translateY",this.ySetting)},k.emptyBBox={width:0,height:0,x:0,y:0},k.textProps="color direction fontFamily fontSize fontStyle fontWeight lineHeight textAlign textDecoration textOutline textOverflow width".split(" "),k}(Y)}),j(ot,"Core/Renderer/SVG/Symbols.js",[ot["Core/Utilities.js"]],function(Y){function H(P,S,Z,k,b){var m=[];if(b){var a=b.start||0,c=W(b.r,Z);Z=W(b.r,k||Z);var u=(b.end||0)-.001;k=b.innerR;var _=W(b.open,.001>Math.abs((b.end||0)-a-2*Math.PI)),D=Math.cos(a),t=Math.sin(a),B=Math.cos(u),M=Math.sin(u);a=W(b.longArc,.001>u-a-Math.PI?0:1),m.push(["M",P+c*D,S+Z*t],["A",c,Z,0,a,W(b.clockwise,1),P+c*B,S+Z*M]),tt(k)&&m.push(_?["M",P+k*B,S+k*M]:["L",P+k*B,S+k*M],["A",k,k,0,a,tt(b.clockwise)?1-b.clockwise:0,P+k*D,S+k*t]),_||m.push(["Z"])}return m}function X(P,S,Z,k,b){return b&&b.r?z(P,S,Z,k,b):[["M",P,S],["L",P+Z,S],["L",P+Z,S+k],["L",P,S+k],["Z"]]}function z(P,S,Z,k,b){return[["M",P+(b=b&&b.r||0),S],["L",P+Z-b,S],["C",P+Z,S,P+Z,S,P+Z,S+b],["L",P+Z,S+k-b],["C",P+Z,S+k,P+Z,S+k,P+Z-b,S+k],["L",P+b,S+k],["C",P,S+k,P,S+k,P,S+k-b],["L",P,S+b],["C",P,S,P,S,P+b,S]]}var tt=Y.defined,V=Y.isNumber,W=Y.pick;return{arc:H,callout:function(P,S,Z,k,b){var m=Math.min(b&&b.r||0,Z,k),a=m+6,c=b&&b.anchorX;b=b&&b.anchorY||0;var u=z(P,S,Z,k,{r:m});return V(c)&&(P+c>=Z?b>S+a&&b<S+k-a?u.splice(3,1,["L",P+Z,b-6],["L",P+Z+6,b],["L",P+Z,b+6],["L",P+Z,S+k-m]):u.splice(3,1,["L",P+Z,k/2],["L",c,b],["L",P+Z,k/2],["L",P+Z,S+k-m]):0>=P+c?b>S+a&&b<S+k-a?u.splice(7,1,["L",P,b+6],["L",P-6,b],["L",P,b-6],["L",P,S+m]):u.splice(7,1,["L",P,k/2],["L",c,b],["L",P,k/2],["L",P,S+m]):b&&b>k&&c>P+a&&c<P+Z-a?u.splice(5,1,["L",c+6,S+k],["L",c,S+k+6],["L",c-6,S+k],["L",P+m,S+k]):b&&0>b&&c>P+a&&c<P+Z-a&&u.splice(1,1,["L",c-6,S],["L",c,S-6],["L",c+6,S],["L",Z-m,S])),u},circle:function(P,S,Z,k){return H(P+Z/2,S+k/2,Z/2,k/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(P,S,Z,k){return[["M",P+Z/2,S],["L",P+Z,S+k/2],["L",P+Z/2,S+k],["L",P,S+k/2],["Z"]]},rect:X,roundedRect:z,square:X,triangle:function(P,S,Z,k){return[["M",P+Z/2,S],["L",P+Z,S+k],["L",P,S+k],["Z"]]},"triangle-down":function(P,S,Z,k){return[["M",P,S],["L",P+Z,S],["L",P+Z/2,S+k],["Z"]]}}}),j(ot,"Core/Renderer/SVG/TextBuilder.js",[ot["Core/Renderer/HTML/AST.js"],ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H,X){var z=H.doc,tt=H.SVG_NS,V=H.win,W=X.attr,P=X.extend,S=X.fireEvent,Z=X.isString,k=X.objectEach,b=X.pick;return function(){function m(a){var c=a.styles;this.renderer=a.renderer,this.svgElement=a,this.width=a.textWidth,this.textLineHeight=c&&c.lineHeight,this.textOutline=c&&c.textOutline,this.ellipsis=!(!c||"ellipsis"!==c.textOverflow),this.noWrap=!(!c||"nowrap"!==c.whiteSpace),this.fontSize=c&&c.fontSize}return m.prototype.buildSVG=function(){var a=this.svgElement,c=a.element,u=a.renderer,_=b(a.textStr,"").toString(),D=-1!==_.indexOf("<"),t=c.childNodes;u=this.width&&!a.added&&u.box;var M=[_,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,this.fontSize,this.width].join();if(M!==a.textCache){for(a.textCache=M,delete a.actualWidth,M=t.length;M--;)c.removeChild(t[M]);D||this.ellipsis||this.width||a.textPath||-1!==_.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(_))?""!==_&&(u&&u.appendChild(c),_=new Y(_),this.modifyTree(_.nodes),_.addToDOM(c),this.modifyDOM(),this.ellipsis&&-1!==(c.textContent||"").indexOf("\u2026")&&a.attr("title",this.unescapeEntities(a.textStr||"",["&lt;","&gt;"])),u&&u.removeChild(c)):c.appendChild(z.createTextNode(this.unescapeEntities(_))),Z(this.textOutline)&&a.applyTextOutline&&a.applyTextOutline(this.textOutline)}},m.prototype.modifyDOM=function(){var _,a=this,c=this.svgElement,u=W(c.element,"x");for(c.firstLineMetrics=void 0;(_=c.element.firstChild)&&/^[\s\u200B]*$/.test(_.textContent||" ");)c.element.removeChild(_);[].forEach.call(c.element.querySelectorAll("tspan.highcharts-br"),function(M,x){M.nextSibling&&M.previousSibling&&(0===x&&1===M.previousSibling.nodeType&&(c.firstLineMetrics=c.renderer.fontMetrics(void 0,M.previousSibling)),W(M,{dy:a.getLineHeight(M.nextSibling),x:u}))});var D=this.width||0;if(D){var B=function(M){[].slice.call(M.childNodes).forEach(function(x){x.nodeType===V.Node.TEXT_NODE?function(M,x){var w=M.textContent||"",h=w.replace(/([^\^])-/g,"$1- ").split(" "),l=!a.noWrap&&(1<h.length||1<c.element.childNodes.length),o=a.getLineHeight(x),y=0,s=c.actualWidth;if(a.ellipsis)w&&a.truncate(M,w,void 0,0,Math.max(0,D-parseInt(a.fontSize||12,10)),function(r,d){return r.substring(0,d)+"\u2026"});else if(l){for(w=[],l=[];x.firstChild&&x.firstChild!==M;)l.push(x.firstChild),x.removeChild(x.firstChild);for(;h.length;)h.length&&!a.noWrap&&0<y&&(w.push(M.textContent||""),M.textContent=h.join(" ").replace(/- /g,"-")),a.truncate(M,void 0,h,0===y&&s||0,D,function(r,d){return h.slice(0,d).join(" ").replace(/- /g,"-")}),s=c.actualWidth,y++;l.forEach(function(r){x.insertBefore(r,M)}),w.forEach(function(r){x.insertBefore(z.createTextNode(r),M),(r=z.createElementNS(tt,"tspan")).textContent="\u200b",W(r,{dy:o,x:u}),x.insertBefore(r,M)})}}(x,M):(-1!==x.className.baseVal.indexOf("highcharts-br")&&(c.actualWidth=0),B(x))})};B(c.element)}},m.prototype.getLineHeight=function(a){var c;return a=a.nodeType===V.Node.TEXT_NODE?a.parentElement:a,this.renderer.styledMode||(c=a&&/(px|em)$/.test(a.style.fontSize)?a.style.fontSize:this.fontSize||this.renderer.style.fontSize||12),this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(c,a||this.svgElement.element).h},m.prototype.modifyTree=function(a){var c=this,u=function(_,D){var t=_.attributes;t=void 0===t?{}:t;var B=_.children,M=_.style;M=void 0===M?{}:M;var x=_.tagName,w=c.renderer.styledMode;"b"===x||"strong"===x?w?t.class="highcharts-strong":M.fontWeight="bold":("i"===x||"em"===x)&&(w?t.class="highcharts-emphasized":M.fontStyle="italic"),M&&M.color&&(M.fill=M.color),"br"===x?(t.class="highcharts-br",_.textContent="\u200b",(D=a[D+1])&&D.textContent&&(D.textContent=D.textContent.replace(/^ +/gm,""))):"a"===x&&B&&B.some(function(h){return"#text"===h.tagName})&&(_.children=[{children:B,tagName:"tspan"}]),"#text"!==x&&"a"!==x&&(_.tagName="tspan"),P(_,{attributes:t,style:M}),B&&B.filter(function(h){return"#text"!==h.tagName}).forEach(u)};a.forEach(u),S(this.svgElement,"afterModifyTree",{nodes:a})},m.prototype.truncate=function(a,c,u,_,D,t){var y,B=this.svgElement,M=B.renderer,x=B.rotation,w=[],h=u?1:0,l=(c||u||"").length,o=l,s=function(d,p){p=p||d;var T=a.parentNode;if(T&&typeof w[p]>"u")if(T.getSubStringLength)try{w[p]=_+T.getSubStringLength(0,u?p+1:p)}catch{}else M.getSpanWidth&&(a.textContent=t(c||u,d),w[p]=_+M.getSpanWidth(B,a));return w[p]};B.rotation=0;var r=s(a.textContent.length);if(_+r>D){for(;h<=l;)o=Math.ceil((h+l)/2),u&&(y=t(u,o)),r=s(o,y&&y.length-1),h===l?h=l+1:r>D?l=o-1:h=o;0===l?a.textContent="":c&&l===c.length-1||(a.textContent=y||t(c||u,o))}u&&u.splice(0,o),B.actualWidth=r,B.rotation=x},m.prototype.unescapeEntities=function(a,c){return k(this.renderer.escapes,function(u,_){c&&-1!==c.indexOf(u)||(a=a.toString().replace(new RegExp(u,"g"),_))}),a},m}()}),j(ot,"Core/Renderer/SVG/SVGRenderer.js",[ot["Core/Renderer/HTML/AST.js"],ot["Core/Color/Color.js"],ot["Core/Globals.js"],ot["Core/Renderer/RendererRegistry.js"],ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Renderer/SVG/SVGLabel.js"],ot["Core/Renderer/SVG/Symbols.js"],ot["Core/Renderer/SVG/TextBuilder.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P,S){var O,Z=X.charts,k=X.deg2rad,b=X.doc,m=X.isFirefox,a=X.isMS,c=X.isWebKit,u=X.noop,_=X.SVG_NS,D=X.symbolSizes,t=X.win,B=S.addEvent,M=S.attr,x=S.createElement,w=S.css,h=S.defined,l=S.destroyObjectProperties,o=S.extend,y=S.isArray,s=S.isNumber,r=S.isObject,d=S.isString,p=S.merge,T=S.pick,U=S.pInt,G=S.uniqueKey;return X=function(){function v(C,q,J,R,A,N,E){this.width=this.url=this.style=this.isSVG=this.imgCount=this.height=this.gradients=this.globalAnimation=this.defs=this.chartIndex=this.cacheKeys=this.cache=this.boxWrapper=this.box=this.alignedObjects=void 0,this.init(C,q,J,R,A,N,E)}return v.prototype.init=function(C,q,J,R,A,N,E){var et,K=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),Q=K.element;E||K.css(this.getStyle(R)),C.appendChild(Q),M(C,"dir","ltr"),-1===C.innerHTML.indexOf("xmlns")&&M(Q,"xmlns",this.SVG_NS),this.isSVG=!0,this.box=Q,this.boxWrapper=K,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(b.createTextNode("Created with Highcharts 10.3.3")),this.defs=this.createElement("defs").add(),this.allowHTML=N,this.forExport=A,this.styledMode=E,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.setSize(q,J,!1),m&&C.getBoundingClientRect&&((q=function(){w(C,{left:0,top:0}),et=C.getBoundingClientRect(),w(C,{left:Math.ceil(et.left)-et.left+"px",top:Math.ceil(et.top)-et.top+"px"})})(),this.unSubPixelFix=B(t,"resize",q))},v.prototype.definition=function(C){return new Y([C]).addToDOM(this.defs.element)},v.prototype.getReferenceURL=function(){if((m||c)&&b.getElementsByTagName("base").length){if(!h(O)){var C=G();C=new Y([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:C},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#".concat(C,")"),fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(b.body),w(C,{position:"fixed",top:0,left:0,zIndex:9e5});var q=b.elementFromPoint(6,6);O="hitme"===(q&&q.id),b.body.removeChild(C)}if(O)return t.location.href.split("#")[0].replace(/<[^>]*>/g,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20")}return""},v.prototype.getStyle=function(C){return this.style=o({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},C)},v.prototype.setStyle=function(C){this.boxWrapper.css(this.getStyle(C))},v.prototype.isHidden=function(){return!this.boxWrapper.getBBox().width},v.prototype.destroy=function(){var C=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),l(this.gradients||{}),this.gradients=null,C&&(this.defs=C.destroy()),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null},v.prototype.createElement=function(C){var q=new this.Element;return q.init(this,C),q},v.prototype.getRadialAttr=function(C,q){return{cx:C[0]-C[2]/2+(q.cx||0)*C[2],cy:C[1]-C[2]/2+(q.cy||0)*C[2],r:(q.r||0)*C[2]}},v.prototype.buildText=function(C){new P(C).buildSVG()},v.prototype.getContrast=function(C){return 1.05/(.05+(C=.2126*(C=H.parse(C).rgba.map(function(q){return.03928>=(q/=255)?q/12.92:Math.pow((q+.055)/1.055,2.4)}))[0]+.7152*C[1]+.0722*C[2]))>(C+.05)/.05?"#FFFFFF":"#000000"},v.prototype.button=function(C,q,J,R,A,N,E,K,Q,et){void 0===A&&(A={});var rt=this.label(C,q,J,Q,void 0,void 0,et,void 0,"button"),at=this.styledMode;C=A.states||{};var lt=0;delete(A=p(A)).states;var ft=p({color:"#333333",cursor:"pointer",fontWeight:"normal"},A.style);delete A.style;var vt=Y.filterUserAttributes(A);if(rt.attr(p({padding:8,r:2},vt)),!at){vt=p({fill:"#f7f7f7",stroke:"#cccccc","stroke-width":1},vt);var gt=(N=p(vt,{fill:"#e6e6e6"},Y.filterUserAttributes(N||C.hover||{}))).style;delete N.style;var ht=(E=p(vt,{fill:"#e6ebf5",style:{color:"#000000",fontWeight:"bold"}},Y.filterUserAttributes(E||C.select||{}))).style;delete E.style;var bt=(K=p(vt,{style:{color:"#cccccc"}},Y.filterUserAttributes(K||C.disabled||{}))).style;delete K.style}return B(rt.element,a?"mouseover":"mouseenter",function(){3!==lt&&rt.setState(1)}),B(rt.element,a?"mouseout":"mouseleave",function(){3!==lt&&rt.setState(lt)}),rt.setState=function(pt){1!==pt&&(rt.state=lt=pt),rt.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][pt||0]),at||(rt.attr([vt,N,E,K][pt||0]),r(pt=[ft,gt,ht,bt][pt||0])&&rt.css(pt))},at||(rt.attr(vt).css(o({cursor:"default"},ft)),et&&rt.text.css({pointerEvents:"none"})),rt.on("touchstart",function(pt){return pt.stopPropagation()}).on("click",function(pt){3!==lt&&R.call(rt,pt)})},v.prototype.crispLine=function(C,q,J){void 0===J&&(J="round");var R=C[0],A=C[1];return h(R[1])&&R[1]===A[1]&&(R[1]=A[1]=Math[J](R[1])-q%2/2),h(R[2])&&R[2]===A[2]&&(R[2]=A[2]=Math[J](R[2])+q%2/2),C},v.prototype.path=function(C){var q=this.styledMode?{}:{fill:"none"};return y(C)?q.d=C:r(C)&&o(q,C),this.createElement("path").attr(q)},v.prototype.circle=function(C,q,J){return C=r(C)?C:typeof C>"u"?{}:{x:C,y:q,r:J},(q=this.createElement("circle")).xSetter=q.ySetter=function(R,A,N){N.setAttribute("c"+A,R)},q.attr(C)},v.prototype.arc=function(C,q,J,R,A,N){return r(C)?(q=(R=C).y,J=R.r,C=R.x):R={innerR:R,start:A,end:N},(C=this.symbol("arc",C,q,J,J,R)).r=J,C},v.prototype.rect=function(C,q,J,R,A,N){A=r(C)?C.r:A;var E=this.createElement("rect");return C=r(C)?C:typeof C>"u"?{}:{x:C,y:q,width:Math.max(J,0),height:Math.max(R,0)},this.styledMode||(typeof N<"u"&&(C["stroke-width"]=N,C=E.crisp(C)),C.fill="none"),A&&(C.r=A),E.rSetter=function(K,Q,et){E.r=K,M(et,{rx:K,ry:K})},E.rGetter=function(){return E.r||0},E.attr(C)},v.prototype.setSize=function(C,q,J){this.width=C,this.height=q,this.boxWrapper.animate({width:C,height:q},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:T(J,!0)?void 0:0}),this.alignElements()},v.prototype.g=function(C){var q=this.createElement("g");return C?q.attr({class:"highcharts-"+C}):q},v.prototype.image=function(C,q,J,R,A,N){var E={preserveAspectRatio:"none"},K=function(et,rt){et.setAttributeNS?et.setAttributeNS("http://www.w3.org/1999/xlink","href",rt):et.setAttribute("hc-svg-href",rt)};s(q)&&(E.x=q),s(J)&&(E.y=J),s(R)&&(E.width=R),s(A)&&(E.height=A);var Q=this.createElement("image").attr(E);return q=function(et){K(Q.element,C),N.call(Q,et)},N?(K(Q.element,"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),J=new t.Image,B(J,"load",q),J.src=C,J.complete&&q({})):K(Q.element,C),Q},v.prototype.symbol=function(C,q,J,R,A,N){var at,E=this,K=/^url\((.*?)\)$/,Q=K.test(C),et=!Q&&(this.symbols[C]?C:"circle"),rt=et&&this.symbols[et];if(rt){"number"==typeof q&&(at=rt.call(this.symbols,Math.round(q||0),Math.round(J||0),R||0,A||0,N));var lt=this.path(at);E.styledMode||lt.attr("fill","none"),o(lt,{symbolName:et||void 0,x:q,y:J,width:R,height:A}),N&&o(lt,N)}else if(Q){var ft=C.match(K)[1],vt=lt=this.image(ft);vt.imgwidth=T(D[ft]&&D[ft].width,N&&N.width),vt.imgheight=T(D[ft]&&D[ft].height,N&&N.height);var gt=function(ht){return ht.attr({width:ht.width,height:ht.height})};["width","height"].forEach(function(ht){vt[ht+"Setter"]=function(bt,pt){this[pt]=bt,bt=this.alignByTranslate;var it=this.element,nt=this.width,ct=this.height,dt=this.imgwidth,mt=this.imgheight,yt=this["img"+pt];if(h(yt)){var Ct=1;N&&"within"===N.backgroundSize&&nt&&ct?(Ct=Math.min(nt/dt,ct/mt),yt=Math.round(yt*Ct),M(it,{width:Math.round(dt*Ct),height:Math.round(mt*Ct)})):it&&it.setAttribute(pt,yt),bt||this.translate(((nt||0)-yt*Ct)/2,((ct||0)-yt*Ct)/2)}}}),h(q)&&vt.attr({x:q,y:J}),vt.isImg=!0,h(vt.imgwidth)&&h(vt.imgheight)?gt(vt):(vt.attr({width:0,height:0}),x("img",{onload:function(){var ht=Z[E.chartIndex];0===this.width&&(w(this,{position:"absolute",top:"-999em"}),b.body.appendChild(this)),D[ft]={width:this.width,height:this.height},vt.imgwidth=this.width,vt.imgheight=this.height,vt.element&&gt(vt),this.parentNode&&this.parentNode.removeChild(this),E.imgCount--,!E.imgCount&&ht&&!ht.hasLoaded&&ht.onload()},src:ft}),this.imgCount++)}return lt},v.prototype.clipRect=function(C,q,J,R){var A=G()+"-",N=this.createElement("clipPath").attr({id:A}).add(this.defs);return(C=this.rect(C,q,J,R,0).add(N)).id=A,C.clipPath=N,C.count=0,C},v.prototype.text=function(C,q,J,R){var A={};return!R||!this.allowHTML&&this.forExport?(A.x=Math.round(q||0),J&&(A.y=Math.round(J)),h(C)&&(A.text=C),C=this.createElement("text").attr(A),(!R||this.forExport&&!this.allowHTML)&&(C.xSetter=function(N,E,K){for(var at,Q=K.getElementsByTagName("tspan"),et=K.getAttribute(E),rt=0;rt<Q.length;rt++)(at=Q[rt]).getAttribute(E)===et&&at.setAttribute(E,N);K.setAttribute(E,N)}),C):this.html(C,q,J)},v.prototype.fontMetrics=function(C,q){return C=!this.styledMode&&/px/.test(C)||!t.getComputedStyle?C||q&&q.style&&q.style.fontSize||this.style&&this.style.fontSize:q&&tt.prototype.getStyle.call(q,"font-size"),{h:q=24>(C=/px/.test(C)?U(C):12)?C+3:Math.round(1.2*C),b:Math.round(.8*q),f:C}},v.prototype.rotCorr=function(C,q,J){var R=C;return q&&J&&(R=Math.max(R*Math.cos(q*k),4)),{x:-C/3*Math.sin(q*k),y:R}},v.prototype.pathToSegments=function(C){for(var q=[],J=[],R={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2},A=0;A<C.length;A++)d(J[0])&&s(C[A])&&J.length===R[J[0].toUpperCase()]&&C.splice(A,0,J[0].replace("M","L").replace("m","l")),"string"==typeof C[A]&&(J.length&&q.push(J.slice(0)),J.length=0),J.push(C[A]);return q.push(J.slice(0)),q},v.prototype.label=function(C,q,J,R,A,N,E,K,Q){return new V(this,C,q,J,R,A,N,E,K,Q)},v.prototype.alignElements=function(){this.alignedObjects.forEach(function(C){return C.align()})},v}(),o(X.prototype,{Element:tt,SVG_NS:_,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:W,draw:u}),z.registerRendererType("svg",X,!0),X}),j(ot,"Core/Renderer/HTML/HTMLElement.js",[ot["Core/Globals.js"],ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Utilities.js"]],function(Y,H,X){var a,z=this&&this.__extends||(a=function(c,u){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,D){_.__proto__=D}||function(_,D){for(var t in D)D.hasOwnProperty(t)&&(_[t]=D[t])})(c,u)},function(c,u){function _(){this.constructor=c}a(c,u),c.prototype=null===u?Object.create(u):(_.prototype=u.prototype,new _)}),tt=Y.isFirefox,V=Y.isMS,W=Y.isWebKit,P=Y.win,S=X.css,Z=X.defined,k=X.extend,b=X.pick,m=X.pInt;return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}return z(c,a),c.compose=function(u){if(-1===c.composedClasses.indexOf(u)){c.composedClasses.push(u);var _=c.prototype,D=u.prototype;D.getSpanCorrection=_.getSpanCorrection,D.htmlCss=_.htmlCss,D.htmlGetBBox=_.htmlGetBBox,D.htmlUpdateTransform=_.htmlUpdateTransform,D.setSpanRotation=_.setSpanRotation}return u},c.prototype.getSpanCorrection=function(u,_,D){this.xCorr=-u*D,this.yCorr=-_},c.prototype.htmlCss=function(u){var _="SPAN"===this.element.tagName&&u&&"width"in u,D=b(_&&u.width,void 0);if(_){delete u.width,this.textWidth=D;var t=!0}return u&&"ellipsis"===u.textOverflow&&(u.whiteSpace="nowrap",u.overflow="hidden"),this.styles=k(this.styles,u),S(this.element,u),t&&this.htmlUpdateTransform(),this},c.prototype.htmlGetBBox=function(){var u=this.element;return{x:u.offsetLeft,y:u.offsetTop,width:u.offsetWidth,height:u.offsetHeight}},c.prototype.htmlUpdateTransform=function(){if(this.added){var u=this.renderer,_=this.element,D=this.translateX||0,t=this.translateY||0,B=this.x||0,M=this.y||0,x=this.textAlign||"left",w={left:0,center:.5,right:1}[x],h=this.styles;if(h=h&&h.whiteSpace,S(_,{marginLeft:D,marginTop:t}),!u.styledMode&&this.shadows&&this.shadows.forEach(function(d){S(d,{marginLeft:D+1,marginTop:t+1})}),this.inverted&&[].forEach.call(_.childNodes,function(d){u.invertChild(d,_)}),"SPAN"===_.tagName){var l=this.rotation,o=this.textWidth&&m(this.textWidth),y=[l,x,_.innerHTML,this.textWidth,this.textAlign].join(),s=void 0;if(s=!1,o!==this.oldTextWidth){if(this.textPxLength)var r=this.textPxLength;else S(_,{width:"",whiteSpace:h||"nowrap"}),r=_.offsetWidth;(o>this.oldTextWidth||r>o)&&(/[ \-]/.test(_.textContent||_.innerText)||"ellipsis"===_.style.textOverflow)&&(S(_,{width:r>o||l?o+"px":"auto",display:"block",whiteSpace:h||"normal"}),this.oldTextWidth=o,s=!0)}this.hasBoxWidthChanged=s,y!==this.cTT&&(s=u.fontMetrics(_.style.fontSize,_).b,!Z(l)||l===(this.oldRotation||0)&&x===this.oldAlign||this.setSpanRotation(l,w,s),this.getSpanCorrection(!Z(l)&&this.textPxLength||_.offsetWidth,s,w,l,x)),S(_,{left:B+(this.xCorr||0)+"px",top:M+(this.yCorr||0)+"px"}),this.cTT=y,this.oldRotation=l,this.oldAlign=x}}else this.alignOnAdd=!0},c.prototype.setSpanRotation=function(u,_,D){var t={},B=V&&!/Edge/.test(P.navigator.userAgent)?"-ms-transform":W?"-webkit-transform":tt?"MozTransform":P.opera?"-o-transform":void 0;B&&(t[B]=t.transform="rotate("+u+"deg)",t[B+(tt?"Origin":"-origin")]=t.transformOrigin=100*_+"% "+D+"px",S(this.element,t))},c.composedClasses=[],c}(H)}),j(ot,"Core/Renderer/HTML/HTMLRenderer.js",[ot["Core/Renderer/HTML/AST.js"],ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Renderer/SVG/SVGRenderer.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var Z,tt=this&&this.__extends||(Z=function(k,b){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a}||function(m,a){for(var c in a)a.hasOwnProperty(c)&&(m[c]=a[c])})(k,b)},function(k,b){function m(){this.constructor=k}Z(k,b),k.prototype=null===b?Object.create(b):(m.prototype=b.prototype,new m)}),V=z.attr,W=z.createElement,P=z.extend,S=z.pick;return function(Z){function k(){return null!==Z&&Z.apply(this,arguments)||this}return tt(k,Z),k.compose=function(b){return-1===k.composedClasses.indexOf(b)&&(k.composedClasses.push(b),b.prototype.html=k.prototype.html),b},k.prototype.html=function(b,m,a){var c=this.createElement("span"),u=c.element,_=c.renderer,D=_.isSVG,t=function(B,M){["opacity","visibility"].forEach(function(x){B[x+"Setter"]=function(w,h,l){var o=B.div?B.div.style:M;H.prototype[x+"Setter"].call(this,w,h,l),o&&(o[h]=w)}}),B.addedSetters=!0};return c.textSetter=function(B){B!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,Y.setElementHTML(this.element,S(B,"")),this.textStr=B,c.doTransform=!0)},D&&t(c,c.element.style),c.xSetter=c.ySetter=c.alignSetter=c.rotationSetter=function(B,M){"align"===M?c.alignValue=c.textAlign=B:c[M]=B,c.doTransform=!0},c.afterSetters=function(){this.doTransform&&(this.htmlUpdateTransform(),this.doTransform=!1)},c.attr({text:b,x:Math.round(m),y:Math.round(a)}).css({position:"absolute"}),_.styledMode||c.css({fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),u.style.whiteSpace="nowrap",c.css=c.htmlCss,D&&(c.add=function(B){var M=_.box.parentNode,x=[];if(this.parentGroup=B){var w=B.div;if(!w){for(;B;)x.push(B),B=B.parentGroup;x.reverse().forEach(function(h){function l(r,d){h[d]=r,"translateX"===d?s.left=r+"px":s.top=r+"px",h.doTransform=!0}var r,o=V(h.element,"class"),y=h.styles||{},s=(w=h.div=h.div||W("div",o?{className:o}:void 0,{position:"absolute",left:(h.translateX||0)+"px",top:(h.translateY||0)+"px",display:h.display,opacity:h.opacity,cursor:y.cursor,pointerEvents:y.pointerEvents,visibility:h.visibility},w||M)).style;P(h,{classSetter:(r=w,function(d){this.element.setAttribute("class",d),r.className=d}),on:function(){return x[0].div&&c.on.apply({element:x[0].div,onEvents:h.onEvents},arguments),h},translateXSetter:l,translateYSetter:l}),h.addedSetters||t(h)})}}else w=M;return w.appendChild(u),c.added=!0,c.alignOnAdd&&c.htmlUpdateTransform(),c}),c},k.composedClasses=[],k}(X)}),j(ot,"Core/Axis/AxisDefaults.js",[],function(){var Y=(()=>{return(H=Y||(Y={})).defaultXAxisOptions={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%H:%M:%S.%L",range:!1},second:{main:"%H:%M:%S",range:!1},minute:{main:"%H:%M",range:!1},hour:{main:"%H:%M",range:!1},day:{main:"%e. %b"},week:{main:"%e. %b"},month:{main:"%b '%y"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotation:void 0,autoRotationLimit:80,distance:void 0,enabled:!0,indentation:10,overflow:"justify",padding:5,reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,x:0,zIndex:7,style:{color:"#666666",cursor:"default",fontSize:"11px"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minPadding:.01,offset:void 0,opposite:!1,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",rotation:0,useHTML:!1,x:0,y:0,style:{color:"#666666"}},type:"linear",uniqueNames:!0,visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#ccd6eb",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#ccd6eb"},H.defaultYAxisOptions={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8},startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){return(0,this.axis.chart.numberFormatter)(this.total||0,-1)},style:{color:"#000000",fontSize:"11px",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0},H.defaultLeftAxisOptions={labels:{x:-15},title:{rotation:270}},H.defaultRightAxisOptions={labels:{x:15},title:{rotation:90}},H.defaultBottomAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},H.defaultTopAxisOptions={labels:{autoRotation:[-45],x:0},margin:15,title:{rotation:0}},Y;var H})();return Y}),j(ot,"Core/Foundation.js",[ot["Core/Utilities.js"]],function(Y){var V,H=Y.addEvent,X=Y.isFunction,z=Y.objectEach,tt=Y.removeEvent;return(V||(V={})).registerEventOptions=function(P,S){P.eventOptions=P.eventOptions||{},z(S.events,function(Z,k){P.eventOptions[k]!==Z&&(P.eventOptions[k]&&(tt(P,k,P.eventOptions[k]),delete P.eventOptions[k]),X(Z)&&(P.eventOptions[k]=Z,H(P,k,Z)))})},V}),j(ot,"Core/Axis/Tick.js",[ot["Core/FormatUtilities.js"],ot["Core/Globals.js"],ot["Core/Utilities.js"]],function(Y,H,X){var z=H.deg2rad,tt=X.clamp,V=X.correctFloat,W=X.defined,P=X.destroyObjectProperties,S=X.extend,Z=X.fireEvent,k=X.isNumber,b=X.merge,m=X.objectEach,a=X.pick;return function(){function c(u,_,D,t,B){this.isNewLabel=this.isNew=!0,this.axis=u,this.pos=_,this.type=D||"",this.parameters=B||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,Z(this,"init"),D||t||this.addLabel()}return c.prototype.addLabel=function(){var u=this,_=u.axis,D=_.options,t=_.chart,B=_.categories,M=_.logarithmic,x=_.names,w=u.pos,h=a(u.options&&u.options.labels,D.labels),l=_.tickPositions,o=w===l[0],y=w===l[l.length-1],s=(!h.step||1===h.step)&&1===_.tickInterval;l=l.info;var d,r=u.label;if(B=this.parameters.category||(B?a(B[w],x[w],w):w),M&&k(B)&&(B=V(M.lin2log(B))),_.dateTime)if(l)var p=t.time.resolveDTLFormat(D.dateTimeLabelFormats[!D.grid&&l.higherRanks[w]||l.unitName]),T=p.main;else k(B)&&(T=_.dateTime.getXDateFormat(B,D.dateTimeLabelFormats||{}));u.isFirst=o,u.isLast=y;var U={axis:_,chart:t,dateTimeLabelFormat:T,isFirst:o,isLast:y,pos:w,tick:u,tickPositionInfo:l,value:B};Z(this,"labelFormat",U);var G=function(v){return h.formatter?h.formatter.call(v,v):h.format?(v.text=_.defaultLabelFormatter.call(v,v),Y.format(h.format,v,t)):_.defaultLabelFormatter.call(v,v)};D=G.call(U,U);var O=p&&p.list;u.shortenLabel=O?function(){for(d=0;d<O.length;d++)if(S(U,{dateTimeLabelFormat:O[d]}),r.attr({text:G.call(U,U)}),r.getBBox().width<_.getSlotWidth(u)-2*h.padding)return;r.attr({text:""})}:void 0,s&&_._addedPlotLB&&u.moveLabel(D,h),W(r)||u.movedLabel?r&&r.textStr!==D&&!s&&(!r.textWidth||h.style.width||r.styles.width||r.css({width:null}),r.attr({text:D}),r.textPxLength=r.getBBox().width):(u.label=r=u.createLabel({x:0,y:0},D,h),u.rotation=0)},c.prototype.createLabel=function(u,_,D){var t=this.axis,B=t.chart;return(u=W(_)&&D.enabled?B.renderer.text(_,u.x,u.y,D.useHTML).add(t.labelGroup):null)&&(B.styledMode||u.css(b(D.style)),u.textPxLength=u.getBBox().width),u},c.prototype.destroy=function(){P(this,this.axis)},c.prototype.getPosition=function(u,_,D,t){var B=this.axis,M=B.chart,x=t&&M.oldChartHeight||M.chartHeight;return(u={x:u?V(B.translate(_+D,void 0,void 0,t)+B.transB):B.left+B.offset+(B.opposite?(t&&M.oldChartWidth||M.chartWidth)-B.right-B.left:0),y:u?x-B.bottom+B.offset-(B.opposite?B.height:0):V(x-B.translate(_+D,void 0,void 0,t)-B.transB)}).y=tt(u.y,-1e5,1e5),Z(this,"afterGetPosition",{pos:u}),u},c.prototype.getLabelPosition=function(u,_,D,t,B,M,x,w){var h=this.axis,l=h.transA,o=h.isLinked&&h.linkedParent?h.linkedParent.reversed:h.reversed,y=h.staggerLines,s=h.tickRotCorr||{x:0,y:0},r=t||h.reserveSpaceDefault?0:-h.labelOffset*("center"===h.labelAlign?.5:1),d={};return D=0===h.side?D.rotation?-8:-D.getBBox().height:2===h.side?s.y+8:Math.cos(D.rotation*z)*(s.y-D.getBBox(!1,0).height/2),W(B.y)&&(D=0===h.side&&h.horiz?B.y+D:B.y),u=u+B.x+r+s.x-(M&&t?M*l*(o?-1:1):0),_=_+D-(M&&!t?M*l*(o?1:-1):0),y&&(t=x/(w||1)%y,h.opposite&&(t=y-t-1),_+=h.labelOffset/y*t),d.x=u,d.y=Math.round(_),Z(this,"afterGetLabelPosition",{pos:d,tickmarkOffset:M,index:x}),d},c.prototype.getLabelSize=function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},c.prototype.getMarkPath=function(u,_,D,t,B,M){return M.crispLine([["M",u,_],["L",u+(B?0:-D),_+(B?D:0)]],t)},c.prototype.handleOverflow=function(u){var _=this.axis,D=_.options.labels,t=u.x,B=_.chart.chartWidth,M=_.chart.spacing,x=a(_.labelLeft,Math.min(_.pos,M[3]));M=a(_.labelRight,Math.max(_.isRadial?0:_.pos+_.len,B-M[1]));var p,w=this.label,h=this.rotation,l={left:0,center:.5,right:1}[_.labelAlign||w.attr("align")],o=w.getBBox().width,y=_.getSlotWidth(this),s={},r=y,d=1;h||"justify"!==D.overflow?0>h&&t-l*o<x?p=Math.round(t/Math.cos(h*z)-x):0<h&&t+l*o>M&&(p=Math.round((B-t)/Math.cos(h*z))):(B=t+(1-l)*o,t-l*o<x?r=u.x+r*(1-l)-x:B>M&&(r=M-u.x+r*l,d=-1),(r=Math.min(y,r))<y&&"center"===_.labelAlign&&(u.x+=d*(y-r-l*(y-Math.min(o,r)))),(o>r||_.autoRotation&&(w.styles||{}).width)&&(p=r)),p&&(this.shortenLabel?this.shortenLabel():(s.width=Math.floor(p)+"px",(D.style||{}).textOverflow||(s.textOverflow="ellipsis"),w.css(s)))},c.prototype.moveLabel=function(u,_){var D=this,t=D.label,B=D.axis,M=B.reversed,x=!1;if(t&&t.textStr===u?(D.movedLabel=t,x=!0,delete D.label):m(B.ticks,function(h){x||h.isNew||h===D||!h.label||h.label.textStr!==u||(D.movedLabel=h.label,x=!0,h.labelPos=D.movedLabel.xy,delete h.label)}),!x&&(D.labelPos||t)){var w=D.labelPos||t.xy;D.movedLabel=D.createLabel({x:t=B.horiz?M?0:B.width+B.left:w.x,y:B=B.horiz?w.y:M?B.width+B.left:0},u,_),D.movedLabel&&D.movedLabel.attr({opacity:0})}},c.prototype.render=function(u,_,D){var t=this.axis,B=t.horiz,M=this.pos,x=a(this.tickmarkOffset,t.tickmarkOffset);x=(M=this.getPosition(B,M,x,_)).x,t=B&&x===t.pos+t.len||!B&&M.y===t.pos?-1:1,B=a(D,this.label&&this.label.newOpacity,1),D=a(D,1),this.isActive=!0,this.renderGridLine(_,D,t),this.renderMark(M,D,t),this.renderLabel(M,_,B,u),this.isNew=!1,Z(this,"afterRender")},c.prototype.renderGridLine=function(u,_,D){var t=this.axis,B=t.options,M={},x=this.pos,w=this.type,h=a(this.tickmarkOffset,t.tickmarkOffset),l=t.chart.renderer,o=this.gridLine,y=B.gridLineWidth,s=B.gridLineColor,r=B.gridLineDashStyle;"minor"===this.type&&(y=B.minorGridLineWidth,s=B.minorGridLineColor,r=B.minorGridLineDashStyle),o||(t.chart.styledMode||(M.stroke=s,M["stroke-width"]=y||0,M.dashstyle=r),w||(M.zIndex=1),u&&(_=0),this.gridLine=o=l.path().attr(M).addClass("highcharts-"+(w?w+"-":"")+"grid-line").add(t.gridGroup)),o&&(D=t.getPlotLinePath({value:x+h,lineWidth:o.strokeWidth()*D,force:"pass",old:u,acrossPanes:!1}))&&o[u||this.isNew?"attr":"animate"]({d:D,opacity:_})},c.prototype.renderMark=function(u,_,D){var t=this.axis,B=t.options,M=t.chart.renderer,x=this.type,w=t.tickSize(x?x+"Tick":"tick"),h=u.x;u=u.y;var l=a(B["minor"!==x?"tickWidth":"minorTickWidth"],!x&&t.isXAxis?1:0);B=B["minor"!==x?"tickColor":"minorTickColor"];var o=this.mark,y=!o;w&&(t.opposite&&(w[0]=-w[0]),o||(this.mark=o=M.path().addClass("highcharts-"+(x?x+"-":"")+"tick").add(t.axisGroup),t.chart.styledMode||o.attr({stroke:B,"stroke-width":l})),o[y?"attr":"animate"]({d:this.getMarkPath(h,u,w[0],o.strokeWidth()*D,t.horiz,M),opacity:_}))},c.prototype.renderLabel=function(u,_,D,t){var B=this.axis,M=B.horiz,x=B.options,w=this.label,h=x.labels,l=h.step;B=a(this.tickmarkOffset,B.tickmarkOffset);var o=u.x;u=u.y;var y=!0;w&&k(o)&&(w.xy=u=this.getLabelPosition(o,u,w,M,h,B,t,l),this.isFirst&&!this.isLast&&!x.showFirstLabel||this.isLast&&!this.isFirst&&!x.showLastLabel?y=!1:!M||h.step||h.rotation||_||0===D||this.handleOverflow(u),l&&t%l&&(y=!1),y&&k(u.y)?(u.opacity=D,w[this.isNewLabel?"attr":"animate"](u).show(!0),this.isNewLabel=!1):(w.hide(),this.isNewLabel=!0))},c.prototype.replaceMovedLabel=function(){var u=this.label,_=this.axis,D=_.reversed;u&&!this.isNew&&(u.animate({x:_.horiz?D?_.left:_.width+_.left:u.xy.x,y:D=_.horiz?u.xy.y:D?_.width+_.top:_.top,opacity:0},void 0,u.destroy),delete this.label),_.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel},c}()}),j(ot,"Core/Axis/Axis.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Axis/AxisDefaults.js"],ot["Core/Color/Color.js"],ot["Core/Defaults.js"],ot["Core/Foundation.js"],ot["Core/Globals.js"],ot["Core/Axis/Tick.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P){var S=Y.animObject,Z=z.defaultOptions,k=tt.registerEventOptions,b=V.deg2rad,m=P.arrayMax,a=P.arrayMin,c=P.clamp,u=P.correctFloat,_=P.defined,D=P.destroyObjectProperties,t=P.erase,B=P.error,M=P.extend,x=P.fireEvent,w=P.isArray,h=P.isNumber,l=P.isString,o=P.merge,y=P.normalizeTickInterval,s=P.objectEach,r=P.pick,d=P.relativeLength,p=P.removeEvent,T=P.splat,U=P.syncTimeout,G=function(O,v){return y(v,void 0,void 0,r(O.options.allowDecimals,.5>v||void 0!==O.tickAmount),!!O.tickAmount)};return function(){function O(v,C){this.zoomEnabled=this.width=this.visible=this.userOptions=this.translationSlope=this.transB=this.transA=this.top=this.ticks=this.tickRotCorr=this.tickPositions=this.tickmarkOffset=this.tickInterval=this.tickAmount=this.side=this.series=this.right=this.positiveValuesOnly=this.pos=this.pointRangePadding=this.pointRange=this.plotLinesAndBandsGroups=this.plotLinesAndBands=this.paddedTicks=this.overlap=this.options=this.offset=this.names=this.minPixelPadding=this.minorTicks=this.minorTickInterval=this.min=this.maxLabelLength=this.max=this.len=this.left=this.labelFormatter=this.labelEdge=this.isLinked=this.height=this.hasVisibleSeries=this.hasNames=this.eventOptions=this.coll=this.closestPointRange=this.chart=this.bottom=this.alternateBands=void 0,this.init(v,C)}return O.prototype.init=function(v,C){var q=C.isX;this.chart=v,this.horiz=v.inverted&&!this.isZAxis?!q:q,this.isXAxis=q,this.coll=this.coll||(q?"xAxis":"yAxis"),x(this,"init",{userOptions:C}),this.opposite=r(C.opposite,this.opposite),this.side=r(C.side,this.side,this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(C);var J=this.options,R=J.labels,A=J.type;this.userOptions=C,this.minPixelPadding=0,this.reversed=r(J.reversed,this.reversed),this.visible=J.visible,this.zoomEnabled=J.zoomEnabled,this.hasNames="category"===A||!0===J.categories,this.categories=J.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=_(J.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=J.minRange||J.maxZoom,this.range=J.range,this.offset=J.offset||0,this.min=this.max=null,C=r(J.crosshair,T(v.options.tooltip.crosshairs)[q?0:1]),this.crosshair=!0===C?{}:C,-1===v.axes.indexOf(this)&&(q?v.axes.splice(v.xAxis.length,0,this):v.axes.push(this),v[this.coll].push(this)),this.series=this.series||[],v.inverted&&!this.isZAxis&&q&&typeof this.reversed>"u"&&(this.reversed=!0),this.labelRotation=h(R.rotation)?R.rotation:void 0,k(this,J),x(this,"afterInit")},O.prototype.setOptions=function(v){this.options=o(H.defaultXAxisOptions,"yAxis"===this.coll&&H.defaultYAxisOptions,[H.defaultTopAxisOptions,H.defaultRightAxisOptions,H.defaultBottomAxisOptions,H.defaultLeftAxisOptions][this.side],o(Z[this.coll],v)),x(this,"afterSetOptions",{userOptions:v})},O.prototype.defaultLabelFormatter=function(v){var C=this.axis;v=this.chart.numberFormatter;var q=h(this.value)?this.value:NaN,J=C.chart.time,R=this.dateTimeLabelFormat,A=Z.lang,N=A.numericSymbols;A=A.numericSymbolMagnitude||1e3;var E=C.logarithmic?Math.abs(q):C.tickInterval,K=N&&N.length;if(C.categories)var Q="".concat(this.value);else if(R)Q=J.dateFormat(R,q);else if(K&&1e3<=E)for(;K--&&typeof Q>"u";)E>=(C=Math.pow(A,K+1))&&10*q%C==0&&null!==N[K]&&0!==q&&(Q=v(q/C,-1)+N[K]);return typeof Q>"u"&&(Q=1e4<=Math.abs(q)?v(q,-1):v(q,-1,void 0,"")),Q},O.prototype.getSeriesExtremes=function(){var q,v=this,C=v.chart;x(this,"getSeriesExtremes",null,function(){v.hasVisibleSeries=!1,v.dataMin=v.dataMax=v.threshold=null,v.softThreshold=!v.isXAxis,v.series.forEach(function(J){if(J.visible||!C.options.chart.ignoreHiddenSeries){var R=J.options,A=R.threshold;if(v.hasVisibleSeries=!0,v.positiveValuesOnly&&0>=A&&(A=null),v.isXAxis){if((R=J.xData).length){R=v.logarithmic?R.filter(v.validatePositiveValue):R;var N=(q=J.getXExtremes(R)).min,E=q.max;h(N)||N instanceof Date||(R=R.filter(h),N=(q=J.getXExtremes(R)).min,E=q.max),R.length&&(v.dataMin=Math.min(r(v.dataMin,N),N),v.dataMax=Math.max(r(v.dataMax,E),E))}}else J=J.applyExtremes(),h(J.dataMin)&&(N=J.dataMin,v.dataMin=Math.min(r(v.dataMin,N),N)),h(J.dataMax)&&(E=J.dataMax,v.dataMax=Math.max(r(v.dataMax,E),E)),_(A)&&(v.threshold=A),(!R.softThreshold||v.positiveValuesOnly)&&(v.softThreshold=!1)}})}),x(this,"afterGetSeriesExtremes")},O.prototype.translate=function(v,C,q,J,R,A){var N=this.linkedParent||this,E=J&&N.old?N.old.min:N.min;if(!h(E))return NaN;var K=N.minPixelPadding;R=(N.isOrdinal||N.brokenAxis&&N.brokenAxis.hasBreaks||N.logarithmic&&R)&&N.lin2val;var Q=1,et=0;return(J=J&&N.old?N.old.transA:N.transA)||(J=N.transA),q&&(Q*=-1,et=N.len),N.reversed&&(et-=(Q*=-1)*(N.sector||N.len)),C?(A=(v*Q+et-K)/J+E,R&&(A=N.lin2val(A))):(R&&(v=N.val2lin(v)),v=Q*(v-E)*J,A=(N.isRadial?v:u(v))+et+Q*K+(h(A)?J*A:0)),A},O.prototype.toPixels=function(v,C){return this.translate(v,!1,!this.horiz,void 0,!0)+(C?0:this.pos)},O.prototype.toValue=function(v,C){return this.translate(v-(C?0:this.pos),!0,!this.horiz,void 0,!0)},O.prototype.getPlotLinePath=function(v){function C(pt,it,nt){return"pass"!==lt&&(pt<it||pt>nt)&&(lt?pt=c(pt,it,nt):bt=!0),pt}var ft,vt,gt,ht,bt,q=this,J=q.chart,R=q.left,A=q.top,N=v.old,E=v.value,K=v.lineWidth,Q=N&&J.oldChartHeight||J.chartHeight,et=N&&J.oldChartWidth||J.chartWidth,rt=q.transB,at=v.translatedValue,lt=v.force;return x(this,"getPlotLinePath",v={value:E,lineWidth:K,old:N,force:lt,acrossPanes:v.acrossPanes,translatedValue:at},function(pt){at=r(at,q.translate(E,void 0,void 0,N)),at=c(at,-1e5,1e5),ft=gt=Math.round(at+rt),vt=ht=Math.round(Q-at-rt),h(at)?q.horiz?(vt=A,ht=Q-q.bottom,ft=gt=C(ft,R,R+q.width)):(ft=R,gt=et-q.right,vt=ht=C(vt,A,A+q.height)):(bt=!0,lt=!1),pt.path=bt&&!lt?null:J.renderer.crispLine([["M",ft,vt],["L",gt,ht]],K||1)}),v.path},O.prototype.getLinearTickPositions=function(v,C,q){var J=u(Math.floor(C/v)*v);q=u(Math.ceil(q/v)*v);var A,R=[];if(u(J+v)===J&&(A=20),this.single)return[C];for(C=J;C<=q&&(R.push(C),(C=u(C+v,A))!==N);)var N=C;return R},O.prototype.getMinorTickInterval=function(){var v=this.options;return!0===v.minorTicks?r(v.minorTickInterval,"auto"):!1===v.minorTicks?null:v.minorTickInterval},O.prototype.getMinorTickPositions=function(){var v=this.options,C=this.tickPositions,q=this.minorTickInterval,J=this.pointRangePadding||0,R=this.min-J,A=(J=this.max+J)-R,N=[];if(A&&A/q<this.len/3){var E=this.logarithmic;if(E)this.paddedTicks.forEach(function(K,Q,et){Q&&N.push.apply(N,E.getLogTickPositions(q,et[Q-1],et[Q],!0))});else if(this.dateTime&&"auto"===this.getMinorTickInterval())N=N.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(q),R,J,v.startOfWeek));else for(v=R+(C[0]-R)%q;v<=J&&v!==N[0];v+=q)N.push(v)}return 0!==N.length&&this.trimTicks(N),N},O.prototype.adjustForMinRange=function(){var A,N,E,K,v=this.options,C=this.logarithmic,q=this.min,J=this.max,R=0;if(this.isXAxis&&typeof this.minRange>"u"&&!C&&(_(v.min)||_(v.max)||_(v.floor)||_(v.ceiling)?this.minRange=null:(this.series.forEach(function(at){if(E=at.xData,K=at.xIncrement?1:E.length-1,1<E.length)for(A=K;0<A;A--)N=E[A]-E[A-1],(!R||N<R)&&(R=N)}),this.minRange=Math.min(5*R,this.dataMax-this.dataMin))),J-q<this.minRange){var Q=this.dataMax-this.dataMin>=this.minRange,et=this.minRange,rt=(et-J+q)/2;rt=[q-rt,r(v.min,q-rt)],Q&&(rt[2]=this.logarithmic?this.logarithmic.log2lin(this.dataMin):this.dataMin),J=[(q=m(rt))+et,r(v.max,q+et)],Q&&(J[2]=C?C.log2lin(this.dataMax):this.dataMax),(J=a(J))-q<et&&(rt[0]=J-et,rt[1]=r(v.min,J-et),q=m(rt))}this.min=q,this.max=J},O.prototype.getClosest=function(){var v;return this.categories?v=1:this.series.forEach(function(C){var q=C.closestPointRange,J=C.visible||!C.chart.options.chart.ignoreHiddenSeries;!C.noSharedTooltip&&_(q)&&J&&(v=_(v)?Math.min(v,q):q)}),v},O.prototype.nameToX=function(v){var C=w(this.options.categories),q=C?this.categories:this.names,J=v.options.x;if(v.series.requireSorting=!1,_(J)||(J=this.options.uniqueNames&&q?C?q.indexOf(v.name):r(q.keys[v.name],-1):v.series.autoIncrement()),-1===J){if(!C&&q)var R=q.length}else R=J;return typeof R<"u"?(this.names[R]=v.name,this.names.keys[v.name]=R):v.x&&(R=v.x),R},O.prototype.updateNames=function(){var v=this,C=this.names;0<C.length&&(Object.keys(C.keys).forEach(function(q){delete C.keys[q]}),C.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach(function(q){q.xIncrement=null,(!q.points||q.isDirtyData)&&(v.max=Math.max(v.max,q.xData.length-1),q.processData(),q.generatePoints()),q.data.forEach(function(J,R){if(J&&J.options&&typeof J.name<"u"){var A=v.nameToX(J);typeof A<"u"&&A!==J.x&&(J.x=A,q.xData[R]=A)}})}))},O.prototype.setAxisTranslation=function(){var K,v=this,C=v.max-v.min,q=v.linkedParent,J=!!v.categories,R=v.isXAxis,A=v.axisPointRange||0,N=0,E=0;if(R||J||A){var Q=v.getClosest();q?(N=q.minPointOffset,E=q.pointRangePadding):v.series.forEach(function(et){var rt=J?1:R?r(et.options.pointRange,Q,0):v.axisPointRange||0,at=et.options.pointPlacement;A=Math.max(A,rt),(!v.single||J)&&(et=et.is("xrange")?!R:R,N=Math.max(N,et&&l(at)?0:rt/2),E=Math.max(E,et&&"on"===at?0:rt))}),v.minPointOffset=N*=q=v.ordinal&&v.ordinal.slope&&Q?v.ordinal.slope/Q:1,v.pointRangePadding=E*=q,v.pointRange=Math.min(A,v.single&&J?1:C),R&&(v.closestPointRange=Q)}v.translationSlope=v.transA=K=v.staticScale||v.len/(C+E||1),v.transB=v.horiz?v.left:v.bottom,v.minPixelPadding=K*N,x(this,"afterSetAxisTranslation")},O.prototype.minFromRange=function(){return this.max-this.range},O.prototype.setTickInterval=function(v){var C=this.chart,q=this.logarithmic,J=this.options,R=this.isXAxis,A=this.isLinked,N=J.tickPixelInterval,E=this.categories,K=this.softThreshold,Q=J.maxPadding,et=J.minPadding,rt=h(J.tickInterval)&&0<=J.tickInterval?J.tickInterval:void 0,at=h(this.threshold)?this.threshold:null;this.dateTime||E||A||this.getTickAmount();var lt=r(this.userMin,J.min),ft=r(this.userMax,J.max);if(A){this.linkedParent=C[this.coll][J.linkedTo];var vt=this.linkedParent.getExtremes();this.min=r(vt.min,vt.dataMin),this.max=r(vt.max,vt.dataMax),J.type!==this.linkedParent.options.type&&B(11,1,C)}else{if(K&&_(at))if(this.dataMin>=at)vt=at,et=0;else if(this.dataMax<=at){var gt=at;Q=0}this.min=r(lt,vt,this.dataMin),this.max=r(ft,gt,this.dataMax)}if(q&&(this.positiveValuesOnly&&!v&&0>=Math.min(this.min,r(this.dataMin,this.min))&&B(10,1,C),this.min=u(q.log2lin(this.min),16),this.max=u(q.log2lin(this.max),16)),this.range&&_(this.max)&&(this.userMin=this.min=lt=Math.max(this.dataMin,this.minFromRange()),this.userMax=ft=this.max,this.range=null),x(this,"foundExtremes"),this.beforePadding&&this.beforePadding(),this.adjustForMinRange(),!(E||this.axisPointRange||this.stacking&&this.stacking.usePercentage||A)&&_(this.min)&&_(this.max)&&(C=this.max-this.min)&&(!_(lt)&&et&&(this.min-=C*et),!_(ft)&&Q&&(this.max+=C*Q)),h(this.userMin)||(h(J.softMin)&&J.softMin<this.min&&(this.min=lt=J.softMin),h(J.floor)&&(this.min=Math.max(this.min,J.floor))),h(this.userMax)||(h(J.softMax)&&J.softMax>this.max&&(this.max=ft=J.softMax),h(J.ceiling)&&(this.max=Math.min(this.max,J.ceiling))),K&&_(this.dataMin)&&(at=at||0,!_(lt)&&this.min<at&&this.dataMin>=at?this.min=this.options.minRange?Math.min(at,this.max-this.minRange):at:!_(ft)&&this.max>at&&this.dataMax<=at&&(this.max=this.options.minRange?Math.max(at,this.min+this.minRange):at)),h(this.min)&&h(this.max)&&!this.chart.polar&&this.min>this.max&&(_(this.options.min)?this.max=this.min:_(this.options.max)&&(this.min=this.max)),this.tickInterval=this.min===this.max||typeof this.min>"u"||typeof this.max>"u"?1:A&&this.linkedParent&&!rt&&N===this.linkedParent.options.tickPixelInterval?rt=this.linkedParent.tickInterval:r(rt,this.tickAmount?(this.max-this.min)/Math.max(this.tickAmount-1,1):void 0,E?1:(this.max-this.min)*N/Math.max(this.len,N)),R&&!v){var ht=this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max);this.series.forEach(function(bt){bt.forceCrop=bt.forceCropping&&bt.forceCropping(),bt.processData(ht)}),x(this,"postProcessData",{hasExtremesChanged:ht})}this.setAxisTranslation(),x(this,"initialAxisTranslation"),this.pointRange&&!rt&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval)),v=r(J.minTickInterval,this.dateTime&&!this.series.some(function(bt){return bt.noSharedTooltip})?this.closestPointRange:0),!rt&&this.tickInterval<v&&(this.tickInterval=v),this.dateTime||this.logarithmic||rt||(this.tickInterval=G(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()},O.prototype.setTickPositions=function(){var E,v=this.options,C=v.tickPositions,q=v.tickPositioner,J=this.getMinorTickInterval(),R=this.hasVerticalPanning(),A="colorAxis"===this.coll,N=(A||!R)&&v.startOnTick;if(R=(A||!R)&&v.endOnTick,A=[],this.tickmarkOffset=this.categories&&"between"===v.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===J&&this.tickInterval?this.tickInterval/5:J,this.single=this.min===this.max&&_(this.min)&&!this.tickAmount&&(parseInt(this.min,10)===this.min||!1!==v.allowDecimals),C)A=C.slice();else if(h(this.min)&&h(this.max)){if(this.ordinal&&this.ordinal.positions||!((this.max-this.min)/this.tickInterval>Math.max(2*this.len,200)))if(this.dateTime)A=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,v.units),this.min,this.max,v.startOfWeek,this.ordinal&&this.ordinal.positions,this.closestPointRange,!0);else if(this.logarithmic)A=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else for(J=v=this.tickInterval;J<=2*v&&(A=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&A.length>this.tickAmount);)this.tickInterval=G(this,J*=1.1);else A=[this.min,this.max],B(19,!1,this.chart);A.length>this.len&&(A=[A[0],A[A.length-1]])[0]===A[1]&&(A.length=1),q&&(this.tickPositions=A,(E=q.apply(this,[this.min,this.max]))&&(A=E))}this.tickPositions=A,this.paddedTicks=A.slice(0),this.trimTicks(A,N,R),!this.isLinked&&h(this.min)&&h(this.max)&&(this.single&&2>A.length&&!this.categories&&!this.series.some(function(K){return K.is("heatmap")&&"between"===K.options.pointPlacement})&&(this.min-=.5,this.max+=.5),C||E||this.adjustTickAmount()),x(this,"afterSetTickPositions")},O.prototype.trimTicks=function(v,C,q){var J=v[0],R=v[v.length-1],A=!this.isOrdinal&&this.minPointOffset||0;if(x(this,"trimTicks"),!this.isLinked){if(C&&J!==-1/0)this.min=J;else for(;this.min-A>v[0];)v.shift();if(q)this.max=R;else for(;this.max+A<v[v.length-1];)v.pop();0===v.length&&_(J)&&!this.options.tickPositions&&v.push((R+J)/2)}},O.prototype.alignToOthers=function(){var A,v=this,C=[this],q=v.options,J="yAxis"===this.coll&&this.chart.options.chart.alignThresholds,R=[];if(v.thresholdAlignment=void 0,(!1!==this.chart.options.chart.alignTicks&&q.alignTicks||J)&&!1!==q.startOnTick&&!1!==q.endOnTick&&!v.logarithmic){var N=function(Q){var et=Q.options;return[Q.horiz?et.left:et.top,et.width,et.height,et.pane].join()},E=N(this);this.chart[this.coll].forEach(function(Q){var et=Q.series;et.length&&et.some(function(rt){return rt.visible})&&Q!==v&&N(Q)===E&&(A=!0,C.push(Q))})}if(A&&J){C.forEach(function(Q){Q=Q.getThresholdAlignment(v),h(Q)&&R.push(Q)});var K=1<R.length?R.reduce(function(Q,et){return Q+et},0)/R.length:void 0;C.forEach(function(Q){Q.thresholdAlignment=K})}return A},O.prototype.getThresholdAlignment=function(v){if((!h(this.dataMin)||this!==v&&this.series.some(function(C){return C.isDirty||C.isDirtyData}))&&this.getSeriesExtremes(),h(this.threshold))return v=c((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1),this.options.reversed&&(v=1-v),v},O.prototype.getTickAmount=function(){var v=this.options,C=v.tickPixelInterval,q=v.tickAmount;!_(v.tickInterval)&&!q&&this.len<C&&!this.isRadial&&!this.logarithmic&&v.startOnTick&&v.endOnTick&&(q=2),!q&&this.alignToOthers()&&(q=Math.ceil(this.len/C)+1),4>q&&(this.finalTickAmt=q,q=5),this.tickAmount=q},O.prototype.adjustTickAmount=function(){var v=this,C=v.finalTickAmt,q=v.max,J=v.min,R=v.options,A=v.tickPositions,N=v.tickAmount,E=v.thresholdAlignment,K=A&&A.length,Q=r(v.threshold,v.softThreshold?0:null),et=v.tickInterval;if(h(E)){var rt=.5>E?Math.ceil(E*(N-1)):Math.floor(E*(N-1));R.reversed&&(rt=N-1-rt)}if(v.hasData()&&h(J)&&h(q)){if(E=function(){v.transA*=(K-1)/(N-1),v.min=R.startOnTick?A[0]:Math.min(J,A[0]),v.max=R.endOnTick?A[A.length-1]:Math.max(q,A[A.length-1])},h(rt)&&h(v.threshold)){for(;A[rt]!==Q||A.length!==N||A[0]>J||A[A.length-1]<q;){for(A.length=0,A.push(v.threshold);A.length<N;)void 0===A[rt]||A[rt]>v.threshold?A.unshift(u(A[0]-et)):A.push(u(A[A.length-1]+et));if(et>8*v.tickInterval)break;et*=2}E()}else if(K<N){for(;A.length<N;)A.length%2||J===Q?A.push(u(A[A.length-1]+et)):A.unshift(u(A[0]-et));E()}if(_(C)){for(et=Q=A.length;et--;)(3===C&&et%2==1||2>=C&&0<et&&et<Q-1)&&A.splice(et,1);v.finalTickAmt=void 0}}},O.prototype.setScale=function(){var v=!1,C=!1;this.series.forEach(function(J){v=v||J.isDirtyData||J.isDirty,C=C||J.xAxis&&J.xAxis.isDirty||!1}),this.setAxisSize();var q=this.len!==(this.old&&this.old.len);q||v||C||this.isLinked||this.forceRedraw||this.userMin!==(this.old&&this.old.userMin)||this.userMax!==(this.old&&this.old.userMax)||this.alignToOthers()?(this.stacking&&(this.stacking.resetStacks(),this.stacking.buildStacks()),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.isDirty||(this.isDirty=q||this.min!==(this.old&&this.old.min)||this.max!==(this.old&&this.old.max))):this.stacking&&this.stacking.cleanStacks(),v&&this.panningState&&(this.panningState.isDirty=!0),x(this,"afterSetScale")},O.prototype.setExtremes=function(v,C,q,J,R){var A=this,N=A.chart;q=r(q,!0),A.series.forEach(function(E){delete E.kdTree}),R=M(R,{min:v,max:C}),x(A,"setExtremes",R,function(){A.userMin=v,A.userMax=C,A.eventArgs=R,q&&N.redraw(J)})},O.prototype.zoom=function(v,C){var q=this,J=this.dataMin,R=this.dataMax,A=this.options,N=Math.min(J,r(A.min,J)),E=Math.max(R,r(A.max,R));return x(this,"zoom",v={newMin:v,newMax:C},function(K){var Q=K.newMin,et=K.newMax;(Q!==q.min||et!==q.max)&&(q.allowZoomOutside||(_(J)&&(Q<N&&(Q=N),Q>E&&(Q=E)),_(R)&&(et<N&&(et=N),et>E&&(et=E))),q.displayBtn=typeof Q<"u"||typeof et<"u",q.setExtremes(Q,et,!1,void 0,{trigger:"zoom"})),K.zoomed=!0}),v.zoomed},O.prototype.setAxisSize=function(){var v=this.chart,C=this.options,q=C.offsets||[0,0,0,0],J=this.horiz,R=this.width=Math.round(d(r(C.width,v.plotWidth-q[3]+q[1]),v.plotWidth)),A=this.height=Math.round(d(r(C.height,v.plotHeight-q[0]+q[2]),v.plotHeight)),N=this.top=Math.round(d(r(C.top,v.plotTop+q[0]),v.plotHeight,v.plotTop));C=this.left=Math.round(d(r(C.left,v.plotLeft+q[3]),v.plotWidth,v.plotLeft)),this.bottom=v.chartHeight-A-N,this.right=v.chartWidth-R-C,this.len=Math.max(J?R:A,0),this.pos=J?C:N},O.prototype.getExtremes=function(){var v=this.logarithmic;return{min:v?u(v.lin2log(this.min)):this.min,max:v?u(v.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},O.prototype.getThreshold=function(v){var C=this.logarithmic,q=C?C.lin2log(this.min):this.min;return C=C?C.lin2log(this.max):this.max,null===v||v===-1/0?v=q:v===1/0?v=C:q>v?v=q:C<v&&(v=C),this.translate(v,0,1,0,1)},O.prototype.autoLabelAlign=function(v){var C=(r(v,0)-90*this.side+720)%360;return x(this,"autoLabelAlign",v={align:"center"},function(q){15<C&&165>C?q.align="right":195<C&&345>C&&(q.align="left")}),v.align},O.prototype.tickSize=function(v){var C=this.options,q=r(C["tick"===v?"tickWidth":"minorTickWidth"],"tick"===v&&this.isXAxis&&!this.categories?1:0),J=C["tick"===v?"tickLength":"minorTickLength"];if(q&&J){"inside"===C[v+"Position"]&&(J=-J);var R=[J,q]}return x(this,"afterTickSize",v={tickSize:R}),v.tickSize},O.prototype.labelMetrics=function(){var v=this.tickPositions&&this.tickPositions[0]||0;return this.chart.renderer.fontMetrics(this.options.labels.style.fontSize,this.ticks[v]&&this.ticks[v].label)},O.prototype.unsquish=function(){var v=this.options.labels,C=this.horiz,q=this.tickInterval,J=this.len/(((this.categories?1:0)+this.max-this.min)/q),R=v.rotation,A=this.labelMetrics(),N=Math.max(this.max-this.min,0),E=function(gt){var ht=gt/(J||1);return(ht=1<ht?Math.ceil(ht):1)*q>N&&gt!==1/0&&J!==1/0&&N&&(ht=Math.ceil(N/q)),u(ht*q)},K=q,Q=Number.MAX_VALUE;if(C){if(!v.staggerLines)if(h(R))var et=[R];else J<v.autoRotationLimit&&(et=v.autoRotation);if(et)for(var rt=C=void 0,at=0,lt=et;at<lt.length;at++){var ft=lt[at];if((ft===R||ft&&-90<=ft&&90>=ft)&&(rt=(C=E(Math.abs(A.h/Math.sin(b*ft))))+Math.abs(ft/360))<Q){Q=rt;var vt=ft;K=C}}}else K=E(A.h);return this.autoRotation=et,this.labelRotation=r(vt,h(R)?R:0),v.step?q:K},O.prototype.getSlotWidth=function(v){var C=this.chart,q=this.horiz,J=this.options.labels,R=Math.max(this.tickPositions.length-(this.categories?0:1),1),A=C.margin[3];if(v&&h(v.slotWidth))return v.slotWidth;if(q&&2>J.step)return J.rotation?0:(this.staggerLines||1)*this.len/R;if(!q){if(void 0!==(v=J.style.width))return parseInt(String(v),10);if(A)return A-C.spacing[3]}return.33*C.chartWidth},O.prototype.renderUnsquish=function(){var v=this.chart,C=v.renderer,q=this.tickPositions,J=this.ticks,R=this.options.labels,A=R.style,N=this.horiz,E=this.getSlotWidth(),K=Math.max(1,Math.round(E-2*R.padding)),Q={},et=this.labelMetrics(),rt=A.textOverflow,at=0;if(l(R.rotation)||(Q.rotation=R.rotation||0),q.forEach(function(gt){(gt=J[gt]).movedLabel&&gt.replaceMovedLabel(),gt&&gt.label&&gt.label.textPxLength>at&&(at=gt.label.textPxLength)}),this.maxLabelLength=at,this.autoRotation)at>K&&at>et.h?Q.rotation=this.labelRotation:this.labelRotation=0;else if(E){var lt=K;if(!rt){var ft="clip";for(K=q.length;!N&&K--;){var vt=q[K];(vt=J[vt].label)&&(vt.styles&&"ellipsis"===vt.styles.textOverflow?vt.css({textOverflow:"clip"}):vt.textPxLength>E&&vt.css({width:E+"px"}),vt.getBBox().height>this.len/q.length-(et.h-et.f)&&(vt.specificTextOverflow="ellipsis"))}}}Q.rotation&&(lt=at>.5*v.chartHeight?.33*v.chartHeight:at,rt||(ft="ellipsis")),(this.labelAlign=R.align||this.autoLabelAlign(this.labelRotation))&&(Q.align=this.labelAlign),q.forEach(function(gt){var ht=(gt=J[gt])&&gt.label,bt=A.width,pt={};ht&&(ht.attr(Q),gt.shortenLabel?gt.shortenLabel():lt&&!bt&&"nowrap"!==A.whiteSpace&&(lt<ht.textPxLength||"SPAN"===ht.element.tagName)?(pt.width=lt+"px",rt||(pt.textOverflow=ht.specificTextOverflow||ft),ht.css(pt)):ht.styles&&ht.styles.width&&!pt.width&&!bt&&ht.css({width:null}),delete ht.specificTextOverflow,gt.rotation=Q.rotation)},this),this.tickRotCorr=C.rotCorr(et.b,this.labelRotation||0,0!==this.side)},O.prototype.hasData=function(){return this.series.some(function(v){return v.hasData()})||this.options.showEmpty&&_(this.min)&&_(this.max)},O.prototype.addTitle=function(v){var N,J=this.opposite,R=this.options.title,A=this.chart.styledMode;this.axisTitle||((N=R.textAlign)||(N=(this.horiz?{low:"left",middle:"center",high:"right"}:{low:J?"right":"left",middle:"center",high:J?"left":"right"})[R.align]),this.axisTitle=this.chart.renderer.text(R.text||"",0,0,R.useHTML).attr({zIndex:7,rotation:R.rotation,align:N}).addClass("highcharts-axis-title"),A||this.axisTitle.css(o(R.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),A||R.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[v?"show":"hide"](v)},O.prototype.generateTick=function(v){var C=this.ticks;C[v]?C[v].addLabel():C[v]=new W(this,v)},O.prototype.getOffset=function(){var v=this,C=this,q=C.chart,J=C.horiz,R=C.options,A=C.side,N=C.ticks,E=C.tickPositions,K=C.coll,Q=C.axisParent,et=q.renderer,rt=q.inverted&&!C.isZAxis?[1,0,3,2][A]:A,at=C.hasData(),lt=R.title,ft=R.labels,vt=q.axisOffset;q=q.clipOffset;var bt,gt=[-1,1,1,-1][A],ht=R.className,pt=0,it=0,nt=0;if(C.showAxis=bt=at||R.showEmpty,C.staggerLines=C.horiz&&ft.staggerLines||void 0,!C.axisGroup){var ct=function(mt,yt,Ct){return et.g(mt).attr({zIndex:Ct}).addClass("highcharts-".concat(K.toLowerCase()).concat(yt," ")+(v.isRadial?"highcharts-radial-axis".concat(yt," "):"")+(ht||"")).add(Q)};C.gridGroup=ct("grid","-grid",R.gridZIndex),C.axisGroup=ct("axis","",R.zIndex),C.labelGroup=ct("axis-labels","-labels",ft.zIndex)}if(at||C.isLinked?(E.forEach(function(mt){C.generateTick(mt)}),C.renderUnsquish(),C.reserveSpaceDefault=0===A||2===A||{1:"left",3:"right"}[A]===C.labelAlign,r(ft.reserveSpace,"center"===C.labelAlign||null,C.reserveSpaceDefault)&&E.forEach(function(mt){nt=Math.max(N[mt].getLabelSize(),nt)}),C.staggerLines&&(nt*=C.staggerLines),C.labelOffset=nt*(C.opposite?-1:1)):s(N,function(mt,yt){mt.destroy(),delete N[yt]}),lt&&lt.text&&!1!==lt.enabled&&(C.addTitle(bt),bt&&!1!==lt.reserveSpace)){C.titleOffset=pt=C.axisTitle.getBBox()[J?"height":"width"];var dt=lt.offset;it=_(dt)?0:r(lt.margin,J?5:10)}C.renderLine(),C.offset=gt*r(R.offset,vt[A]?vt[A]+(R.margin||0):0),C.tickRotCorr=C.tickRotCorr||{x:0,y:0},lt=0===A?-C.labelMetrics().h:2===A?C.tickRotCorr.y:0,at=Math.abs(nt)+it,nt&&(at=at-lt+gt*(J?r(ft.y,C.tickRotCorr.y+8*gt):ft.x)),C.axisTitleMargin=r(dt,at),C.getMaxLabelDimensions&&(C.maxLabelDimensions=C.getMaxLabelDimensions(N,E)),"colorAxis"!==K&&(J=this.tickSize("tick"),vt[A]=Math.max(vt[A],(C.axisTitleMargin||0)+pt+gt*C.offset,at,E&&E.length&&J?J[0]+gt*C.offset:0),R=!C.axisLine||R.offset?0:2*Math.floor(C.axisLine.strokeWidth()/2),q[rt]=Math.max(q[rt],R)),x(this,"afterGetOffset")},O.prototype.getLinePath=function(v){var C=this.chart,q=this.opposite,J=this.offset,R=this.horiz,A=this.left+(q?this.width:0)+J;return J=C.chartHeight-this.bottom-(q?this.height:0)+J,q&&(v*=-1),C.renderer.crispLine([["M",R?this.left:A,R?J:this.top],["L",R?C.chartWidth-this.right:A,R?J:C.chartHeight-this.bottom]],v)},O.prototype.renderLine=function(){this.axisLine||(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))},O.prototype.getTitlePosition=function(){var v=this.horiz,C=this.left,q=this.top,J=this.len,R=this.options.title,A=v?C:q,N=this.opposite,E=this.offset,K=R.x,Q=R.y,et=this.axisTitle,rt=this.chart.renderer.fontMetrics(R.style.fontSize,et);return et=et?Math.max(et.getBBox(!1,0).height-rt.h-1,0):0,J={low:A+(v?0:J),middle:A+J/2,high:A+(v?J:0)}[R.align],C=(v?q+this.height:C)+(v?1:-1)*(N?-1:1)*(this.axisTitleMargin||0)+[-et,et,rt.f,-et][this.side],x(this,"afterGetTitlePosition",{titlePosition:v={x:v?J+K:C+(N?this.width:0)+E+K,y:v?C+Q-(N?this.height:0)+E:J+Q}}),v},O.prototype.renderMinorTick=function(v,C){var q=this.minorTicks;q[v]||(q[v]=new W(this,v,"minor")),C&&q[v].isNew&&q[v].render(null,!0),q[v].render(null,!1,1)},O.prototype.renderTick=function(v,C,q){var J=this.ticks;(!this.isLinked||v>=this.min&&v<=this.max||this.grid&&this.grid.isColumn)&&(J[v]||(J[v]=new W(this,v)),q&&J[v].isNew&&J[v].render(C,!0,-1),J[v].render(C))},O.prototype.render=function(){var gt,ht,v=this,C=v.chart,q=v.logarithmic,J=v.options,R=v.isLinked,A=v.tickPositions,N=v.axisTitle,E=v.ticks,K=v.minorTicks,Q=v.alternateBands,et=J.stackLabels,rt=J.alternateGridColor,at=v.tickmarkOffset,lt=v.axisLine,ft=v.showAxis,vt=S(C.renderer.globalAnimation);if(v.labelEdge.length=0,v.overlap=!1,[E,K,Q].forEach(function(pt){s(pt,function(it){it.isActive=!1})}),v.hasData()||R){var bt=v.chart.hasRendered&&v.old&&h(v.old.min);v.minorTickInterval&&!v.categories&&v.getMinorTickPositions().forEach(function(pt){v.renderMinorTick(pt,bt)}),A.length&&(A.forEach(function(pt,it){v.renderTick(pt,it,bt)}),at&&(0===v.min||v.single)&&(E[-1]||(E[-1]=new W(v,-1,null,!0)),E[-1].render(-1))),rt&&A.forEach(function(pt,it){ht=typeof A[it+1]<"u"?A[it+1]+at:v.max-at,it%2==0&&pt<v.max&&ht<=v.max+(C.polar?-at:at)&&(Q[pt]||(Q[pt]=new V.PlotLineOrBand(v)),gt=pt+at,Q[pt].options={from:q?q.lin2log(gt):gt,to:q?q.lin2log(ht):ht,color:rt,className:"highcharts-alternate-grid"},Q[pt].render(),Q[pt].isActive=!0)}),v._addedPlotLB||(v._addedPlotLB=!0,(J.plotLines||[]).concat(J.plotBands||[]).forEach(function(pt){v.addPlotBandOrLine(pt)}))}[E,K,Q].forEach(function(pt){var it=[],nt=vt.duration;s(pt,function(ct,dt){ct.isActive||(ct.render(dt,!1,0),ct.isActive=!1,it.push(dt))}),U(function(){for(var ct=it.length;ct--;)pt[it[ct]]&&!pt[it[ct]].isActive&&(pt[it[ct]].destroy(),delete pt[it[ct]])},pt!==Q&&C.hasRendered&&nt?nt:0)}),lt&&(lt[lt.isPlaced?"animate":"attr"]({d:this.getLinePath(lt.strokeWidth())}),lt.isPlaced=!0,lt[ft?"show":"hide"](ft)),N&&ft&&(J=v.getTitlePosition(),N[N.isNew?"attr":"animate"](J),N.isNew=!1),et&&et.enabled&&v.stacking&&v.stacking.renderStackTotals(),v.old={len:v.len,max:v.max,min:v.min,transA:v.transA,userMax:v.userMax,userMin:v.userMin},v.isDirty=!1,x(this,"afterRender")},O.prototype.redraw=function(){this.visible&&(this.render(),this.plotLinesAndBands.forEach(function(v){v.render()})),this.series.forEach(function(v){v.isDirty=!0})},O.prototype.getKeepProps=function(){return this.keepProps||O.keepProps},O.prototype.destroy=function(v){var C=this,q=C.plotLinesAndBands,J=this.eventOptions;if(x(this,"destroy",{keepEvents:v}),v||p(C),[C.ticks,C.minorTicks,C.alternateBands].forEach(function(A){D(A)}),q)for(v=q.length;v--;)q[v].destroy();for(var R in"axisLine axisTitle axisGroup gridGroup labelGroup cross scrollbar".split(" ").forEach(function(A){C[A]&&(C[A]=C[A].destroy())}),C.plotLinesAndBandsGroups)C.plotLinesAndBandsGroups[R]=C.plotLinesAndBandsGroups[R].destroy();s(C,function(A,N){-1===C.getKeepProps().indexOf(N)&&delete C[N]}),this.eventOptions=J},O.prototype.drawCrosshair=function(v,C){var A,q=this.crosshair,J=r(q&&q.snap,!0),R=this.chart,N=this.cross;if(x(this,"drawCrosshair",{e:v,point:C}),v||(v=this.cross&&this.cross.e),q&&!1!==(_(C)||!J)){if(J?_(C)&&(A=r("colorAxis"!==this.coll?C.crosshairPos:null,this.isXAxis?C.plotX:this.len-C.plotY)):A=v&&(this.horiz?v.chartX-this.pos:this.len-v.chartY+this.pos),_(A)){var E={value:C&&(this.isXAxis?C.x:r(C.stackY,C.y)),translatedValue:A};R.polar&&M(E,{isCrosshair:!0,chartX:v&&v.chartX,chartY:v&&v.chartY,point:C}),E=this.getPlotLinePath(E)||null}if(!_(E))return void this.hideCrosshair();J=this.categories&&!this.isRadial,N||(this.cross=N=R.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(J?"category ":"thin ")+(q.className||"")).attr({zIndex:r(q.zIndex,2)}).add(),R.styledMode||(N.attr({stroke:q.color||(J?X.parse("#ccd6eb").setOpacity(.25).get():"#cccccc"),"stroke-width":r(q.width,1)}).css({"pointer-events":"none"}),q.dashStyle&&N.attr({dashstyle:q.dashStyle}))),N.show().attr({d:E}),J&&!q.width&&N.attr({"stroke-width":this.transA}),this.cross.e=v}else this.hideCrosshair();x(this,"afterDrawCrosshair",{e:v,point:C})},O.prototype.hideCrosshair=function(){this.cross&&this.cross.hide(),x(this,"afterHideCrosshair")},O.prototype.hasVerticalPanning=function(){var v=this.chart.options.chart.panning;return!!(v&&v.enabled&&/y/.test(v.type))},O.prototype.validatePositiveValue=function(v){return h(v)&&0<v},O.prototype.update=function(v,C){var q=this.chart;v=o(this.userOptions,v),this.destroy(!0),this.init(q,v),q.isDirtyBox=!0,r(C,!0)&&q.redraw()},O.prototype.remove=function(v){for(var C=this.chart,q=this.coll,J=this.series,R=J.length;R--;)J[R]&&J[R].remove(!1);t(C.axes,this),t(C[q],this),C[q].forEach(function(A,N){A.options.index=A.userOptions.index=N}),this.destroy(),C.isDirtyBox=!0,r(v,!0)&&C.redraw()},O.prototype.setTitle=function(v,C){this.update({title:v},C)},O.prototype.setCategories=function(v,C){this.update({categories:v},C)},O.defaultOptions=H.defaultXAxisOptions,O.keepProps="extKey hcEvents names series userMax userMin".split(" "),O}()}),j(ot,"Core/Axis/DateTimeAxis.js",[ot["Core/Utilities.js"]],function(Y){var V,H=Y.addEvent,X=Y.getMagnitude,z=Y.normalizeTickInterval,tt=Y.timeUnits;return function(W){function P(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function S(b){"datetime"!==b.userOptions.type?this.dateTime=void 0:this.dateTime||(this.dateTime=new k(this))}var Z=[];W.compose=function(b){return-1===Z.indexOf(b)&&(Z.push(b),b.keepProps.push("dateTime"),b.prototype.getTimeTicks=P,H(b,"init",S)),b};var k=function(){function b(m){this.axis=m}return b.prototype.normalizeTimeTickInterval=function(m,a){var D,c=a||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],u=tt[(a=c[c.length-1])[0]],_=a[1];for(D=0;D<c.length&&(u=tt[(a=c[D])[0]],_=a[1],!(c[D+1]&&m<=(u*_[_.length-1]+tt[c[D+1][0]])/2));D++);return u===tt.year&&m<5*u&&(_=[1,2,5]),{unitRange:u,count:m=z(m/u,_,"year"===a[0]?Math.max(X(m/u),1):1),unitName:a[0]}},b.prototype.getXDateFormat=function(m,a){var c=this.axis,u=c.chart.time;return c.closestPointRange?u.getDateFormat(c.closestPointRange,m,c.options.startOfWeek,a)||u.resolveDTLFormat(a.year).main:u.resolveDTLFormat(a.day).main},b}();W.Additions=k}(V||(V={})),V}),j(ot,"Core/Axis/LogarithmicAxis.js",[ot["Core/Utilities.js"]],function(Y){var tt,H=Y.addEvent,X=Y.normalizeTickInterval,z=Y.pick;return function(V){function W(k){var b=this.logarithmic;"logarithmic"!==k.userOptions.type?this.logarithmic=void 0:b||(this.logarithmic=new Z(this))}function P(){var k=this.logarithmic;k&&(this.lin2val=function(b){return k.lin2log(b)},this.val2lin=function(b){return k.log2lin(b)})}var S=[];V.compose=function(k){return-1===S.indexOf(k)&&(S.push(k),k.keepProps.push("logarithmic"),H(k,"init",W),H(k,"afterInit",P)),k};var Z=function(){function k(b){this.axis=b}return k.prototype.getLogTickPositions=function(b,m,a,c){var u=this.axis,_=u.len,D=u.options,t=[];if(c||(this.minorAutoInterval=void 0),.5<=b)b=Math.round(b),t=u.getLinearTickPositions(b,m,a);else if(.08<=b){var M,B=Math.floor(m),x=D=void 0;for(_=.3<b?[1,2,4]:.15<b?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];B<a+1&&!x;B++){var w=_.length;for(M=0;M<w&&!x;M++){var h=this.log2lin(this.lin2log(B)*_[M]);h>m&&(!c||D<=a)&&typeof D<"u"&&t.push(D),D>a&&(x=!0),D=h}}}else m=this.lin2log(m),a=this.lin2log(a),b=c?u.getMinorTickInterval():D.tickInterval,b=z("auto"===b?null:b,this.minorAutoInterval,D.tickPixelInterval/(c?5:1)*(a-m)/((c?_/u.tickPositions.length:_)||1)),b=X(b),t=u.getLinearTickPositions(b,m,a).map(this.log2lin),c||(this.minorAutoInterval=b/5);return c||(u.tickInterval=b),t},k.prototype.lin2log=function(b){return Math.pow(10,b)},k.prototype.log2lin=function(b){return Math.log(b)/Math.LN10},k}();V.Additions=Z}(tt||(tt={})),tt}),j(ot,"Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js",[ot["Core/Utilities.js"]],function(Y){var tt,H=Y.erase,X=Y.extend,z=Y.isNumber;return function(V){var P,W=[];V.compose=function(Z,k){return P||(P=Z),-1===W.indexOf(k)&&(W.push(k),X(k.prototype,S.prototype)),k};var S=function(){function Z(){}return Z.prototype.getPlotBandPath=function(k,b,m){void 0===m&&(m=this.options);var a=this.getPlotLinePath({value:b,force:!0,acrossPanes:m.acrossPanes}),c=[],u=this.horiz;if(b=!z(this.min)||!z(this.max)||k<this.min&&b<this.min||k>this.max&&b>this.max,k=this.getPlotLinePath({value:k,force:!0,acrossPanes:m.acrossPanes}),m=1,k&&a){if(b){var _=k.toString()===a.toString();m=0}for(b=0;b<k.length;b+=2){var D=k[b],t=k[b+1],B=a[b],M=a[b+1];"M"!==D[0]&&"L"!==D[0]||"M"!==t[0]&&"L"!==t[0]||"M"!==B[0]&&"L"!==B[0]||"M"!==M[0]&&"L"!==M[0]||(u&&B[1]===D[1]?(B[1]+=m,M[1]+=m):u||B[2]!==D[2]||(B[2]+=m,M[2]+=m),c.push(["M",D[1],D[2]],["L",t[1],t[2]],["L",M[1],M[2]],["L",B[1],B[2]],["Z"])),c.isFlat=_}}return c},Z.prototype.addPlotBand=function(k){return this.addPlotBandOrLine(k,"plotBands")},Z.prototype.addPlotLine=function(k){return this.addPlotBandOrLine(k,"plotLines")},Z.prototype.addPlotBandOrLine=function(k,b){var m=this,a=this.userOptions,c=new P(this,k);if(this.visible&&(c=c.render()),c){if(this._addedPlotLB||(this._addedPlotLB=!0,(a.plotLines||[]).concat(a.plotBands||[]).forEach(function(_){m.addPlotBandOrLine(_)})),b){var u=a[b]||[];u.push(k),a[b]=u}this.plotLinesAndBands.push(c)}return c},Z.prototype.removePlotBandOrLine=function(k){var b=this.plotLinesAndBands,m=this.options,a=this.userOptions;if(b){for(var c=b.length;c--;)b[c].id===k&&b[c].destroy();[m.plotLines||[],a.plotLines||[],m.plotBands||[],a.plotBands||[]].forEach(function(u){for(c=u.length;c--;)(u[c]||{}).id===k&&H(u,u[c])})}},Z.prototype.removePlotBand=function(k){this.removePlotBandOrLine(k)},Z.prototype.removePlotLine=function(k){this.removePlotBandOrLine(k)},Z}()}(tt||(tt={})),tt}),j(ot,"Core/Axis/PlotLineOrBand/PlotLineOrBand.js",[ot["Core/Axis/PlotLineOrBand/PlotLineOrBandAxis.js"],ot["Core/Utilities.js"]],function(Y,H){var X=H.arrayMax,z=H.arrayMin,tt=H.defined,V=H.destroyObjectProperties,W=H.erase,P=H.fireEvent,S=H.merge,Z=H.objectEach,k=H.pick;return function(){function b(m,a){this.axis=m,a&&(this.options=a,this.id=a.id)}return b.compose=function(m){return Y.compose(b,m)},b.prototype.render=function(){P(this,"render");var m=this,a=m.axis,c=a.horiz,u=a.logarithmic,_=m.options,D=_.color,t=k(_.zIndex,0),B=_.events,M={},x=a.chart.renderer,w=_.label,h=m.label,l=_.to,o=_.from,y=_.value,s=m.svgElem,r=[],d=tt(o)&&tt(l);r=tt(y);var p=!s,T={class:"highcharts-plot-"+(d?"band ":"line ")+(_.className||"")},U=d?"bands":"lines";if(u&&(o=u.log2lin(o),l=u.log2lin(l),y=u.log2lin(y)),a.chart.styledMode||(r?(T.stroke=D||"#999999",T["stroke-width"]=k(_.width,1),_.dashStyle&&(T.dashstyle=_.dashStyle)):d&&(T.fill=D||"#e6ebf5",_.borderWidth&&(T.stroke=_.borderColor,T["stroke-width"]=_.borderWidth))),M.zIndex=t,(u=a.plotLinesAndBandsGroups[U+="-"+t])||(a.plotLinesAndBandsGroups[U]=u=x.g("plot-"+U).attr(M).add()),p&&(m.svgElem=s=x.path().attr(T).add(u)),r)r=a.getPlotLinePath({value:y,lineWidth:s.strokeWidth(),acrossPanes:_.acrossPanes});else{if(!d)return;r=a.getPlotBandPath(o,l,_)}return!m.eventsAdded&&B&&(Z(B,function(G,O){s.on(O,function(v){B[O].apply(m,[v])})}),m.eventsAdded=!0),(p||!s.d)&&r&&r.length?s.attr({d:r}):s&&(r?(s.show(),s.animate({d:r})):s.d&&(s.hide(),h&&(m.label=h=h.destroy()))),w&&(tt(w.text)||tt(w.formatter))&&r&&r.length&&0<a.width&&0<a.height&&!r.isFlat?(w=S({align:c&&d&&"center",x:c?!d&&4:10,verticalAlign:!c&&d&&"middle",y:c?d?16:10:d?6:-4,rotation:c&&!d&&90},w),this.renderLabel(w,r,d,t)):h&&h.hide(),m},b.prototype.renderLabel=function(m,a,c,u){var _=this.axis,D=_.chart.renderer,t=this.label;t||(this.label=t=D.text(this.getLabelText(m),0,0,m.useHTML).attr({align:m.textAlign||m.align,rotation:m.rotation,class:"highcharts-plot-"+(c?"band":"line")+"-label "+(m.className||""),zIndex:u}).add(),_.chart.styledMode||t.css(S({textOverflow:"ellipsis"},m.style))),u=a.xBounds||[a[0][1],a[1][1],c?a[2][1]:a[0][1]],a=a.yBounds||[a[0][2],a[1][2],c?a[2][2]:a[0][2]],c=z(u),D=z(a),t.align(m,!1,{x:c,y:D,width:X(u)-c,height:X(a)-D}),t.alignValue&&"left"!==t.alignValue||(m=m.clip?_.width:_.chart.chartWidth,t.css({width:(90===t.rotation?_.height-(t.alignAttr.y-_.top):m-(t.alignAttr.x-_.left))+"px"})),t.show(!0)},b.prototype.getLabelText=function(m){return tt(m.formatter)?m.formatter.call(this):m.text},b.prototype.destroy=function(){W(this.axis.plotLinesAndBands,this),delete this.axis,V(this)},b}()}),j(ot,"Core/Tooltip.js",[ot["Core/FormatUtilities.js"],ot["Core/Globals.js"],ot["Core/Renderer/RendererUtilities.js"],ot["Core/Renderer/RendererRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt){var V=Y.format,W=H.doc,P=X.distribute,S=tt.clamp,Z=tt.css,k=tt.discardElement,b=tt.extend,m=tt.fireEvent,a=tt.isArray,c=tt.isNumber,u=tt.isString,_=tt.merge,D=tt.pick,t=tt.splat,B=tt.syncTimeout;return function(){function M(x,w){this.allowShared=!0,this.container=void 0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.now={},this.options={},this.outside=!1,this.chart=x,this.init(x,w)}return M.prototype.applyFilter=function(){var x=this.chart;x.renderer.definition({tagName:"filter",attributes:{id:"drop-shadow-"+x.index,opacity:.5},children:[{tagName:"feGaussianBlur",attributes:{in:"SourceAlpha",stdDeviation:1}},{tagName:"feOffset",attributes:{dx:1,dy:1}},{tagName:"feComponentTransfer",children:[{tagName:"feFuncA",attributes:{type:"linear",slope:.3}}]},{tagName:"feMerge",children:[{tagName:"feMergeNode"},{tagName:"feMergeNode",attributes:{in:"SourceGraphic"}}]}]})},M.prototype.bodyFormatter=function(x){return x.map(function(w){var h=w.series.tooltipOptions;return(h[(w.point.formatPrefix||"point")+"Formatter"]||w.point.tooltipFormatter).call(w.point,h[(w.point.formatPrefix||"point")+"Format"]||"")})},M.prototype.cleanSplit=function(x){this.chart.series.forEach(function(w){var h=w&&w.tt;h&&(!h.isActive||x?w.tt=h.destroy():h.isActive=!1)})},M.prototype.defaultFormatter=function(x){var w=this.points||t(this),h=[x.tooltipFooterHeaderFormatter(w[0])];return(h=h.concat(x.bodyFormatter(w))).push(x.tooltipFooterHeaderFormatter(w[0],!0)),h},M.prototype.destroy=function(){this.label&&(this.label=this.label.destroy()),this.split&&this.tt&&(this.cleanSplit(!0),this.tt=this.tt.destroy()),this.renderer&&(this.renderer=this.renderer.destroy(),k(this.container)),tt.clearTimeout(this.hideTimer),tt.clearTimeout(this.tooltipTimeout)},M.prototype.getAnchor=function(x,w){var h=this.chart,l=h.pointer,o=h.inverted,y=h.plotTop;if(h=h.plotLeft,(x=t(x))[0].series&&x[0].series.yAxis&&!x[0].series.yAxis.options.reversedStacks&&(x=x.slice().reverse()),this.followPointer&&w)typeof w.chartX>"u"&&(w=l.normalize(w)),x=[w.chartX-h,w.chartY-y];else if(x[0].tooltipPos)x=x[0].tooltipPos;else{var s=0,r=0;x.forEach(function(d){(d=d.pos(!0))&&(s+=d[0],r+=d[1])}),s/=x.length,r/=x.length,this.shared&&1<x.length&&w&&(o?s=w.chartX:r=w.chartY),x=[s-h,r-y]}return x.map(Math.round)},M.prototype.getClassName=function(x,w,h){var l=x.series,o=l.options;return[this.options.className,"highcharts-label",h&&"highcharts-tooltip-header",w?"highcharts-tooltip-box":"highcharts-tooltip",!h&&"highcharts-color-"+D(x.colorIndex,l.colorIndex),o&&o.className].filter(u).join(" ")},M.prototype.getLabel=function(){var y,x=this,w=this.chart.styledMode,h=this.options,l=this.split&&this.allowShared,o=h.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none"),s=this.chart.renderer;if(x.label){var r=!x.label.hasClass("highcharts-label");(l&&!r||!l&&r)&&x.destroy()}if(!this.label){if(this.outside){r=this.chart.options.chart.style;var d=z.getRendererType();this.container=y=H.doc.createElement("div"),y.className="highcharts-tooltip-container",Z(y,{position:"absolute",top:"1px",pointerEvents:o,zIndex:Math.max(this.options.style.zIndex||0,(r&&r.zIndex||0)+3)}),H.doc.body.appendChild(y),this.renderer=s=new d(y,0,0,r,void 0,void 0,s.styledMode)}if(l?this.label=s.g("tooltip"):(this.label=s.label("",0,0,h.shape,void 0,void 0,h.useHTML,void 0,"tooltip").attr({padding:h.padding,r:h.borderRadius}),w||this.label.attr({fill:h.backgroundColor,"stroke-width":h.borderWidth}).css(h.style).css({pointerEvents:o}).shadow(h.shadow)),w&&h.shadow&&(this.applyFilter(),this.label.attr({filter:"url(#drop-shadow-"+this.chart.index+")"})),x.outside&&!x.split){var p=this.label,T=p.xSetter,U=p.ySetter;p.xSetter=function(G){T.call(p,x.distance),y.style.left=G+"px"},p.ySetter=function(G){U.call(p,x.distance),y.style.top=G+"px"}}this.label.attr({zIndex:8}).add()}return this.label},M.prototype.getPosition=function(x,w,h){var v,l=this.chart,o=this.distance,y={},s=l.inverted&&h.h||0,r=this.outside,d=r?W.documentElement.clientWidth-2*o:l.chartWidth,p=r?Math.max(W.body.scrollHeight,W.documentElement.scrollHeight,W.body.offsetHeight,W.documentElement.offsetHeight,W.documentElement.clientHeight):l.chartHeight,T=l.pointer.getChartPosition(),U=function(N){var E="x"===N;return[N,E?d:p,E?x:w].concat(r?[E?x*T.scaleX:w*T.scaleY,E?T.left-o+(h.plotX+l.plotLeft)*T.scaleX:T.top-o+(h.plotY+l.plotTop)*T.scaleY,0,E?d:p]:[E?x:w,E?h.plotX+l.plotLeft:h.plotY+l.plotTop,E?l.plotLeft:l.plotTop,E?l.plotLeft+l.plotWidth:l.plotTop+l.plotHeight])},G=U("y"),O=U("x");U=!!h.negative,!l.polar&&l.hoverSeries&&l.hoverSeries.yAxis&&l.hoverSeries.yAxis.reversed&&(U=!U);var C=!this.followPointer&&D(h.ttBelow,!l.inverted===U),q=function(N,E,K,Q,et,rt,at){var lt=r?"y"===N?o*T.scaleY:o*T.scaleX:o,ft=(K-Q)/2,vt=Q<et-o,gt=et+o+Q<E,ht=et-lt-K+ft;if(et=et+lt-ft,C&&gt)y[N]=et;else if(!C&&vt)y[N]=ht;else if(vt)y[N]=Math.min(at-Q,0>ht-s?ht:ht-s);else{if(!gt)return!1;y[N]=Math.max(rt,et+s+K>E?et:et+s)}},J=function(N,E,K,Q,et){var rt;return et<o||et>E-o?rt=!1:y[N]=et<K/2?1:et>E-Q/2?E-Q-2:et-K/2,rt},R=function(N){var E=G;G=O,O=E,v=N},A=function(){!1!==q.apply(0,G)?!1!==J.apply(0,O)||v||(R(!0),A()):v?y.x=y.y=0:(R(!0),A())};return(l.inverted||1<this.len)&&R(),A(),y},M.prototype.hide=function(x){var w=this;tt.clearTimeout(this.hideTimer),x=D(x,this.options.hideDelay),this.isHidden||(this.hideTimer=B(function(){w.getLabel().fadeOut(x&&void 0),w.isHidden=!0},x))},M.prototype.init=function(x,w){this.chart=x,this.options=w,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.split=w.split&&!x.inverted&&!x.polar,this.shared=w.shared||this.split,this.outside=D(w.outside,!(!x.scrollablePixelsX&&!x.scrollablePixelsY))},M.prototype.shouldStickOnContact=function(x){return!(this.followPointer||!this.options.stickOnContact||x&&!this.chart.pointer.inClass(x.target,"highcharts-tooltip"))},M.prototype.move=function(x,w,h,l){var o=this,y=o.now,s=!1!==o.options.animation&&!o.isHidden&&(1<Math.abs(x-y.x)||1<Math.abs(w-y.y)),r=o.followPointer||1<o.len;b(y,{x:s?(2*y.x+x)/3:x,y:s?(y.y+w)/2:w,anchorX:r?void 0:s?(2*y.anchorX+h)/3:h,anchorY:r?void 0:s?(y.anchorY+l)/2:l}),o.getLabel().attr(y),o.drawTracker(),s&&(tt.clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){o&&o.move(x,w,h,l)},32))},M.prototype.refresh=function(x,w){var h=this.chart,l=this.options,o=h.pointer,y=t(x),s=y[0],r=[],d=l.formatter||this.defaultFormatter,p=this.shared,T=h.styledMode,U={};if(l.enabled&&s.series){tt.clearTimeout(this.hideTimer),this.allowShared=!(!a(x)&&x.series&&x.series.noSharedTooltip),this.followPointer=!this.split&&s.series.tooltipOptions.followPointer;var G=(x=this.getAnchor(x,w))[0],O=x[1];if(p&&this.allowShared?(o.applyInactiveState(y),y.forEach(function(q){q.setState("hover"),r.push(q.getLabelConfig())}),(U={x:s.category,y:s.y}).points=r):U=s.getLabelConfig(),this.len=r.length,d=d.call(U,this),this.distance=D((p=s.series).tooltipOptions.distance,16),!1===d)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(d,y);else{var v=G,C=O;if(w&&o.isDirectTouch&&(v=w.chartX-h.plotLeft,C=w.chartY-h.plotTop),!h.polar&&!1!==p.options.clip&&!y.some(function(q){return o.isDirectTouch||q.series.shouldShowTooltip(v,C)}))return void this.hide();w=this.getLabel(),l.style.width&&!T||w.css({width:h.spacingBox.width+"px"}),w.attr({text:d&&d.join?d.join(""):d}),w.addClass(this.getClassName(s),!0),T||w.attr({stroke:l.borderColor||s.color||p.color||"#666666"}),this.updatePosition({plotX:G,plotY:O,negative:s.negative,ttBelow:s.ttBelow,h:x[2]||0})}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}m(this,"refresh")}},M.prototype.renderSplit=function(x,w){function h(gt,ht,bt,pt,it){return void 0===it&&(it=!0),bt?(ht=Q?0:lt,gt=S(gt-pt/2,N.left,N.right-pt-(l.outside?et:0))):(ht-=rt,gt=S(gt=it?gt-pt-J:gt+J,it?gt:N.left,N.right)),{x:gt,y:ht}}var l=this,o=l.chart,y=l.chart,s=y.chartWidth,r=y.chartHeight,d=y.plotHeight,p=y.plotLeft,T=y.plotTop,U=y.pointer,G=y.scrollablePixelsY;G=void 0===G?0:G;var v=y.scrollingContainer,C=(v=void 0===v?{scrollLeft:0,scrollTop:0}:v).scrollLeft;v=v.scrollTop;var q=y.styledMode,J=l.distance,R=l.options,A=l.options.positioner,N=l.outside&&"number"!=typeof y.scrollablePixelsX?W.documentElement.getBoundingClientRect():{left:C,right:C+s,top:v,bottom:v+r},E=l.getLabel(),K=this.renderer||o.renderer,Q=!(!o.xAxis[0]||!o.xAxis[0].opposite),et=(o=U.getChartPosition()).left;o=o.top;var rt=T+v,at=0,lt=d-G;u(x)&&(x=[!1,x]),x=x.slice(0,w.length+1).reduce(function(gt,ht,bt){if(!1!==ht&&""!==ht){var pt=(bt=w[bt-1]||{isHeader:!0,plotX:w[0].plotX,plotY:d,series:{}}).isHeader,it=pt?l:bt.series;ht=ht.toString();var nt=it.tt,ct=bt.isHeader,dt=bt.series;nt||(nt={padding:R.padding,r:R.borderRadius},q||(nt.fill=R.backgroundColor,nt["stroke-width"]=R.borderWidth),nt=K.label("",0,0,R[ct?"headerShape":"shape"],void 0,void 0,R.useHTML).addClass(l.getClassName(bt,!0,ct)).attr(nt).add(E)),nt.isActive=!0,nt.attr({text:ht}),q||nt.css(R.style).shadow(R.shadow).attr({stroke:R.borderColor||bt.color||dt.color||"#333333"}),ht=(ct=(it=it.tt=nt).getBBox()).width+it.strokeWidth(),pt&&(lt+=at=ct.height,Q&&(rt-=at)),dt=void 0===(dt=bt.plotX)?0:dt,nt=void 0===(nt=bt.plotY)?0:nt;var mt=bt.series;if(bt.isHeader){dt=p+dt;var yt=T+d/2}else{var Ct=mt.xAxis,kt=mt.yAxis;dt=Ct.pos+S(dt,-J,Ct.len+J),mt.shouldShowTooltip(0,kt.pos-T+nt,{ignoreX:!0})&&(yt=kt.pos+nt)}dt=S(dt,N.left-J,N.right+J),"number"==typeof yt?(ct=ct.height+1,nt=A?A.call(l,ht,ct,bt):h(dt,yt,pt,ht),gt.push({align:A?0:void 0,anchorX:dt,anchorY:yt,boxWidth:ht,point:bt,rank:D(nt.rank,pt?1:0),size:ct,target:nt.y,tt:it,x:nt.x})):it.isActive=!1}return gt},[]),!A&&x.some(function(gt){var ht=(l.outside?et:0)+gt.anchorX;return ht<N.left&&ht+gt.boxWidth<N.right||ht<et-N.left+gt.boxWidth&&N.right-ht>ht})&&(x=x.map(function(gt){var ht=h(gt.anchorX,gt.anchorY,gt.point.isHeader,gt.boxWidth,!1);return b(gt,{target:ht.y,x:ht.x})})),l.cleanSplit(),P(x,lt);var ft=et,vt=et;x.forEach(function(gt){var ht=gt.x,bt=gt.boxWidth;(gt=gt.isHeader)||(l.outside&&et+ht<ft&&(ft=et+ht),!gt&&l.outside&&ft+bt>vt&&(vt=et+ht))}),x.forEach(function(gt){var ht=gt.x,bt=gt.anchorX,pt=gt.pos,it=gt.point.isHeader;if(pt={visibility:typeof pt>"u"?"hidden":"inherit",x:ht,y:(pt||0)+rt,anchorX:bt,anchorY:gt.anchorY},l.outside&&ht<bt){var nt=et-ft;0<nt&&(it||(pt.x=ht+nt,pt.anchorX=bt+nt),it&&(pt.x=(vt-ft)/2,pt.anchorX=bt+nt))}gt.tt.attr(pt)}),x=l.container,G=l.renderer,l.outside&&x&&G&&(y=E.getBBox(),G.setSize(y.width+y.x,y.height+y.y,!1),x.style.left=ft+"px",x.style.top=o+"px")},M.prototype.drawTracker=function(){if(this.shouldStickOnContact()){var x=this.chart,w=this.label,h=this.shared?x.hoverPoints:x.hoverPoint;if(w&&h){var l={x:0,y:0,width:0,height:0};h=this.getAnchor(h);var o=w.getBBox();h[0]+=x.plotLeft-w.translateX,h[1]+=x.plotTop-w.translateY,l.x=Math.min(0,h[0]),l.y=Math.min(0,h[1]),l.width=0>h[0]?Math.max(Math.abs(h[0]),o.width-h[0]):Math.max(Math.abs(h[0]),o.width),l.height=0>h[1]?Math.max(Math.abs(h[1]),o.height-Math.abs(h[1])):Math.max(Math.abs(h[1]),o.height),this.tracker?this.tracker.attr(l):(this.tracker=w.renderer.rect(l).addClass("highcharts-tracker").add(w),x.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}}else this.tracker&&this.tracker.destroy()},M.prototype.styledModeFormat=function(x){return x.replace('style="font-size: 10px"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')},M.prototype.tooltipFooterHeaderFormatter=function(x,w){var h=x.series,l=h.tooltipOptions,o=h.xAxis,y=o&&o.dateTime,s=l.xDateFormat,r=l[w?"footerFormat":"headerFormat"];return m(this,"headerFormatter",o={isFooter:w,labelConfig:x},function(d){y&&!s&&c(x.key)&&(s=y.getXDateFormat(x.key,l.dateTimeLabelFormats)),y&&s&&(x.point&&x.point.tooltipDateKeys||["key"]).forEach(function(p){r=r.replace("{point."+p+"}","{point."+p+":"+s+"}")}),h.chart.styledMode&&(r=this.styledModeFormat(r)),d.text=V(r,{point:x,series:h},this.chart)}),o.text},M.prototype.update=function(x){this.destroy(),_(!0,this.chart.options.tooltip.userOptions,x),this.init(this.chart,_(!0,this.options,x))},M.prototype.updatePosition=function(x){var w=this.chart,h=this.distance,l=this.options,o=w.pointer,y=this.getLabel(),s=o.getChartPosition();o=s.left;var r=s.top,d=s.scaleX;s=s.scaleY;var p=(l.positioner||this.getPosition).call(this,y.width,y.height,x),T=(x.plotX||0)+w.plotLeft;x=(x.plotY||0)+w.plotTop,this.outside&&(l.positioner&&(p.x+=o-h,p.y+=r-h),this.renderer.setSize(y.width+(h=l.borderWidth+2*h),y.height+h,!1),(1!==d||1!==s)&&(Z(this.container,{transform:"scale(".concat(d,", ").concat(s,")")}),T*=d,x*=s),T+=o-p.x,x+=r-p.y),this.move(Math.round(p.x),Math.round(p.y||0),T,x)},M}()}),j(ot,"Core/Series/Point.js",[ot["Core/Renderer/HTML/AST.js"],ot["Core/Animation/AnimationUtilities.js"],ot["Core/Defaults.js"],ot["Core/FormatUtilities.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt){var V=H.animObject,W=X.defaultOptions,P=z.format,S=tt.addEvent,Z=tt.defined,k=tt.erase,b=tt.extend,m=tt.fireEvent,a=tt.getNestedProperty,c=tt.isArray,u=tt.isFunction,_=tt.isNumber,D=tt.isObject,t=tt.merge,B=tt.objectEach,M=tt.pick,x=tt.syncTimeout,w=tt.removeEvent,h=tt.uniqueKey;return function(){function l(){this.category=void 0,this.formatPrefix="point",this.id=void 0,this.isNull=!1,this.percentage=this.options=this.name=void 0,this.selected=!1,this.total=this.shapeArgs=this.series=void 0,this.visible=!0,this.x=void 0}return l.prototype.animateBeforeDestroy=function(){var o=this,y={x:o.startXPos,opacity:0},s=o.getGraphicalProps();s.singular.forEach(function(r){o[r]=o[r].animate("dataLabel"===r?{x:o[r].startXPos,y:o[r].startYPos,opacity:0}:y)}),s.plural.forEach(function(r){o[r].forEach(function(d){d.element&&d.animate(b({x:o.startXPos},d.startYPos?{x:d.startXPos,y:d.startYPos}:{}))})})},l.prototype.applyOptions=function(o,y){var s=this.series,r=s.options.pointValKey||s.pointValKey;return o=l.prototype.optionsToObject.call(this,o),b(this,o),this.options=this.options?b(this.options,o):o,o.group&&delete this.group,o.dataLabels&&delete this.dataLabels,r&&(this.y=l.prototype.getNestedProperty.call(this,r)),this.formatPrefix=(this.isNull=this.isValid&&!this.isValid())?"null":"point",this.selected&&(this.state="select"),"name"in this&&typeof y>"u"&&s.xAxis&&s.xAxis.hasNames&&(this.x=s.xAxis.nameToX(this)),typeof this.x>"u"&&s?this.x=typeof y>"u"?s.autoIncrement():y:_(o.x)&&s.options.relativeXValue&&(this.x=s.autoIncrement(o.x)),this},l.prototype.destroy=function(){function o(){for(T in(y.graphic||y.graphics||y.dataLabel||y.dataLabels)&&(w(y),y.destroyElements()),y)y[T]=null}var y=this,s=y.series,r=s.chart;s=s.options.dataSorting;var T,d=r.hoverPoints,p=V(y.series.chart.renderer.globalAnimation);y.legendItem&&r.legend.destroyItem(y),d&&(y.setState(),k(d,y),d.length||(r.hoverPoints=null)),y===r.hoverPoint&&y.onMouseOut(),s&&s.enabled?(this.animateBeforeDestroy(),x(o,p.duration)):o(),r.pointCount--},l.prototype.destroyElements=function(o){var y=this;(o=y.getGraphicalProps(o)).singular.forEach(function(s){y[s]=y[s].destroy()}),o.plural.forEach(function(s){y[s].forEach(function(r){r&&r.element&&r.destroy()}),delete y[s]})},l.prototype.firePointEvent=function(o,y,s){var r=this,d=this.series.options;(d.point.events[o]||r.options&&r.options.events&&r.options.events[o])&&r.importEvents(),"click"===o&&d.allowPointSelect&&(s=function(p){r.select&&r.select(null,p.ctrlKey||p.metaKey||p.shiftKey)}),m(r,o,y,s)},l.prototype.getClassName=function(){return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(typeof this.colorIndex<"u"?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(this.zone&&this.zone.className?" "+this.zone.className.replace("highcharts-negative",""):"")},l.prototype.getGraphicalProps=function(o){var d,y=this,s=[],r={singular:[],plural:[]};for((o=o||{graphic:1,dataLabel:1}).graphic&&s.push("graphic","shadowGroup"),o.dataLabel&&s.push("dataLabel","dataLabelPath","dataLabelUpper","connector"),d=s.length;d--;){var p=s[d];y[p]&&r.singular.push(p)}return["graphic","dataLabel","connector"].forEach(function(T){var U=T+"s";o[T]&&y[U]&&r.plural.push(U)}),r},l.prototype.getLabelConfig=function(){return{x:this.category,y:this.y,color:this.color,colorIndex:this.colorIndex,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},l.prototype.getNestedProperty=function(o){if(o)return 0===o.indexOf("custom.")?a(o,this.options):this[o]},l.prototype.getZone=function(){var o=this.series,y=o.zones;o=o.zoneAxis||"y";var s,r=0;for(s=y[r];this[o]>=s.value;)s=y[++r];return this.nonZonedColor||(this.nonZonedColor=this.color),this.color=s&&s.color&&!this.options.color?s.color:this.nonZonedColor,s},l.prototype.hasNewShapeType=function(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType},l.prototype.init=function(o,y,s){return this.series=o,this.applyOptions(y,s),this.id=Z(this.id)?this.id:h(),this.resolveColor(),o.chart.pointCount++,m(this,"afterInit"),this},l.prototype.isValid=function(){return null!==this.x&&_(this.y)},l.prototype.optionsToObject=function(o){var y=this.series,s=y.options.keys,r=s||y.pointArrayMap||["y"],d=r.length,p={},T=0,U=0;if(_(o)||null===o)p[r[0]]=o;else if(c(o))for(!s&&o.length>d&&("string"==(y=typeof o[0])?p.name=o[0]:"number"===y&&(p.x=o[0]),T++);U<d;)s&&typeof o[T]>"u"||(0<r[U].indexOf(".")?l.prototype.setNestedProperty(p,o[T],r[U]):p[r[U]]=o[T]),T++,U++;else"object"==typeof o&&(p=o,o.dataLabels&&(y._hasPointLabels=!0),o.marker&&(y._hasPointMarkers=!0));return p},l.prototype.pos=function(o,y){void 0===y&&(y=this.plotY);var s=this.plotX,r=this.series,d=r.chart,p=r.xAxis;r=r.yAxis;var T=0,U=0;if(_(s)&&_(y))return o&&(T=p?p.pos:d.plotLeft,U=r?r.pos:d.plotTop),d.inverted&&p&&r?[r.len-y+U,p.len-s+T]:[s+T,y+U]},l.prototype.resolveColor=function(){var o=this.series,y=o.chart.styledMode,s=o.chart.options.chart.colorCount;if(delete this.nonZonedColor,o.options.colorByPoint){if(!y){var r=(s=o.options.colors||o.chart.options.colors)[o.colorCounter];s=s.length}y=o.colorCounter,o.colorCounter++,o.colorCounter===s&&(o.colorCounter=0)}else y||(r=o.color),y=o.colorIndex;this.colorIndex=M(this.options.colorIndex,y),this.color=M(this.options.color,r)},l.prototype.setNestedProperty=function(o,y,s){return s.split(".").reduce(function(r,d,p,T){return r[d]=T.length-1===p?y:D(r[d],!0)?r[d]:{},r[d]},o),o},l.prototype.shouldDraw=function(){return!this.isNull},l.prototype.tooltipFormatter=function(o){var y=this.series,s=y.tooltipOptions,r=M(s.valueDecimals,""),d=s.valuePrefix||"",p=s.valueSuffix||"";return y.chart.styledMode&&(o=y.chart.tooltip.styledModeFormat(o)),(y.pointArrayMap||["y"]).forEach(function(T){T="{point."+T,(d||p)&&(o=o.replace(RegExp(T+"}","g"),d+T+"}"+p)),o=o.replace(RegExp(T+"}","g"),T+":,."+r+"f}")}),P(o,{point:this,series:this.series},y.chart)},l.prototype.update=function(o,y,s,r){function d(){p.applyOptions(o);var C=U&&p.hasMockGraphic;C=null===p.y?!C:C,U&&C&&(p.graphic=U.destroy(),delete p.hasMockGraphic),D(o,!0)&&(U&&U.element&&o&&o.marker&&typeof o.marker.symbol<"u"&&(p.graphic=U.destroy()),o&&o.dataLabels&&p.dataLabel&&(p.dataLabel=p.dataLabel.destroy()),p.connector&&(p.connector=p.connector.destroy())),T.updateParallelArrays(p,v=p.index),O.data[v]=D(O.data[v],!0)||D(o,!0)?p.options:M(o,O.data[v]),T.isDirty=T.isDirtyData=!0,!T.fixedBox&&T.hasCartesianSeries&&(G.isDirtyBox=!0),"point"===O.legendType&&(G.isDirtyLegend=!0),y&&G.redraw(s)}var v,p=this,T=p.series,U=p.graphic,G=T.chart,O=T.options;y=M(y,!0),!1===r?d():p.firePointEvent("update",{options:o},d)},l.prototype.remove=function(o,y){this.series.removePoint(this.series.data.indexOf(this),o,y)},l.prototype.select=function(o,y){var s=this,r=s.series,d=r.chart;this.selectedStaging=o=M(o,!s.selected),s.firePointEvent(o?"select":"unselect",{accumulate:y},function(){s.selected=s.options.selected=o,r.options.data[r.data.indexOf(s)]=s.options,s.setState(o&&"select"),y||d.getSelectedPoints().forEach(function(p){var T=p.series;p.selected&&p!==s&&(p.selected=p.options.selected=!1,T.options.data[T.data.indexOf(p)]=p.options,p.setState(d.hoverPoints&&T.options.inactiveOtherPoints?"inactive":""),p.firePointEvent("unselect"))})}),delete this.selectedStaging},l.prototype.onMouseOver=function(o){var y=this.series.chart,s=y.pointer;o=o?s.normalize(o):s.getChartCoordinatesFromPoint(this,y.inverted),s.runPointActions(o,this)},l.prototype.onMouseOut=function(){var o=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(o.hoverPoints||[]).forEach(function(y){y.setState()}),o.hoverPoints=o.hoverPoint=null},l.prototype.importEvents=function(){if(!this.hasImportedEvents){var o=this,y=t(o.series.options.point,o.options).events;o.events=y,B(y,function(s,r){u(s)&&S(o,r,s)}),this.hasImportedEvents=!0}},l.prototype.setState=function(o,y){var J,s=this.series,r=this.state,d=s.options.states[o||"normal"]||{},p=W.plotOptions[s.type].marker&&s.options.marker,U=p&&p.states&&p.states[o||"normal"]||{},O=this.marker||{},v=s.chart,C=p&&s.markerAttribs,q=s.halo,R=s.stateMarkerGraphic;if(!((o=o||"")===this.state&&!y||this.selected&&"select"!==o||!1===d.enabled||o&&(!1===U.enabled||p&&!1===p.enabled&&!1===U.enabled)||o&&O.states&&O.states[o]&&!1===O.states[o].enabled)){if(this.state=o,C&&(J=s.markerAttribs(this,o)),this.graphic&&!this.hasMockGraphic){if(r&&this.graphic.removeClass("highcharts-point-"+r),o&&this.graphic.addClass("highcharts-point-"+o),!v.styledMode){r=s.pointAttribs(this,o);var A=M(v.options.chart.animation,d.animation),N=r.opacity;s.options.inactiveOtherPoints&&_(N)&&((this.dataLabels||[]).forEach(function(E){E&&!E.hasClass("highcharts-data-label-hidden")&&E.animate({opacity:N},A)}),this.connector&&this.connector.animate({opacity:N},A)),this.graphic.animate(r,A)}J&&this.graphic.animate(J,M(v.options.chart.animation,U.animation,p.animation)),R&&R.hide()}else o&&U&&(p=O.symbol||s.symbol,R&&R.currentSymbol!==p&&(R=R.destroy()),J&&(R?R[y?"animate":"attr"]({x:J.x,y:J.y}):p&&(s.stateMarkerGraphic=R=v.renderer.symbol(p,J.x,J.y,J.width,J.height).add(s.markerGroup),R.currentSymbol=p)),!v.styledMode&&R&&"inactive"!==this.state&&R.attr(s.pointAttribs(this,o))),R&&(R[o&&this.isInside?"show":"hide"](),R.element.point=this,R.addClass(this.getClassName(),!0));J=(R=this.graphic||R)&&R.visibility||"inherit",(d=d.halo)&&d.size&&R&&"hidden"!==J&&!this.isCluster?(q||(s.halo=q=v.renderer.path().add(R.parentGroup)),q.show()[y?"animate":"attr"]({d:this.haloPath(d.size)}),q.attr({class:"highcharts-halo highcharts-color-"+M(this.colorIndex,s.colorIndex)+(this.className?" "+this.className:""),visibility:J,zIndex:-1}),q.point=this,v.styledMode||q.attr(b({fill:this.color||s.color,"fill-opacity":d.opacity},Y.filterUserAttributes(d.attributes||{})))):q&&q.point&&q.point.haloPath&&q.animate({d:q.point.haloPath(0)},null,q.hide),m(this,"afterSetState",{state:o})}},l.prototype.haloPath=function(o){var y=this.pos();return y?this.series.chart.renderer.symbols.circle(Math.floor(y[0])-o,y[1]-o,2*o,2*o):[]},l}()}),j(ot,"Core/Pointer.js",[ot["Core/Color/Color.js"],ot["Core/Globals.js"],ot["Core/Tooltip.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var tt=Y.parse,V=H.charts,W=H.noop,P=z.addEvent,S=z.attr,Z=z.css,k=z.defined,b=z.extend,m=z.find,a=z.fireEvent,c=z.isNumber,u=z.isObject,_=z.objectEach,D=z.offset,t=z.pick,B=z.splat;return function(){function M(x,w){this.lastValidTouch={},this.pinchDown=[],this.runChartClick=!1,this.eventsToUnbind=[],this.chart=x,this.hasDragged=!1,this.options=w,this.init(x,w)}return M.prototype.applyInactiveState=function(x){var h,w=[];(x||[]).forEach(function(l){w.push(h=l.series),h.linkedParent&&w.push(h.linkedParent),h.linkedSeries&&(w=w.concat(h.linkedSeries)),h.navigatorSeries&&w.push(h.navigatorSeries)}),this.chart.series.forEach(function(l){-1===w.indexOf(l)?l.setState("inactive",!0):l.options.inactiveOtherPoints&&l.setAllPointsToState("inactive")})},M.prototype.destroy=function(){var x=this;this.eventsToUnbind.forEach(function(w){return w()}),this.eventsToUnbind=[],H.chartCount||(M.unbindDocumentMouseUp&&(M.unbindDocumentMouseUp=M.unbindDocumentMouseUp()),M.unbindDocumentTouchEnd&&(M.unbindDocumentTouchEnd=M.unbindDocumentTouchEnd())),clearInterval(x.tooltipTimeout),_(x,function(w,h){x[h]=void 0})},M.prototype.getSelectionMarkerAttrs=function(x,w){var h=this,l={args:{chartX:x,chartY:w},attrs:{},shapeType:"rect"};return a(this,"getSelectionMarkerAttrs",l,function(o){var y=h.chart,s=h.mouseDownX;s=void 0===s?0:s;var r=h.mouseDownY;r=void 0===r?0:r;var d=h.zoomHor,p=h.zoomVert;(o=o.attrs).x=y.plotLeft,o.y=y.plotTop,o.width=d?1:y.plotWidth,o.height=p?1:y.plotHeight,d&&(y=x-s,o.width=Math.abs(y),o.x=(0<y?0:y)+s),p&&(y=w-r,o.height=Math.abs(y),o.y=(0<y?0:y)+r)}),l},M.prototype.drag=function(x){var w=this.chart,h=w.options.chart,l=w.plotLeft,o=w.plotTop,y=w.plotWidth,s=w.plotHeight,r=this.mouseDownX||0,d=this.mouseDownY||0,p=u(h.panning)?h.panning&&h.panning.enabled:h.panning,T=h.panKey&&x[h.panKey+"Key"],U=x.chartX,G=x.chartY,O=this.selectionMarker;O&&O.touch||(U<l?U=l:U>l+y&&(U=l+y),G<o?G=o:G>o+s&&(G=o+s),this.hasDragged=Math.sqrt(Math.pow(r-U,2)+Math.pow(d-G,2)),10<this.hasDragged&&(l=w.isInsidePlot(r-l,d-o,{visiblePlotOnly:!0}),U=(G=this.getSelectionMarkerAttrs(U,G)).shapeType,G=G.attrs,!w.hasCartesianSeries&&!w.mapView||!this.zoomX&&!this.zoomY||!l||T||O||(this.selectionMarker=O=w.renderer[U](),O.attr({class:"highcharts-selection-marker",zIndex:7}).add(),w.styledMode||O.attr({fill:h.selectionMarkerFill||tt("#335cad").setOpacity(.25).get()})),O&&O.attr(G),l&&!O&&p&&w.pan(x,h.panning)))},M.prototype.dragStart=function(x){var w=this.chart;w.mouseIsDown=x.type,w.cancelClick=!1,w.mouseDownX=this.mouseDownX=x.chartX,w.mouseDownY=this.mouseDownY=x.chartY},M.prototype.getSelectionBox=function(x){var w={args:{marker:x},result:{}};return a(this,"getSelectionBox",w,function(h){h.result={x:x.attr?+x.attr("x"):x.x,y:x.attr?+x.attr("y"):x.y,width:x.attr?x.attr("width"):x.width,height:x.attr?x.attr("height"):x.height}}),w.result},M.prototype.drop=function(x){var w=this,h=this.chart,l=this.hasPinched;if(this.selectionMarker){var o=this.getSelectionBox(this.selectionMarker),y=o.x,s=o.y,r=o.width,d=o.height,p={originalEvent:x,xAxis:[],yAxis:[],x:y,y:s,width:r,height:d},T=!!h.mapView;(this.hasDragged||l)&&(h.axes.forEach(function(U){if(U.zoomEnabled&&k(U.min)&&(l||w[{xAxis:"zoomX",yAxis:"zoomY"}[U.coll]])&&c(y)&&c(s)&&c(r)&&c(d)){var G=U.horiz,O="touchend"===x.type?U.minPixelPadding:0,v=U.toValue((G?y:s)+O);G=U.toValue((G?y+r:s+d)-O),p[U.coll].push({axis:U,min:Math.min(v,G),max:Math.max(v,G)}),T=!0}}),T&&a(h,"selection",p,function(U){h.zoom(b(U,l?{animation:!1}:null))})),c(h.index)&&(this.selectionMarker=this.selectionMarker.destroy()),l&&this.scaleGroups()}h&&c(h.index)&&(Z(h.container,{cursor:h._cursor}),h.cancelClick=10<this.hasDragged,h.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},M.prototype.findNearestKDPoint=function(x,w,h){var l;return x.forEach(function(o){var y=!(o.noSharedTooltip&&w)&&0>o.options.findNearestPointBy.indexOf("y");if(o=o.searchPoint(h,y),(y=u(o,!0)&&o.series)&&!(y=!u(l,!0))){var s=l.dist-o.dist,r=(o.series.group&&o.series.group.zIndex)-(l.series.group&&l.series.group.zIndex);y=0<(0!=(y=l.distX-o.distX)&&w?y:0!==s?s:0!==r?r:l.series.index>o.series.index?-1:1)}y&&(l=o)}),l},M.prototype.getChartCoordinatesFromPoint=function(x,w){var h=x.series,l=h.xAxis;h=h.yAxis;var o=x.shapeArgs;if(l&&h){var y=t(x.clientX,x.plotX),s=x.plotY||0;return x.isNode&&o&&c(o.x)&&c(o.y)&&(y=o.x,s=o.y),w?{chartX:h.len+h.pos-s,chartY:l.len+l.pos-y}:{chartX:y+l.pos,chartY:s+h.pos}}if(o&&o.x&&o.y)return{chartX:o.x,chartY:o.y}},M.prototype.getChartPosition=function(){if(this.chartPosition)return this.chartPosition;var x=this.chart.container,w=D(x);this.chartPosition={left:w.left,top:w.top,scaleX:1,scaleY:1};var h=x.offsetWidth;return x=x.offsetHeight,2<h&&2<x&&(this.chartPosition.scaleX=w.width/h,this.chartPosition.scaleY=w.height/x),this.chartPosition},M.prototype.getCoordinates=function(x){var w={xAxis:[],yAxis:[]};return this.chart.axes.forEach(function(h){w[h.isXAxis?"xAxis":"yAxis"].push({axis:h,value:h.toValue(x[h.horiz?"chartX":"chartY"])})}),w},M.prototype.getHoverData=function(x,w,h,l,o,y){var s=[];l=!(!l||!x);var r=function(U){return U.visible&&!(!o&&U.directTouch)&&t(U.options.enableMouseTracking,!0)},d={chartX:y?y.chartX:void 0,chartY:y?y.chartY:void 0,shared:o};a(this,"beforeGetHoverData",d);var p=w&&!w.stickyTracking?[w]:h.filter(function(U){return U.stickyTracking&&(d.filter||r)(U)}),T=l||!y?x:this.findNearestKDPoint(p,o,y);return w=T&&T.series,T&&(o&&!w.noSharedTooltip?(p=h.filter(function(U){return d.filter?d.filter(U):r(U)&&!U.noSharedTooltip})).forEach(function(U){var G=m(U.points,function(O){return O.x===T.x&&!O.isNull});u(G)&&(U.boosted&&U.boost&&(G=U.boost.getPoint(G)),s.push(G))}):s.push(T)),a(this,"afterGetHoverData",d={hoverPoint:T}),{hoverPoint:d.hoverPoint,hoverSeries:w,hoverPoints:s}},M.prototype.getPointFromEvent=function(x){x=x.target;for(var w;x&&!w;)w=x.point,x=x.parentNode;return w},M.prototype.onTrackerMouseOut=function(x){x=x.relatedTarget||x.toElement;var w=this.chart.hoverSeries;this.isDirectTouch=!1,!w||!x||w.stickyTracking||this.inClass(x,"highcharts-tooltip")||this.inClass(x,"highcharts-series-"+w.index)&&this.inClass(x,"highcharts-tracker")||w.onMouseOut()},M.prototype.inClass=function(x,w){for(var h;x;){if(h=S(x,"class")){if(-1!==h.indexOf(w))return!0;if(-1!==h.indexOf("highcharts-container"))return!1}x=x.parentElement}},M.prototype.init=function(x,w){this.options=w,this.chart=x,this.runChartClick=!(!w.chart.events||!w.chart.events.click),this.pinchDown=[],this.lastValidTouch={},X&&(x.tooltip=new X(x,w.tooltip)),this.setDOMEvents()},M.prototype.normalize=function(x,w){var h=x.touches,l=h?h.length?h.item(0):t(h.changedTouches,x.changedTouches)[0]:x;return w||(w=this.getChartPosition()),h=l.pageX-w.left,l=l.pageY-w.top,h/=w.scaleX,l/=w.scaleY,b(x,{chartX:Math.round(h),chartY:Math.round(l)})},M.prototype.onContainerClick=function(x){var w=this.chart,h=w.hoverPoint;x=this.normalize(x);var l=w.plotLeft,o=w.plotTop;w.cancelClick||(h&&this.inClass(x.target,"highcharts-tracker")?(a(h.series,"click",b(x,{point:h})),w.hoverPoint&&h.firePointEvent("click",x)):(b(x,this.getCoordinates(x)),w.isInsidePlot(x.chartX-l,x.chartY-o,{visiblePlotOnly:!0})&&a(w,"click",x)))},M.prototype.onContainerMouseDown=function(x){var w=1==(1&(x.buttons||x.button));x=this.normalize(x),H.isFirefox&&0!==x.button&&this.onContainerMouseMove(x),(typeof x.button>"u"||w)&&(this.zoomOption(x),w&&x.preventDefault&&x.preventDefault(),this.dragStart(x))},M.prototype.onContainerMouseLeave=function(x){var w=V[t(M.hoverChartIndex,-1)],h=this.chart.tooltip;x=this.normalize(x),w&&(x.relatedTarget||x.toElement)&&(w.pointer.reset(),w.pointer.chartPosition=void 0),h&&!h.isHidden&&this.reset()},M.prototype.onContainerMouseEnter=function(x){delete this.chartPosition},M.prototype.onContainerMouseMove=function(x){var w=this.chart,h=w.tooltip;x=this.normalize(x),this.setHoverChartIndex(),x.preventDefault||(x.returnValue=!1),("mousedown"===w.mouseIsDown||this.touchSelect(x))&&this.drag(x),w.openMenu||!this.inClass(x.target,"highcharts-tracker")&&!w.isInsidePlot(x.chartX-w.plotLeft,x.chartY-w.plotTop,{visiblePlotOnly:!0})||h&&h.shouldStickOnContact(x)||(this.inClass(x.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(x))},M.prototype.onDocumentTouchEnd=function(x){var w=V[t(M.hoverChartIndex,-1)];w&&w.pointer.drop(x)},M.prototype.onContainerTouchMove=function(x){this.touchSelect(x)?this.onContainerMouseMove(x):this.touch(x)},M.prototype.onContainerTouchStart=function(x){this.touchSelect(x)?this.onContainerMouseDown(x):(this.zoomOption(x),this.touch(x,!0))},M.prototype.onDocumentMouseMove=function(x){var w=this.chart,h=w.tooltip,l=this.chartPosition;x=this.normalize(x,l),!l||w.isInsidePlot(x.chartX-w.plotLeft,x.chartY-w.plotTop,{visiblePlotOnly:!0})||h&&h.shouldStickOnContact(x)||this.inClass(x.target,"highcharts-tracker")||this.reset()},M.prototype.onDocumentMouseUp=function(x){var w=V[t(M.hoverChartIndex,-1)];w&&w.pointer.drop(x)},M.prototype.pinch=function(x){var w=this,h=w.chart,l=w.pinchDown,o=x.touches||[],y=o.length,s=w.lastValidTouch,r=w.hasZoom,d={},p=1===y&&(w.inClass(x.target,"highcharts-tracker")&&h.runTrackerClick||w.runChartClick),T={},U=w.chart.tooltip;U=1===y&&t(U&&U.options.followTouchMove,!0);var G=w.selectionMarker;1<y?w.initiated=!0:U&&(w.initiated=!1),r&&w.initiated&&!p&&!1!==x.cancelable&&x.preventDefault(),[].map.call(o,function(O){return w.normalize(O)}),"touchstart"===x.type?([].forEach.call(o,function(O,v){l[v]={chartX:O.chartX,chartY:O.chartY}}),s.x=[l[0].chartX,l[1]&&l[1].chartX],s.y=[l[0].chartY,l[1]&&l[1].chartY],h.axes.forEach(function(O){if(O.zoomEnabled){var v=h.bounds[O.horiz?"h":"v"],C=O.minPixelPadding,q=O.toPixels(Math.min(t(O.options.min,O.dataMin),O.dataMin)),J=O.toPixels(Math.max(t(O.options.max,O.dataMax),O.dataMax)),R=Math.max(q,J);v.min=Math.min(O.pos,Math.min(q,J)-C),v.max=Math.max(O.pos+O.len,R+C)}}),w.res=!0):U?this.runPointActions(w.normalize(x)):l.length&&(a(h,"touchpan",{originalEvent:x},function(){G||(w.selectionMarker=G=b({destroy:W,touch:!0},h.plotBox)),w.pinchTranslate(l,o,d,G,T,s),w.hasPinched=r,w.scaleGroups(d,T)}),w.res&&(w.res=!1,this.reset(!1,0)))},M.prototype.pinchTranslate=function(x,w,h,l,o,y){this.zoomHor&&this.pinchTranslateDirection(!0,x,w,h,l,o,y),this.zoomVert&&this.pinchTranslateDirection(!1,x,w,h,l,o,y)},M.prototype.pinchTranslateDirection=function(x,w,h,l,o,y,s,r){var d=this.chart,p=x?"x":"y",T=x?"X":"Y",U="chart"+T,G=x?"width":"height",O=d["plot"+(x?"Left":"Top")],v=d.inverted,C=d.bounds[x?"h":"v"],q=1===w.length,J=w[0][U],R=!q&&w[1][U];w=function(){"number"==typeof Q&&20<Math.abs(J-R)&&(E=r||Math.abs(K-Q)/Math.abs(J-R)),N=(O-K)/E+J,A=d["plot"+(x?"Width":"Height")]/E};var A,N,E=r||1,K=h[0][U],Q=!q&&h[1][U];if(w(),(h=N)<C.min){h=C.min;var et=!0}else h+A>C.max&&(h=C.max-A,et=!0);et?(K-=.8*(K-s[p][0]),"number"==typeof Q&&(Q-=.8*(Q-s[p][1])),w()):s[p]=[K,Q],v||(y[p]=N-O,y[G]=A),y=v?1/E:E,o[G]=A,o[p]=h,l[v?x?"scaleY":"scaleX":"scale"+T]=E,l["translate"+T]=y*O+(K-y*J)},M.prototype.reset=function(x,w){var h=this.chart,l=h.hoverSeries,o=h.hoverPoint,y=h.hoverPoints,s=h.tooltip,r=s&&s.shared?y:o;x&&r&&B(r).forEach(function(d){d.series.isCartesian&&typeof d.plotX>"u"&&(x=!1)}),x?s&&r&&B(r).length&&(s.refresh(r),s.shared&&y?y.forEach(function(d){d.setState(d.state,!0),d.series.isCartesian&&(d.series.xAxis.crosshair&&d.series.xAxis.drawCrosshair(null,d),d.series.yAxis.crosshair&&d.series.yAxis.drawCrosshair(null,d))}):o&&(o.setState(o.state,!0),h.axes.forEach(function(d){d.crosshair&&o.series[d.coll]===d&&d.drawCrosshair(null,o)}))):(o&&o.onMouseOut(),y&&y.forEach(function(d){d.setState()}),l&&l.onMouseOut(),s&&s.hide(w),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),h.axes.forEach(function(d){d.hideCrosshair()}),this.hoverX=h.hoverPoints=h.hoverPoint=null)},M.prototype.runPointActions=function(x,w,h){var l=this.chart,o=l.tooltip&&l.tooltip.options.enabled?l.tooltip:void 0,y=!!o&&o.shared,s=w||l.hoverPoint,r=s&&s.series||l.hoverSeries;w=this.getHoverData(s,r,l.series,(!x||"touchmove"!==x.type)&&(!!w||r&&r.directTouch&&this.isDirectTouch),y,x),s=w.hoverPoint;var d=w.hoverPoints;w=(r=w.hoverSeries)&&r.tooltipOptions.followPointer&&!r.tooltipOptions.split;var p=y&&r&&!r.noSharedTooltip;if(s&&(h||s!==l.hoverPoint||o&&o.isHidden)){if((l.hoverPoints||[]).forEach(function(T){-1===d.indexOf(T)&&T.setState()}),l.hoverSeries!==r&&r.onMouseOver(),this.applyInactiveState(d),(d||[]).forEach(function(T){T.setState("hover")}),l.hoverPoint&&l.hoverPoint.firePointEvent("mouseOut"),!s.series)return;l.hoverPoints=d,l.hoverPoint=s,s.firePointEvent("mouseOver",void 0,function(){o&&s&&o.refresh(p?d:s,x)})}else w&&o&&!o.isHidden&&(h=o.getAnchor([{}],x),l.isInsidePlot(h[0],h[1],{visiblePlotOnly:!0})&&o.updatePosition({plotX:h[0],plotY:h[1]}));this.unDocMouseMove||(this.unDocMouseMove=P(l.container.ownerDocument,"mousemove",function(T){var U=V[M.hoverChartIndex];U&&U.pointer.onDocumentMouseMove(T)}),this.eventsToUnbind.push(this.unDocMouseMove)),l.axes.forEach(function(T){var G,U=t((T.crosshair||{}).snap,!0);U&&((G=l.hoverPoint)&&G.series[T.coll]===T||(G=m(d,function(O){return O.series&&O.series[T.coll]===T}))),G||!U?T.drawCrosshair(x,G):T.hideCrosshair()})},M.prototype.scaleGroups=function(x,w){var h=this.chart;h.series.forEach(function(l){var o=x||l.getPlotBox();l.group&&(l.xAxis&&l.xAxis.zoomEnabled||h.mapView)&&(l.group.attr(o),l.markerGroup&&(l.markerGroup.attr(o),l.markerGroup.clip(w?h.clipRect:null)),l.dataLabelsGroup&&l.dataLabelsGroup.attr(o))}),h.clipRect.attr(w||h.clipBox)},M.prototype.setDOMEvents=function(){var x=this,w=this.chart.container,h=w.ownerDocument;w.onmousedown=this.onContainerMouseDown.bind(this),w.onmousemove=this.onContainerMouseMove.bind(this),w.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(P(w,"mouseenter",this.onContainerMouseEnter.bind(this))),this.eventsToUnbind.push(P(w,"mouseleave",this.onContainerMouseLeave.bind(this))),M.unbindDocumentMouseUp||(M.unbindDocumentMouseUp=P(h,"mouseup",this.onDocumentMouseUp.bind(this)));for(var l=this.chart.renderTo.parentElement;l&&"BODY"!==l.tagName;)this.eventsToUnbind.push(P(l,"scroll",function(){delete x.chartPosition})),l=l.parentElement;H.hasTouch&&(this.eventsToUnbind.push(P(w,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1})),this.eventsToUnbind.push(P(w,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),M.unbindDocumentTouchEnd||(M.unbindDocumentTouchEnd=P(h,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})))},M.prototype.setHoverChartIndex=function(){var x=this.chart,w=H.charts[t(M.hoverChartIndex,-1)];w&&w!==x&&w.pointer.onContainerMouseLeave({relatedTarget:x.container}),w&&w.mouseIsDown||(M.hoverChartIndex=x.index)},M.prototype.touch=function(x,w){var h=this.chart;if(this.setHoverChartIndex(),1===x.touches.length)if(x=this.normalize(x),h.isInsidePlot(x.chartX-h.plotLeft,x.chartY-h.plotTop,{visiblePlotOnly:!0})&&!h.openMenu){if(w&&this.runPointActions(x),"touchmove"===x.type)var o=!!(w=this.pinchDown)[0]&&4<=Math.sqrt(Math.pow(w[0].chartX-x.chartX,2)+Math.pow(w[0].chartY-x.chartY,2));t(o,!0)&&this.pinch(x)}else w&&this.reset();else 2===x.touches.length&&this.pinch(x)},M.prototype.touchSelect=function(x){return!(!this.chart.options.chart.zooming.singleTouch||!x.touches||1!==x.touches.length)},M.prototype.zoomOption=function(x){var w=this.chart,h=w.options.chart;w=w.inverted;var l=h.zooming.type||"";/touch/.test(x.type)&&(l=t(h.zooming.pinchType,l)),this.zoomX=x=/x/.test(l),this.zoomY=h=/y/.test(l),this.zoomHor=x&&!w||h&&w,this.zoomVert=h&&!w||x&&w,this.hasZoom=x||h},M}()}),j(ot,"Core/MSPointer.js",[ot["Core/Globals.js"],ot["Core/Pointer.js"],ot["Core/Utilities.js"]],function(Y,H,X){function z(){var D=[];return D.item=function(t){return this[t]},m(u,function(t){D.push({pageX:t.pageX,pageY:t.pageY,target:t.target})}),D}function tt(D,t,B,M){var x=W[H.hoverChartIndex||NaN];"touch"!==D.pointerType&&D.pointerType!==D.MSPOINTER_TYPE_TOUCH||!x||(x=x.pointer,M(D),x[t]({type:B,target:D.currentTarget,preventDefault:S,touches:z()}))}var D,V=this&&this.__extends||(D=function(t,B){return(D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,x){M.__proto__=x}||function(M,x){for(var w in x)x.hasOwnProperty(w)&&(M[w]=x[w])})(t,B)},function(t,B){function M(){this.constructor=t}D(t,B),t.prototype=null===B?Object.create(B):(M.prototype=B.prototype,new M)}),W=Y.charts,P=Y.doc,S=Y.noop,Z=Y.win,k=X.addEvent,b=X.css,m=X.objectEach,a=X.pick,c=X.removeEvent,u={},_=!!Z.PointerEvent;return function(D){function t(){return null!==D&&D.apply(this,arguments)||this}return V(t,D),t.isRequired=function(){return!(Y.hasTouch||!Z.PointerEvent&&!Z.MSPointerEvent)},t.prototype.batchMSEvents=function(B){B(this.chart.container,_?"pointerdown":"MSPointerDown",this.onContainerPointerDown),B(this.chart.container,_?"pointermove":"MSPointerMove",this.onContainerPointerMove),B(P,_?"pointerup":"MSPointerUp",this.onDocumentPointerUp)},t.prototype.destroy=function(){this.batchMSEvents(c),D.prototype.destroy.call(this)},t.prototype.init=function(B,M){D.prototype.init.call(this,B,M),this.hasZoom&&b(B.container,{"-ms-touch-action":"none","touch-action":"none"})},t.prototype.onContainerPointerDown=function(B){tt(B,"onContainerTouchStart","touchstart",function(M){u[M.pointerId]={pageX:M.pageX,pageY:M.pageY,target:M.currentTarget}})},t.prototype.onContainerPointerMove=function(B){tt(B,"onContainerTouchMove","touchmove",function(M){u[M.pointerId]={pageX:M.pageX,pageY:M.pageY},u[M.pointerId].target||(u[M.pointerId].target=M.currentTarget)})},t.prototype.onDocumentPointerUp=function(B){tt(B,"onDocumentTouchEnd","touchend",function(M){delete u[M.pointerId]})},t.prototype.setDOMEvents=function(){var B=this.chart.tooltip;D.prototype.setDOMEvents.call(this),(this.hasZoom||a(B&&B.options.followTouchMove,!0))&&this.batchMSEvents(k)},t}(H)}),j(ot,"Core/Legend/Legend.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/FormatUtilities.js"],ot["Core/Globals.js"],ot["Core/Series/Point.js"],ot["Core/Renderer/RendererUtilities.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V){var W=Y.animObject,P=Y.setAnimation,S=H.format,Z=X.marginNames,k=tt.distribute,b=V.addEvent,m=V.createElement,a=V.css,c=V.defined,u=V.discardElement,_=V.find,D=V.fireEvent,t=V.isNumber,B=V.merge,M=V.pick,x=V.relativeLength,w=V.stableSort,h=V.syncTimeout;return function(){function l(o,y){this.allItems=[],this.contentGroup=this.box=void 0,this.display=!1,this.group=void 0,this.offsetWidth=this.maxLegendWidth=this.maxItemWidth=this.legendWidth=this.legendHeight=this.lastLineHeight=this.lastItemY=this.itemY=this.itemX=this.itemMarginTop=this.itemMarginBottom=this.itemHeight=this.initialItemY=0,this.options=void 0,this.padding=0,this.pages=[],this.proximate=!1,this.scrollGroup=void 0,this.widthOption=this.totalItemWidth=this.titleHeight=this.symbolWidth=this.symbolHeight=0,this.chart=o,this.init(o,y)}return l.prototype.init=function(o,y){this.chart=o,this.setOptions(y),y.enabled&&(this.render(),b(this.chart,"endResize",function(){this.legend.positionCheckboxes()}),this.proximate?this.unchartrender=b(this.chart,"render",function(){this.legend.proximatePositions(),this.legend.positionItems()}):this.unchartrender&&this.unchartrender())},l.prototype.setOptions=function(o){var y=M(o.padding,8);this.options=o,this.chart.styledMode||(this.itemStyle=o.itemStyle,this.itemHiddenStyle=B(this.itemStyle,o.itemHiddenStyle)),this.itemMarginTop=o.itemMarginTop||0,this.itemMarginBottom=o.itemMarginBottom||0,this.padding=y,this.initialItemY=y-5,this.symbolWidth=M(o.symbolWidth,16),this.pages=[],this.proximate="proximate"===o.layout&&!this.chart.inverted,this.baseline=void 0},l.prototype.update=function(o,y){var s=this.chart;this.setOptions(B(!0,this.options,o)),this.destroy(),s.isDirtyLegend=s.isDirtyBox=!0,M(y,!0)&&s.redraw(),D(this,"afterUpdate")},l.prototype.colorizeItem=function(o,y){var s=o.legendItem||{},r=s.group,d=s.label,p=s.line;if(s=s.symbol,r&&r[y?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){var T=this.options;r=this.itemHiddenStyle.color,T=y?T.itemStyle.color:r;var U=y&&o.color||r,G=o.options&&o.options.marker,O={fill:U};d&&d.css({fill:T,color:T}),p&&p.attr({stroke:U}),s&&(G&&s.isMarker&&(O=o.pointAttribs(),y||(O.stroke=O.fill=r)),s.attr(O))}D(this,"afterColorizeItem",{item:o,visible:y})},l.prototype.positionItems=function(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()},l.prototype.positionItem=function(o){var y=this,s=o.legendItem||{},r=s.group,d=s.x;d=void 0===d?0:d,s=void 0===(s=s.y)?0:s;var p=this.options,T=p.symbolPadding,U=!p.rtl;p=o.checkbox,r&&r.element&&(T={translateX:U?d:this.legendWidth-d-2*T-4,translateY:s},r[c(r.translateY)?"animate":"attr"](T,void 0,function(){D(y,"afterPositionItem",{item:o})})),p&&(p.x=d,p.y=s)},l.prototype.destroyItem=function(o){for(var y=o.checkbox,s=o.legendItem||{},r=0,d=["group","label","line","symbol"];r<d.length;r++){var p=d[r];s[p]&&(s[p]=s[p].destroy())}y&&u(y),o.legendItem=void 0},l.prototype.destroy=function(){for(var o=0,y=this.getAllItems();o<y.length;o++)this.destroyItem(y[o]);for(o=0,y="clipRect up down pager nav box title group".split(" ");o<y.length;o++){var s=y[o];this[s]&&(this[s]=this[s].destroy())}this.display=null},l.prototype.positionCheckboxes=function(){var o=this.group&&this.group.alignAttr,y=this.clipHeight||this.legendHeight,s=this.titleHeight;if(o){var r=o.translateY;this.allItems.forEach(function(d){var p=d.checkbox;if(p){var T=r+s+p.y+(this.scrollOffset||0)+3;a(p,{left:o.translateX+d.checkboxOffset+p.x-20+"px",top:T+"px",display:this.proximate||T>r-6&&T<r+y-6?"":"none"})}},this)}},l.prototype.renderTitle=function(){var o=this.options,y=this.padding,s=o.title,r=0;s.text&&(this.title||(this.title=this.chart.renderer.label(s.text,y-3,y-4,void 0,void 0,void 0,o.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(s.style),this.title.add(this.group)),s.width||this.title.css({width:this.maxLegendWidth+"px"}),r=(o=this.title.getBBox()).height,this.offsetWidth=o.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},l.prototype.setText=function(o){var y=this.options;o.legendItem.label.attr({text:y.labelFormat?S(y.labelFormat,o,this.chart):y.labelFormatter.call(o)})},l.prototype.renderItem=function(o){var y=o.legendItem=o.legendItem||{},s=this.chart,r=s.renderer,d=this.options,p=this.symbolWidth,T=d.symbolPadding||0,U=this.itemStyle,G=this.itemHiddenStyle,O="horizontal"===d.layout?M(d.itemDistance,20):0,v=!d.rtl,C=!o.series,q=!C&&o.series.drawLegendSymbol?o.series:o,J=q.options,R=this.createCheckboxForItem&&J&&J.showCheckbox,A=d.useHTML,N=o.options.className,E=y.label;J=p+T+O+(R?20:0),E||(y.group=r.g("legend-item").addClass("highcharts-"+q.type+"-series highcharts-color-"+o.colorIndex+(N?" "+N:"")+(C?" highcharts-series-"+o.index:"")).attr({zIndex:1}).add(this.scrollGroup),y.label=E=r.text("",v?p+T:-T,this.baseline||0,A),s.styledMode||E.css(B(o.visible?U:G)),E.attr({align:v?"left":"right",zIndex:2}).add(y.group),this.baseline||(this.fontMetrics=r.fontMetrics(s.styledMode?12:U.fontSize,E),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,E.attr("y",this.baseline),this.symbolHeight=d.symbolHeight||this.fontMetrics.f,d.squareSymbol&&(this.symbolWidth=M(d.symbolWidth,Math.max(this.symbolHeight,16)),J=this.symbolWidth+T+O+(R?20:0),v&&E.attr("x",this.symbolWidth+T))),q.drawLegendSymbol(this,o),this.setItemEvents&&this.setItemEvents(o,E,A)),R&&!o.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(o),this.colorizeItem(o,o.visible),!s.styledMode&&U.width||E.css({width:(d.itemWidth||this.widthOption||s.spacingBox.width)-J+"px"}),this.setText(o),s=E.getBBox(),r=this.fontMetrics&&this.fontMetrics.h||0,o.itemWidth=o.checkboxOffset=d.itemWidth||y.labelWidth||s.width+J,this.maxItemWidth=Math.max(this.maxItemWidth,o.itemWidth),this.totalItemWidth+=o.itemWidth,this.itemHeight=o.itemHeight=Math.round(y.labelHeight||(s.height>1.5*r?s.height:r))},l.prototype.layoutItem=function(o){var y=this.options,s=this.padding,r="horizontal"===y.layout,d=o.itemHeight,p=this.itemMarginBottom,T=this.itemMarginTop,U=r?M(y.itemDistance,20):0,G=this.maxLegendWidth;y=y.alignColumns&&this.totalItemWidth>G?this.maxItemWidth:o.itemWidth;var O=o.legendItem||{};r&&this.itemX-s+y>G&&(this.itemX=s,this.lastLineHeight&&(this.itemY+=T+this.lastLineHeight+p),this.lastLineHeight=0),this.lastItemY=T+this.itemY+p,this.lastLineHeight=Math.max(d,this.lastLineHeight),O.x=this.itemX,O.y=this.itemY,r?this.itemX+=y:(this.itemY+=T+d+p,this.lastLineHeight=d),this.offsetWidth=this.widthOption||Math.max((r?this.itemX-s-(o.checkbox?0:U):y)+s,this.offsetWidth)},l.prototype.getAllItems=function(){var o=[];return this.chart.series.forEach(function(y){var s=y&&y.options;y&&M(s.showInLegend,!c(s.linkedTo)&&void 0,!0)&&(o=o.concat((y.legendItem||{}).labels||("point"===s.legendType?y.data:y)))}),D(this,"afterGetAllItems",{allItems:o}),o},l.prototype.getAlignment=function(){var o=this.options;return this.proximate?o.align.charAt(0)+"tv":o.floating?"":o.align.charAt(0)+o.verticalAlign.charAt(0)+o.layout.charAt(0)},l.prototype.adjustMargins=function(o,y){var s=this.chart,r=this.options,d=this.getAlignment();d&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(function(p,T){p.test(d)&&!c(o[T])&&(s[Z[T]]=Math.max(s[Z[T]],s.legend[(T+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][T]*r[T%2?"x":"y"]+M(r.margin,12)+y[T]+(s.titleOffset[T]||0)))})},l.prototype.proximatePositions=function(){var o=this.chart,y=[],s="left"===this.options.align;this.allItems.forEach(function(U){var G,O=s;if(U.yAxis){U.xAxis.options.reversed&&(O=!O),U.points&&(G=_(O?U.points:U.points.slice(0).reverse(),function(C){return t(C.plotY)})),O=this.itemMarginTop+U.legendItem.label.getBBox().height+this.itemMarginBottom;var v=U.yAxis.top-o.plotTop;U.visible?(G=G?G.plotY:U.yAxis.height,G+=v-.3*O):G=v+U.yAxis.height,y.push({target:G,size:O,item:U})}},this);for(var r,d=0,p=k(y,o.plotHeight);d<p.length;d++){var T=p[d];r=T.item.legendItem||{},t(T.pos)&&(r.y=o.plotTop-o.spacing[0]+T.pos)}},l.prototype.render=function(){var o=this.chart,y=o.renderer,s=this.options,r=this.padding,d=this.getAllItems(),p=this.group,T=this.box;this.itemX=r,this.itemY=this.initialItemY,this.lastItemY=this.offsetWidth=0,this.widthOption=x(s.width,o.spacingBox.width-r);var U=o.spacingBox.width-2*r-s.x;-1<["rm","lm"].indexOf(this.getAlignment().substring(0,2))&&(U/=2),this.maxLegendWidth=this.widthOption||U,p||(this.group=p=y.g("legend").addClass(s.className||"").attr({zIndex:7}).add(),this.contentGroup=y.g().attr({zIndex:1}).add(p),this.scrollGroup=y.g().add(this.contentGroup)),this.renderTitle(),w(d,function(O,v){return(O.options&&O.options.legendIndex||0)-(v.options&&v.options.legendIndex||0)}),s.reversed&&d.reverse(),this.allItems=d,this.display=U=!!d.length,this.itemHeight=this.totalItemWidth=this.maxItemWidth=this.lastLineHeight=0,d.forEach(this.renderItem,this),d.forEach(this.layoutItem,this),d=(this.widthOption||this.offsetWidth)+r;var G=this.lastItemY+this.lastLineHeight+this.titleHeight;G=this.handleOverflow(G),G+=r,T||(this.box=T=y.rect().addClass("highcharts-legend-box").attr({r:s.borderRadius}).add(p)),o.styledMode||T.attr({stroke:s.borderColor,"stroke-width":s.borderWidth||0,fill:s.backgroundColor||"none"}).shadow(s.shadow),0<d&&0<G&&T[T.placed?"animate":"attr"](T.crisp.call({},{x:0,y:0,width:d,height:G},T.strokeWidth())),p[U?"show":"hide"](),o.styledMode&&"none"===p.getStyle("display")&&(d=G=0),this.legendWidth=d,this.legendHeight=G,U&&this.align(),this.proximate||this.positionItems(),D(this,"afterRender")},l.prototype.align=function(o){void 0===o&&(o=this.chart.spacingBox);var y=this.chart,s=this.options,r=o.y;/(lth|ct|rth)/.test(this.getAlignment())&&0<y.titleOffset[0]?r+=y.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&0<y.titleOffset[2]&&(r-=y.titleOffset[2]),r!==o.y&&(o=B(o,{y:r})),y.hasRendered||(this.group.placed=!1),this.group.align(B(s,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":s.verticalAlign}),!0,o)},l.prototype.handleOverflow=function(o){var N,E,K,y=this,s=this.chart,r=s.renderer,d=this.options,p=d.y,T="top"===d.verticalAlign,U=this.padding,G=d.maxHeight,O=d.navigation,v=M(O.animation,!0),C=O.arrowSize||12,q=this.pages,J=this.allItems,R=function(rt){"number"==typeof rt?et.attr({height:rt}):et&&(y.clipRect=et.destroy(),y.contentGroup.clip()),y.contentGroup.div&&(y.contentGroup.div.style.clip=rt?"rect("+U+"px,9999px,"+(U+rt)+"px,0)":"auto")},A=function(rt){return y[rt]=r.circle(0,0,1.3*C).translate(C/2,C/2).add(Q),s.styledMode||y[rt].attr("fill","rgba(0,0,0,0.0001)"),y[rt]};p=s.spacingBox.height+(T?-p:p)-U;var Q=this.nav,et=this.clipRect;return"horizontal"!==d.layout||"middle"===d.verticalAlign||d.floating||(p/=2),G&&(p=Math.min(p,G)),q.length=0,o&&0<p&&o>p&&!1!==O.enabled?(this.clipHeight=N=Math.max(p-20-this.titleHeight-U,0),this.currentPage=M(this.currentPage,1),this.fullHeight=o,J.forEach(function(rt,at){rt=(K=rt.legendItem||{}).y||0;var lt=Math.round(K.label.getBBox().height),ft=q.length;(!ft||rt-q[ft-1]>N&&(E||rt)!==q[ft-1])&&(q.push(E||rt),ft++),K.pageIx=ft-1,E&&((J[at-1].legendItem||{}).pageIx=ft-1),at===J.length-1&&rt+lt-q[ft-1]>N&&lt<=N&&(q.push(rt),K.pageIx=ft),rt!==E&&(E=rt)}),et||(et=y.clipRect=r.clipRect(0,U,9999,0),y.contentGroup.clip(et)),R(N),Q||(this.nav=Q=r.g().attr({zIndex:1}).add(this.group),this.up=r.symbol("triangle",0,0,C,C).add(Q),A("upTracker").on("click",function(){y.scroll(-1,v)}),this.pager=r.text("",15,10).addClass("highcharts-legend-navigation"),!s.styledMode&&O.style&&this.pager.css(O.style),this.pager.add(Q),this.down=r.symbol("triangle-down",0,0,C,C).add(Q),A("downTracker").on("click",function(){y.scroll(1,v)})),y.scroll(0),o=p):Q&&(R(),this.nav=Q.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),o},l.prototype.scroll=function(o,y){var s=this,r=this.chart,d=this.pages,p=d.length,T=this.clipHeight,U=this.options.navigation,G=this.pager,O=this.padding,v=this.currentPage+o;v>p&&(v=p),0<v&&(typeof y<"u"&&P(y,r),this.nav.attr({translateX:O,translateY:T+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach(function(C){C.attr({class:1===v?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),G.attr({text:v+"/"+p}),[this.down,this.downTracker].forEach(function(C){C.attr({x:18+this.pager.getBBox().width,class:v===p?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})},this),r.styledMode||(this.up.attr({fill:1===v?U.inactiveColor:U.activeColor}),this.upTracker.css({cursor:1===v?"default":"pointer"}),this.down.attr({fill:v===p?U.inactiveColor:U.activeColor}),this.downTracker.css({cursor:v===p?"default":"pointer"})),this.scrollOffset=-d[v-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=v,this.positionCheckboxes(),o=W(M(y,r.renderer.globalAnimation,!0)),h(function(){D(s,"afterScroll",{currentPage:v})},o.duration))},l.prototype.setItemEvents=function(o,y,s){var r=this,d=o.legendItem||{},p=r.chart.renderer.boxWrapper,T=o instanceof z,U="highcharts-legend-"+(T?"point":"series")+"-active",G=r.chart.styledMode,O=function(C){r.allItems.forEach(function(q){o!==q&&[q].concat(q.linkedSeries||[]).forEach(function(J){J.setState(C,!T)})})},v=0;for(s=s?[y,d.symbol]:[d.group];v<s.length;v++)(d=s[v])&&d.on("mouseover",function(){o.visible&&O("inactive"),o.setState("hover"),o.visible&&p.addClass(U),G||y.css(r.options.itemHoverStyle)}).on("mouseout",function(){r.chart.styledMode||y.css(B(o.visible?r.itemStyle:r.itemHiddenStyle)),O(""),p.removeClass(U),o.setState()}).on("click",function(C){var q=function(){o.setVisible&&o.setVisible(),O(o.visible?"inactive":"")};p.removeClass(U),C={browserEvent:C},o.firePointEvent?o.firePointEvent("legendItemClick",C,q):D(o,"legendItemClick",C,q)})},l.prototype.createCheckboxForItem=function(o){o.checkbox=m("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:o.selected,defaultChecked:o.selected},this.options.itemCheckboxStyle,this.chart.container),b(o.checkbox,"click",function(y){D(o.series||o,"checkboxClick",{checked:y.target.checked,item:o},function(){o.select()})})},l}()}),j(ot,"Core/Series/SeriesRegistry.js",[ot["Core/Globals.js"],ot["Core/Defaults.js"],ot["Core/Series/Point.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var P,tt=H.defaultOptions,V=z.extendClass,W=z.merge;return function(S){function Z(k,b){var m=tt.plotOptions||{},a=b.defaultOptions,c=b.prototype;c.type=k,c.pointClass||(c.pointClass=X),a&&(m[k]=a),S.seriesTypes[k]=b}S.seriesTypes=Y.seriesTypes,S.registerSeriesType=Z,S.seriesType=function(k,b,m,a,c){var u=tt.plotOptions||{};return u[k]=W(u[b=b||""],m),Z(k,V(S.seriesTypes[b]||function(){},a)),S.seriesTypes[k].prototype.type=k,c&&(S.seriesTypes[k].prototype.pointClass=V(X,c)),S.seriesTypes[k]}}(P||(P={})),P}),j(ot,"Core/Chart/Chart.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Axis/Axis.js"],ot["Core/Defaults.js"],ot["Core/FormatUtilities.js"],ot["Core/Foundation.js"],ot["Core/Globals.js"],ot["Core/Legend/Legend.js"],ot["Core/MSPointer.js"],ot["Core/Pointer.js"],ot["Core/Renderer/RendererRegistry.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Renderer/SVG/SVGRenderer.js"],ot["Core/Time.js"],ot["Core/Utilities.js"],ot["Core/Renderer/HTML/AST.js"]],function(Y,H,X,z,tt,V,W,P,S,Z,k,b,m,a,c){var u=Y.animate,_=Y.animObject,D=Y.setAnimation,t=X.defaultOptions,B=X.defaultTime,M=z.numberFormat,x=tt.registerEventOptions,w=V.charts,h=V.doc,l=V.marginNames,o=V.svg,y=V.win,s=k.seriesTypes,r=a.addEvent,d=a.attr,p=a.cleanRecursively,T=a.createElement,U=a.css,G=a.defined,O=a.discardElement,v=a.erase,C=a.error,q=a.extend,J=a.find,R=a.fireEvent,A=a.getStyle,N=a.isArray,E=a.isNumber,K=a.isObject,Q=a.isString,et=a.merge,rt=a.objectEach,at=a.pick,lt=a.pInt,ft=a.relativeLength,vt=a.removeEvent,gt=a.splat,ht=a.syncTimeout,bt=a.uniqueKey;return Y=function(){function pt(it,nt,ct){this.series=this.renderTo=this.renderer=this.pointer=this.pointCount=this.plotWidth=this.plotTop=this.plotLeft=this.plotHeight=this.plotBox=this.options=this.numberFormatter=this.margin=this.legend=this.labelCollectors=this.isResizing=this.index=this.eventOptions=this.container=this.colorCounter=this.clipBox=this.chartWidth=this.chartHeight=this.bounds=this.axisOffset=this.axes=void 0,this.sharedClips={},this.yAxis=this.xAxis=this.userOptions=this.titleOffset=this.time=this.symbolCounter=this.spacingBox=this.spacing=void 0,this.getArgs(it,nt,ct)}return pt.chart=function(it,nt,ct){return new pt(it,nt,ct)},pt.prototype.getArgs=function(it,nt,ct){Q(it)||it.nodeName?(this.renderTo=it,this.init(nt,ct)):this.init(it,nt)},pt.prototype.init=function(it,nt){var ct=it.plotOptions||{};R(this,"init",{args:arguments},function(){var dt=et(t,it),mt=dt.chart;rt(dt.plotOptions,function(Ct,kt){K(Ct)&&(Ct.tooltip=ct[kt]&&et(ct[kt].tooltip)||void 0)}),dt.tooltip.userOptions=it.chart&&it.chart.forExport&&it.tooltip.userOptions||it.tooltip,this.userOptions=it,this.margin=[],this.spacing=[],this.bounds={h:{},v:{}},this.labelCollectors=[],this.callback=nt,this.isResizing=0;var yt=mt.zooming=mt.zooming||{};it.chart&&!it.chart.zooming&&(yt.resetButton=mt.resetZoomButton),yt.key=at(yt.key,mt.zoomKey),yt.pinchType=at(yt.pinchType,mt.pinchType),yt.singleTouch=at(yt.singleTouch,mt.zoomBySingleTouch),yt.type=at(yt.type,mt.zoomType),this.options=dt,this.axes=[],this.series=[],this.time=it.time&&Object.keys(it.time).length?new m(it.time):V.time,this.numberFormatter=mt.numberFormatter||M,this.styledMode=mt.styledMode,this.hasCartesianSeries=mt.showAxes,this.index=w.length,w.push(this),V.chartCount++,x(this,mt),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,R(this,"afterInit"),this.firstRender()})},pt.prototype.initSeries=function(it){var nt=this.options.chart,ct=s[nt=it.type||nt.type||nt.defaultSeriesType];return ct||C(17,!0,this,{missingModuleFor:nt}),"function"==typeof(nt=new ct).init&&nt.init(this,it),nt},pt.prototype.setSeriesData=function(){this.getSeriesOrderByLinks().forEach(function(it){it.points||it.data||!it.enabledDataSorting||it.setData(it.options.data,!1)})},pt.prototype.getSeriesOrderByLinks=function(){return this.series.concat().sort(function(it,nt){return it.linkedSeries.length||nt.linkedSeries.length?nt.linkedSeries.length-it.linkedSeries.length:0})},pt.prototype.orderSeries=function(it){var nt=this.series;it=it||0;for(var ct=nt.length;it<ct;++it)nt[it]&&(nt[it].index=it,nt[it].name=nt[it].getName())},pt.prototype.isInsidePlot=function(it,nt,ct){void 0===ct&&(ct={});var dt=this.inverted,mt=this.plotBox,yt=this.plotLeft,Ct=this.plotTop,kt=this.scrollablePlotBox,Mt=0,wt=0;ct.visiblePlotOnly&&this.scrollingContainer&&(Mt=(wt=this.scrollingContainer).scrollLeft,wt=wt.scrollTop);var Zt=ct.series;if(mt=ct.visiblePlotOnly&&kt||mt,it={x:kt=ct.inverted?nt:it,y:nt=ct.inverted?it:nt,isInsidePlot:!0,options:ct},!ct.ignoreX){var Ut=Zt&&(dt&&!this.polar?Zt.yAxis:Zt.xAxis)||{pos:yt,len:1/0};(kt=ct.paneCoordinates?Ut.pos+kt:yt+kt)>=Math.max(Mt+yt,Ut.pos)&&kt<=Math.min(Mt+yt+mt.width,Ut.pos+Ut.len)||(it.isInsidePlot=!1)}return!ct.ignoreY&&it.isInsidePlot&&(dt=ct.axis&&!ct.axis.isXAxis&&ct.axis||Zt&&(dt?Zt.xAxis:Zt.yAxis)||{pos:Ct,len:1/0},(ct=ct.paneCoordinates?dt.pos+nt:Ct+nt)>=Math.max(wt+Ct,dt.pos)&&ct<=Math.min(wt+Ct+mt.height,dt.pos+dt.len)||(it.isInsidePlot=!1)),R(this,"afterIsInsidePlot",it),it.isInsidePlot},pt.prototype.redraw=function(it){R(this,"beforeRedraw");var nt=this.hasCartesianSeries?this.axes:this.colorAxis||[],ct=this.series,dt=this.pointer,mt=this.legend,yt=this.userOptions.legend,Ct=this.renderer,kt=Ct.isHidden(),Mt=[],wt=this.isDirtyBox,Zt=this.isDirtyLegend;for(this.setResponsive&&this.setResponsive(!1),D(!!this.hasRendered&&it,this),kt&&this.temporaryDisplay(),this.layOutTitles(),it=ct.length;it--;){var Ut=ct[it];if(Ut.options.stacking||Ut.options.centerInCategory){var It=!0;if(Ut.isDirty){var Et=!0;break}}}if(Et)for(it=ct.length;it--;)(Ut=ct[it]).options.stacking&&(Ut.isDirty=!0);ct.forEach(function(Lt){Lt.isDirty&&("point"===Lt.options.legendType?("function"==typeof Lt.updateTotals&&Lt.updateTotals(),Zt=!0):yt&&(yt.labelFormatter||yt.labelFormat)&&(Zt=!0)),Lt.isDirtyData&&R(Lt,"updatedData")}),Zt&&mt&&mt.options.enabled&&(mt.render(),this.isDirtyLegend=!1),It&&this.getStacks(),nt.forEach(function(Lt){Lt.updateNames(),Lt.setScale()}),this.getMargins(),nt.forEach(function(Lt){Lt.isDirty&&(wt=!0)}),nt.forEach(function(Lt){var jt=Lt.min+","+Lt.max;Lt.extKey!==jt&&(Lt.extKey=jt,Mt.push(function(){R(Lt,"afterSetExtremes",q(Lt.eventArgs,Lt.getExtremes())),delete Lt.eventArgs})),(wt||It)&&Lt.redraw()}),wt&&this.drawChartBox(),R(this,"predraw"),ct.forEach(function(Lt){(wt||Lt.isDirty)&&Lt.visible&&Lt.redraw(),Lt.isDirtyData=!1}),dt&&dt.reset(!0),Ct.draw(),R(this,"redraw"),R(this,"render"),kt&&this.temporaryDisplay(!0),Mt.forEach(function(Lt){Lt.call()})},pt.prototype.get=function(it){function nt(yt){return yt.id===it||yt.options&&yt.options.id===it}for(var ct=this.series,dt=J(this.axes,nt)||J(this.series,nt),mt=0;!dt&&mt<ct.length;mt++)dt=J(ct[mt].points||[],nt);return dt},pt.prototype.getAxes=function(){var it=this,nt=this.options,ct=nt.xAxis=gt(nt.xAxis||{});nt=nt.yAxis=gt(nt.yAxis||{}),R(this,"getAxes"),ct.forEach(function(dt,mt){dt.index=mt,dt.isX=!0}),nt.forEach(function(dt,mt){dt.index=mt}),ct.concat(nt).forEach(function(dt){new H(it,dt)}),R(this,"afterGetAxes")},pt.prototype.getSelectedPoints=function(){return this.series.reduce(function(it,nt){return nt.getPointsCollection().forEach(function(ct){at(ct.selectedStaging,ct.selected)&&it.push(ct)}),it},[])},pt.prototype.getSelectedSeries=function(){return this.series.filter(function(it){return it.selected})},pt.prototype.setTitle=function(it,nt,ct){this.applyDescription("title",it),this.applyDescription("subtitle",nt),this.applyDescription("caption",void 0),this.layOutTitles(ct)},pt.prototype.applyDescription=function(it,nt){var ct=this,dt="title"===it?{color:"#333333",fontSize:this.options.isStock?"16px":"18px"}:{color:"#666666"};dt=this.options[it]=et(!this.styledMode&&{style:dt},this.options[it],nt);var mt=this[it];mt&&nt&&(this[it]=mt=mt.destroy()),dt&&!mt&&((mt=this.renderer.text(dt.text,0,0,dt.useHTML).attr({align:dt.align,class:"highcharts-"+it,zIndex:dt.zIndex||4}).add()).update=function(yt){ct[{title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"}[it]](yt)},this.styledMode||mt.css(dt.style),this[it]=mt)},pt.prototype.layOutTitles=function(it){var nt=[0,0,0],ct=this.renderer,dt=this.spacingBox;["title","subtitle","caption"].forEach(function(yt){var wt,Ct=this[yt],kt=this.options[yt],Mt=kt.verticalAlign||"top";if(yt="title"===yt?"top"===Mt?-3:0:"top"===Mt?nt[0]+2:0,Ct){this.styledMode||(wt=kt.style&&kt.style.fontSize),wt=ct.fontMetrics(wt,Ct).b,Ct.css({width:(kt.width||dt.width+(kt.widthAdjust||0))+"px"});var Zt=Math.round(Ct.getBBox(kt.useHTML).height);Ct.align(q({y:"bottom"===Mt?wt:yt+wt,height:Zt},kt),!1,"spacingBox"),kt.floating||("top"===Mt?nt[0]=Math.ceil(nt[0]+Zt):"bottom"===Mt&&(nt[2]=Math.ceil(nt[2]+Zt)))}},this),nt[0]&&"top"===(this.options.title.verticalAlign||"top")&&(nt[0]+=this.options.title.margin),nt[2]&&"bottom"===this.options.caption.verticalAlign&&(nt[2]+=this.options.caption.margin);var mt=!this.titleOffset||this.titleOffset.join(",")!==nt.join(",");this.titleOffset=nt,R(this,"afterLayOutTitles"),!this.isDirtyBox&&mt&&(this.isDirtyBox=this.isDirtyLegend=mt,this.hasRendered&&at(it,!0)&&this.isDirtyBox&&this.redraw())},pt.prototype.getChartSize=function(){var it=this.options.chart,nt=it.width;it=it.height;var ct=this.renderTo;G(nt)||(this.containerWidth=A(ct,"width")),G(it)||(this.containerHeight=A(ct,"height")),this.chartWidth=Math.max(0,nt||this.containerWidth||600),this.chartHeight=Math.max(0,ft(it,this.chartWidth)||(1<this.containerHeight?this.containerHeight:400))},pt.prototype.temporaryDisplay=function(it){var nt=this.renderTo;if(it)for(;nt&&nt.style;)nt.hcOrigStyle&&(U(nt,nt.hcOrigStyle),delete nt.hcOrigStyle),nt.hcOrigDetached&&(h.body.removeChild(nt),nt.hcOrigDetached=!1),nt=nt.parentNode;else for(;nt&&nt.style&&(h.body.contains(nt)||nt.parentNode||(nt.hcOrigDetached=!0,h.body.appendChild(nt)),("none"===A(nt,"display",!1)||nt.hcOricDetached)&&(nt.hcOrigStyle={display:nt.style.display,height:nt.style.height,overflow:nt.style.overflow},it={display:"block",overflow:"hidden"},nt!==this.renderTo&&(it.height=0),U(nt,it),nt.offsetWidth||nt.style.setProperty("display","block","important")),(nt=nt.parentNode)!==h.body););},pt.prototype.setClassName=function(it){this.container.className="highcharts-container "+(it||"")},pt.prototype.getContainer=function(){var dt,it=this.options,nt=it.chart,ct=bt(),mt=this.renderTo;mt||(this.renderTo=mt=nt.renderTo),Q(mt)&&(this.renderTo=mt=h.getElementById(mt)),mt||C(13,!0,this);var yt=lt(d(mt,"data-highcharts-chart"));E(yt)&&w[yt]&&w[yt].hasRendered&&w[yt].destroy(),d(mt,"data-highcharts-chart",this.index),mt.innerHTML=c.emptyHTML,nt.skipClone||mt.offsetWidth||this.temporaryDisplay(),this.getChartSize(),yt=this.chartWidth;var Ct=this.chartHeight;if(U(mt,{overflow:"hidden"}),this.styledMode||(dt=q({position:"relative",overflow:"hidden",width:yt+"px",height:Ct+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none"},nt.style||{})),this.container=ct=T("div",{id:ct},dt,mt),this._cursor=ct.style.cursor,this.renderer=new(nt.renderer||!o?Z.getRendererType(nt.renderer):b)(ct,yt,Ct,void 0,nt.forExport,it.exporting&&it.exporting.allowHTML,this.styledMode),D(void 0,this),this.setClassName(nt.className),this.styledMode)for(var kt in it.defs)this.renderer.definition(it.defs[kt]);else this.renderer.setStyle(nt.style);this.renderer.chartIndex=this.index,R(this,"afterGetContainer")},pt.prototype.getMargins=function(it){var nt=this.spacing,ct=this.margin,dt=this.titleOffset;this.resetMargins(),dt[0]&&!G(ct[0])&&(this.plotTop=Math.max(this.plotTop,dt[0]+nt[0])),dt[2]&&!G(ct[2])&&(this.marginBottom=Math.max(this.marginBottom,dt[2]+nt[2])),this.legend&&this.legend.display&&this.legend.adjustMargins(ct,nt),R(this,"getMargins"),it||this.getAxisMargins()},pt.prototype.getAxisMargins=function(){var it=this,nt=it.axisOffset=[0,0,0,0],ct=it.colorAxis,dt=it.margin,mt=function(yt){yt.forEach(function(Ct){Ct.visible&&Ct.getOffset()})};it.hasCartesianSeries?mt(it.axes):ct&&ct.length&&mt(ct),l.forEach(function(yt,Ct){G(dt[Ct])||(it[yt]+=nt[Ct])}),it.setChartSize()},pt.prototype.reflow=function(it){var nt=this,ct=nt.options.chart,dt=nt.renderTo,mt=G(ct.width)&&G(ct.height),yt=ct.width||A(dt,"width");ct=ct.height||A(dt,"height"),dt=it?it.target:y,delete nt.pointer.chartPosition,!mt&&!nt.isPrinting&&yt&&ct&&(dt===y||dt===h)&&((yt!==nt.containerWidth||ct!==nt.containerHeight)&&(a.clearTimeout(nt.reflowTimeout),nt.reflowTimeout=ht(function(){nt.container&&nt.setSize(void 0,void 0,!1)},it?100:0)),nt.containerWidth=yt,nt.containerHeight=ct)},pt.prototype.setReflow=function(it){var nt=this;!1===it||this.unbindReflow?!1===it&&this.unbindReflow&&(this.unbindReflow=this.unbindReflow()):(this.unbindReflow=r(y,"resize",function(ct){nt.options&&nt.reflow(ct)}),r(this,"destroy",this.unbindReflow))},pt.prototype.setSize=function(it,nt,ct){var dt=this,mt=dt.renderer;dt.isResizing+=1,D(ct,dt),ct=mt.globalAnimation,dt.oldChartHeight=dt.chartHeight,dt.oldChartWidth=dt.chartWidth,typeof it<"u"&&(dt.options.chart.width=it),typeof nt<"u"&&(dt.options.chart.height=nt),dt.getChartSize(),dt.styledMode||(ct?u:U)(dt.container,{width:dt.chartWidth+"px",height:dt.chartHeight+"px"},ct),dt.setChartSize(!0),mt.setSize(dt.chartWidth,dt.chartHeight,ct),dt.axes.forEach(function(yt){yt.isDirty=!0,yt.setScale()}),dt.isDirtyLegend=!0,dt.isDirtyBox=!0,dt.layOutTitles(),dt.getMargins(),dt.redraw(ct),dt.oldChartHeight=null,R(dt,"resize"),ht(function(){dt&&R(dt,"endResize",null,function(){--dt.isResizing})},_(ct).duration)},pt.prototype.setChartSize=function(it){var Mt,wt,Zt,Ut,nt=this.inverted,ct=this.renderer,dt=this.chartWidth,mt=this.chartHeight,yt=this.options.chart,Ct=this.spacing,kt=this.clipOffset;this.plotLeft=Mt=Math.round(this.plotLeft),this.plotTop=wt=Math.round(this.plotTop),this.plotWidth=Zt=Math.max(0,Math.round(dt-Mt-this.marginRight)),this.plotHeight=Ut=Math.max(0,Math.round(mt-wt-this.marginBottom)),this.plotSizeX=nt?Ut:Zt,this.plotSizeY=nt?Zt:Ut,this.plotBorderWidth=yt.plotBorderWidth||0,this.spacingBox=ct.spacingBox={x:Ct[3],y:Ct[0],width:dt-Ct[3]-Ct[1],height:mt-Ct[0]-Ct[2]},this.plotBox=ct.plotBox={x:Mt,y:wt,width:Zt,height:Ut},nt=2*Math.floor(this.plotBorderWidth/2),dt=Math.ceil(Math.max(nt,kt[3])/2),mt=Math.ceil(Math.max(nt,kt[0])/2),this.clipBox={x:dt,y:mt,width:Math.floor(this.plotSizeX-Math.max(nt,kt[1])/2-dt),height:Math.max(0,Math.floor(this.plotSizeY-Math.max(nt,kt[2])/2-mt))},it||(this.axes.forEach(function(It){It.setAxisSize(),It.setAxisTranslation()}),ct.alignElements()),R(this,"afterSetChartSize",{skipAxes:it})},pt.prototype.resetMargins=function(){R(this,"resetMargins");var it=this,nt=it.options.chart;["margin","spacing"].forEach(function(ct){var dt=nt[ct],mt=K(dt)?dt:[dt,dt,dt,dt];["Top","Right","Bottom","Left"].forEach(function(yt,Ct){it[ct][Ct]=at(nt[ct+yt],mt[Ct])})}),l.forEach(function(ct,dt){it[ct]=at(it.margin[dt],it.spacing[dt])}),it.axisOffset=[0,0,0,0],it.clipOffset=[0,0,0,0]},pt.prototype.drawChartBox=function(){var qt,it=this.options.chart,nt=this.renderer,ct=this.chartWidth,dt=this.chartHeight,mt=this.styledMode,yt=this.plotBGImage,Ct=it.backgroundColor,kt=it.plotBackgroundColor,Mt=it.plotBackgroundImage,wt=this.plotLeft,Zt=this.plotTop,Ut=this.plotWidth,It=this.plotHeight,Et=this.plotBox,Lt=this.clipRect,jt=this.clipBox,Ot=this.chartBackground,Nt=this.plotBackground,Qt=this.plotBorder,Rt="animate";if(Ot||(this.chartBackground=Ot=nt.rect().addClass("highcharts-background").add(),Rt="attr"),mt)var Ht=qt=Ot.strokeWidth();else qt=(Ht=it.borderWidth||0)+(it.shadow?8:0),Ct={fill:Ct||"none"},(Ht||Ot["stroke-width"])&&(Ct.stroke=it.borderColor,Ct["stroke-width"]=Ht),Ot.attr(Ct).shadow(it.shadow);Ot[Rt]({x:qt/2,y:qt/2,width:ct-qt-Ht%2,height:dt-qt-Ht%2,r:it.borderRadius}),Rt="animate",Nt||(Rt="attr",this.plotBackground=Nt=nt.rect().addClass("highcharts-plot-background").add()),Nt[Rt](Et),mt||(Nt.attr({fill:kt||"none"}).shadow(it.plotShadow),Mt&&(yt?(Mt!==yt.attr("href")&&yt.attr("href",Mt),yt.animate(Et)):this.plotBGImage=nt.image(Mt,wt,Zt,Ut,It).add())),Lt?Lt.animate({width:jt.width,height:jt.height}):this.clipRect=nt.clipRect(jt),Rt="animate",Qt||(Rt="attr",this.plotBorder=Qt=nt.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),mt||Qt.attr({stroke:it.plotBorderColor,"stroke-width":it.plotBorderWidth||0,fill:"none"}),Qt[Rt](Qt.crisp({x:wt,y:Zt,width:Ut,height:It},-Qt.strokeWidth())),this.isDirtyBox=!1,R(this,"afterDrawChartBox")},pt.prototype.propFromSeries=function(){var dt,mt,yt,it=this,nt=it.options.chart,ct=it.options.series;["inverted","angular","polar"].forEach(function(Ct){for(mt=s[nt.type||nt.defaultSeriesType],yt=nt[Ct]||mt&&mt.prototype[Ct],dt=ct&&ct.length;!yt&&dt--;)(mt=s[ct[dt].type])&&mt.prototype[Ct]&&(yt=!0);it[Ct]=yt})},pt.prototype.linkSeries=function(){var it=this,nt=it.series;nt.forEach(function(ct){ct.linkedSeries.length=0}),nt.forEach(function(ct){var dt=ct.options.linkedTo;Q(dt)&&(dt=":previous"===dt?it.series[ct.index-1]:it.get(dt))&&dt.linkedParent!==ct&&(dt.linkedSeries.push(ct),ct.linkedParent=dt,dt.enabledDataSorting&&ct.setDataSortingOptions(),ct.visible=at(ct.options.visible,dt.options.visible,ct.visible))}),R(this,"afterLinkSeries")},pt.prototype.renderSeries=function(){this.series.forEach(function(it){it.translate(),it.render()})},pt.prototype.renderLabels=function(){var it=this,nt=it.options.labels;nt.items&&nt.items.forEach(function(ct){var dt=q(nt.style,ct.style),mt=lt(dt.left)+it.plotLeft,yt=lt(dt.top)+it.plotTop+12;delete dt.left,delete dt.top,it.renderer.text(ct.html,mt,yt).attr({zIndex:2}).css(dt).add()})},pt.prototype.render=function(){var it=this.axes,nt=this.colorAxis,ct=this.renderer,dt=this.options,mt=function(wt){wt.forEach(function(Zt){Zt.visible&&Zt.render()})},yt=0;this.setTitle(),this.legend=new W(this,dt.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),dt=this.plotWidth,it.some(function(wt){if(wt.horiz&&wt.visible&&wt.options.labels.enabled&&wt.series.length)return yt=21,!0});var Ct=this.plotHeight=Math.max(this.plotHeight-yt,0);it.forEach(function(wt){wt.setScale()}),this.getAxisMargins();var kt=1.1<dt/this.plotWidth,Mt=1.05<Ct/this.plotHeight;(kt||Mt)&&(it.forEach(function(wt){(wt.horiz&&kt||!wt.horiz&&Mt)&&wt.setTickInterval(!0)}),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries?mt(it):nt&&nt.length&&mt(nt),this.seriesGroup||(this.seriesGroup=ct.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0},pt.prototype.addCredits=function(it){var nt=this,ct=et(!0,this.options.credits,it);ct.enabled&&!this.credits&&(this.credits=this.renderer.text(ct.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",function(){ct.href&&(y.location.href=ct.href)}).attr({align:ct.position.align,zIndex:8}),nt.styledMode||this.credits.css(ct.style),this.credits.add().align(ct.position),this.credits.update=function(dt){nt.credits=nt.credits.destroy(),nt.addCredits(dt)})},pt.prototype.destroy=function(){var yt,it=this,nt=it.axes,ct=it.series,dt=it.container,mt=dt&&dt.parentNode;for(R(it,"destroy"),it.renderer.forExport?v(w,it):w[it.index]=void 0,V.chartCount--,it.renderTo.removeAttribute("data-highcharts-chart"),vt(it),yt=nt.length;yt--;)nt[yt]=nt[yt].destroy();for(this.scroller&&this.scroller.destroy&&this.scroller.destroy(),yt=ct.length;yt--;)ct[yt]=ct[yt].destroy();"title subtitle chartBackground plotBackground plotBGImage plotBorder seriesGroup clipRect credits pointer rangeSelector legend resetZoomButton tooltip renderer".split(" ").forEach(function(Ct){var kt=it[Ct];kt&&kt.destroy&&(it[Ct]=kt.destroy())}),dt&&(dt.innerHTML=c.emptyHTML,vt(dt),mt&&O(dt)),rt(it,function(Ct,kt){delete it[kt]})},pt.prototype.firstRender=function(){var it=this,nt=it.options;(!it.isReadyToRender||it.isReadyToRender())&&(it.getContainer(),it.resetMargins(),it.setChartSize(),it.propFromSeries(),it.getAxes(),(N(nt.series)?nt.series:[]).forEach(function(ct){it.initSeries(ct)}),it.linkSeries(),it.setSeriesData(),R(it,"beforeRender"),S&&(it.pointer=P.isRequired()?new P(it,nt):new S(it,nt)),it.render(),it.pointer.getChartPosition(),!it.renderer.imgCount&&!it.hasLoaded&&it.onload(),it.temporaryDisplay(!0))},pt.prototype.onload=function(){this.callbacks.concat([this.callback]).forEach(function(it){it&&typeof this.index<"u"&&it.apply(this,[this])},this),R(this,"load"),R(this,"render"),G(this.index)&&this.setReflow(this.options.chart.reflow),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0},pt.prototype.warnIfA11yModuleNotLoaded=function(){var it=this.options,nt=this.title;it&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":(nt&&nt.element.textContent||"").replace(/</g,"&lt;")}),it.accessibility&&!1===it.accessibility.enabled||C('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))},pt.prototype.addSeries=function(it,nt,ct){var mt,dt=this;return it&&(nt=at(nt,!0),R(dt,"addSeries",{options:it},function(){mt=dt.initSeries(it),dt.isDirtyLegend=!0,dt.linkSeries(),mt.enabledDataSorting&&mt.setData(it.data,!1),R(dt,"afterAddSeries",{series:mt}),nt&&dt.redraw(ct)})),mt},pt.prototype.addAxis=function(it,nt,ct,dt){return this.createAxis(nt?"xAxis":"yAxis",{axis:it,redraw:ct,animation:dt})},pt.prototype.addColorAxis=function(it,nt,ct){return this.createAxis("colorAxis",{axis:it,redraw:nt,animation:ct})},pt.prototype.createAxis=function(it,nt){return it=new H(this,et(nt.axis,{index:this[it].length,isX:"xAxis"===it})),at(nt.redraw,!0)&&this.redraw(nt.animation),it},pt.prototype.showLoading=function(it){var nt=this,ct=nt.options,dt=ct.loading,mt=function(){yt&&U(yt,{left:nt.plotLeft+"px",top:nt.plotTop+"px",width:nt.plotWidth+"px",height:nt.plotHeight+"px"})},yt=nt.loadingDiv,Ct=nt.loadingSpan;yt||(nt.loadingDiv=yt=T("div",{className:"highcharts-loading highcharts-loading-hidden"},null,nt.container)),Ct||(nt.loadingSpan=Ct=T("span",{className:"highcharts-loading-inner"},null,yt),r(nt,"redraw",mt)),yt.className="highcharts-loading",c.setElementHTML(Ct,at(it,ct.lang.loading,"")),nt.styledMode||(U(yt,q(dt.style,{zIndex:10})),U(Ct,dt.labelStyle),nt.loadingShown||(U(yt,{opacity:0,display:""}),u(yt,{opacity:dt.style.opacity||.5},{duration:dt.showDuration||0}))),nt.loadingShown=!0,mt()},pt.prototype.hideLoading=function(){var it=this.options,nt=this.loadingDiv;nt&&(nt.className="highcharts-loading highcharts-loading-hidden",this.styledMode||u(nt,{opacity:0},{duration:it.loading.hideDuration||100,complete:function(){U(nt,{display:"none"})}})),this.loadingShown=!1},pt.prototype.update=function(it,nt,ct,dt){var Mt,wt,mt=this,yt={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},Ct=it.isResponsiveOptions,kt=[];R(mt,"update",{options:it}),Ct||mt.setResponsive(!1,!0),it=p(it,mt.options),mt.userOptions=et(mt.userOptions,it);var Zt=it.chart;if(Zt){if(et(!0,mt.options.chart,Zt),"className"in Zt&&mt.setClassName(Zt.className),"reflow"in Zt&&mt.setReflow(Zt.reflow),"inverted"in Zt||"polar"in Zt||"type"in Zt){mt.propFromSeries();var Ut=!0}"alignTicks"in Zt&&(Ut=!0),"events"in Zt&&x(this,Zt),rt(Zt,function(It,Et){-1!==mt.propsRequireUpdateSeries.indexOf("chart."+Et)&&(Mt=!0),-1!==mt.propsRequireDirtyBox.indexOf(Et)&&(mt.isDirtyBox=!0),-1!==mt.propsRequireReflow.indexOf(Et)&&(Ct?mt.isDirtyBox=!0:wt=!0)}),!mt.styledMode&&Zt.style&&mt.renderer.setStyle(mt.options.chart.style||{})}!mt.styledMode&&it.colors&&(this.options.colors=it.colors),it.time&&(this.time===B&&(this.time=new m(it.time)),et(!0,mt.options.time,it.time)),rt(it,function(It,Et){mt[Et]&&"function"==typeof mt[Et].update?mt[Et].update(It,!1):"function"==typeof mt[yt[Et]]?mt[yt[Et]](It):"colors"!==Et&&-1===mt.collectionsWithUpdate.indexOf(Et)&&et(!0,mt.options[Et],it[Et]),"chart"!==Et&&-1!==mt.propsRequireUpdateSeries.indexOf(Et)&&(Mt=!0)}),this.collectionsWithUpdate.forEach(function(It){if(it[It]){var Et=[];mt[It].forEach(function(Lt,jt){Lt.options.isInternal||Et.push(at(Lt.options.index,jt))}),gt(it[It]).forEach(function(Lt,jt){var Nt,Ot=G(Lt.id);Ot&&(Nt=mt.get(Lt.id)),!Nt&&mt[It]&&(Nt=mt[It][Et?Et[jt]:jt])&&Ot&&G(Nt.options.id)&&(Nt=void 0),Nt&&Nt.coll===It&&(Nt.update(Lt,!1),ct&&(Nt.touched=!0)),!Nt&&ct&&mt.collectionsWithInit[It]&&(mt.collectionsWithInit[It][0].apply(mt,[Lt].concat(mt.collectionsWithInit[It][1]||[]).concat([!1])).touched=!0)}),ct&&mt[It].forEach(function(Lt){Lt.touched||Lt.options.isInternal?delete Lt.touched:kt.push(Lt)})}}),kt.forEach(function(It){It.chart&&It.remove&&It.remove(!1)}),Ut&&mt.axes.forEach(function(It){It.update({},!1)}),Mt&&mt.getSeriesOrderByLinks().forEach(function(It){It.chart&&It.update({},!1)},this),Ut=Zt&&Zt.width,Zt=Zt&&(Q(Zt.height)?ft(Zt.height,Ut||mt.chartWidth):Zt.height),wt||E(Ut)&&Ut!==mt.chartWidth||E(Zt)&&Zt!==mt.chartHeight?mt.setSize(Ut,Zt,dt):at(nt,!0)&&mt.redraw(dt),R(mt,"afterUpdate",{options:it,redraw:nt,animation:dt})},pt.prototype.setSubtitle=function(it,nt){this.applyDescription("subtitle",it),this.layOutTitles(nt)},pt.prototype.setCaption=function(it,nt){this.applyDescription("caption",it),this.layOutTitles(nt)},pt.prototype.showResetZoom=function(){function it(){nt.zoomOut()}var nt=this,ct=t.lang,dt=nt.options.chart.zooming.resetButton,mt=dt.theme,yt="chart"===dt.relativeTo||"spacingBox"===dt.relativeTo?null:"scrollablePlotBox";R(this,"beforeShowResetZoom",null,function(){nt.resetZoomButton=nt.renderer.button(ct.resetZoom,null,null,it,mt).attr({align:dt.position.align,title:ct.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(dt.position,!1,yt)}),R(this,"afterShowResetZoom")},pt.prototype.zoomOut=function(){R(this,"selection",{resetSelection:!0},this.zoom)},pt.prototype.zoom=function(it){var mt,nt=this,ct=nt.pointer,dt=!1;!it||it.resetSelection?(nt.axes.forEach(function(Ct){mt=Ct.zoom()}),ct.initiated=!1):it.xAxis.concat(it.yAxis).forEach(function(Ct){var kt=Ct.axis;(ct[kt.isXAxis?"zoomX":"zoomY"]&&G(ct.mouseDownX)&&G(ct.mouseDownY)&&nt.isInsidePlot(ct.mouseDownX-nt.plotLeft,ct.mouseDownY-nt.plotTop,{axis:kt})||!G(nt.inverted?ct.mouseDownX:ct.mouseDownY))&&(mt=kt.zoom(Ct.min,Ct.max),kt.displayBtn&&(dt=!0))});var yt=nt.resetZoomButton;dt&&!yt?nt.showResetZoom():!dt&&K(yt)&&(nt.resetZoomButton=yt.destroy()),mt&&nt.redraw(at(nt.options.chart.animation,it&&it.animation,100>nt.pointCount))},pt.prototype.pan=function(it,nt){var ct=this,dt=ct.hoverPoints;nt="object"==typeof nt?nt:{enabled:nt,type:"x"};var mt=ct.options.chart;mt&&mt.panning&&(mt.panning=nt);var Ct,yt=nt.type;R(this,"pan",{originalEvent:it},function(){dt&&dt.forEach(function(wt){wt.setState()});var kt=ct.xAxis;"xy"===yt?kt=kt.concat(ct.yAxis):"y"===yt&&(kt=ct.yAxis);var Mt={};kt.forEach(function(wt){if(wt.options.panningEnabled&&!wt.options.isInternal){var Zt=wt.horiz,Ut=it[Zt?"chartX":"chartY"],It=ct[Zt=Zt?"mouseDownX":"mouseDownY"],Et=wt.minPointOffset||0,Lt=wt.reversed&&!ct.inverted||!wt.reversed&&ct.inverted?-1:1,jt=wt.getExtremes(),Ot=wt.toValue(It-Ut,!0)+Et*Lt,Nt=wt.toValue(It+wt.len-Ut,!0)-(Et*Lt||wt.isXAxis&&wt.pointRangePadding||0),Qt=Nt<Ot;Lt=wt.hasVerticalPanning(),It=Qt?Nt:Ot,Ot=Qt?Ot:Nt;var qt=wt.panningState;!Lt||wt.isXAxis||qt&&!qt.isDirty||wt.series.forEach(function(Rt){var Ht=Rt.getProcessedData(!0);Ht=Rt.getExtremes(Ht.yData,!0),qt||(qt={startMin:Number.MAX_VALUE,startMax:-Number.MAX_VALUE}),E(Ht.dataMin)&&E(Ht.dataMax)&&(qt.startMin=Math.min(at(Rt.options.threshold,1/0),Ht.dataMin,qt.startMin),qt.startMax=Math.max(at(Rt.options.threshold,-1/0),Ht.dataMax,qt.startMax))}),Lt=Math.min(at(qt&&qt.startMin,jt.dataMin),Et?jt.min:wt.toValue(wt.toPixels(jt.min)-wt.minPixelPadding)),Nt=Math.max(at(qt&&qt.startMax,jt.dataMax),Et?jt.max:wt.toValue(wt.toPixels(jt.max)+wt.minPixelPadding)),wt.panningState=qt,wt.isOrdinal||(0<(Et=Lt-It)&&(Ot+=Et,It=Lt),0<(Et=Ot-Nt)&&(Ot=Nt,It-=Et),wt.series.length&&It!==jt.min&&Ot!==jt.max&&It>=Lt&&Ot<=Nt&&(wt.setExtremes(It,Ot,!1,!1,{trigger:"pan"}),!ct.resetZoomButton&&It!==Lt&&Ot!==Nt&&yt.match("y")&&(ct.showResetZoom(),wt.displayBtn=!1),Ct=!0),Mt[Zt]=Ut)}}),rt(Mt,function(wt,Zt){ct[Zt]=wt}),Ct&&ct.redraw(!1),U(ct.container,{cursor:"move"})})},pt}(),q(Y.prototype,{callbacks:[],collectionsWithInit:{xAxis:[Y.prototype.addAxis,[!0]],yAxis:[Y.prototype.addAxis,[!1]],series:[Y.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:"backgroundColor borderColor borderWidth borderRadius plotBackgroundColor plotBackgroundImage plotBorderColor plotBorderWidth plotShadow shadow".split(" "),propsRequireReflow:"margin marginTop marginRight marginBottom marginLeft spacing spacingTop spacingRight spacingBottom spacingLeft".split(" "),propsRequireUpdateSeries:"chart.inverted chart.polar chart.ignoreHiddenSeries chart.type colors plotOptions time tooltip".split(" ")}),Y}),j(ot,"Core/Legend/LegendSymbol.js",[ot["Core/Utilities.js"]],function(Y){var tt,V,H=Y.extend,X=Y.merge,z=Y.pick;return(V=tt||(tt={})).drawLineMarker=function(W){var P=this.legendItem=this.legendItem||{},S=this.options,Z=W.symbolWidth,k=W.symbolHeight,b=k/2,m=this.chart.renderer,a=P.group;W=W.baseline-Math.round(.3*W.fontMetrics.b);var c={},u=S.marker,_=0;this.chart.styledMode||(c={"stroke-width":Math.min(S.lineWidth||0,24)},S.dashStyle?c.dashstyle=S.dashStyle:"square"!==S.linecap&&(c["stroke-linecap"]="round")),P.line=m.path().addClass("highcharts-graph").attr(c).add(a),c["stroke-linecap"]&&(_=Math.min(P.line.strokeWidth(),Z)/2),P.line.attr({d:[["M",_,W],["L",Z-_,W]]}),u&&!1!==u.enabled&&Z&&(S=Math.min(z(u.radius,b),b),0===this.symbol.indexOf("url")&&(u=X(u,{width:k,height:k}),S=0),P.symbol=P=m.symbol(this.symbol,Z/2-S,W-S,2*S,2*S,H({context:"legend"},u)).addClass("highcharts-point").add(a),P.isMarker=!0)},V.drawRectangle=function(W,P){var S=W.symbolHeight,Z=W.options.squareSymbol;(P=P.legendItem||{}).symbol=this.chart.renderer.rect(Z?(W.symbolWidth-S)/2:0,W.baseline-S+1,Z?S:W.symbolWidth,S,z(W.options.symbolRadius,S/2)).addClass("highcharts-point").attr({zIndex:3}).add(P.group)},tt}),j(ot,"Core/Series/SeriesDefaults.js",[],function(){return{lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:50},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){return"number"!=typeof this.y?"":(0,this.series.chart.numberFormatter)(this.y,-1)},padding:5,style:{fontSize:"11px",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:50},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:50},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"}}),j(ot,"Core/Series/Series.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Defaults.js"],ot["Core/Foundation.js"],ot["Core/Globals.js"],ot["Core/Legend/LegendSymbol.js"],ot["Core/Series/Point.js"],ot["Core/Series/SeriesDefaults.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P,S,Z){var k=Y.animObject,b=Y.setAnimation,m=H.defaultOptions,a=X.registerEventOptions,c=z.hasTouch,u=z.svg,_=z.win,D=P.seriesTypes,t=Z.arrayMax,B=Z.arrayMin,M=Z.clamp,x=Z.cleanRecursively,w=Z.correctFloat,h=Z.defined,l=Z.erase,o=Z.error,y=Z.extend,s=Z.find,r=Z.fireEvent,d=Z.getNestedProperty,p=Z.isArray,T=Z.isNumber,U=Z.isString,G=Z.merge,O=Z.objectEach,v=Z.pick,C=Z.removeEvent,q=Z.splat,J=Z.syncTimeout;return Y=function(){function R(){this.zones=this.yAxis=this.xAxis=this.userOptions=this.tooltipOptions=this.processedYData=this.processedXData=this.points=this.options=this.linkedSeries=this.index=this.eventsToUnbind=this.eventOptions=this.data=this.chart=this._i=void 0}return R.prototype.init=function(A,N){r(this,"init",{options:N});var E=this,K=A.series;this.eventsToUnbind=[],E.chart=A,E.options=E.setOptions(N),N=E.options,E.linkedSeries=[],E.bindAxes(),y(E,{name:N.name,state:"",visible:!1!==N.visible,selected:!0===N.selected}),a(this,N);var et,Q=N.events;(Q&&Q.click||N.point&&N.point.events&&N.point.events.click||N.allowPointSelect)&&(A.runTrackerClick=!0),E.getColor(),E.getSymbol(),E.parallelArrays.forEach(function(rt){E[rt+"Data"]||(E[rt+"Data"]=[])}),E.isCartesian&&(A.hasCartesianSeries=!0),K.length&&(et=K[K.length-1]),E._i=v(et&&et._i,-1)+1,E.opacity=E.options.opacity,A.orderSeries(this.insert(K)),N.dataSorting&&N.dataSorting.enabled?E.setDataSortingOptions():E.points||E.data||E.setData(N.data,!1),r(this,"afterInit")},R.prototype.is=function(A){return D[A]&&this instanceof D[A]},R.prototype.insert=function(A){var E,N=this.options.index;if(T(N)){for(E=A.length;E--;)if(N>=v(A[E].options.index,A[E]._i)){A.splice(E+1,0,this);break}-1===E&&A.unshift(this),E+=1}else A.push(this);return v(E,A.length-1)},R.prototype.bindAxes=function(){var K,A=this,N=A.options,E=A.chart;r(this,"bindAxes",null,function(){(A.axisTypes||[]).forEach(function(Q){var et=0;E[Q].forEach(function(rt){K=rt.options,(N[Q]===et&&!K.isInternal||typeof N[Q]<"u"&&N[Q]===K.id||typeof N[Q]>"u"&&0===K.index)&&(A.insert(rt.series),A[Q]=rt,rt.isDirty=!0),K.isInternal||et++}),A[Q]||A.optionalAxis===Q||o(18,!0,E)})}),r(this,"afterBindAxes")},R.prototype.updateParallelArrays=function(A,N){var E=A.series,K=arguments,Q=T(N)?function(et){var rt="y"===et&&E.toYData?E.toYData(A):A[et];E[et+"Data"][N]=rt}:function(et){Array.prototype[N].apply(E[et+"Data"],Array.prototype.slice.call(K,2))};E.parallelArrays.forEach(Q)},R.prototype.hasData=function(){return this.visible&&typeof this.dataMax<"u"&&typeof this.dataMin<"u"||this.visible&&this.yData&&0<this.yData.length},R.prototype.autoIncrement=function(A){var rt,N=this.options,E=N.pointIntervalUnit,K=N.relativeXValue,Q=this.chart.time,et=this.xIncrement;return et=v(et,N.pointStart,0),this.pointInterval=rt=v(this.pointInterval,N.pointInterval,1),K&&T(A)&&(rt*=A),E&&(N=new Q.Date(et),"day"===E?Q.set("Date",N,Q.get("Date",N)+rt):"month"===E?Q.set("Month",N,Q.get("Month",N)+rt):"year"===E&&Q.set("FullYear",N,Q.get("FullYear",N)+rt),rt=N.getTime()-et),K&&T(A)?et+rt:(this.xIncrement=et+rt,et)},R.prototype.setDataSortingOptions=function(){var A=this.options;y(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),h(A.pointRange)||(A.pointRange=1)},R.prototype.setOptions=function(A){var N=this.chart,E=N.options,K=E.plotOptions,Q=N.userOptions||{};A=G(A),N=N.styledMode;var et={plotOptions:K,userOptions:A};r(this,"setOptions",et);var rt=et.plotOptions[this.type],at=Q.plotOptions||{};return this.userOptions=et.userOptions,Q=G(rt,K.series,Q.plotOptions&&Q.plotOptions[this.type],A),this.tooltipOptions=G(m.tooltip,m.plotOptions.series&&m.plotOptions.series.tooltip,m.plotOptions[this.type].tooltip,E.tooltip.userOptions,K.series&&K.series.tooltip,K[this.type].tooltip,A.tooltip),this.stickyTracking=v(A.stickyTracking,at[this.type]&&at[this.type].stickyTracking,at.series&&at.series.stickyTracking,!(!this.tooltipOptions.shared||this.noSharedTooltip)||Q.stickyTracking),null===rt.marker&&delete Q.marker,this.zoneAxis=Q.zoneAxis,K=this.zones=(Q.zones||[]).slice(),!Q.negativeColor&&!Q.negativeFillColor||Q.zones||(E={value:Q[this.zoneAxis+"Threshold"]||Q.threshold||0,className:"highcharts-negative"},N||(E.color=Q.negativeColor,E.fillColor=Q.negativeFillColor),K.push(E)),K.length&&h(K[K.length-1].value)&&K.push(N?{}:{color:this.color,fillColor:this.fillColor}),r(this,"afterSetOptions",{options:Q}),Q},R.prototype.getName=function(){return v(this.options.name,"Series "+(this.index+1))},R.prototype.getCyclic=function(A,N,E){var K=this.chart,Q=this.userOptions,et=A+"Index",rt=A+"Counter",at=E?E.length:v(K.options.chart[A+"Count"],K[A+"Count"]);if(!N){var lt=v(Q[et],Q["_"+et]);h(lt)||(K.series.length||(K[rt]=0),Q["_"+et]=lt=K[rt]%at,K[rt]+=1),E&&(N=E[lt])}typeof lt<"u"&&(this[et]=lt),this[A]=N},R.prototype.getColor=function(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||m.plotOptions[this.type].color,this.chart.options.colors)},R.prototype.getPointsCollection=function(){return(this.hasGroupedData?this.points:this.data)||[]},R.prototype.getSymbol=function(){this.getCyclic("symbol",this.options.marker.symbol,this.chart.options.symbols)},R.prototype.findPointIndex=function(A,N){var rt,at,E=A.id,K=A.x,Q=this.points,et=this.options.dataSorting;if(E)(et=this.chart.get(E))instanceof V&&(rt=et);else if((this.linkedParent||this.enabledDataSorting||this.options.relativeXValue)&&(rt=function(ft){return!ft.touched&&ft.index===A.index},et&&et.matchByName?rt=function(ft){return!ft.touched&&ft.name===A.name}:this.options.relativeXValue&&(rt=function(ft){return!ft.touched&&ft.options.x===A.x}),!(rt=s(Q,rt))))return;if(rt){var lt=rt&&rt.index;typeof lt<"u"&&(at=!0)}return typeof lt>"u"&&T(K)&&(lt=this.xData.indexOf(K,N)),-1!==lt&&typeof lt<"u"&&this.cropped&&(lt=lt>=this.cropStart?lt-this.cropStart:lt),!at&&T(lt)&&Q[lt]&&Q[lt].touched&&(lt=void 0),lt},R.prototype.updateData=function(A,N){var lt,ft,vt,E=this.options,K=E.dataSorting,Q=this.points,et=[],rt=this.requireSorting,at=A.length===Q.length,gt=!0;if(this.xIncrement=null,A.forEach(function(ht,bt){var pt=h(ht)&&this.pointClass.prototype.optionsToObject.call({series:this},ht)||{};pt.id||T(pt.x)?(-1===(pt=this.findPointIndex(pt,vt))||typeof pt>"u"?et.push(ht):Q[pt]&&ht!==E.data[pt]?(Q[pt].update(ht,!1,null,!1),Q[pt].touched=!0,rt&&(vt=pt+1)):Q[pt]&&(Q[pt].touched=!0),(!at||bt!==pt||K&&K.enabled||this.hasDerivedData)&&(lt=!0)):et.push(ht)},this),lt)for(A=Q.length;A--;)(ft=Q[A])&&!ft.touched&&ft.remove&&ft.remove(!1,N);else!at||K&&K.enabled?gt=!1:(A.forEach(function(ht,bt){ht!==Q[bt].y&&Q[bt].update&&Q[bt].update(ht,!1,null,!1)}),et.length=0);return Q.forEach(function(ht){ht&&(ht.touched=!1)}),!!gt&&(et.forEach(function(ht){this.addPoint(ht,!1,null,null,!1)},this),null===this.xIncrement&&this.xData&&this.xData.length&&(this.xIncrement=t(this.xData),this.autoIncrement()),!0)},R.prototype.setData=function(A,N,E,K){void 0===N&&(N=!0);var Q=this,et=Q.points,rt=et&&et.length||0,at=Q.options,lt=Q.chart,ft=at.dataSorting,vt=Q.xAxis,gt=at.turboThreshold,ht=this.xData,bt=this.yData,pt=Q.pointArrayMap;pt=pt&&pt.length;var nt,it=at.keys,ct=0,dt=1,mt=null;if(!lt.options.chart.allowMutatingData){at.data&&delete Q.options.data,Q.userOptions.data&&delete Q.userOptions.data;var yt=G(!0,A)}if(yt=(A=yt||A||[]).length,ft&&ft.enabled&&(A=this.sortData(A)),lt.options.chart.allowMutatingData&&!1!==K&&yt&&rt&&!Q.cropped&&!Q.hasGroupedData&&Q.visible&&!Q.boosted&&(nt=this.updateData(A,E)),!nt){if(Q.xIncrement=null,Q.colorCounter=0,this.parallelArrays.forEach(function(Ct){Q[Ct+"Data"].length=0}),gt&&yt>gt)if(mt=Q.getFirstValidPoint(A),T(mt))for(E=0;E<yt;E++)ht[E]=this.autoIncrement(),bt[E]=A[E];else if(p(mt))if(pt)if(mt.length===pt)for(E=0;E<yt;E++)ht[E]=this.autoIncrement(),bt[E]=A[E];else for(E=0;E<yt;E++)ht[E]=(K=A[E])[0],bt[E]=K.slice(1,pt+1);else if(it&&(ct=0<=(ct=it.indexOf("x"))?ct:0,dt=0<=(dt=it.indexOf("y"))?dt:1),1===mt.length&&(dt=0),ct===dt)for(E=0;E<yt;E++)ht[E]=this.autoIncrement(),bt[E]=A[E][dt];else for(E=0;E<yt;E++)ht[E]=(K=A[E])[ct],bt[E]=K[dt];else o(12,!1,lt);else for(E=0;E<yt;E++)typeof A[E]<"u"&&(Q.pointClass.prototype.applyOptions.apply(K={series:Q},[A[E]]),Q.updateParallelArrays(K,E));for(bt&&U(bt[0])&&o(14,!0,lt),Q.data=[],Q.options.data=Q.userOptions.data=A,E=rt;E--;)et[E]&&et[E].destroy&&et[E].destroy();vt&&(vt.minRange=vt.userMinRange),Q.isDirty=lt.isDirtyBox=!0,Q.isDirtyData=!!et,E=!1}"point"===at.legendType&&(this.processData(),this.generatePoints()),N&&lt.redraw(E)},R.prototype.sortData=function(A){var N=this,E=N.options.dataSorting.sortKey||"y",K=function(Q,et){return h(et)&&Q.pointClass.prototype.optionsToObject.call({series:Q},et)||{}};return A.forEach(function(Q,et){A[et]=K(N,Q),A[et].index=et},this),A.concat().sort(function(Q,et){return Q=d(E,Q),(et=d(E,et))<Q?-1:et>Q?1:0}).forEach(function(Q,et){Q.x=et},this),N.linkedSeries&&N.linkedSeries.forEach(function(Q){var et=Q.options,rt=et.data;et.dataSorting&&et.dataSorting.enabled||!rt||(rt.forEach(function(at,lt){rt[lt]=K(Q,at),A[lt]&&(rt[lt].x=A[lt].x,rt[lt].index=lt)}),Q.setData(rt,!1))}),A},R.prototype.getProcessedData=function(A){var N=this.xAxis,E=this.options,K=E.cropThreshold,Q=A||this.getExtremesFromAll||E.getExtremesFromAll,et=this.isCartesian;A=N&&N.val2lin,E=!(!N||!N.logarithmic);var rt=0,at=this.xData,lt=this.yData,ft=this.requireSorting,vt=!1,gt=at.length;if(N){var ht=(vt=N.getExtremes()).min,bt=vt.max;vt=!(!N.categories||N.names.length)}if(et&&this.sorted&&!Q&&(!K||gt>K||this.forceCrop))if(at[gt-1]<ht||at[0]>bt)at=[],lt=[];else if(this.yData&&(at[0]<ht||at[gt-1]>bt)){var pt=this.cropData(this.xData,this.yData,ht,bt);at=pt.xData,lt=pt.yData,rt=pt.start,pt=!0}for(K=at.length||1;--K;)if(0<(N=E?A(at[K])-A(at[K-1]):at[K]-at[K-1])&&(typeof it>"u"||N<it))var it=N;else 0>N&&ft&&!vt&&(o(15,!1,this.chart),ft=!1);return{xData:at,yData:lt,cropped:pt,cropStart:rt,closestPointRange:it}},R.prototype.processData=function(A){if(this.isCartesian&&!this.isDirty&&!this.xAxis.isDirty&&!this.yAxis.isDirty&&!A)return!1;A=this.getProcessedData(),this.cropped=A.cropped,this.cropStart=A.cropStart,this.processedXData=A.xData,this.processedYData=A.yData,this.closestPointRange=this.basePointRange=A.closestPointRange,r(this,"afterProcessData")},R.prototype.cropData=function(A,N,E,K,Q){var rt,et=A.length,at=0,lt=et;for(Q=v(Q,this.cropShoulder),rt=0;rt<et;rt++)if(A[rt]>=E){at=Math.max(0,rt-Q);break}for(E=rt;E<et;E++)if(A[E]>K){lt=E+Q;break}return{xData:A.slice(at,lt),yData:N.slice(at,lt),start:at,end:lt}},R.prototype.generatePoints=function(){var A=this.options,N=this.processedData||A.data,E=this.processedXData,K=this.processedYData,Q=this.pointClass,et=E.length,rt=this.cropStart||0,at=this.hasGroupedData,lt=A.keys,ft=[];A=A.dataGrouping&&A.dataGrouping.groupAll?rt:0;var vt,gt,ht=this.data;if(!ht&&!at){var bt=[];bt.length=N.length,ht=this.data=bt}for(lt&&at&&(this.options.keys=!1),gt=0;gt<et;gt++){if(bt=rt+gt,at){var pt=(new Q).init(this,[E[gt]].concat(q(K[gt])));pt.dataGroup=this.groupMap[A+gt],pt.dataGroup.options&&(pt.options=pt.dataGroup.options,y(pt,pt.dataGroup.options),delete pt.dataLabels)}else(pt=ht[bt])||typeof N[bt]>"u"||(ht[bt]=pt=(new Q).init(this,N[bt],E[gt]));pt&&(pt.index=at?A+gt:bt,ft[gt]=pt)}if(this.options.keys=lt,ht&&(et!==(vt=ht.length)||at))for(gt=0;gt<vt;gt++)gt!==rt||at||(gt+=et),ht[gt]&&(ht[gt].destroyElements(),ht[gt].plotX=void 0);this.data=ht,this.points=ft,r(this,"afterGeneratePoints")},R.prototype.getXExtremes=function(A){return{min:B(A),max:t(A)}},R.prototype.getExtremes=function(A,N){var E=this.xAxis,K=this.yAxis,Q=this.processedXData||this.xData,et=[],rt=this.requireSorting?this.cropShoulder:0;K=!!K&&K.positiveValuesOnly;var at,lt=0,ft=0,vt=0,gt=(A=A||this.stackedYData||this.processedYData||[]).length;if(E){var ht=E.getExtremes();lt=ht.min,ft=ht.max}for(at=0;at<gt;at++){var bt=Q[at],pt=(T(ht=A[at])||p(ht))&&(ht.length||0<ht||!K);if(bt=N||this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||!E||(Q[at+rt]||bt)>=lt&&(Q[at-rt]||bt)<=ft,pt&&bt)if(pt=ht.length)for(;pt--;)T(ht[pt])&&(et[vt++]=ht[pt]);else et[vt++]=ht}return A={activeYData:et,dataMin:B(et),dataMax:t(et)},r(this,"afterGetExtremes",{dataExtremes:A}),A},R.prototype.applyExtremes=function(){var A=this.getExtremes();return this.dataMin=A.dataMin,this.dataMax=A.dataMax,A},R.prototype.getFirstValidPoint=function(A){for(var N=A.length,E=0,K=null;null===K&&E<N;)K=A[E],E++;return K},R.prototype.translate=function(){this.processedXData||this.processData(),this.generatePoints();var bt,pt,A=this.options,N=A.stacking,E=this.xAxis,K=E.categories,Q=this.enabledDataSorting,et=this.yAxis,rt=this.points,at=rt.length,lt=this.pointPlacementToXValue(),ft=!!lt,vt=A.threshold,gt=A.startFromThreshold?vt:0,ht=this.zoneAxis||"y",it=Number.MAX_VALUE;for(bt=0;bt<at;bt++){var nt=rt[bt],ct=nt.x,dt=void 0,mt=void 0,yt=nt.y,Ct=nt.low,kt=N&&et.stacking&&et.stacking.stacks[(this.negStacks&&yt<(gt?0:vt)?"-":"")+this.stackKey];if((et.positiveValuesOnly&&!et.validatePositiveValue(yt)||E.positiveValuesOnly&&!E.validatePositiveValue(ct))&&(nt.isNull=!0),nt.plotX=pt=w(M(E.translate(ct,0,0,0,1,lt,"flags"===this.type),-1e5,1e5)),N&&this.visible&&kt&&kt[ct]){var Mt=this.getStackIndicator(Mt,ct,this.index);!nt.isNull&&Mt.key&&(mt=(dt=kt[ct]).points[Mt.key]),dt&&p(mt)&&(yt=mt[1],(Ct=mt[0])===gt&&Mt.key===kt[ct].base&&(Ct=v(T(vt)?vt:et.min)),et.positiveValuesOnly&&h(Ct)&&0>=Ct&&(Ct=void 0),nt.total=nt.stackTotal=v(dt.total),nt.percentage=h(nt.y)&&dt.total?nt.y/dt.total*100:void 0,nt.stackY=yt,this.irregularWidths||dt.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))}if(nt.yBottom=h(Ct)?M(et.translate(Ct,0,1,0,1),-1e5,1e5):void 0,this.dataModify&&(yt=this.dataModify.modifyValue(yt,bt)),nt.plotY=void 0,T(yt)&&typeof(dt=et.translate(yt,!1,!0,!1,!0))<"u"&&(nt.plotY=M(dt,-1e5,1e5)),nt.isInside=this.isPointInside(nt),nt.clientX=ft?w(E.translate(ct,0,0,0,1,lt)):pt,nt.negative=nt[ht]<(A[ht+"Threshold"]||vt||0),nt.category=v(K&&K[nt.x],nt.x),!nt.isNull&&!1!==nt.visible){typeof wt<"u"&&(it=Math.min(it,Math.abs(pt-wt)));var wt=pt}nt.zone=this.zones.length?nt.getZone():void 0,!nt.graphic&&this.group&&Q&&(nt.isNew=!0)}this.closestPointRangePx=it,r(this,"afterTranslate")},R.prototype.getValidPoints=function(A,N,E){var K=this.chart;return(A||this.points||[]).filter(function(Q){return!(N&&!K.isInsidePlot(Q.plotX,Q.plotY,{inverted:K.inverted}))&&!1!==Q.visible&&(E||!Q.isNull)})},R.prototype.getClipBox=function(){var A=this.chart,N=this.xAxis,E=this.yAxis,K=G(A.clipBox);return N&&N.len!==A.plotSizeX&&(K.width=N.len),E&&E.len!==A.plotSizeY&&(K.height=E.len),K},R.prototype.getSharedClipKey=function(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0)},R.prototype.setClip=function(){var A=this.chart,N=this.group,E=this.markerGroup,K=A.sharedClips;A=A.renderer;var Q=this.getClipBox(),et=this.getSharedClipKey(),rt=K[et];rt?rt.animate(Q):K[et]=rt=A.clipRect(Q),N&&N.clip(!1===this.options.clip?void 0:rt),E&&E.clip()},R.prototype.animate=function(A){var N=this.chart,E=this.group,K=this.markerGroup,Q=N.inverted,et=k(this.options.animation),rt=[this.getSharedClipKey(),et.duration,et.easing,et.defer].join(),at=N.sharedClips[rt],lt=N.sharedClips[rt+"m"];if(A&&E)et=this.getClipBox(),at?at.attr("height",et.height):(et.width=0,Q&&(et.x=N.plotHeight),at=N.renderer.clipRect(et),N.sharedClips[rt]=at,lt=N.renderer.clipRect({x:-99,y:-99,width:Q?N.plotWidth+199:99,height:Q?99:N.plotHeight+199}),N.sharedClips[rt+"m"]=lt),E.clip(at),K&&K.clip(lt);else if(at&&!at.hasClass("highcharts-animating")){N=this.getClipBox();var ft=et.step;K&&K.element.childNodes.length&&(et.step=function(vt,gt){ft&&ft.apply(gt,arguments),"width"===gt.prop&&lt&&lt.element&&lt.attr(Q?"height":"width",vt+99)}),at.addClass("highcharts-animating").animate(N,et)}},R.prototype.afterAnimate=function(){var A=this;this.setClip(),O(this.chart.sharedClips,function(N,E,K){N&&!A.chart.container.querySelector('[clip-path="url(#'.concat(N.id,')"]'))&&(N.destroy(),delete K[E])}),this.finishedAnimating=!0,r(this,"afterAnimate")},R.prototype.drawPoints=function(A){void 0===A&&(A=this.points);var lt,ft,N=this.chart,E=N.styledMode,K=this.colorAxis,Q=this.options.marker,et=this[this.specialGroup||"markerGroup"],rt=this.xAxis,at=v(Q.enabled,!(rt&&!rt.isRadial)||null,this.closestPointRangePx>=Q.enabledThreshold*Q.radius);if(!1!==Q.enabled||this._hasPointMarkers)for(lt=0;lt<A.length;lt++){var vt=A[lt],gt=(ft=vt.graphic)?"animate":"attr",ht=vt.marker||{},bt=!!vt.marker;if((at&&typeof ht.enabled>"u"||ht.enabled)&&!vt.isNull&&!1!==vt.visible){var pt=v(ht.symbol,this.symbol,"rect"),it=this.markerAttribs(vt,vt.selected&&"select");this.enabledDataSorting&&(vt.startXPos=rt.reversed?-(it.width||0):rt.width);var nt=!1!==vt.isInside;!ft&&nt&&(0<(it.width||0)||vt.hasImage)&&(vt.graphic=ft=N.renderer.symbol(pt,it.x,it.y,it.width,it.height,bt?ht:Q).add(et),this.enabledDataSorting&&N.hasRendered&&(ft.attr({x:vt.startXPos}),gt="animate")),ft&&"animate"===gt&&ft[nt?"show":"hide"](nt).animate(it),ft&&(ht=this.pointAttribs(vt,E||!vt.selected?void 0:"select"),E?K&&ft.css({fill:ht.fill}):ft[gt](ht)),ft&&ft.addClass(vt.getClassName(),!0)}else ft&&(vt.graphic=ft.destroy())}},R.prototype.markerAttribs=function(A,N){var E=this.options,K=E.marker,Q=A.marker||{},et=Q.symbol||K.symbol,rt={},at=v(Q.radius,K&&K.radius);return N&&(K=K.states[N],at=v((N=Q.states&&Q.states[N])&&N.radius,K&&K.radius,at&&at+(K&&K.radiusPlus||0))),A.hasImage=et&&0===et.indexOf("url"),A.hasImage&&(at=0),A=A.pos(),T(at)&&A&&(rt.x=A[0]-at,rt.y=A[1]-at,E.crisp&&(rt.x=Math.floor(rt.x))),at&&(rt.width=rt.height=2*at),rt},R.prototype.pointAttribs=function(A,N){var E=this.options.marker,K=A&&A.options,Q=K&&K.marker||{},et=K&&K.color,rt=A&&A.color,at=A&&A.zone&&A.zone.color,lt=this.color;return A=v(Q.lineWidth,E.lineWidth),K=1,lt=et||at||rt||lt,et=Q.fillColor||E.fillColor||lt,rt=Q.lineColor||E.lineColor||lt,E=E.states[N=N||"normal"]||{},A=v((N=Q.states&&Q.states[N]||{}).lineWidth,E.lineWidth,A+v(N.lineWidthPlus,E.lineWidthPlus,0)),{stroke:rt=N.lineColor||E.lineColor||rt,"stroke-width":A,fill:et=N.fillColor||E.fillColor||et,opacity:K=v(N.opacity,E.opacity,K)}},R.prototype.destroy=function(A){var rt,at,lt,N=this,E=N.chart,K=/AppleWebKit\/533/.test(_.navigator.userAgent),Q=N.data||[];for(r(N,"destroy",{keepEventsForUpdate:A}),this.removeEvents(A),(N.axisTypes||[]).forEach(function(ft){(lt=N[ft])&&lt.series&&(l(lt.series,N),lt.isDirty=lt.forceRedraw=!0)}),N.legendItem&&N.chart.legend.destroyItem(N),rt=Q.length;rt--;)(at=Q[rt])&&at.destroy&&at.destroy();N.clips&&N.clips.forEach(function(ft){return ft.destroy()}),Z.clearTimeout(N.animationTimeout),O(N,function(ft,vt){ft instanceof S&&!ft.survive&&ft[K&&"group"===vt?"hide":"destroy"]()}),E.hoverSeries===N&&(E.hoverSeries=void 0),l(E.series,N),E.orderSeries(),O(N,function(ft,vt){A&&"hcEvents"===vt||delete N[vt]})},R.prototype.applyZones=function(){var vt,gt,ht,bt,pt,it,nt,ct,A=this,N=this.chart,E=N.renderer,K=this.zones,Q=this.clips||[],et=this.graph,rt=this.area,at=Math.max(N.plotWidth,N.plotHeight),lt=this[(this.zoneAxis||"y")+"Axis"],ft=N.inverted,dt=!1;if(K.length&&(et||rt)&&lt&&typeof lt.min<"u"){var mt=lt.reversed,yt=lt.horiz;et&&!this.showLine&&et.hide(),rt&&rt.hide();var Ct=lt.getExtremes();K.forEach(function(kt,Mt){vt=mt?yt?N.plotWidth:0:yt?0:lt.toPixels(Ct.min)||0,vt=M(v(gt,vt),0,at),gt=M(Math.round(lt.toPixels(v(kt.value,Ct.max),!0)||0),0,at),dt&&(vt=gt=lt.toPixels(Ct.max)),bt=Math.abs(vt-gt),pt=Math.min(vt,gt),it=Math.max(vt,gt),lt.isXAxis?(ht={x:ft?it:pt,y:0,width:bt,height:at},yt||(ht.x=N.plotHeight-ht.x)):(ht={x:0,y:ft?it:pt,width:at,height:bt},yt&&(ht.y=N.plotWidth-ht.y)),ft&&E.isVML&&(ht=lt.isXAxis?{x:0,y:mt?pt:it,height:ht.width,width:N.chartWidth}:{x:ht.y-N.plotLeft-N.spacingBox.x,y:0,width:ht.height,height:N.chartHeight}),Q[Mt]?Q[Mt].animate(ht):Q[Mt]=E.clipRect(ht),nt=A["zone-area-"+Mt],ct=A["zone-graph-"+Mt],et&&ct&&ct.clip(Q[Mt]),rt&&nt&&nt.clip(Q[Mt]),dt=kt.value>Ct.max,A.resetZones&&0===gt&&(gt=void 0)}),this.clips=Q}else A.visible&&(et&&et.show(),rt&&rt.show())},R.prototype.plotGroup=function(A,N,E,K,Q){var et=this[A],rt=!et;return E={visibility:E,zIndex:K||.1},typeof this.opacity>"u"||this.chart.styledMode||"inactive"===this.state||(E.opacity=this.opacity),rt&&(this[A]=et=this.chart.renderer.g().add(Q)),et.addClass("highcharts-"+N+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(h(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(et.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),et.attr(E)[rt?"attr":"animate"](this.getPlotBox(N)),et},R.prototype.getPlotBox=function(A){var N=this.xAxis,E=this.yAxis,K=this.chart;return A=K.inverted&&!K.polar&&N&&!1!==this.invertible&&"series"===A,K.inverted&&(N=E,E=this.xAxis),{translateX:N?N.left:K.plotLeft,translateY:E?E.top:K.plotTop,rotation:A?90:0,rotationOriginX:A?(N.len-E.len)/2:0,rotationOriginY:A?(N.len+E.len)/2:0,scaleX:A?-1:1,scaleY:1}},R.prototype.removeEvents=function(A){A||C(this),this.eventsToUnbind.length&&(this.eventsToUnbind.forEach(function(N){N()}),this.eventsToUnbind.length=0)},R.prototype.render=function(){var A=this,N=A.chart,E=A.options,K=k(E.animation),Q=A.visible?"inherit":"hidden",et=E.zIndex,rt=A.hasRendered,at=N.seriesGroup;N=!A.finishedAnimating&&N.renderer.isSVG?K.duration:0,r(this,"render"),A.plotGroup("group","series",Q,et,at),A.markerGroup=A.plotGroup("markerGroup","markers",Q,et,at),!1!==E.clip&&A.setClip(),A.animate&&N&&A.animate(!0),A.drawGraph&&(A.drawGraph(),A.applyZones()),A.visible&&A.drawPoints(),A.drawDataLabels&&A.drawDataLabels(),A.redrawPoints&&A.redrawPoints(),A.drawTracker&&!1!==A.options.enableMouseTracking&&A.drawTracker(),A.animate&&N&&A.animate(),rt||(N&&K.defer&&(N+=K.defer),A.animationTimeout=J(function(){A.afterAnimate()},N||0)),A.isDirty=!1,A.hasRendered=!0,r(A,"afterRender")},R.prototype.redraw=function(){var A=this.isDirty||this.isDirtyData;this.translate(),this.render(),A&&delete this.kdTree},R.prototype.searchPoint=function(A,N){var E=this.xAxis,K=this.yAxis,Q=this.chart.inverted;return this.searchKDTree({clientX:Q?E.len-A.chartY+E.pos:A.chartX-E.pos,plotY:Q?K.len-A.chartX+K.pos:A.chartY-K.pos},N,A)},R.prototype.buildKDTree=function(A){function N(Q,et,rt){var at=Q&&Q.length;if(at){var lt=E.kdAxisArray[et%rt];return Q.sort(function(ft,vt){return ft[lt]-vt[lt]}),{point:Q[at=Math.floor(at/2)],left:N(Q.slice(0,at),et+1,rt),right:N(Q.slice(at+1),et+1,rt)}}}this.buildingKdTree=!0;var E=this,K=-1<E.options.findNearestPointBy.indexOf("y")?2:1;delete E.kdTree,J(function(){E.kdTree=N(E.getValidPoints(null,!E.directTouch),K,K),E.buildingKdTree=!1},E.options.kdNow||A&&"touchstart"===A.type?0:1)},R.prototype.searchKDTree=function(A,N,E){var Q=this,et=this.kdAxisArray[0],rt=this.kdAxisArray[1],at=N?"distX":"dist";if(N=-1<Q.options.findNearestPointBy.indexOf("y")?2:1,this.kdTree||this.buildingKdTree||this.buildKDTree(E),this.kdTree)return function K(lt,ft,vt,gt){var ht=ft.point,bt=Q.kdAxisArray[vt%gt],pt=ht,it=h(lt[et])&&h(ht[et])?Math.pow(lt[et]-ht[et],2):null,nt=h(lt[rt])&&h(ht[rt])?Math.pow(lt[rt]-ht[rt],2):null;return ht.dist=h(nt=(it||0)+(nt||0))?Math.sqrt(nt):Number.MAX_VALUE,ht.distX=h(it)?Math.sqrt(it):Number.MAX_VALUE,it=0>(bt=lt[bt]-ht[bt])?"right":"left",ft[nt=0>bt?"left":"right"]&&(pt=(nt=K(lt,ft[nt],vt+1,gt))[at]<pt[at]?nt:ht),ft[it]&&Math.sqrt(bt*bt)<pt[at]&&(pt=(lt=K(lt,ft[it],vt+1,gt))[at]<pt[at]?lt:pt),pt}(A,this.kdTree,N,N)},R.prototype.pointPlacementToXValue=function(){var A=this.options,N=A.pointRange,E=this.xAxis;return"between"===(A=A.pointPlacement)&&(A=E.reversed?-.5:.5),T(A)?A*(N||E.pointRange):0},R.prototype.isPointInside=function(A){var N=this.chart,E=this.xAxis,K=this.yAxis;return typeof A.plotY<"u"&&typeof A.plotX<"u"&&0<=A.plotY&&A.plotY<=(K?K.len:N.plotHeight)&&0<=A.plotX&&A.plotX<=(E?E.len:N.plotWidth)},R.prototype.drawTracker=function(){var A=this,N=A.options,E=N.trackByArea,K=[].concat(E?A.areaPath:A.graphPath),Q=A.chart,et=Q.pointer,rt=Q.renderer,at=Q.options.tooltip.snap,lt=A.tracker,ft=function(gt){Q.hoverSeries!==A&&A.onMouseOver()},vt="rgba(192,192,192,"+(u?1e-4:.002)+")";lt?lt.attr({d:K}):A.graph&&(A.tracker=rt.path(K).attr({visibility:A.visible?"inherit":"hidden",zIndex:2}).addClass(E?"highcharts-tracker-area":"highcharts-tracker-line").add(A.group),Q.styledMode||A.tracker.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:vt,fill:E?vt:"none","stroke-width":A.graph.strokeWidth()+(E?0:2*at)}),[A.tracker,A.markerGroup,A.dataLabelsGroup].forEach(function(gt){gt&&(gt.addClass("highcharts-tracker").on("mouseover",ft).on("mouseout",function(ht){et.onTrackerMouseOut(ht)}),N.cursor&&!Q.styledMode&&gt.css({cursor:N.cursor}),c)&&gt.on("touchstart",ft)})),r(this,"afterDrawTracker")},R.prototype.addPoint=function(A,N,E,K,Q){var et=this.options,rt=this.data,at=this.chart,lt=this.xAxis;lt=lt&&lt.hasNames&&lt.names;var gt,ft=et.data,vt=this.xData;N=v(N,!0);var ht={series:this};this.pointClass.prototype.applyOptions.apply(ht,[A]);var bt=ht.x,pt=vt.length;if(this.requireSorting&&bt<vt[pt-1])for(gt=!0;pt&&vt[pt-1]>bt;)pt--;this.updateParallelArrays(ht,"splice",pt,0,0),this.updateParallelArrays(ht,pt),lt&&ht.name&&(lt[bt]=ht.name),ft.splice(pt,0,A),(gt||this.processedData)&&(this.data.splice(pt,0,null),this.processData()),"point"===et.legendType&&this.generatePoints(),E&&(rt[0]&&rt[0].remove?rt[0].remove(!1):(rt.shift(),this.updateParallelArrays(ht,"shift"),ft.shift())),!1!==Q&&r(this,"addPoint",{point:ht}),this.isDirtyData=this.isDirty=!0,N&&at.redraw(K)},R.prototype.removePoint=function(A,N,E){var K=this,Q=K.data,et=Q[A],rt=K.points,at=K.chart,lt=function(){rt&&rt.length===Q.length&&rt.splice(A,1),Q.splice(A,1),K.options.data.splice(A,1),K.updateParallelArrays(et||{series:K},"splice",A,1),et&&et.destroy(),K.isDirty=!0,K.isDirtyData=!0,N&&at.redraw()};b(E,at),N=v(N,!0),et?et.firePointEvent("remove",null,lt):lt()},R.prototype.remove=function(A,N,E,K){function Q(){et.destroy(K),rt.isDirtyLegend=rt.isDirtyBox=!0,rt.linkSeries(),v(A,!0)&&rt.redraw(N)}var et=this,rt=et.chart;!1!==E?r(et,"remove",null,Q):Q()},R.prototype.update=function(A,N){A=x(A,this.userOptions),r(this,"update",{options:A});var E=this,K=E.chart,Q=E.userOptions,et=E.initialType||E.type,rt=K.options.plotOptions,at=D[et].prototype,lt=E.finishedAnimating&&{animation:!1},ft={},vt=["eventOptions","navigatorSeries","baseSeries"],gt=A.type||Q.type||K.options.chart.type,ht=!(this.hasDerivedData||gt&&gt!==this.type||typeof A.pointStart<"u"||typeof A.pointInterval<"u"||typeof A.relativeXValue<"u"||A.joinBy||A.mapData||E.hasOptionChanged("dataGrouping")||E.hasOptionChanged("pointStart")||E.hasOptionChanged("pointInterval")||E.hasOptionChanged("pointIntervalUnit")||E.hasOptionChanged("keys"));if(gt=gt||et,ht&&(vt.push("data","isDirtyData","points","processedData","processedXData","processedYData","xIncrement","cropped","_hasPointMarkers","_hasPointLabels","clips","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX"),!1!==A.visible&&vt.push("area","graph"),E.parallelArrays.forEach(function(pt){vt.push(pt+"Data")}),A.data&&(A.dataSorting&&y(E.options.dataSorting,A.dataSorting),this.setData(A.data,!1))),A=G(Q,lt,{index:typeof Q.index>"u"?E.index:Q.index,pointStart:v(rt&&rt.series&&rt.series.pointStart,Q.pointStart,E.xData[0])},!ht&&{data:E.options.data},A),ht&&A.data&&(A.data=E.options.data),(vt=["group","markerGroup","dataLabelsGroup","transformGroup","shadowGroup"].concat(vt)).forEach(function(pt){vt[pt]=E[pt],delete E[pt]}),rt=!1,D[gt]){if(rt=gt!==E.type,E.remove(!1,!1,!1,!0),rt)if(Object.setPrototypeOf)Object.setPrototypeOf(E,D[gt].prototype);else{for(bt in lt=Object.hasOwnProperty.call(E,"hcEvents")&&E.hcEvents,at)E[bt]=void 0;y(E,D[gt].prototype),lt?E.hcEvents=lt:delete E.hcEvents}}else o(17,!0,K,{missingModuleFor:gt});if(vt.forEach(function(pt){E[pt]=vt[pt]}),E.init(K,A),ht&&this.points){if(!1===(A=E.options).visible)ft.graphic=1,ft.dataLabel=1;else if(!E._hasPointLabels){var bt=A.dataLabels;Q=Q.marker||{},!(at=A.marker)||!1!==at.enabled&&Q.symbol===at.symbol&&Q.height===at.height&&Q.width===at.width||(ft.graphic=1),bt&&!1===bt.enabled&&(ft.dataLabel=1)}for(Q=0,at=this.points;Q<at.length;Q++)(bt=at[Q])&&bt.series&&(bt.resolveColor(),Object.keys(ft).length&&bt.destroyElements(ft),!1===A.showInLegend&&bt.legendItem&&K.legend.destroyItem(bt))}E.initialType=et,K.linkSeries(),rt&&E.linkedSeries.length&&(E.isDirtyData=!0),r(this,"afterUpdate"),v(N,!0)&&K.redraw(!!ht&&void 0)},R.prototype.setName=function(A){this.name=this.options.name=this.userOptions.name=A,this.chart.isDirtyLegend=!0},R.prototype.hasOptionChanged=function(A){var N=this.options[A],E=this.chart.options.plotOptions,K=this.userOptions[A];return K?N!==K:N!==v(E&&E[this.type]&&E[this.type][A],E&&E.series&&E.series[A],N)},R.prototype.onMouseOver=function(){var A=this.chart,N=A.hoverSeries;A.pointer.setHoverChartIndex(),N&&N!==this&&N.onMouseOut(),this.options.events.mouseOver&&r(this,"mouseOver"),this.setState("hover"),A.hoverSeries=this},R.prototype.onMouseOut=function(){var A=this.options,N=this.chart,E=N.tooltip,K=N.hoverPoint;N.hoverSeries=null,K&&K.onMouseOut(),this&&A.events.mouseOut&&r(this,"mouseOut"),!E||this.stickyTracking||E.shared&&!this.noSharedTooltip||E.hide(),N.series.forEach(function(Q){Q.setState("",!0)})},R.prototype.setState=function(A,N){var E=this,K=E.options,Q=E.graph,et=K.inactiveOtherPoints,rt=K.states,at=v(rt[A||"normal"]&&rt[A||"normal"].animation,E.chart.options.chart.animation),lt=K.lineWidth,ft=0,vt=K.opacity;if(E.state!==(A=A||"")&&([E.group,E.markerGroup,E.dataLabelsGroup].forEach(function(gt){gt&&(E.state&&gt.removeClass("highcharts-series-"+E.state),A&&gt.addClass("highcharts-series-"+A))}),E.state=A,!E.chart.styledMode)){if(rt[A]&&!1===rt[A].enabled)return;if(A&&(lt=rt[A].lineWidth||lt+(rt[A].lineWidthPlus||0),vt=v(rt[A].opacity,vt)),Q&&!Q.dashstyle&&T(lt))for(Q.animate(K={"stroke-width":lt},at);E["zone-graph-"+ft];)E["zone-graph-"+ft].animate(K,at),ft+=1;et||[E.group,E.markerGroup,E.dataLabelsGroup,E.labelBySeries].forEach(function(gt){gt&&gt.animate({opacity:vt},at)})}N&&et&&E.points&&E.setAllPointsToState(A||void 0)},R.prototype.setAllPointsToState=function(A){this.points.forEach(function(N){N.setState&&N.setState(A)})},R.prototype.setVisible=function(A,N){var E=this,K=E.chart,Q=K.options.chart.ignoreHiddenSeries,rt=(E.visible=A=E.options.visible=E.userOptions.visible=typeof A>"u"?!E.visible:A)?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach(function(at){E[at]&&E[at][rt]()}),(K.hoverSeries===E||(K.hoverPoint&&K.hoverPoint.series)===E)&&E.onMouseOut(),E.legendItem&&K.legend.colorizeItem(E,A),E.isDirty=!0,E.options.stacking&&K.series.forEach(function(at){at.options.stacking&&at.visible&&(at.isDirty=!0)}),E.linkedSeries.forEach(function(at){at.setVisible(A,!1)}),Q&&(K.isDirtyBox=!0),r(E,rt),!1!==N&&K.redraw()},R.prototype.show=function(){this.setVisible(!0)},R.prototype.hide=function(){this.setVisible(!1)},R.prototype.select=function(A){this.selected=A=this.options.selected=typeof A>"u"?!this.selected:A,this.checkbox&&(this.checkbox.checked=A),r(this,A?"select":"unselect")},R.prototype.shouldShowTooltip=function(A,N,E){return void 0===E&&(E={}),E.series=this,E.visiblePlotOnly=!0,this.chart.isInsidePlot(A,N,E)},R.defaultOptions=W,R.types=P.seriesTypes,R.registerType=P.registerSeriesType,R}(),y(Y.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,cropShoulder:1,directTouch:!1,drawLegendSymbol:tt.drawLineMarker,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:V,requireSorting:!0,sorted:!0}),P.series=Y,Y}),j(ot,"Extensions/ScrollablePlotArea.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Axis/Axis.js"],ot["Core/Chart/Chart.js"],ot["Core/Series/Series.js"],ot["Core/Renderer/RendererRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V){var W=Y.stop,P=V.addEvent,S=V.createElement,Z=V.defined,k=V.merge,b=V.pick;P(X,"afterSetChartSize",function(m){var a=this.options.chart.scrollablePlotArea,c=a&&a.minWidth;if(a=a&&a.minHeight,!this.renderer.forExport){if(c){if(this.scrollablePixelsX=c=Math.max(0,c-this.chartWidth)){this.scrollablePlotBox=this.renderer.scrollablePlotBox=k(this.plotBox),this.plotBox.width=this.plotWidth+=c,this.inverted?this.clipBox.height+=c:this.clipBox.width+=c;var u={1:{name:"right",value:c}}}}else a&&(this.scrollablePixelsY=c=Math.max(0,a-this.chartHeight),Z(c)&&(this.scrollablePlotBox=this.renderer.scrollablePlotBox=k(this.plotBox),this.plotBox.height=this.plotHeight+=c,this.inverted?this.clipBox.width+=c:this.clipBox.height+=c,u={2:{name:"bottom",value:c}}));u&&!m.skipAxes&&this.axes.forEach(function(_){u[_.side]?_.getPlotLinePath=function(){var D=u[_.side].name,t=this[D];this[D]=t-u[_.side].value;var B=H.prototype.getPlotLinePath.apply(this,arguments);return this[D]=t,B}:(_.setAxisSize(),_.setAxisTranslation())})}}),P(X,"render",function(){this.scrollablePixelsX||this.scrollablePixelsY?(this.setUpScrolling&&this.setUpScrolling(),this.applyFixed()):this.fixedDiv&&this.applyFixed()}),X.prototype.setUpScrolling=function(){var c,m=this,a={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};this.scrollablePixelsX&&(a.overflowX="auto"),this.scrollablePixelsY&&(a.overflowY="auto"),this.scrollingParent=S("div",{className:"highcharts-scrolling-parent"},{position:"relative"},this.renderTo),this.scrollingContainer=S("div",{className:"highcharts-scrolling"},a,this.scrollingParent),P(this.scrollingContainer,"scroll",function(){m.pointer&&(delete m.pointer.chartPosition,m.hoverPoint&&(c=m.hoverPoint),m.pointer.runPointActions(void 0,c,!0))}),this.innerContainer=S("div",{className:"highcharts-inner-container"},null,this.scrollingContainer),this.innerContainer.appendChild(this.container),this.setUpScrolling=null},X.prototype.moveFixedElements=function(){var u,m=this.container,a=this.fixedRenderer,c=".highcharts-breadcrumbs-group .highcharts-contextbutton .highcharts-credits .highcharts-legend .highcharts-legend-checkbox .highcharts-navigator-series .highcharts-navigator-xaxis .highcharts-navigator-yaxis .highcharts-navigator .highcharts-reset-zoom .highcharts-drillup-button .highcharts-scrollbar .highcharts-subtitle .highcharts-title".split(" ");this.scrollablePixelsX&&!this.inverted?u=".highcharts-yaxis":this.scrollablePixelsX&&this.inverted||this.scrollablePixelsY&&!this.inverted?u=".highcharts-xaxis":this.scrollablePixelsY&&this.inverted&&(u=".highcharts-yaxis"),u&&c.push(u+":not(.highcharts-radial-axis)",u+"-labels:not(.highcharts-radial-axis-labels)"),c.forEach(function(_){[].forEach.call(m.querySelectorAll(_),function(D){(D.namespaceURI===a.SVG_NS?a.box:a.box.parentNode).appendChild(D),D.style.pointerEvents="auto"})})},X.prototype.applyFixed=function(){var m=!this.fixedDiv,a=this.options.chart,c=a.scrollablePlotArea,u=tt.getRendererType();m?(this.fixedDiv=S("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:(a.style&&a.style.zIndex||0)+2,top:0},null,!0),this.scrollingContainer&&this.scrollingContainer.parentNode.insertBefore(this.fixedDiv,this.scrollingContainer),this.renderTo.style.overflow="visible",this.fixedRenderer=a=new u(this.fixedDiv,this.chartWidth,this.chartHeight,this.options.chart.style),this.scrollableMask=a.path().attr({fill:this.options.chart.backgroundColor||"#fff","fill-opacity":b(c.opacity,.85),zIndex:-1}).addClass("highcharts-scrollable-mask").add(),P(this,"afterShowResetZoom",this.moveFixedElements),P(this,"afterApplyDrilldown",this.moveFixedElements),P(this,"afterLayOutTitles",this.moveFixedElements)):this.fixedRenderer.setSize(this.chartWidth,this.chartHeight),(this.scrollableDirty||m)&&(this.scrollableDirty=!1,this.moveFixedElements()),a=this.chartWidth+(this.scrollablePixelsX||0),u=this.chartHeight+(this.scrollablePixelsY||0),W(this.container),this.container.style.width=a+"px",this.container.style.height=u+"px",this.renderer.boxWrapper.attr({width:a,height:u,viewBox:[0,0,a,u].join(" ")}),this.chartBackground.attr({width:a,height:u}),this.scrollingContainer.style.height=this.chartHeight+"px",m&&(c.scrollPositionX&&(this.scrollingContainer.scrollLeft=this.scrollablePixelsX*c.scrollPositionX),c.scrollPositionY&&(this.scrollingContainer.scrollTop=this.scrollablePixelsY*c.scrollPositionY)),m=this.plotTop-(u=this.axisOffset)[0]-1,c=this.plotLeft-u[3]-1,a=this.plotTop+this.plotHeight+u[2]+1,u=this.plotLeft+this.plotWidth+u[1]+1;var _=this.plotLeft+this.plotWidth-(this.scrollablePixelsX||0),D=this.plotTop+this.plotHeight-(this.scrollablePixelsY||0);m=this.scrollablePixelsX?[["M",0,m],["L",this.plotLeft-1,m],["L",this.plotLeft-1,a],["L",0,a],["Z"],["M",_,m],["L",this.chartWidth,m],["L",this.chartWidth,a],["L",_,a],["Z"]]:this.scrollablePixelsY?[["M",c,0],["L",c,this.plotTop-1],["L",u,this.plotTop-1],["L",u,0],["Z"],["M",c,D],["L",c,this.chartHeight],["L",u,this.chartHeight],["L",u,D],["Z"]]:[["M",0,0]],"adjustHeight"!==this.redrawTrigger&&this.scrollableMask.attr({d:m})},P(H,"afterInit",function(){this.chart.scrollableDirty=!0}),P(z,"show",function(){this.chart.scrollableDirty=!0})}),j(ot,"Core/Axis/Stacking/StackItem.js",[ot["Core/FormatUtilities.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X){var z=Y.format,tt=H.series,V=X.destroyObjectProperties,W=X.pick,P=X.isNumber;return function(){function S(Z,k,b,m,a){var c=Z.chart.inverted,u=Z.reversed;this.axis=Z,Z=this.isNegative=!!b!=!!u,this.options=k=k||{},this.x=m,this.cumulative=this.total=null,this.points={},this.hasValidPoints=!1,this.stack=a,this.rightCliff=this.leftCliff=0,this.alignOptions={align:k.align||(c?Z?"left":"right":"center"),verticalAlign:k.verticalAlign||(c?"middle":Z?"bottom":"top"),y:k.y,x:k.x},this.textAlign=k.textAlign||(c?Z?"right":"left":"center")}return S.prototype.destroy=function(){V(this,this.axis)},S.prototype.render=function(Z){var k=this.axis.chart,b=this.options,m=b.format;m=m?z(m,this,k):b.formatter.call(this),this.label?this.label.attr({text:m,visibility:"hidden"}):(this.label=k.renderer.label(m,null,void 0,b.shape,void 0,void 0,b.useHTML,!1,"stack-labels"),m={r:b.borderRadius||0,text:m,padding:W(b.padding,5),visibility:"hidden"},k.styledMode||(m.fill=b.backgroundColor,m.stroke=b.borderColor,m["stroke-width"]=b.borderWidth,this.label.css(b.style||{})),this.label.attr(m),this.label.added||this.label.add(Z)),this.label.labelrank=k.plotSizeY},S.prototype.setOffset=function(Z,k,b,m,a,c){var u=this.alignOptions,_=this.axis,D=this.label,t=this.options,B=this.textAlign,M=_.chart;Z=this.getStackBox({xOffset:Z,width:k,boxBottom:b,boxTop:m,defaultX:a,xAxis:c}),a=u.verticalAlign,D&&Z&&(k=D.getBBox(),b=D.padding,m="justify"===W(t.overflow,"justify"),u.x=t.x||0,u.y=t.y||0,B=(a=this.adjustStackPosition({labelBox:k,verticalAlign:a,textAlign:B})).x,a=a.y,Z.x-=B,Z.y-=a,D.align(u,!1,Z),(B=M.isInsidePlot(D.alignAttr.x+u.x+B,D.alignAttr.y+u.y+a))||(m=!1),m&&tt.prototype.justifyDataLabel.call(_,D,u,D.alignAttr,k,Z),D.attr({x:D.alignAttr.x,y:D.alignAttr.y,rotation:t.rotation,rotationOriginX:k.width/2,rotationOriginY:k.height/2}),W(!m&&t.crop,!0)&&(B=P(D.x)&&P(D.y)&&M.isInsidePlot(D.x-b+D.width,D.y)&&M.isInsidePlot(D.x+b,D.y)),D[B?"show":"hide"]())},S.prototype.adjustStackPosition=function(Z){var k=Z.labelBox,b={bottom:0,middle:1,top:2,right:1,center:0,left:-1};return{x:k.width/2+k.width/2*b[Z.textAlign],y:k.height/2*b[Z.verticalAlign]}},S.prototype.getStackBox=function(Z){var k=this.axis,b=k.chart,m=Z.boxTop,a=Z.defaultX,c=Z.xOffset,u=Z.width,_=Z.boxBottom;return m=k.stacking.usePercentage?100:W(m,this.total,0),m=k.toPixels(m),Z=W(a,(Z.xAxis||b.xAxis[0]).toPixels(this.x))+c,k=k.toPixels(_||0),k=Math.abs(m-k),_=this.isNegative,b.inverted?{x:(_?m:m-k)-b.plotLeft,y:Z-b.plotTop,width:k,height:u}:{x:Z-b.plotLeft,y:(_?m-k:m)-b.plotTop,width:u,height:k}},S}()}),j(ot,"Core/Axis/Stacking/StackingAxis.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Axis/Axis.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Axis/Stacking/StackItem.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt){function V(){var y=this,s=y.inverted;y.yAxis.forEach(function(r){r.stacking&&r.stacking.stacks&&r.hasVisibleSeries&&(r.stacking.oldStacks=r.stacking.stacks)}),y.series.forEach(function(r){var d=r.xAxis&&r.xAxis.options||{};!r.options.stacking||!0!==r.visible&&!1!==y.options.chart.ignoreHiddenSeries||(r.stackKey=[r.type,h(r.options.stack,""),s?d.top:d.left,s?d.height:d.width].join())})}function W(){var y=this.stacking;if(y){var s=y.stacks;w(s,function(r,d){t(r),s[d]=null}),y&&y.stackTotalGroup&&y.stackTotalGroup.destroy()}}function P(){"yAxis"!==this.coll||this.stacking||(this.stacking=new l(this))}function S(y,s,r,d){return!D(y)||y.x!==s||d&&y.stackKey!==d?y={x:s,index:0,key:d,stackKey:d}:y.index++,y.key=[r,s,y.index].join(),y}function Z(){var T,y=this,s=y.stackKey,r=y.yAxis.stacking.stacks,d=y.processedXData,p=y[y.options.stacking+"Stacker"];p&&[s,"-"+s].forEach(function(U){for(var O,v,G=d.length;G--;)T=y.getStackIndicator(T,O=d[G],y.index,U),(v=(O=r[U]&&r[U][O])&&O.points[T.key])&&p.call(y,v,O,G)})}function k(y,s,r){y[0]=_(y[0]*(s=s.total?100/s.total:0)),y[1]=_(y[1]*s),this.stackedYData[r]=y[1]}function b(){var y=this.yAxis.stacking;this.options.centerInCategory&&(this.is("column")||this.is("columnrange"))&&!this.options.stacking&&1<this.chart.series.length?c.setStackedPoints.call(this,"group"):y&&w(y.stacks,function(s,r){"group"===r.slice(-5)&&(w(s,function(d){return d.destroy()}),delete y.stacks[r])})}function m(y){var s=this.chart,r=y||this.options.stacking;if(r&&(!0===this.visible||!1===s.options.chart.ignoreHiddenSeries)){var d=this.processedXData,p=this.processedYData,T=[],U=p.length,G=this.options,O=G.threshold,v=h(G.startFromThreshold&&O,0);G=G.stack;var A,N,C="-"+(y=y?""+this.type+",".concat(r):this.stackKey),q=this.negStacks,J=(s="group"===r?s.yAxis[0]:this.yAxis).stacking.stacks,R=s.stacking.oldStacks;for(s.stacking.stacksTouched+=1,N=0;N<U;N++){var E=d[N],K=p[N],Q=this.getStackIndicator(Q,E,this.index),et=Q.key,rt=(A=q&&K<(v?0:O))?C:y;J[rt]||(J[rt]={}),J[rt][E]||(R[rt]&&R[rt][E]?(J[rt][E]=R[rt][E],J[rt][E].total=null):J[rt][E]=new z(s,s.options.stackLabels,!!A,E,G)),rt=J[rt][E],null!==K?(rt.points[et]=rt.points[this.index]=[h(rt.cumulative,v)],D(rt.cumulative)||(rt.base=et),rt.touched=s.stacking.stacksTouched,0<Q.index&&!1===this.singleStacks&&(rt.points[et][0]=rt.points[this.index+","+E+",0"][0])):rt.points[et]=rt.points[this.index]=null,"percent"===r?(A=A?y:C,rt.total=q&&J[A]&&J[A][E]?(A=J[A][E]).total=Math.max(A.total,rt.total)+Math.abs(K)||0:_(rt.total+(Math.abs(K)||0))):"group"===r?(M(K)&&(K=K[0]),null!==K&&(rt.total=(rt.total||0)+1)):rt.total=_(rt.total+(K||0)),rt.cumulative="group"===r?(rt.total||1)-1:h(rt.cumulative,v)+(K||0),null!==K&&(rt.points[et].push(rt.cumulative),T[N]=rt.cumulative,rt.hasValidPoints=!0)}"percent"===r&&(s.stacking.usePercentage=!0),"group"!==r&&(this.stackedYData=T),s.stacking.oldStacks={}}}var o,y,s,a=Y.getDeferredAnimation,c=X.series.prototype,u=tt.addEvent,_=tt.correctFloat,D=tt.defined,t=tt.destroyObjectProperties,B=tt.fireEvent,M=tt.isArray,x=tt.isNumber,w=tt.objectEach,h=tt.pick,l=function(){function y(s){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=s}return y.prototype.buildStacks=function(){var T,s=this.axis,r=s.series,d=s.options.reversedStacks,p=r.length;for(this.usePercentage=!1,T=p;T--;){var U=r[d?T:p-T-1];U.setStackedPoints(),U.setGroupedPoints()}for(T=0;T<p;T++)r[T].modifyStacks();B(s,"afterBuildStacks")},y.prototype.cleanStacks=function(){if(this.oldStacks)var s=this.stacks=this.oldStacks;w(s,function(r){w(r,function(d){d.cumulative=d.total})})},y.prototype.resetStacks=function(){var s=this;w(this.stacks,function(r){w(r,function(d,p){x(d.touched)&&d.touched<s.stacksTouched?(d.destroy(),delete r[p]):(d.total=null,d.cumulative=null)})})},y.prototype.renderStackTotals=function(){var s=this.axis,r=s.chart,d=r.renderer,p=this.stacks;s=a(r,s.options.stackLabels&&s.options.stackLabels.animation||!1);var T=this.stackTotalGroup=this.stackTotalGroup||d.g("stack-labels").attr({zIndex:6,opacity:0}).add();T.translate(r.plotLeft,r.plotTop),w(p,function(U){w(U,function(G){G.render(T)})}),T.animate({opacity:1},s)},y}();return y=o||(o={}),s=[],y.compose=function(r,d,p){-1===s.indexOf(r)&&(s.push(r),u(r,"init",P),u(r,"destroy",W)),-1===s.indexOf(d)&&(s.push(d),d.prototype.getStacks=V),-1===s.indexOf(p)&&(s.push(p),(r=p.prototype).getStackIndicator=S,r.modifyStacks=Z,r.percentStacker=k,r.setGroupedPoints=b,r.setStackedPoints=m)},o}),j(ot,"Series/Line/LineSeries.js",[ot["Core/Series/Series.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X){var W,z=this&&this.__extends||(W=function(P,S){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,k){Z.__proto__=k}||function(Z,k){for(var b in k)k.hasOwnProperty(b)&&(Z[b]=k[b])})(P,S)},function(P,S){function Z(){this.constructor=P}W(P,S),P.prototype=null===S?Object.create(S):(Z.prototype=S.prototype,new Z)}),tt=X.defined,V=X.merge;return X=function(W){function P(){var S=null!==W&&W.apply(this,arguments)||this;return S.data=void 0,S.options=void 0,S.points=void 0,S}return z(P,W),P.prototype.drawGraph=function(){var S=this,Z=this.options,k=(this.gappedPath||this.getGraphPath).call(this),b=this.chart.styledMode,m=[["graph","highcharts-graph"]];b||m[0].push(Z.lineColor||this.color||"#cccccc",Z.dashStyle),(m=S.getZonesGraphs(m)).forEach(function(a,c){var u=a[0],_=S[u],D=_?"animate":"attr";_?(_.endX=S.preventGraphAnimation?null:k.xMap,_.animate({d:k})):k.length&&(S[u]=_=S.chart.renderer.path(k).addClass(a[1]).attr({zIndex:1}).add(S.group)),_&&!b&&(u={stroke:a[2],"stroke-width":Z.lineWidth||0,fill:S.fillGraph&&S.color||"none"},a[3]?u.dashstyle=a[3]:"square"!==Z.linecap&&(u["stroke-linecap"]=u["stroke-linejoin"]="round"),_[D](u).shadow(2>c&&Z.shadow)),_&&(_.startX=k.xMap,_.isArea=k.isArea)})},P.prototype.getGraphPath=function(S,Z,k){var u,b=this,m=b.options,a=[],c=[],_=m.step,D=(S=S||b.points).reversed;return D&&S.reverse(),(_={right:1,center:2}[_]||_&&3)&&D&&(_=4-_),(S=this.getValidPoints(S,!1,!(m.connectNulls&&!Z&&!k))).forEach(function(t,B){var M=t.plotX,x=t.plotY,w=S[B-1];(t.leftCliff||w&&w.rightCliff)&&!k&&(u=!0),t.isNull&&!tt(Z)&&0<B?u=!m.connectNulls:t.isNull&&!Z?u=!0:(0===B||u?B=[["M",t.plotX,t.plotY]]:b.getPointSpline?B=[b.getPointSpline(S,t,B)]:_?(B=1===_?[["L",w.plotX,x]]:2===_?[["L",(w.plotX+M)/2,w.plotY],["L",(w.plotX+M)/2,x]]:[["L",M,w.plotY]]).push(["L",M,x]):B=[["L",M,x]],c.push(t.x),_&&(c.push(t.x),2===_&&c.push(t.x)),a.push.apply(a,B),u=!1)}),a.xMap=c,b.graphPath=a},P.prototype.getZonesGraphs=function(S){return this.zones.forEach(function(Z,k){k=["zone-graph-"+k,"highcharts-graph highcharts-zone-graph-"+k+" "+(Z.className||"")],this.chart.styledMode||k.push(Z.color||this.color,Z.dashStyle||this.options.dashStyle),S.push(k)},this),S},P.defaultOptions=V(Y.defaultOptions,{}),P}(Y),H.registerSeriesType("line",X),X}),j(ot,"Series/Area/AreaSeries.js",[ot["Core/Color/Color.js"],ot["Core/Legend/LegendSymbol.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var k,tt=this&&this.__extends||(k=function(b,m){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var u in c)c.hasOwnProperty(u)&&(a[u]=c[u])})(b,m)},function(b,m){function a(){this.constructor=b}k(b,m),b.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}),V=Y.parse,W=X.seriesTypes.line;Y=z.extend;var P=z.merge,S=z.objectEach,Z=z.pick;return z=function(k){function b(){var m=null!==k&&k.apply(this,arguments)||this;return m.data=void 0,m.options=void 0,m.points=void 0,m}return tt(b,k),b.prototype.drawGraph=function(){this.areaPath=[],k.prototype.drawGraph.apply(this);var m=this,a=this.areaPath,c=this.options,u=[["area","highcharts-area",this.color,c.fillColor]];this.zones.forEach(function(_,D){u.push(["zone-area-"+D,"highcharts-area highcharts-zone-area-"+D+" "+_.className,_.color||m.color,_.fillColor||c.fillColor])}),u.forEach(function(_){var D=_[0],t={},B=m[D],M=B?"animate":"attr";B?(B.endX=m.preventGraphAnimation?null:a.xMap,B.animate({d:a})):(t.zIndex=0,(B=m[D]=m.chart.renderer.path(a).addClass(_[1]).add(m.group)).isArea=!0),m.chart.styledMode||(t.fill=Z(_[3],V(_[2]).setOpacity(Z(c.fillOpacity,.75)).get())),B[M](t),B.startX=a.xMap,B.shiftUnit=c.step?2:1})},b.prototype.getGraphPath=function(m){var a=W.prototype.getGraphPath,c=this.options,u=c.stacking,_=this.yAxis,D=[],t=[],B=this.index,M=_.stacking.stacks[this.stackKey],x=c.threshold,w=Math.round(_.getThreshold(c.threshold));c=Z(c.connectNulls,"percent"===u);var h=function(d,p,T){var U=m[d];d=u&&M[U.x].points[B];var G=U[T+"Null"]||0;if(T=U[T+"Cliff"]||0,U=!0,T||G){var O=(G?d[0]:d[1])+T,v=d[0]+T;U=!!G}else!u&&m[p]&&m[p].isNull&&(O=v=x);typeof O<"u"&&(t.push({plotX:s,plotY:null===O?w:_.getThreshold(O),isNull:U,isCliff:!0}),D.push({plotX:s,plotY:null===v?w:_.getThreshold(v),doCurve:!1}))};m=m||this.points,u&&(m=this.getStackPoints(m));for(var l=0,o=m.length;l<o;++l){u||(m[l].leftCliff=m[l].rightCliff=m[l].leftNull=m[l].rightNull=void 0);var y=m[l].isNull,s=Z(m[l].rectPlotX,m[l].plotX),r=u?Z(m[l].yBottom,w):w;(!y||c)&&(c||h(l,l-1,"left"),y&&!u&&c||(t.push(m[l]),D.push({x:l,plotX:s,plotY:r})),c||h(l,l+1,"right"))}return h=a.call(this,t,!0,!0),D.reversed=!0,(r=(y=a.call(this,D,!0,!0))[0])&&"M"===r[0]&&(y[0]=["L",r[1],r[2]]),(y=h.concat(y)).length&&y.push(["Z"]),a=a.call(this,t,!1,c),y.xMap=h.xMap,this.areaPath=y,a},b.prototype.getStackPoints=function(m){var a=this,c=[],u=[],_=this.xAxis,D=this.yAxis,t=D.stacking.stacks[this.stackKey],B={},M=D.series,x=M.length,w=D.options.reversedStacks?1:-1,h=M.indexOf(a);if(m=m||this.points,this.options.stacking){for(var l=0;l<m.length;l++)m[l].leftNull=m[l].rightNull=void 0,B[m[l].x]=m[l];S(t,function(y,s){null!==y.total&&u.push(s)}),u.sort(function(y,s){return y-s});var o=M.map(function(y){return y.visible});u.forEach(function(y,s){var d,p,r=0;if(B[y]&&!B[y].isNull)c.push(B[y]),[-1,1].forEach(function(U){var G=1===U?"rightNull":"leftNull",O=t[u[s+U]],v=0;if(O)for(var C=h;0<=C&&C<x;){var q=M[C].index;(d=O.points[q])||(q===a.index?B[y][G]=!0:o[C]&&(p=t[y].points[q])&&(v-=p[1]-p[0])),C+=w}B[y][1===U?"rightCliff":"leftCliff"]=v});else{for(var T=h;0<=T&&T<x;){if(d=t[y].points[M[T].index]){r=d[1];break}T+=w}r=Z(r,0),r=D.translate(r,0,1,0,1),c.push({isNull:!0,plotX:_.translate(y,0,0,0,1),x:y,plotY:r,yBottom:r})}})}return c},b.defaultOptions=P(W.defaultOptions,{threshold:0}),b}(W),Y(z.prototype,{singleStacks:!1,drawLegendSymbol:H.drawRectangle}),X.registerSeriesType("area",z),z}),j(ot,"Series/Spline/SplineSeries.js",[ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H){var W,X=this&&this.__extends||(W=function(P,S){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,k){Z.__proto__=k}||function(Z,k){for(var b in k)k.hasOwnProperty(b)&&(Z[b]=k[b])})(P,S)},function(P,S){function Z(){this.constructor=P}W(P,S),P.prototype=null===S?Object.create(S):(Z.prototype=S.prototype,new Z)}),z=Y.seriesTypes.line,tt=H.merge,V=H.pick;return H=function(W){function P(){var S=null!==W&&W.apply(this,arguments)||this;return S.data=void 0,S.options=void 0,S.points=void 0,S}return X(P,W),P.prototype.getPointSpline=function(S,Z,k){var b=Z.plotX||0,m=Z.plotY||0,a=S[k-1];if(k=S[k+1],a&&!a.isNull&&!1!==a.doCurve&&!Z.isCliff&&k&&!k.isNull&&!1!==k.doCurve&&!Z.isCliff){var c=k.plotX||0,u=0,_=(1.5*b+(a.plotX||0))/2.5,D=(1.5*m+(S=a.plotY||0))/2.5,t=(1.5*m+(k=k.plotY||0))/2.5;(c=(1.5*b+c)/2.5)!==_&&(u=(t-D)*(c-b)/(c-_)+m-t),t+=u,(D+=u)>S&&D>m?t=2*m-(D=Math.max(S,m)):D<S&&D<m&&(t=2*m-(D=Math.min(S,m))),t>k&&t>m?D=2*m-(t=Math.max(k,m)):t<k&&t<m&&(D=2*m-(t=Math.min(k,m))),Z.rightContX=c,Z.rightContY=t}return Z=["C",V(a.rightContX,a.plotX,0),V(a.rightContY,a.plotY,0),V(_,b,0),V(D,m,0),b,m],a.rightContX=a.rightContY=void 0,Z},P.defaultOptions=tt(z.defaultOptions),P}(z),Y.registerSeriesType("spline",H),H}),j(ot,"Series/AreaSpline/AreaSplineSeries.js",[ot["Series/Spline/SplineSeries.js"],ot["Core/Legend/LegendSymbol.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z){var Z,tt=this&&this.__extends||(Z=function(k,b){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a}||function(m,a){for(var c in a)a.hasOwnProperty(c)&&(m[c]=a[c])})(k,b)},function(k,b){function m(){this.constructor=k}Z(k,b),k.prototype=null===b?Object.create(b):(m.prototype=b.prototype,new m)}),V=X.seriesTypes,W=V.area;V=V.area.prototype;var P=z.extend,S=z.merge;return z=function(Z){function k(){var b=null!==Z&&Z.apply(this,arguments)||this;return b.data=void 0,b.points=void 0,b.options=void 0,b}return tt(k,Z),k.defaultOptions=S(Y.defaultOptions,W.defaultOptions),k}(Y),P(z.prototype,{getGraphPath:V.getGraphPath,getStackPoints:V.getStackPoints,drawGraph:V.drawGraph,drawLegendSymbol:H.drawRectangle}),X.registerSeriesType("areaspline",z),z}),j(ot,"Series/Column/ColumnSeriesDefaults.js",[],function(){return{borderRadius:0,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}}),j(ot,"Series/Column/ColumnSeries.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Color/Color.js"],ot["Series/Column/ColumnSeriesDefaults.js"],ot["Core/Globals.js"],ot["Core/Legend/LegendSymbol.js"],ot["Core/Series/Series.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P){var x,S=this&&this.__extends||(x=function(w,h){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var y in o)o.hasOwnProperty(y)&&(l[y]=o[y])})(w,h)},function(w,h){function l(){this.constructor=w}x(w,h),w.prototype=null===h?Object.create(h):(l.prototype=h.prototype,new l)}),Z=Y.animObject,k=H.parse,b=z.hasTouch;Y=z.noop;var m=P.clamp,a=P.defined,c=P.extend,u=P.fireEvent,_=P.isArray,D=P.isNumber,t=P.merge,B=P.pick,M=P.objectEach;return P=function(x){function w(){var h=null!==x&&x.apply(this,arguments)||this;return h.borderWidth=void 0,h.data=void 0,h.group=void 0,h.options=void 0,h.points=void 0,h}return S(w,x),w.prototype.animate=function(h){var l=this,o=this.yAxis,y=l.options,s=this.chart.inverted,r={},d=s?"translateX":"translateY";if(h)r.scaleY=.001,h=m(o.toPixels(y.threshold),o.pos,o.pos+o.len),s?r.translateX=h-o.len:r.translateY=h,l.clipBox&&l.setClip(),l.group.attr(r);else{var p=Number(l.group.attr(d));l.group.animate({scaleY:1},c(Z(l.options.animation),{step:function(T,U){l.group&&(r[d]=p+U.pos*(o.pos-p),l.group.attr(r))}}))}},w.prototype.init=function(h,l){x.prototype.init.apply(this,arguments);var o=this;(h=o.chart).hasRendered&&h.series.forEach(function(y){y.type===o.type&&(y.isDirty=!0)})},w.prototype.getColumnMetrics=function(){var h=this,l=h.options,o=h.xAxis,y=h.yAxis,s=o.options.reversedStacks;s=o.reversed&&!s||!o.reversed&&s;var d,r={},p=0;!1===l.grouping?p=1:h.chart.series.forEach(function(O){var v=O.yAxis,C=O.options;if(O.type===h.type&&(O.visible||!h.chart.options.chart.ignoreHiddenSeries)&&y.len===v.len&&y.pos===v.pos){if(C.stacking&&"group"!==C.stacking){typeof r[d=O.stackKey]>"u"&&(r[d]=p++);var q=r[d]}else!1!==C.grouping&&(q=p++);O.columnIndex=q}});var T=Math.min(Math.abs(o.transA)*(o.ordinal&&o.ordinal.slope||l.pointRange||o.closestPointRange||o.tickInterval||1),o.len),U=T*l.groupPadding,G=(T-2*U)/(p||1);return l=Math.min(l.maxPointWidth||o.len,B(l.pointWidth,G*(1-2*l.pointPadding))),h.columnMetrics={width:l,offset:(G-l)/2+(U+((h.columnIndex||0)+(s?1:0))*G-T/2)*(s?-1:1),paddedWidth:G,columnCount:p},h.columnMetrics},w.prototype.crispCol=function(h,l,o,y){var s=this.chart,r=this.borderWidth,d=-(r%2?.5:0);return r=r%2?.5:1,s.inverted&&s.renderer.isVML&&(r+=1),this.options.crisp&&(o=Math.round(h+o)+d,o-=h=Math.round(h)+d),y=Math.round(l+y)+r,d=.5>=Math.abs(l)&&.5<y,y-=l=Math.round(l)+r,d&&y&&(--l,y+=1),{x:h,y:l,width:o,height:y}},w.prototype.adjustForMissingColumns=function(h,l,o,y){var s=this,r=this.options.stacking;if(!o.isNull&&1<y.columnCount){var d=this.yAxis.options.reversedStacks,p=0,T=d?0:-y.columnCount;M(this.yAxis.stacking&&this.yAxis.stacking.stacks,function(U){if("number"==typeof o.x){var G=U[o.x.toString()];G&&(U=G.points[s.index],r?(U&&(p=T),G.hasValidPoints&&(d?T++:T--)):_(U)&&(U=Object.keys(G.points).filter(function(O){return!O.match(",")&&G.points[O]&&1<G.points[O].length}).map(parseFloat).sort(function(O,v){return v-O}),p=U.indexOf(s.index),T=U.length))}}),h=(o.plotX||0)+((T-1)*y.paddedWidth+l)/2-l-p*y.paddedWidth}return h},w.prototype.translate=function(){var h=this,l=h.chart,o=h.options,y=h.dense=2>h.closestPointRange*h.xAxis.transA;y=h.borderWidth=B(o.borderWidth,y?0:1);var s=h.xAxis,r=h.yAxis,d=o.threshold,p=h.translatedThreshold=r.getThreshold(d),T=B(o.minPointLength,5),U=h.getColumnMetrics(),G=U.width,O=h.pointXOffset=U.offset,v=h.dataMin,C=h.dataMax,q=h.barW=Math.max(G,1+2*y);l.inverted&&(p-=.5),o.pointPadding&&(q=Math.ceil(q)),V.prototype.translate.apply(h),h.points.forEach(function(J){var R=B(J.yBottom,p),A=999+Math.abs(R),N=J.plotX||0;A=m(J.plotY,-A,r.len+A);var E=Math.min(A,R),K=Math.max(A,R)-E,Q=G,et=N+O,rt=q;T&&Math.abs(K)<T&&(K=T,N=!r.reversed&&!J.negative||r.reversed&&J.negative,D(d)&&D(C)&&J.y===d&&C<=d&&(r.min||0)<d&&(v!==C||(r.max||0)<=d)&&(N=!N),E=Math.abs(E-p)>T?R-T:p-(N?T:0)),a(J.options.pointWidth)&&(Q=rt=Math.ceil(J.options.pointWidth),et-=Math.round((Q-G)/2)),o.centerInCategory&&(et=h.adjustForMissingColumns(et,Q,J,U)),J.barX=et,J.pointWidth=Q,J.tooltipPos=l.inverted?[m(r.len+r.pos-l.plotLeft-A,r.pos-l.plotLeft,r.len+r.pos-l.plotLeft),s.len+s.pos-l.plotTop-et-rt/2,K]:[s.left-l.plotLeft+et+rt/2,m(A+r.pos-l.plotTop,r.pos-l.plotTop,r.len+r.pos-l.plotTop),K],J.shapeType=h.pointClass.prototype.shapeType||"rect",J.shapeArgs=h.crispCol.apply(h,J.isNull?[et,p,rt,0]:[et,E,rt,K])})},w.prototype.drawGraph=function(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")},w.prototype.pointAttribs=function(h,l){var o=this.options,y=this.pointAttrToOptions||{},s=y.stroke||"borderColor",r=y["stroke-width"]||"borderWidth",d=h&&h.color||this.color,p=h&&h[s]||o[s]||d;y=h&&h.options.dashStyle||o.dashStyle;var T=h&&h[r]||o[r]||this[r]||0,U=B(h&&h.opacity,o.opacity,1);if(h&&this.zones.length){var G=h.getZone();d=h.options.color||G&&(G.color||h.nonZonedColor)||this.color,G&&(p=G.borderColor||p,y=G.dashStyle||y,T=G.borderWidth||T)}return l&&h&&(l=(h=t(o.states[l],h.options.states&&h.options.states[l]||{})).brightness,d=h.color||typeof l<"u"&&k(d).brighten(h.brightness).get()||d,p=h[s]||p,T=h[r]||T,y=h.dashStyle||y,U=B(h.opacity,U)),s={fill:d,stroke:p,"stroke-width":T,opacity:U},y&&(s.dashstyle=y),s},w.prototype.drawPoints=function(h){void 0===h&&(h=this.points);var d,l=this,o=this.chart,y=l.options,s=o.renderer,r=y.animationLimit||250;h.forEach(function(p){var T=p.graphic,U=!!T,G=T&&o.pointCount<r?"animate":"attr";D(p.plotY)&&null!==p.y?(d=p.shapeArgs,T&&p.hasNewShapeType()&&(T=T.destroy()),l.enabledDataSorting&&(p.startXPos=l.xAxis.reversed?-(d&&d.width||0):l.xAxis.width),T||(p.graphic=T=s[p.shapeType](d).add(p.group||l.group))&&l.enabledDataSorting&&o.hasRendered&&o.pointCount<r&&(T.attr({x:p.startXPos}),U=!0,G="animate"),T&&U&&T[G](t(d)),y.borderRadius&&T[G]({r:y.borderRadius}),o.styledMode||T[G](l.pointAttribs(p,p.selected&&"select")).shadow(!1!==p.allowShadow&&y.shadow,null,y.stacking&&!y.borderRadius),T&&(T.addClass(p.getClassName(),!0),T.attr({visibility:p.visible?"inherit":"hidden"}))):T&&(p.graphic=T.destroy())})},w.prototype.drawTracker=function(h){void 0===h&&(h=this.points);var r,l=this,o=l.chart,y=o.pointer,s=function(d){var p=y.getPointFromEvent(d);typeof p<"u"&&(y.isDirectTouch=!0,p.onMouseOver(d))};h.forEach(function(d){r=_(d.dataLabels)?d.dataLabels:d.dataLabel?[d.dataLabel]:[],d.graphic&&(d.graphic.element.point=d),r.forEach(function(p){p.div?p.div.point=d:p.element.point=d})}),l._hasTracking||(l.trackerGroups.forEach(function(d){l[d]&&(l[d].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",function(p){y.onTrackerMouseOut(p)}),b&&l[d].on("touchstart",s),!o.styledMode&&l.options.cursor&&l[d].css({cursor:l.options.cursor}))}),l._hasTracking=!0),u(this,"afterDrawTracker")},w.prototype.remove=function(){var h=this,l=h.chart;l.hasRendered&&l.series.forEach(function(o){o.type===h.type&&(o.isDirty=!0)}),V.prototype.remove.apply(h,arguments)},w.defaultOptions=t(V.defaultOptions,X),w}(V),c(P.prototype,{cropShoulder:0,directTouch:!0,drawLegendSymbol:tt.drawRectangle,getSymbol:Y,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),W.registerSeriesType("column",P),P}),j(ot,"Core/Series/DataLabel.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/FormatUtilities.js"],ot["Core/Utilities.js"]],function(Y,H,X){var c,z=Y.getDeferredAnimation,tt=H.format,V=X.defined,W=X.extend,P=X.fireEvent,S=X.isArray,Z=X.isString,k=X.merge,b=X.objectEach,m=X.pick,a=X.splat;return function(u){function _(h,l,o,y,s){var r=this,d=this.chart,p=this.isCartesian&&d.inverted,T=this.enabledDataSorting,U=h.plotX,G=h.plotY,O=o.rotation,v=o.align,C=V(U)&&V(G)&&d.isInsidePlot(U,Math.round(G),{inverted:p,paneCoordinates:!0,series:r});G=function(A){T&&r.xAxis&&!q&&r.setDataLabelStartPos(h,l,s,C,A)};var q="justify"===m(o.overflow,T?"none":"justify");if(U=this.visible&&!1!==h.visible&&V(U)&&(h.series.forceDL||T&&!q||C||m(o.inside,!!this.options.stacking)&&y&&d.isInsidePlot(U,p?y.x+1:y.y+y.height-1,{inverted:p,paneCoordinates:!0,series:r})),p=h.pos(),U&&p){O&&l.attr({align:v}),v=l.getBBox(!0);var J=[0,0],R=d.renderer.fontMetrics(d.styledMode?void 0:o.style.fontSize,l).b;y=W({x:p[0],y:Math.round(p[1]),width:0,height:0},y),W(o,{width:v.width,height:v.height}),O?(q=!1,J=d.renderer.rotCorr(R,O),R={x:y.x+(o.x||0)+y.width/2+J.x,y:y.y+(o.y||0)+{top:0,middle:.5,bottom:1}[o.verticalAlign]*y.height},J=[v.x-Number(l.attr("x")),v.y-Number(l.attr("y"))],G(R),l[s?"attr":"animate"](R)):(G(y),l.align(o,void 0,y),R=l.alignAttr),q&&0<=y.height?this.justifyDataLabel(l,o,R,v,y,s):m(o.crop,!0)&&(y=R.x,G=R.y,U=d.isInsidePlot(y+=J[0],G+=J[1],{paneCoordinates:!0,series:r})&&d.isInsidePlot(y+v.width,G+v.height,{paneCoordinates:!0,series:r})),o.shape&&!O&&l[s?"attr":"animate"]({anchorX:p[0],anchorY:p[1]})}s&&T&&(l.placed=!1),U||T&&!q?l.show():(l.hide(),l.placed=!1)}function t(h){void 0===h&&(h=this.points);var l=this,o=l.chart,y=l.options,s=l.hasRendered||0,r=o.renderer,d=o.options.chart,p=d.backgroundColor,T=r.getContrast(Z(d=d.plotBackgroundColor)&&d||Z(p)&&p||"#000000"),U=y.dataLabels;if(p=U.animation,p=U.defer?z(o,p,l):{defer:0,duration:0},U=M(M(o.options.plotOptions&&o.options.plotOptions.series&&o.options.plotOptions.series.dataLabels,o.options.plotOptions&&o.options.plotOptions[l.type]&&o.options.plotOptions[l.type].dataLabels),U),P(this,"drawDataLabels"),S(U)||U.enabled||l._hasPointLabels){var O=l.plotGroup("dataLabelsGroup","data-labels",s?"inherit":"hidden",U.zIndex||6);O.attr({opacity:+s}),!s&&(s=l.dataLabelsGroup)&&(l.visible&&O.show(),s[y.animation?"animate":"attr"]({opacity:1},p)),h.forEach(function(v){a(M(U,v.dlOptions||v.options&&v.options.dataLabels)).forEach(function(C,q){var J=C.enabled&&(!v.isNull||v.dataLabelOnNull)&&function D(h,l){var o=l.filter;return!o||(l=o.operator,h=h[o.property],o=o.value,">"===l&&h>o||"<"===l&&h<o||">="===l&&h>=o||"<="===l&&h<=o||"=="===l&&h==o||"==="===l&&h===o)}(v,C),R=v.connectors?v.connectors[q]:v.connector,A=v.dataLabels?v.dataLabels[q]:v.dataLabel,N=!A,E=m(C.distance,v.labelDistance);if(J){var K=v.getLabelConfig(),Q=m(C[v.formatPrefix+"Format"],C.format);K=V(Q)?tt(Q,K,o):(C[v.formatPrefix+"Formatter"]||C.formatter).call(K,C),Q=C.style;var et=C.rotation;o.styledMode||(Q.color=m(C.color,Q.color,l.color,"#000000"),"contrast"===Q.color?(v.contrastColor=r.getContrast(v.color||l.color),Q.color=!V(E)&&C.inside||0>E||y.stacking?v.contrastColor:T):delete v.contrastColor,y.cursor&&(Q.cursor=y.cursor));var rt={r:C.borderRadius||0,rotation:et,padding:C.padding,zIndex:1};if(!o.styledMode){var at=C.borderColor;rt.fill="auto"===(E=C.backgroundColor)?v.color:E,rt.stroke="auto"===at?v.color:at,rt["stroke-width"]=C.borderWidth}b(rt,function(lt,ft){typeof lt>"u"&&delete rt[ft]})}!A||J&&V(K)&&!!A.div==!!C.useHTML&&(A.rotation&&C.rotation||A.rotation===C.rotation)||(N=!0,v.dataLabel=A=v.dataLabel&&v.dataLabel.destroy(),v.dataLabels&&(1===v.dataLabels.length?delete v.dataLabels:delete v.dataLabels[q]),q||delete v.dataLabel,R&&(v.connector=v.connector.destroy(),v.connectors&&(1===v.connectors.length?delete v.connectors:delete v.connectors[q]))),J&&V(K)?(A?rt.text=K:(v.dataLabels=v.dataLabels||[],A=v.dataLabels[q]=et?r.text(K,0,0,C.useHTML).addClass("highcharts-data-label"):r.label(K,0,0,C.shape,null,null,C.useHTML,null,"data-label"),q||(v.dataLabel=A),A.addClass(" highcharts-data-label-color-"+v.colorIndex+" "+(C.className||"")+(C.useHTML?" highcharts-tracker":""))),A.options=C,A.attr(rt),o.styledMode||A.css(Q).shadow(C.shadow),(q=C[v.formatPrefix+"TextPath"]||C.textPath)&&!C.useHTML&&(A.setTextPath(v.getDataLabelPath&&v.getDataLabelPath(A)||v.graphic,q),v.dataLabelPath&&!q.enabled&&(v.dataLabelPath=v.dataLabelPath.destroy())),A.added||A.add(O),l.alignDataLabel(v,A,C,null,N)):A&&A.hide()})})}P(this,"afterDrawDataLabels")}function B(h,l,o,y,s,r){var d=this.chart,p=l.align,T=l.verticalAlign,U=h.box?0:h.padding||0,G=l.x;G=void 0===G?0:G;var O=l.y;O=void 0===O?0:O;var v=(o.x||0)+U;if(0>v){"right"===p&&0<=G?(l.align="left",l.inside=!0):G-=v;var C=!0}return(v=(o.x||0)+y.width-U)>d.plotWidth&&("left"===p&&0>=G?(l.align="right",l.inside=!0):G+=d.plotWidth-v,C=!0),0>(v=o.y+U)&&("bottom"===T&&0<=O?(l.verticalAlign="top",l.inside=!0):O-=v,C=!0),(v=(o.y||0)+y.height-U)>d.plotHeight&&("top"===T&&0>=O?(l.verticalAlign="bottom",l.inside=!0):O+=d.plotHeight-v,C=!0),C&&(l.x=G,l.y=O,h.placed=!r,h.align(l,void 0,s)),C}function M(h,l){var y,o=[];if(S(h)&&!S(l))o=h.map(function(s){return k(s,l)});else if(S(l)&&!S(h))o=l.map(function(s){return k(h,s)});else if(S(h)||S(l))for(y=Math.max(h.length,l.length);y--;)o[y]=k(h[y],l[y]);else o=k(h,l);return o}function x(h,l,o,y,s){var r=this.chart,d=r.inverted,p=this.xAxis,T=p.reversed,U=d?l.height/2:l.width/2;h=(h=h.pointWidth)?h/2:0,l.startXPos=d?s.x:T?-U-h:p.width-U+h,l.startYPos=d?T?this.yAxis.height-U+h:-U-h:s.y,y?"hidden"===l.visibility&&(l.show(),l.attr({opacity:0}).animate({opacity:1})):l.attr({opacity:1}).animate({opacity:0},void 0,l.hide),r.hasRendered&&(o&&l.attr({x:l.startXPos,y:l.startYPos}),l.placed=!0)}var w=[];u.compose=function(h){if(-1===w.indexOf(h)){var l=h.prototype;w.push(h),l.alignDataLabel=_,l.drawDataLabels=t,l.justifyDataLabel=B,l.setDataLabelStartPos=x}}}(c||(c={})),c}),j(ot,"Series/Column/ColumnDataLabel.js",[ot["Core/Series/DataLabel.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X){var W,z=H.series,tt=X.merge,V=X.pick;return function(P){function S(k,b,m,a,c){var u=this.chart.inverted,_=k.series,D=(_.xAxis?_.xAxis.len:this.chart.plotSizeX)||0,t=k.dlBox||k.shapeArgs,B=V(k.below,k.plotY>V(this.translatedThreshold,_=(_.yAxis?_.yAxis.len:this.chart.plotSizeY)||0)),M=V(m.inside,!!this.options.stacking);t&&(0>(a=tt(t)).y&&(a.height+=a.y,a.y=0),0<(t=a.y+a.height-_)&&t<a.height&&(a.height-=t),u&&(a={x:_-a.y-a.height,y:D-a.x-a.width,width:a.height,height:a.width}),M||(u?(a.x+=B?0:a.width,a.width=0):(a.y+=B?a.height:0,a.height=0))),m.align=V(m.align,!u||M?"center":B?"right":"left"),m.verticalAlign=V(m.verticalAlign,u||M?"middle":B?"top":"bottom"),z.prototype.alignDataLabel.call(this,k,b,m,a,c),m.inside&&k.contrastColor&&b.css({color:k.contrastColor})}var Z=[];P.compose=function(k){Y.compose(z),-1===Z.indexOf(k)&&(Z.push(k),k.prototype.alignDataLabel=S)}}(W||(W={})),W}),j(ot,"Series/Bar/BarSeries.js",[ot["Series/Column/ColumnSeries.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X){var W,z=this&&this.__extends||(W=function(P,S){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Z,k){Z.__proto__=k}||function(Z,k){for(var b in k)k.hasOwnProperty(b)&&(Z[b]=k[b])})(P,S)},function(P,S){function Z(){this.constructor=P}W(P,S),P.prototype=null===S?Object.create(S):(Z.prototype=S.prototype,new Z)}),tt=X.extend,V=X.merge;return X=function(W){function P(){var S=null!==W&&W.apply(this,arguments)||this;return S.data=void 0,S.options=void 0,S.points=void 0,S}return z(P,W),P.defaultOptions=V(Y.defaultOptions,{}),P}(Y),tt(X.prototype,{inverted:!0}),H.registerSeriesType("bar",X),X}),j(ot,"Series/Scatter/ScatterSeriesDefaults.js",[],function(){return{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 10px"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}}),j(ot,"Series/Scatter/ScatterSeries.js",[ot["Series/Scatter/ScatterSeriesDefaults.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X){var Z,z=this&&this.__extends||(Z=function(k,b){return(Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,a){m.__proto__=a}||function(m,a){for(var c in a)a.hasOwnProperty(c)&&(m[c]=a[c])})(k,b)},function(k,b){function m(){this.constructor=k}Z(k,b),k.prototype=null===b?Object.create(b):(m.prototype=b.prototype,new m)}),tt=H.seriesTypes,V=tt.column,W=tt.line;tt=X.addEvent;var P=X.extend,S=X.merge;return X=function(Z){function k(){var b=null!==Z&&Z.apply(this,arguments)||this;return b.data=void 0,b.options=void 0,b.points=void 0,b}return z(k,Z),k.prototype.applyJitter=function(){var b=this,m=this.options.jitter,a=this.points.length;m&&this.points.forEach(function(c,u){["x","y"].forEach(function(_,D){var t="plot"+_.toUpperCase();if(m[_]&&!c.isNull){var B=b[_+"Axis"],M=m[_]*B.transA;if(B&&!B.isLog){var x=Math.max(0,c[t]-M);B=Math.min(B.len,c[t]+M),D=1e4*Math.sin(u+D*a),c[t]=x+(B-x)*(D-Math.floor(D)),"x"===_&&(c.clientX=c.plotX)}}})})},k.prototype.drawGraph=function(){this.options.lineWidth?Z.prototype.drawGraph.call(this):this.graph&&(this.graph=this.graph.destroy())},k.defaultOptions=S(W.defaultOptions,Y),k}(W),P(X.prototype,{drawTracker:V.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1}),tt(X,"afterTranslate",function(){this.applyJitter()}),H.registerSeriesType("scatter",X),X}),j(ot,"Series/CenteredUtilities.js",[ot["Core/Globals.js"],ot["Core/Series/Series.js"],ot["Core/Utilities.js"]],function(Y,H,X){var S,Z,z=Y.deg2rad,tt=X.fireEvent,V=X.isNumber,W=X.pick,P=X.relativeLength;return(Z=S||(S={})).getCenter=function(){var k=this.options,b=this.chart,m=2*(k.slicedOffset||0),a=b.plotWidth-2*m,c=b.plotHeight-2*m,u=k.center,_=Math.min(a,c),D=k.thickness,t=k.size,B=k.innerSize||0;for("string"==typeof t&&(t=parseFloat(t)),"string"==typeof B&&(B=parseFloat(B)),k=[W(u[0],"50%"),W(u[1],"50%"),W(t&&0>t?void 0:k.size,"100%"),W(B&&0>B?void 0:k.innerSize||0,"0%")],!b.angular||this instanceof H||(k[3]=0),u=0;4>u;++u)t=k[u],b=2>u||2===u&&/%$/.test(t),k[u]=P(t,[a,c,_,k[2]][u])+(b?m:0);return k[3]>k[2]&&(k[3]=k[2]),V(D)&&2*D<k[2]&&0<D&&(k[3]=k[2]-2*D),tt(this,"afterGetCenter",{positions:k}),k},Z.getStartAndEndRadians=function(k,b){return k=V(k)?k:0,b=V(b)&&b>k&&360>b-k?b:k+360,{start:z*(k+-90),end:z*(b+-90)}},S}),j(ot,"Series/Pie/PiePoint.js",[ot["Core/Animation/AnimationUtilities.js"],ot["Core/Series/Point.js"],ot["Core/Utilities.js"]],function(Y,H,X){var k,z=this&&this.__extends||(k=function(b,m){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var u in c)c.hasOwnProperty(u)&&(a[u]=c[u])})(b,m)},function(b,m){function a(){this.constructor=b}k(b,m),b.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}),tt=Y.setAnimation,V=X.addEvent,W=X.defined;Y=X.extend;var P=X.isNumber,S=X.pick,Z=X.relativeLength;return H=function(k){function b(){var m=null!==k&&k.apply(this,arguments)||this;return m.labelDistance=void 0,m.options=void 0,m.series=void 0,m}return z(b,k),b.prototype.getConnectorPath=function(){var m=this.labelPosition,a=this.series.options.dataLabels,c=this.connectorShapes,u=a.connectorShape;return c[u]&&(u=c[u]),u.call(this,{x:m.final.x,y:m.final.y,alignment:m.alignment},m.connectorPosition,a)},b.prototype.getTranslate=function(){return this.sliced?this.slicedTranslation:{translateX:0,translateY:0}},b.prototype.haloPath=function(m){var a=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(a.x,a.y,a.r+m,a.r+m,{innerR:a.r-1,start:a.start,end:a.end})},b.prototype.init=function(){var m=this;k.prototype.init.apply(this,arguments),this.name=S(this.name,"Slice");var a=function(c){m.slice("select"===c.type)};return V(this,"select",a),V(this,"unselect",a),this},b.prototype.isValid=function(){return P(this.y)&&0<=this.y},b.prototype.setVisible=function(m,a){var c=this,u=this.series,_=u.chart,D=u.options.ignoreHiddenPoint;a=S(a,D),m!==this.visible&&(this.visible=this.options.visible=m=typeof m>"u"?!this.visible:m,u.options.data[u.data.indexOf(this)]=this.options,["graphic","dataLabel","connector","shadowGroup"].forEach(function(t){c[t]&&c[t][m?"show":"hide"](m)}),this.legendItem&&_.legend.colorizeItem(this,m),m||"hover"!==this.state||this.setState(""),D&&(u.isDirty=!0),a&&_.redraw())},b.prototype.slice=function(m,a,c){var u=this.series;tt(c,u.chart),S(a,!0),this.sliced=this.options.sliced=W(m)?m:!this.sliced,u.options.data[u.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate()),this.shadowGroup&&this.shadowGroup.animate(this.getTranslate())},b}(H),Y(H.prototype,{connectorShapes:{fixedOffset:function(k,b,m){var a=b.breakAt;return b=b.touchingSliceAt,[["M",k.x,k.y],m.softConnector?["C",k.x+("left"===k.alignment?-5:5),k.y,2*a.x-b.x,2*a.y-b.y,a.x,a.y]:["L",a.x,a.y],["L",b.x,b.y]]},straight:function(k,b){return[["M",k.x,k.y],["L",(b=b.touchingSliceAt).x,b.y]]},crookedLine:function(k,b,m){b=b.touchingSliceAt;var a=this.series,c=a.center[0],u=a.chart.plotWidth,_=a.chart.plotLeft;a=k.alignment;var D=this.shapeArgs.r;return m=Z(m.crookDistance,1),m=["L",u="left"===a?c+D+(u+_-c-D)*(1-m):_+(c-D)*m,k.y],c=!0,("left"===a?u>k.x||u<b.x:u<k.x||u>b.x)&&(c=!1),k=[["M",k.x,k.y]],c&&k.push(m),k.push(["L",b.x,b.y]),k}}}),H}),j(ot,"Series/Pie/PieSeriesDefaults.js",[],function(){return{center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{allowOverlap:!0,connectorPadding:5,connectorShape:"fixedOffset",crookDistance:"70%",distance:30,enabled:!0,formatter:function(){return this.point.isNull?void 0:this.point.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}}),j(ot,"Series/Pie/PieSeries.js",[ot["Series/CenteredUtilities.js"],ot["Series/Column/ColumnSeries.js"],ot["Core/Globals.js"],ot["Core/Legend/LegendSymbol.js"],ot["Series/Pie/PiePoint.js"],ot["Series/Pie/PieSeriesDefaults.js"],ot["Core/Series/Series.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Renderer/SVG/Symbols.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P,S,Z){var t,k=this&&this.__extends||(t=function(B,M){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,w){x.__proto__=w}||function(x,w){for(var h in w)w.hasOwnProperty(h)&&(x[h]=w[h])})(B,M)},function(B,M){function x(){this.constructor=B}t(B,M),B.prototype=null===M?Object.create(M):(x.prototype=M.prototype,new x)}),b=Y.getStartAndEndRadians;X=X.noop;var m=Z.clamp,a=Z.extend,c=Z.fireEvent,u=Z.merge,_=Z.pick,D=Z.relativeLength;return Z=function(t){function B(){var M=null!==t&&t.apply(this,arguments)||this;return M.center=void 0,M.data=void 0,M.maxLabelDistance=void 0,M.options=void 0,M.points=void 0,M}return k(B,t),B.prototype.animate=function(M){var x=this,h=x.startAngleRad;M||x.points.forEach(function(l){var o=l.graphic,y=l.shapeArgs;o&&y&&(o.attr({r:_(l.startR,x.center&&x.center[3]/2),start:h,end:h}),o.animate({r:y.r,start:y.start,end:y.end},x.options.animation))})},B.prototype.drawEmpty=function(){var M=this.startAngleRad,x=this.endAngleRad,w=this.options;if(0===this.total&&this.center){var h=this.center[0],l=this.center[1];this.graph||(this.graph=this.chart.renderer.arc(h,l,this.center[1]/2,0,M,x).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:S.arc(h,l,this.center[2]/2,0,{start:M,end:x,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":w.borderWidth,fill:w.fillColor||"none",stroke:w.color||"#cccccc"})}else this.graph&&(this.graph=this.graph.destroy())},B.prototype.drawPoints=function(){var M=this.chart.renderer;this.points.forEach(function(x){x.graphic&&x.hasNewShapeType()&&(x.graphic=x.graphic.destroy()),x.graphic||(x.graphic=M[x.shapeType](x.shapeArgs).add(x.series.group),x.delayedRendering=!0)})},B.prototype.generatePoints=function(){t.prototype.generatePoints.call(this),this.updateTotals()},B.prototype.getX=function(M,x,w){var h=this.center,l=this.radii?this.radii[w.index]||0:h[2]/2;return M=Math.asin(m((M-h[1])/(l+w.labelDistance),-1,1)),h[0]+(x?-1:1)*Math.cos(M)*(l+w.labelDistance)+(0<w.labelDistance?(x?-1:1)*this.options.dataLabels.padding:0)},B.prototype.hasData=function(){return!!this.processedXData.length},B.prototype.redrawPoints=function(){var l,o,y,s,M=this,x=M.chart,w=x.renderer,h=M.options.shadow;this.drawEmpty(),!h||M.shadowGroup||x.styledMode||(M.shadowGroup=w.g("shadow").attr({zIndex:-1}).add(M.group)),M.points.forEach(function(r){var d={};if(o=r.graphic,!r.isNull&&o){var p=void 0;s=r.shapeArgs,l=r.getTranslate(),x.styledMode||(p=r.shadowGroup,h&&!p&&(p=r.shadowGroup=w.g("shadow").add(M.shadowGroup)),p&&p.attr(l),y=M.pointAttribs(r,r.selected&&"select")),r.delayedRendering?(o.setRadialReference(M.center).attr(s).attr(l),x.styledMode||o.attr(y).attr({"stroke-linejoin":"round"}).shadow(h,p),r.delayedRendering=!1):(o.setRadialReference(M.center),x.styledMode||u(!0,d,y),u(!0,d,s,l),o.animate(d)),o.attr({visibility:r.visible?"inherit":"hidden"}),o.addClass(r.getClassName(),!0)}else o&&(r.graphic=o.destroy())})},B.prototype.sortByAngle=function(M,x){M.sort(function(w,h){return typeof w.angle<"u"&&(h.angle-w.angle)*x})},B.prototype.translate=function(M){c(this,"translate"),this.generatePoints();var x=this.options,w=x.slicedOffset,h=w+(x.borderWidth||0),l=b(x.startAngle,x.endAngle),o=this.startAngleRad=l.start;l=(this.endAngleRad=l.end)-o;var y=this.points,s=x.dataLabels.distance;x=x.ignoreHiddenPoint;var d,r=y.length,p=0;for(M||(this.center=M=this.getCenter()),d=0;d<r;d++){var T=y[d],U=o+p*l;!T.isValid()||x&&!T.visible||(p+=T.percentage/100);var G=o+p*l,O={x:M[0],y:M[1],r:M[2]/2,innerR:M[3]/2,start:Math.round(1e3*U)/1e3,end:Math.round(1e3*G)/1e3};T.shapeType="arc",T.shapeArgs=O,T.labelDistance=_(T.options.dataLabels&&T.options.dataLabels.distance,s),T.labelDistance=D(T.labelDistance,O.r),this.maxLabelDistance=Math.max(this.maxLabelDistance||0,T.labelDistance),(G=(G+U)/2)>1.5*Math.PI?G-=2*Math.PI:G<-Math.PI/2&&(G+=2*Math.PI),T.slicedTranslation={translateX:Math.round(Math.cos(G)*w),translateY:Math.round(Math.sin(G)*w)},O=Math.cos(G)*M[2]/2;var v=Math.sin(G)*M[2]/2;T.tooltipPos=[M[0]+.7*O,M[1]+.7*v],T.half=G<-Math.PI/2||G>Math.PI/2?1:0,T.angle=G,U=Math.min(h,T.labelDistance/5),T.labelPosition={natural:{x:M[0]+O+Math.cos(G)*T.labelDistance,y:M[1]+v+Math.sin(G)*T.labelDistance},final:{},alignment:0>T.labelDistance?"center":T.half?"right":"left",connectorPosition:{breakAt:{x:M[0]+O+Math.cos(G)*U,y:M[1]+v+Math.sin(G)*U},touchingSliceAt:{x:M[0]+O,y:M[1]+v}}}}c(this,"afterTranslate")},B.prototype.updateTotals=function(){var h,M=this.points,x=M.length,w=this.options.ignoreHiddenPoint,l=0;for(h=0;h<x;h++){var o=M[h];!o.isValid()||w&&!o.visible||(l+=o.y)}for(this.total=l,h=0;h<x;h++)(o=M[h]).percentage=0<l&&(o.visible||!w)?o.y/l*100:0,o.total=l},B.defaultOptions=u(W.defaultOptions,V),B}(W),a(Z.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawLegendSymbol:z.drawRectangle,drawTracker:H.prototype.drawTracker,getCenter:Y.getCenter,getSymbol:X,isCartesian:!1,noSharedTooltip:!0,pointAttribs:H.prototype.pointAttribs,pointClass:tt,requireSorting:!1,searchPoint:X,trackerGroups:["group","dataLabelsGroup"]}),P.registerSeriesType("pie",Z),Z}),j(ot,"Series/Pie/PieDataLabel.js",[ot["Core/Series/DataLabel.js"],ot["Core/Globals.js"],ot["Core/Renderer/RendererUtilities.js"],ot["Core/Series/SeriesRegistry.js"],ot["Core/Utilities.js"]],function(Y,H,X,z,tt){var c,V=H.noop,W=X.distribute,P=z.series,S=tt.arrayMax,Z=tt.clamp,k=tt.defined,b=tt.merge,m=tt.pick,a=tt.relativeLength;return function(u){function _(){var C,q,J,R,A,N,E,K,Q,et,rt,at,x=this,w=x.data,h=x.chart,l=x.options.dataLabels||{},o=l.connectorPadding,y=h.plotWidth,s=h.plotHeight,r=h.plotLeft,d=Math.round(h.chartWidth/3),p=x.center,T=p[2]/2,U=p[1],G=[[],[]],O=[0,0,0,0],v=x.dataLabelPositioners;x.visible&&(l.enabled||x._hasPointLabels)&&(w.forEach(function(lt){lt.dataLabel&&lt.visible&&lt.dataLabel.shortened&&(lt.dataLabel.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),lt.dataLabel.shortened=!1)}),P.prototype.drawDataLabels.apply(x),w.forEach(function(lt){lt.dataLabel&&(lt.visible?(G[lt.half].push(lt),lt.dataLabel._pos=null,!k(l.style.width)&&!k(lt.options.dataLabels&&lt.options.dataLabels.style&&lt.options.dataLabels.style.width)&&lt.dataLabel.getBBox().width>d&&(lt.dataLabel.css({width:Math.round(.7*d)+"px"}),lt.dataLabel.shortened=!0)):(lt.dataLabel=lt.dataLabel.destroy(),lt.dataLabels&&1===lt.dataLabels.length&&delete lt.dataLabels))}),G.forEach(function(lt,ft){var ht,vt=lt.length,gt=[];if(vt){if(x.sortByAngle(lt,ft-.5),0<x.maxLabelDistance){var bt=Math.max(0,U-T-x.maxLabelDistance),pt=Math.min(U+T+x.maxLabelDistance,h.plotHeight);lt.forEach(function(it){0<it.labelDistance&&it.dataLabel&&(it.top=Math.max(0,U-T-it.labelDistance),it.bottom=Math.min(U+T+it.labelDistance,h.plotHeight),ht=it.dataLabel.getBBox().height||21,it.distributeBox={target:it.labelPosition.natural.y-it.top+ht/2,size:ht,rank:it.y},gt.push(it.distributeBox))}),W(gt,bt=pt+ht-bt,bt/5)}for(rt=0;rt<vt;rt++){if(R=(C=lt[rt]).dataLabel,et=!1===C.visible?"hidden":"inherit",Q=bt=(N=C.labelPosition).natural.y,gt&&k(C.distributeBox)&&(typeof C.distributeBox.pos>"u"?et="hidden":(E=C.distributeBox.size,Q=v.radialDistributionY(C))),delete C.positionIndex,l.justify)K=v.justify(C,T,p);else switch(l.alignTo){case"connectors":K=v.alignToConnectors(lt,ft,y,r);break;case"plotEdges":K=v.alignToPlotEdges(R,ft,y,r);break;default:K=v.radialDistributionX(x,C,Q,bt)}R._attr={visibility:et,align:N.alignment},R._pos={x:K+m((at=C.options.dataLabels||{}).x,l.x)+({left:o,right:-o}[N.alignment]||0),y:Q+m(at.y,l.y)-10},N.final.x=K,N.final.y=Q,m(l.crop,!0)&&(A=R.getBBox().width,bt=null,K-A<o&&1===ft?(bt=Math.round(A-K+o),O[3]=Math.max(bt,O[3])):K+A>y-o&&0===ft&&(bt=Math.round(K+A-y+o),O[1]=Math.max(bt,O[1])),0>Q-E/2?O[0]=Math.max(Math.round(E/2-Q),O[0]):Q+E/2>s&&(O[2]=Math.max(Math.round(Q+E/2-s),O[2])),R.sideOverflow=bt)}}}),0===S(O)||this.verifyDataLabelOverflow(O))&&(this.placeDataLabels(),this.points.forEach(function(lt){var ft;at=b(l,lt.options.dataLabels),(q=m(at.connectorWidth,1))&&(J=lt.connector,(R=lt.dataLabel)&&R._pos&&lt.visible&&0<lt.labelDistance?(et=R._attr.visibility,(ft=!J)&&(lt.connector=J=h.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+lt.colorIndex+(lt.className?" "+lt.className:"")).add(x.dataLabelsGroup),h.styledMode||J.attr({"stroke-width":q,stroke:at.connectorColor||lt.color||"#666666"})),J[ft?"attr":"animate"]({d:lt.getConnectorPath()}),J.attr("visibility",et)):J&&(lt.connector=J.destroy()))}))}function D(){this.points.forEach(function(x){var h,w=x.dataLabel;w&&x.visible&&((h=w._pos)?(w.sideOverflow&&(w._attr.width=Math.max(w.getBBox().width-w.sideOverflow,0),w.css({width:w._attr.width+"px",textOverflow:(this.options.dataLabels.style||{}).textOverflow||"ellipsis"}),w.shortened=!0),w.attr(w._attr),w[w.moved?"animate":"attr"](h),w.moved=!0):w&&w.attr({y:-9999})),delete x.distributeBox},this)}function t(x){var w=this.center,h=this.options,l=h.center,o=h.minSize||80,y=null!==h.size;if(!y){if(null!==l[0])var s=Math.max(w[2]-Math.max(x[1],x[3]),o);else s=Math.max(w[2]-x[1]-x[3],o),w[0]+=(x[3]-x[1])/2;null!==l[1]?s=Z(s,o,w[2]-Math.max(x[0],x[2])):(s=Z(s,o,w[2]-x[0]-x[2]),w[1]+=(x[0]-x[2])/2),s<w[2]?(w[2]=s,w[3]=Math.min(h.thickness?Math.max(0,s-2*h.thickness):Math.max(0,a(h.innerSize||0,s)),s),this.translate(w),this.drawDataLabels&&this.drawDataLabels()):y=!0}return y}var B=[],M={radialDistributionY:function(x){return x.top+x.distributeBox.pos},radialDistributionX:function(x,w,h,l){return x.getX(h<w.top+2||h>w.bottom-2?l:h,w.half,w)},justify:function(x,w,h){return h[0]+(x.half?-1:1)*(w+x.labelDistance)},alignToPlotEdges:function(x,w,h,l){return x=x.getBBox().width,w?x+l:h-x-l},alignToConnectors:function(x,w,h,l){var y,o=0;return x.forEach(function(s){(y=s.dataLabel.getBBox().width)>o&&(o=y)}),w?o+l:h-o-l}};u.compose=function(x){Y.compose(P),-1===B.indexOf(x)&&(B.push(x),(x=x.prototype).dataLabelPositioners=M,x.alignDataLabel=V,x.drawDataLabels=_,x.placeDataLabels=D,x.verifyDataLabelOverflow=t)}}(c||(c={})),c}),j(ot,"Extensions/OverlappingDataLabels.js",[ot["Core/Chart/Chart.js"],ot["Core/Utilities.js"]],function(Y,H){function X(Z,k){var b=!1;if(Z){var m=Z.newOpacity;Z.oldOpacity!==m&&(Z.alignAttr&&Z.placed?(Z[m?"removeClass":"addClass"]("highcharts-data-label-hidden"),b=!0,Z.alignAttr.opacity=m,Z[Z.isOld?"animate":"attr"](Z.alignAttr,null,function(){k.styledMode||Z.css({pointerEvents:m?"auto":"none"})}),tt(k,"afterHideOverlappingLabel")):Z.attr({opacity:m})),Z.isOld=!0}return b}var tt=H.fireEvent,V=H.isArray,W=H.isNumber,P=H.objectEach,S=H.pick;(0,H.addEvent)(Y,"render",function(){var Z=this,k=[];(this.labelCollectors||[]).forEach(function(b){k=k.concat(b())}),(this.yAxis||[]).forEach(function(b){b.stacking&&b.options.stackLabels&&!b.options.stackLabels.allowOverlap&&P(b.stacking.stacks,function(m){P(m,function(a){a.label&&k.push(a.label)})})}),(this.series||[]).forEach(function(b){var m=b.options.dataLabels;b.visible&&(!1!==m.enabled||b._hasPointLabels)&&((m=function(a){return a.forEach(function(c){c.visible&&(V(c.dataLabels)?c.dataLabels:c.dataLabel?[c.dataLabel]:[]).forEach(function(u){var _=u.options;u.labelrank=S(_.labelrank,c.labelrank,c.shapeArgs&&c.shapeArgs.height),_.allowOverlap?(u.oldOpacity=u.opacity,u.newOpacity=1,X(u,Z)):k.push(u)})})})(b.nodes||[]),m(b.points))}),this.hideOverlappingLabels(k)}),Y.prototype.hideOverlappingLabels=function(Z){var a,c,u,k=this,b=Z.length,m=k.renderer,_=!1,D=function(M){var x,l,w=M.box?0:M.padding||0,h=x=0;if(M&&(!M.alignAttr||M.placed)){var o=M.alignAttr||{x:M.attr("x"),y:M.attr("y")},y=M.parentGroup;return M.width||(x=M.getBBox(),M.width=x.width,M.height=x.height,x=m.fontMetrics(null,M.element).h),(l={left:"0",center:"0.5",right:"1"}[M.alignValue])?h=+l*(M.width-2*w):W(M.x)&&Math.round(M.x)!==M.translateX&&(h=M.x-M.translateX),{x:o.x+(y.translateX||0)+w-(h||0),y:o.y+(y.translateY||0)+w-x,width:M.width-2*w,height:M.height-2*w}}};for(c=0;c<b;c++)(a=Z[c])&&(a.oldOpacity=a.opacity,a.newOpacity=1,a.absoluteBox=D(a));for(Z.sort(function(M,x){return(x.labelrank||0)-(M.labelrank||0)}),c=0;c<b;c++){var t=(D=Z[c])&&D.absoluteBox;for(a=c+1;a<b;++a){var B=(u=Z[a])&&u.absoluteBox;!t||!B||D===u||0===D.newOpacity||0===u.newOpacity||"hidden"===D.visibility||"hidden"===u.visibility||B.x>=t.x+t.width||B.x+B.width<=t.x||B.y>=t.y+t.height||B.y+B.height<=t.y||((D.labelrank<u.labelrank?D:u).newOpacity=0)}}Z.forEach(function(M){X(M,k)&&(_=!0)}),_&&tt(k,"afterHideAllOverlappingLabels")}}),j(ot,"Core/Responsive.js",[ot["Core/Utilities.js"]],function(Y){var k,H=Y.extend,X=Y.find,z=Y.isArray,tt=Y.isObject,V=Y.merge,W=Y.objectEach,P=Y.pick,S=Y.splat,Z=Y.uniqueKey;return function(b){var m=[];b.compose=function(c){return-1===m.indexOf(c)&&(m.push(c),H(c.prototype,a.prototype)),c};var a=function(){function c(){}return c.prototype.currentOptions=function(u){var D=this,t={};return function _(B,M,x,w){var h;W(B,function(l,o){if(!w&&-1<D.collectionsWithUpdate.indexOf(o)&&M[o])for(l=S(l),x[o]=[],h=0;h<Math.max(l.length,M[o].length);h++)M[o][h]&&(void 0===l[h]?x[o][h]=M[o][h]:(x[o][h]={},_(l[h],M[o][h],x[o][h],w+1)));else tt(l)?(x[o]=z(l)?[]:{},_(l,M[o]||{},x[o],w+1)):x[o]=typeof M[o]>"u"?null:M[o]})}(u,this.options,t,0),t},c.prototype.matchResponsiveRule=function(u,_){var D=u.condition;(D.callback||function(){return this.chartWidth<=P(D.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=P(D.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=P(D.minWidth,0)&&this.chartHeight>=P(D.minHeight,0)}).call(this)&&_.push(u._id)},c.prototype.setResponsive=function(u,_){var D=this,t=this.options.responsive,B=this.currentResponsive,M=[];!_&&t&&t.rules&&t.rules.forEach(function(x){typeof x._id>"u"&&(x._id=Z()),D.matchResponsiveRule(x,M)},this),(_=V.apply(void 0,M.map(function(x){return X((t||{}).rules||[],function(w){return w._id===x})}).map(function(x){return x&&x.chartOptions}))).isResponsiveOptions=!0,(M=M.toString()||void 0)!==(B&&B.ruleIds)&&(B&&this.update(B.undoOptions,u,!0),M?((B=this.currentOptions(_)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:M,mergedOptions:_,undoOptions:B},this.update(_,u,!0)):this.currentResponsive=void 0)},c}()}(k||(k={})),k}),j(ot,"masters/highcharts.src.js",[ot["Core/Globals.js"],ot["Core/Utilities.js"],ot["Core/Defaults.js"],ot["Core/Animation/Fx.js"],ot["Core/Animation/AnimationUtilities.js"],ot["Core/Renderer/HTML/AST.js"],ot["Core/FormatUtilities.js"],ot["Core/Renderer/RendererUtilities.js"],ot["Core/Renderer/SVG/SVGElement.js"],ot["Core/Renderer/SVG/SVGRenderer.js"],ot["Core/Renderer/HTML/HTMLElement.js"],ot["Core/Renderer/HTML/HTMLRenderer.js"],ot["Core/Axis/Axis.js"],ot["Core/Axis/DateTimeAxis.js"],ot["Core/Axis/LogarithmicAxis.js"],ot["Core/Axis/PlotLineOrBand/PlotLineOrBand.js"],ot["Core/Axis/Tick.js"],ot["Core/Tooltip.js"],ot["Core/Series/Point.js"],ot["Core/Pointer.js"],ot["Core/MSPointer.js"],ot["Core/Legend/Legend.js"],ot["Core/Chart/Chart.js"],ot["Core/Axis/Stacking/StackingAxis.js"],ot["Core/Axis/Stacking/StackItem.js"],ot["Core/Series/Series.js"],ot["Core/Series/SeriesRegistry.js"],ot["Series/Column/ColumnSeries.js"],ot["Series/Column/ColumnDataLabel.js"],ot["Series/Pie/PieSeries.js"],ot["Series/Pie/PieDataLabel.js"],ot["Core/Series/DataLabel.js"],ot["Core/Responsive.js"],ot["Core/Color/Color.js"],ot["Core/Time.js"]],function(Y,H,X,z,tt,V,W,P,S,Z,k,b,m,a,c,u,_,D,t,B,M,x,w,h,l,o,y,s,r,d,p,T,U,G,O){return Y.animate=tt.animate,Y.animObject=tt.animObject,Y.getDeferredAnimation=tt.getDeferredAnimation,Y.setAnimation=tt.setAnimation,Y.stop=tt.stop,Y.timers=z.timers,Y.AST=V,Y.Axis=m,Y.Chart=w,Y.chart=w.chart,Y.Fx=z,Y.Legend=x,Y.PlotLineOrBand=u,Y.Point=t,Y.Pointer=M.isRequired()?M:B,Y.Series=o,Y.StackItem=l,Y.SVGElement=S,Y.SVGRenderer=Z,Y.Tick=_,Y.Time=O,Y.Tooltip=D,Y.Color=G,Y.color=G.parse,b.compose(Z),k.compose(S),Y.defaultOptions=X.defaultOptions,Y.getOptions=X.getOptions,Y.time=X.defaultTime,Y.setOptions=X.setOptions,Y.dateFormat=W.dateFormat,Y.format=W.format,Y.numberFormat=W.numberFormat,Y.addEvent=H.addEvent,Y.arrayMax=H.arrayMax,Y.arrayMin=H.arrayMin,Y.attr=H.attr,Y.clearTimeout=H.clearTimeout,Y.correctFloat=H.correctFloat,Y.createElement=H.createElement,Y.css=H.css,Y.defined=H.defined,Y.destroyObjectProperties=H.destroyObjectProperties,Y.discardElement=H.discardElement,Y.distribute=P.distribute,Y.erase=H.erase,Y.error=H.error,Y.extend=H.extend,Y.extendClass=H.extendClass,Y.find=H.find,Y.fireEvent=H.fireEvent,Y.getMagnitude=H.getMagnitude,Y.getStyle=H.getStyle,Y.inArray=H.inArray,Y.isArray=H.isArray,Y.isClass=H.isClass,Y.isDOMElement=H.isDOMElement,Y.isFunction=H.isFunction,Y.isNumber=H.isNumber,Y.isObject=H.isObject,Y.isString=H.isString,Y.keys=H.keys,Y.merge=H.merge,Y.normalizeTickInterval=H.normalizeTickInterval,Y.objectEach=H.objectEach,Y.offset=H.offset,Y.pad=H.pad,Y.pick=H.pick,Y.pInt=H.pInt,Y.relativeLength=H.relativeLength,Y.removeEvent=H.removeEvent,Y.seriesType=y.seriesType,Y.splat=H.splat,Y.stableSort=H.stableSort,Y.syncTimeout=H.syncTimeout,Y.timeUnits=H.timeUnits,Y.uniqueKey=H.uniqueKey,Y.useSerialIds=H.useSerialIds,Y.wrap=H.wrap,r.compose(s),T.compose(o),a.compose(m),c.compose(m),p.compose(d),u.compose(m),U.compose(w),h.compose(m,w,o),Y}),ot["masters/highcharts.src.js"]._modules=ot,ot["masters/highcharts.src.js"]},Bt.exports?(j.default=j,Bt.exports=St.document?j(St):j):void 0!==(_t=function(){return j(St)}.call(Ft,Tt,Ft,Bt))&&(Bt.exports=_t)},9257:(Bt,Ft,Tt)=>{var _t,St,j;j=function(j){function ot(Y,H,X,z){Y.hasOwnProperty(H)||(Y[H]=z.apply(null,X),"function"==typeof CustomEvent&&window.dispatchEvent(new CustomEvent("HighchartsModuleLoaded",{detail:{path:H,module:Y[H]}})))}ot(j=j?j._modules:{},"Accessibility/Utils/HTMLUtilities.js",[j["Core/Globals.js"],j["Core/Utilities.js"]],function(Y,H){function X(S){if("function"==typeof V.MouseEvent)return new V.MouseEvent(S.type,S);if(tt.createEvent){var Z=tt.createEvent("MouseEvent");if(Z.initMouseEvent)return Z.initMouseEvent(S.type,S.bubbles,S.cancelable,S.view||V,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,S.ctrlKey,S.altKey,S.shiftKey,S.metaKey,S.button,S.relatedTarget),Z}return z(S.type)}function z(S,Z,k){return Z=Z||{x:0,y:0},"function"==typeof V.MouseEvent?new V.MouseEvent(S,{bubbles:!0,cancelable:!0,composed:!0,button:0,buttons:1,relatedTarget:k||P,view:V,detail:"click"===S?1:0,screenX:Z.x,screenY:Z.y,clientX:Z.x,clientY:Z.y}):tt.createEvent&&(k=tt.createEvent("MouseEvent")).initMouseEvent?(k.initMouseEvent(S,!0,!0,V,"click"===S?1:0,Z.x,Z.y,Z.x,Z.y,!1,!1,!1,!1,0,null),k):{type:S}}var tt=Y.doc,V=Y.win,W=H.css,P=V.EventTarget&&new V.EventTarget||"none";return{addClass:function(S,Z){S.classList?S.classList.add(Z):0>S.className.indexOf(Z)&&(S.className+=" "+Z)},cloneMouseEvent:X,cloneTouchEvent:function(S){var Z=function(k){for(var b=[],m=0;m<k.length;++m){var a=k.item(m);a&&b.push(a)}return b};return"function"==typeof V.TouchEvent?(Z=new V.TouchEvent(S.type,{touches:Z(S.touches),targetTouches:Z(S.targetTouches),changedTouches:Z(S.changedTouches),ctrlKey:S.ctrlKey,shiftKey:S.shiftKey,altKey:S.altKey,metaKey:S.metaKey,bubbles:S.bubbles,cancelable:S.cancelable,composed:S.composed,detail:S.detail,view:S.view}),S.defaultPrevented&&Z.preventDefault(),Z):((Z=X(S)).touches=S.touches,Z.changedTouches=S.changedTouches,Z.targetTouches=S.targetTouches,Z)},escapeStringForHTML:function(S){return S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},getElement:function(S){return tt.getElementById(S)},getFakeMouseEvent:z,getHeadingTagNameForElement:function(S){var Z=function(b){return b=parseInt(b.slice(1),10),"h"+Math.min(6,b+1)},k=function(b){var m;t:{for(m=b;m=m.previousSibling;){var a=m.tagName||"";if(/H[1-6]/.test(a)){m=a;break t}}m=""}return m?Z(m):(b=b.parentElement)?/H[1-6]/.test(m=b.tagName)?Z(m):k(b):"p"};return k(S)},removeChildNodes:function(S){for(;S.lastChild;)S.removeChild(S.lastChild)},removeClass:function(S,Z){S.classList?S.classList.remove(Z):S.className=S.className.replace(new RegExp(Z,"g"),"")},removeElement:function(S){S&&S.parentNode&&S.parentNode.removeChild(S)},reverseChildNodes:function(S){for(var Z=S.childNodes.length;Z--;)S.appendChild(S.childNodes[Z])},simulatedEventTarget:P,stripHTMLTagsFromString:function(S){return"string"==typeof S?S.replace(/<\/?[^>]+(>|$)/g,""):S},visuallyHideElement:function(S){W(S,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",whiteSpace:"nowrap",clip:"rect(1px, 1px, 1px, 1px)",marginTop:"-3px","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)",filter:"alpha(opacity=1)",opacity:.01})}}}),ot(j,"Accessibility/A11yI18n.js",[j["Core/FormatUtilities.js"],j["Core/Utilities.js"]],function(Y,H){var V,X=Y.format,z=H.getNestedProperty,tt=H.pick;return function(W){function S(b,m,a){var c=function(B,M){var x=(B=B.slice(M||0)).indexOf("{"),w=B.indexOf("}");if(-1<x&&w>x)return{statement:B.substring(x+1,w),begin:M+x+1,end:M+w}},u=[],_=0;do{var D=c(b,_),t=b.substring(_,D&&D.begin-1);t.length&&u.push({value:t,type:"constant"}),D&&u.push({value:D.statement,type:"statement"}),_=D?D.end+1:_+1}while(D);return u.forEach(function(B){"statement"===B.type&&(B.value=function P(b,m){var a=b.indexOf("#each("),c=b.indexOf("#plural("),u=b.indexOf("["),_=b.indexOf("]");if(-1<a){if(_=b.slice(a).indexOf(")")+a,c=b.substring(0,a),u=b.substring(_+1),_=b.substring(a+6,_).split(","),a=Number(_[1]),b="",m=z(_[0],m))for(a=0>(a=isNaN(a)?m.length:a)?m.length+a:Math.min(a,m.length),_=0;_<a;++_)b+=c+m[_]+u;return b.length?b:""}if(-1<c){switch(u=b.slice(c).indexOf(")")+c,c=b.substring(c+8,u).split(","),Number(z(c[0],m))){case 0:b=tt(c[4],c[1]);break;case 1:b=tt(c[2],c[1]);break;case 2:b=tt(c[3],c[1]);break;default:b=c[1]}return b?(m=b).trim&&m.trim()||m.replace(/^\s+|\s+$/g,""):""}return-1<u?(c=b.substring(0,u),u=Number(b.substring(u+1,_)),b=void 0,m=z(c,m),!isNaN(u)&&m&&(0>u?typeof(b=m[m.length+u])>"u"&&(b=m[0]):typeof(b=m[u])>"u"&&(b=m[m.length-1])),typeof b<"u"?b:""):"{"+b+"}"}(B.value,m))}),X(u.reduce(function(B,M){return B+M.value},""),m,a)}function Z(b,m){b=b.split(".");for(var a=this.options.lang,c=0;c<b.length;++c)a=a&&a[b[c]];return"string"==typeof a?S(a,m,this):""}var k=[];W.compose=function(b){return-1===k.indexOf(b)&&(k.push(b),b.prototype.langFormat=Z),b},W.i18nFormat=S}(V||(V={})),V}),ot(j,"Accessibility/Utils/ChartUtilities.js",[j["Core/Globals.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Core/Utilities.js"]],function(Y,H,X){function W(c){if(c.points&&c.points.length)return(c=m(c.points,function(u){return!!u.graphic}))&&c.graphic&&c.graphic.element}function P(c){var u=W(c);return u&&u.parentNode||c.graph&&c.graph.element||c.group&&c.group.element}var Z=Y.doc,k=H.stripHTMLTagsFromString,b=X.defined,m=X.find,a=X.fireEvent;return{fireEventOnWrappedOrUnwrappedElement:function z(c,u){var _=u.type,D=c.hcEvents;Z.createEvent&&(c.dispatchEvent||c.fireEvent)?c.dispatchEvent?c.dispatchEvent(u):c.fireEvent(_,u):D&&D[_]?a(c,_,u):c.element&&z(c.element,u)},getChartTitle:function(c){return k(c.options.title.text||c.langFormat("accessibility.defaultChartTitle",{chart:c}))},getAxisDescription:function(c){return c&&(c.userOptions&&c.userOptions.accessibility&&c.userOptions.accessibility.description||c.axisTitle&&c.axisTitle.textStr||c.options.id||c.categories&&"categories"||c.dateTime&&"Time"||"values")},getAxisRangeDescription:function(c){var u=c.options||{};return u.accessibility&&typeof u.accessibility.rangeDescription<"u"?u.accessibility.rangeDescription:c.categories?(u=c.chart,c=c.dataMax&&c.dataMin?u.langFormat("accessibility.axis.rangeCategories",{chart:u,axis:c,numCategories:c.dataMax-c.dataMin+1}):""):!c.dateTime||0!==c.min&&0!==c.dataMin?function V(c){var u=c.chart,_=u.options,D=_&&_.accessibility&&_.accessibility.screenReaderSection.axisRangeDateFormat||"",t={min:c.dataMin||c.min||0,max:c.dataMax||c.max||0};return _=function(B){return c.dateTime?u.time.dateFormat(D,t[B]):t[B].toString()},u.langFormat("accessibility.axis.rangeFromTo",{chart:u,axis:c,rangeFrom:_("min"),rangeTo:_("max")})}(c):function tt(c){var u=c.chart,_={},D="Seconds";_.Seconds=((c.dataMax||c.max||0)-(c.dataMin||c.min||0))/1e3,_.Minutes=_.Seconds/60,_.Hours=_.Minutes/60,_.Days=_.Hours/24,["Minutes","Hours","Days"].forEach(function(B){2<_[B]&&(D=B)});var t=_[D].toFixed("Seconds"!==D&&"Minutes"!==D?1:0);return u.langFormat("accessibility.axis.timeRange"+D,{chart:u,axis:c,range:t.replace(".0","")})}(c)},getPointFromXY:function(c,u,_){for(var t,D=c.length;D--;)if(t=m(c[D].points||[],function(B){return B.x===u&&B.y===_}))return t},getSeriesFirstPointElement:W,getSeriesFromName:function(c,u){return u?(c.series||[]).filter(function(_){return _.name===u}):c.series},getSeriesA11yElement:P,unhideChartElementFromAT:function S(c,u){u.setAttribute("aria-hidden",!1),u!==c.renderTo&&u.parentNode&&u.parentNode!==Z.body&&(Array.prototype.forEach.call(u.parentNode.childNodes,function(_){_.hasAttribute("aria-hidden")||_.setAttribute("aria-hidden",!0)}),S(c,u.parentNode))},hideSeriesFromAT:function(c){(c=P(c))&&c.setAttribute("aria-hidden",!0)},scrollToPoint:function(c){var u=c.series.xAxis,_=c.series.yAxis,D=u&&u.scrollbar?u:_;if((u=D&&D.scrollbar)&&b(u.to)&&b(u.from)){if(_=u.to-u.from,b(D.dataMin)&&b(D.dataMax)){var t=D.toPixels(D.dataMin),B=D.toPixels(D.dataMax);c=(D.toPixels(c["xAxis"===D.coll?"x":"y"]||0)-t)/(B-t)}else c=0;u.updatePosition(c-_/2,c+_/2),a(u,"changed",{from:u.from,to:u.to,trigger:"scrollbar",DOMEvent:null})}}}}),ot(j,"Accessibility/Utils/DOMElementProvider.js",[j["Core/Globals.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H){var X=Y.doc,z=H.removeElement;return function(){function tt(){this.elements=[]}return tt.prototype.createElement=function(){var V=X.createElement.apply(X,arguments);return this.elements.push(V),V},tt.prototype.destroyCreatedElements=function(){this.elements.forEach(function(V){z(V)}),this.elements=[]},tt}()}),ot(j,"Accessibility/Utils/EventProvider.js",[j["Core/Globals.js"],j["Core/Utilities.js"]],function(Y,H){var X=H.addEvent;return function(){function z(){this.eventRemovers=[]}return z.prototype.addEvent=function(){var tt=X.apply(Y,arguments);return this.eventRemovers.push(tt),tt},z.prototype.removeAddedEvents=function(){this.eventRemovers.forEach(function(tt){return tt()}),this.eventRemovers=[]},z}()}),ot(j,"Accessibility/AccessibilityComponent.js",[j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/DOMElementProvider.js"],j["Accessibility/Utils/EventProvider.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt){var V=Y.fireEventOnWrappedOrUnwrappedElement,W=z.getFakeMouseEvent;return(Y=tt.extend)((z=function(){function P(){this.proxyProvider=this.keyCodes=this.eventProvider=this.domElementProvider=this.chart=void 0}return P.prototype.initBase=function(S,Z){this.chart=S,this.eventProvider=new X,this.domElementProvider=new H,this.proxyProvider=Z,this.keyCodes={left:37,right:39,up:38,down:40,enter:13,space:32,esc:27,tab:9,pageUp:33,pageDown:34,end:35,home:36}},P.prototype.addEvent=function(S,Z,k,b){return this.eventProvider.addEvent(S,Z,k,b)},P.prototype.createElement=function(S,Z){return this.domElementProvider.createElement(S,Z)},P.prototype.fakeClickEvent=function(S){var Z=W("click");V(S,Z)},P.prototype.destroyBase=function(){this.domElementProvider.destroyCreatedElements(),this.eventProvider.removeAddedEvents()},P}()).prototype,{init:function(){},getKeyboardNavigation:function(){},onChartUpdate:function(){},onChartRender:function(){},destroy:function(){}}),z}),ot(j,"Accessibility/KeyboardNavigationHandler.js",[j["Core/Utilities.js"]],function(Y){var H=Y.find;return function(){function X(z,tt){this.chart=z,this.keyCodeMap=tt.keyCodeMap||[],this.validate=tt.validate,this.init=tt.init,this.terminate=tt.terminate,this.response={success:1,prev:2,next:3,noHandler:4,fail:5}}return X.prototype.run=function(z){var tt=z.which||z.keyCode,V=this.response.noHandler,W=H(this.keyCodeMap,function(P){return-1<P[0].indexOf(tt)});return W?V=W[1].call(this,tt,z):9===tt&&(V=this.response[z.shiftKey?"prev":"next"]),V},X}()}),ot(j,"Accessibility/Components/ContainerComponent.js",[j["Accessibility/AccessibilityComponent.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Core/Globals.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H,X,z,tt){var k,V=this&&this.__extends||(k=function(b,m){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var u in c)c.hasOwnProperty(u)&&(a[u]=c[u])})(b,m)},function(b,m){function a(){this.constructor=b}k(b,m),b.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}),W=X.unhideChartElementFromAT,P=X.getChartTitle,S=z.doc,Z=tt.stripHTMLTagsFromString;return function(k){function b(){return null!==k&&k.apply(this,arguments)||this}return V(b,k),b.prototype.onChartUpdate=function(){this.handleSVGTitleElement(),this.setSVGContainerLabel(),this.setGraphicContainerAttrs(),this.setRenderToAttrs(),this.makeCreditsAccessible()},b.prototype.handleSVGTitleElement=function(){var m=this.chart,a="highcharts-title-"+m.index,c=Z(m.langFormat("accessibility.svgContainerTitle",{chartTitle:P(m)}));if(c.length){var u=this.svgTitleElement=this.svgTitleElement||S.createElementNS("http://www.w3.org/2000/svg","title");u.textContent=c,u.id=a,m.renderTo.insertBefore(u,m.renderTo.firstChild)}},b.prototype.setSVGContainerLabel=function(){var m=this.chart,a=m.langFormat("accessibility.svgContainerLabel",{chartTitle:P(m)});m.renderer.box&&a.length&&m.renderer.box.setAttribute("aria-label",a)},b.prototype.setGraphicContainerAttrs=function(){var m=this.chart,a=m.langFormat("accessibility.graphicContainerLabel",{chartTitle:P(m)});a.length&&m.container.setAttribute("aria-label",a)},b.prototype.setRenderToAttrs=function(){var m=this.chart,a="disabled"!==m.options.accessibility.landmarkVerbosity,c=m.langFormat("accessibility.chartContainerLabel",{title:P(m),chart:m});c&&(m.renderTo.setAttribute("role",a?"region":"group"),m.renderTo.setAttribute("aria-label",c))},b.prototype.makeCreditsAccessible=function(){var m=this.chart,a=m.credits;a&&(a.textStr&&a.element.setAttribute("aria-label",m.langFormat("accessibility.credits",{creditsStr:Z(a.textStr)})),W(m,a.element))},b.prototype.getKeyboardNavigation=function(){var m=this.chart;return new H(m,{keyCodeMap:[],validate:function(){return!0},init:function(){var a=m.accessibility;a&&a.keyboardNavigation.tabindexContainer.focus()}})},b.prototype.destroy=function(){this.chart.renderTo.setAttribute("aria-hidden",!0)},b}(Y)}),ot(j,"Accessibility/FocusBorder.js",[j["Core/Renderer/SVG/SVGLabel.js"],j["Core/Utilities.js"]],function(Y,H){var tt,X=H.addEvent,z=H.pick;return function(V){function W(){var u=this.focusElement,_=this.options.accessibility.keyboardNavigation.focusBorder;u&&(u.removeFocusBorder(),_.enabled&&u.addFocusBorder(_.margin,{stroke:_.style.color,strokeWidth:_.style.lineWidth,r:_.style.borderRadius}))}function P(u,_){var D=this.options.accessibility.keyboardNavigation.focusBorder;(_=_||u.element)&&_.focus&&(_.hcEvents&&_.hcEvents.focusin||X(_,"focusin",function(){}),_.focus(),D.hideBrowserFocusOutline&&(_.style.outline="none")),this.focusElement&&this.focusElement.removeFocusBorder(),this.focusElement=u,this.renderFocusBorder()}function Z(u,_){this.focusBorder&&this.removeFocusBorder();var D=this.getBBox(),t=z(u,3),B=this.parentGroup,M=this.scaleX||B&&B.scaleX,x=this.scaleY||B&&B.scaleY;M=(M?!x:x)?Math.abs(M||x||1):(Math.abs(M||1)+Math.abs(x||1))/2,D.x+=this.translateX?this.translateX:0,D.y+=this.translateY?this.translateY:0,x=D.x-t;var w=D.y-t,h=D.width+2*t,l=D.height+2*t,o=this instanceof Y;if("text"===this.element.nodeName||o){var y=!!this.rotation;if(o)var s={x:y?1:0,y:0};else{var r=s=0;"middle"===this.attr("text-anchor")?s=r=.5:this.rotation?s=.25:r=.75,s={x:s,y:r}}r=+this.attr("x");var d=+this.attr("y");isNaN(r)||(x=r-D.width*s.x-t),isNaN(d)||(w=d-D.height*s.y-t),o&&y&&(o=h,h=l,l=o,isNaN(r)||(x=r-D.height*s.x-t),isNaN(d)||(w=d-D.width*s.y-t))}this.focusBorder=this.renderer.rect(x,w,h,l,parseInt((_&&_.r||0).toString(),10)/M).addClass("highcharts-focus-border").attr({zIndex:99}).add(B),this.renderer.styledMode||this.focusBorder.attr({stroke:_&&_.stroke,"stroke-width":(_&&_.strokeWidth||0)/M}),function k(u){for(var _=[],D=1;D<arguments.length;D++)_[D-1]=arguments[D];u.focusBorderUpdateHooks||(u.focusBorderUpdateHooks={},c.forEach(function(t){var B=u[t+="Setter"]||u._defaultSetter;u.focusBorderUpdateHooks[t]=B,u[t]=function(){var M=B.apply(u,arguments);return u.addFocusBorder.apply(u,_),M}}))}(this,u,_),function S(u){if(!u.focusBorderDestroyHook){var _=u.destroy;u.destroy=function(){return u.focusBorder&&u.focusBorder.destroy&&u.focusBorder.destroy(),_.apply(u,arguments)},u.focusBorderDestroyHook=_}}(this)}function b(){(function m(u){u.focusBorderUpdateHooks&&(Object.keys(u.focusBorderUpdateHooks).forEach(function(_){var D=u.focusBorderUpdateHooks[_];D===u._defaultSetter?delete u[_]:u[_]=D}),delete u.focusBorderUpdateHooks)})(this),this.focusBorderDestroyHook&&(this.destroy=this.focusBorderDestroyHook,delete this.focusBorderDestroyHook),this.focusBorder&&(this.focusBorder.destroy(),delete this.focusBorder)}var a=[],c="x y transform width height r d stroke-width".split(" ");V.compose=function(u,_){-1===a.indexOf(u)&&(a.push(u),(u=u.prototype).renderFocusBorder=W,u.setFocusToElement=P),-1===a.indexOf(_)&&(a.push(_),(_=_.prototype).addFocusBorder=Z,_.removeFocusBorder=b)}}(tt||(tt={})),tt}),ot(j,"Accessibility/Utils/Announcer.js",[j["Core/Renderer/HTML/AST.js"],j["Accessibility/Utils/DOMElementProvider.js"],j["Core/Globals.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt){var V=X.doc,W=z.addClass,P=z.visuallyHideElement,S=tt.attr;return function(){function Z(k,b){this.chart=k,this.domElementProvider=new H,this.announceRegion=this.addAnnounceRegion(b)}return Z.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements()},Z.prototype.announce=function(k){var b=this;Y.setElementHTML(this.announceRegion,k),this.clearAnnouncementRegionTimer&&clearTimeout(this.clearAnnouncementRegionTimer),this.clearAnnouncementRegionTimer=setTimeout(function(){b.announceRegion.innerHTML=Y.emptyHTML,delete b.clearAnnouncementRegionTimer},1e3)},Z.prototype.addAnnounceRegion=function(k){var b=this.chart.announcerContainer||this.createAnnouncerContainer(),m=this.domElementProvider.createElement("div");return S(m,{"aria-hidden":!1,"aria-live":k}),this.chart.styledMode?W(m,"highcharts-visually-hidden"):P(m),b.appendChild(m),m},Z.prototype.createAnnouncerContainer=function(){var k=this.chart,b=V.createElement("div");return S(b,{"aria-hidden":!1,class:"highcharts-announcer-container"}),b.style.position="relative",k.renderTo.insertBefore(b,k.renderTo.firstChild),k.announcerContainer=b},Z}()}),ot(j,"Accessibility/Components/AnnotationsA11y.js",[j["Accessibility/Utils/HTMLUtilities.js"]],function(Y){function H(P){return(P.annotations||[]).reduce(function(S,Z){return Z.options&&!1!==Z.options.visible&&(S=S.concat(Z.labels)),S},[])}function X(P){return P.options&&P.options.accessibility&&P.options.accessibility.description||P.graphic&&P.graphic.text&&P.graphic.text.textStr||""}function z(P){var S=P.options&&P.options.accessibility&&P.options.accessibility.description;if(S)return S;S=P.chart;var Z=X(P),k=P.points.filter(function(a){return!!a.graphic}).map(function(a){var c=a.accessibility&&a.accessibility.valueDescription||a.graphic&&a.graphic.element&&a.graphic.element.getAttribute("aria-label")||"";return((a=a&&a.series.name||"")?a+", ":"")+"data point "+c}).filter(function(a){return!!a}),b=k.length,m="accessibility.screenReaderSection.annotations.description"+(1<b?"MultiplePoints":b?"SinglePoint":"NoPoints");return P={annotationText:Z,annotation:P,numPoints:b,annotationPoint:k[0],additionalAnnotationPoints:k.slice(1)},S.langFormat(m,P)}function tt(P){return H(P).map(function(S){return(S=V(W(z(S))))?"<li>".concat(S,"</li>"):""})}var V=Y.escapeStringForHTML,W=Y.stripHTMLTagsFromString;return{getAnnotationsInfoHTML:function(P){var S=P.annotations;return S&&S.length?(P=tt(P),'<ul style="list-style-type: none">'.concat(P.join(" "),"</ul>")):""},getAnnotationLabelDescription:z,getAnnotationListItems:tt,getPointAnnotationTexts:function(P){var S=H(P.series.chart).filter(function(Z){return-1<Z.points.indexOf(P)});return S.length?S.map(function(Z){return"".concat(X(Z))}):[]}}}),ot(j,"Accessibility/Components/InfoRegionsComponent.js",[j["Accessibility/A11yI18n.js"],j["Accessibility/AccessibilityComponent.js"],j["Accessibility/Utils/Announcer.js"],j["Accessibility/Components/AnnotationsA11y.js"],j["Core/Renderer/HTML/AST.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Core/FormatUtilities.js"],j["Core/Globals.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt,V,W,P,S,Z){var y,b=this&&this.__extends||(y=function(s,r){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var T in p)p.hasOwnProperty(T)&&(d[T]=p[T])})(s,r)},function(s,r){function d(){this.constructor=s}y(s,r),s.prototype=null===r?Object.create(r):(d.prototype=r.prototype,new d)}),m=z.getAnnotationsInfoHTML,a=V.getAxisDescription,c=V.getAxisRangeDescription,u=V.getChartTitle,_=V.unhideChartElementFromAT,D=W.format,t=P.doc,B=S.addClass,M=S.getElement,x=S.getHeadingTagNameForElement,w=S.stripHTMLTagsFromString,h=S.visuallyHideElement,l=Z.attr,o=Z.pick;return function(y){function s(){var r=null!==y&&y.apply(this,arguments)||this;return r.announcer=void 0,r.screenReaderSections={},r}return b(s,y),s.prototype.init=function(){var r=this.chart,d=this;this.initRegionsDefinitions(),this.addEvent(r,"aftergetTableAST",function(p){d.onDataTableCreated(p)}),this.addEvent(r,"afterViewData",function(p){p.wasHidden&&(d.dataTableDiv=p.element,setTimeout(function(){d.focusDataTable()},300))}),this.announcer=new X(r,"assertive")},s.prototype.initRegionsDefinitions=function(){var r=this;this.screenReaderSections={before:{element:null,buildContent:function(d){var p=d.options.accessibility.screenReaderSection.beforeChartFormatter;return p?p(d):r.defaultBeforeChartFormatter(d)},insertIntoDOM:function(d,p){p.renderTo.insertBefore(d,p.renderTo.firstChild)},afterInserted:function(){typeof r.sonifyButtonId<"u"&&r.initSonifyButton(r.sonifyButtonId),typeof r.dataTableButtonId<"u"&&r.initDataTableButton(r.dataTableButtonId)}},after:{element:null,buildContent:function(d){var p=d.options.accessibility.screenReaderSection.afterChartFormatter;return p?p(d):r.defaultAfterChartFormatter()},insertIntoDOM:function(d,p){p.renderTo.insertBefore(d,p.container.nextSibling)},afterInserted:function(){r.chart.accessibility&&r.chart.accessibility.keyboardNavigation.updateExitAnchor()}}}},s.prototype.onChartRender=function(){var r=this;this.linkedDescriptionElement=this.getLinkedDescriptionElement(),this.setLinkedDescriptionAttrs(),Object.keys(this.screenReaderSections).forEach(function(d){r.updateScreenReaderSection(d)})},s.prototype.getLinkedDescriptionElement=function(){var r=this.chart.options.accessibility.linkedDescription;if(r){if("string"!=typeof r)return r;if(r=D(r,this.chart),1===(r=t.querySelectorAll(r)).length)return r[0]}},s.prototype.setLinkedDescriptionAttrs=function(){var r=this.linkedDescriptionElement;r&&(r.setAttribute("aria-hidden","true"),B(r,"highcharts-linked-description"))},s.prototype.updateScreenReaderSection=function(r){var d=this.chart,p=this.screenReaderSections[r],T=p.buildContent(d),U=p.element=p.element||this.createElement("div"),G=U.firstChild||this.createElement("div");T?(this.setScreenReaderSectionAttribs(U,r),tt.setElementHTML(G,T),U.appendChild(G),p.insertIntoDOM(U,d),d.styledMode?B(G,"highcharts-visually-hidden"):h(G),_(d,G),p.afterInserted&&p.afterInserted()):(U.parentNode&&U.parentNode.removeChild(U),p.element=null)},s.prototype.setScreenReaderSectionAttribs=function(r,d){var p=this.chart,T=p.langFormat("accessibility.screenReaderSection."+d+"RegionLabel",{chart:p,chartTitle:u(p)});d="highcharts-screen-reader-region-".concat(d,"-").concat(p.index),l(r,{id:d,"aria-label":T||void 0}),r.style.position="relative",T&&r.setAttribute("role","all"===p.options.accessibility.landmarkVerbosity?"region":"group")},s.prototype.defaultBeforeChartFormatter=function(){var r=this.chart,d=r.options.accessibility.screenReaderSection.beforeChartFormat;if(!d)return"";var p=this.getAxesDescription(),T=r.sonify&&r.options.sonification&&r.options.sonification.enabled,U="highcharts-a11y-sonify-data-btn-"+r.index,G="hc-linkto-highcharts-data-table-"+r.index,O=m(r),v=r.langFormat("accessibility.screenReaderSection.annotations.heading",{chart:r});return p={headingTagName:x(r.renderTo),chartTitle:u(r),typeDescription:this.getTypeDescriptionText(),chartSubtitle:this.getSubtitleText(),chartLongdesc:this.getLongdescText(),xAxisDescription:p.xAxis,yAxisDescription:p.yAxis,playAsSoundButton:T?this.getSonifyButtonText(U):"",viewTableButton:r.getCSV?this.getDataTableButtonText(G):"",annotationsTitle:O?v:"",annotationsList:O},r=Y.i18nFormat(d,p,r),this.dataTableButtonId=G,this.sonifyButtonId=U,r.replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")},s.prototype.defaultAfterChartFormatter=function(){var r=this.chart,d=r.options.accessibility.screenReaderSection.afterChartFormat;if(!d)return"";var p={endOfChartMarker:this.getEndOfChartMarkerText()};return Y.i18nFormat(d,p,r).replace(/<(\w+)[^>]*?>\s*<\/\1>/g,"")},s.prototype.getLinkedDescription=function(){var r=this.linkedDescriptionElement;return w(r&&r.innerHTML||"")},s.prototype.getLongdescText=function(){var r=this.chart.options,d=r.caption;d=d&&d.text;var p=this.getLinkedDescription();return r.accessibility.description||p||d||""},s.prototype.getTypeDescriptionText=function(){var r=this.chart;return r.types?r.options.accessibility.typeDescription||function k(y,s){var r=s[0],d=y.series&&y.series[0]||{};if(d={numSeries:y.series.length,numPoints:d.points&&d.points.length,chart:y,mapTitle:y.mapView&&y.mapView.geoMap&&y.mapView.geoMap.title},!r)return y.langFormat("accessibility.chartTypes.emptyChart",d);if("map"===r)return y.langFormat(d.mapTitle?"accessibility.chartTypes.mapTypeDescription":"accessibility.chartTypes.unknownMap",d);if(1<y.types.length)return y.langFormat("accessibility.chartTypes.combinationChart",d);r=y.langFormat("accessibility.seriesTypeDescriptions."+(s=s[0]),d);var p=y.series&&2>y.series.length?"Single":"Multiple";return(y.langFormat("accessibility.chartTypes."+s+p,d)||y.langFormat("accessibility.chartTypes.default"+p,d))+(r?" "+r:"")}(r,r.types):""},s.prototype.getDataTableButtonText=function(r){var d=this.chart;return'<button id="'+r+'">'+(d=d.langFormat("accessibility.table.viewAsDataTableButtonText",{chart:d,chartTitle:u(d)}))+"</button>"},s.prototype.getSonifyButtonText=function(r){var d=this.chart;return d.options.sonification&&!1===d.options.sonification.enabled?"":'<button id="'+r+'">'+(d=d.langFormat("accessibility.sonification.playAsSoundButtonText",{chart:d,chartTitle:u(d)}))+"</button>"},s.prototype.getSubtitleText=function(){var r=this.chart.options.subtitle;return w(r&&r.text||"")},s.prototype.getEndOfChartMarkerText=function(){var r=this.chart,d=r.langFormat("accessibility.screenReaderSection.endOfChartMarker",{chart:r});return'<div id="highcharts-end-of-chart-marker-'+r.index+'">'+d+"</div>"},s.prototype.onDataTableCreated=function(r){var d=this.chart;if(d.options.accessibility.enabled){this.viewDataTableButton&&this.viewDataTableButton.setAttribute("aria-expanded","true");var p=r.tree.attributes||{};p.tabindex=-1,p.summary=d.langFormat("accessibility.table.tableSummary",{chart:d}),r.tree.attributes=p}},s.prototype.focusDataTable=function(){var r=this.dataTableDiv;(r=r&&r.getElementsByTagName("table")[0])&&r.focus&&r.focus()},s.prototype.initSonifyButton=function(r){var d=this,p=this.sonifyButton=M(r),T=this.chart,U=function(G){p&&(p.setAttribute("aria-hidden","true"),p.setAttribute("aria-label","")),G.preventDefault(),G.stopPropagation(),G=T.langFormat("accessibility.sonification.playAsSoundClickAnnouncement",{chart:T}),d.announcer.announce(G),setTimeout(function(){p&&(p.removeAttribute("aria-hidden"),p.removeAttribute("aria-label")),T.sonify&&T.sonify()},1e3)};p&&T&&(p.setAttribute("tabindex",-1),p.onclick=function(G){(T.options.accessibility&&T.options.accessibility.screenReaderSection.onPlayAsSoundClick||U).call(this,G,T)})},s.prototype.initDataTableButton=function(r){var d=this.viewDataTableButton=M(r),p=this.chart;r=r.replace("hc-linkto-",""),d&&(l(d,{tabindex:-1,"aria-expanded":!!M(r)}),d.onclick=p.options.accessibility.screenReaderSection.onViewDataTableClick||function(){p.viewData()})},s.prototype.getAxesDescription=function(){var r=this.chart,d=function(G,O){return 1<(G=r[G]).length||G[0]&&o(G[0].options.accessibility&&G[0].options.accessibility.enabled,O)},p=!!r.types&&0>r.types.indexOf("map")&&0>r.types.indexOf("treemap")&&0>r.types.indexOf("tilemap"),T=!!r.hasCartesianSeries,U=d("xAxis",!r.angular&&T&&p);return d=d("yAxis",T&&p),p={},U&&(p.xAxis=this.getAxisDescriptionText("xAxis")),d&&(p.yAxis=this.getAxisDescriptionText("yAxis")),p},s.prototype.getAxisDescriptionText=function(r){var d=this.chart,p=d[r];return d.langFormat("accessibility.axis."+r+"Description"+(1<p.length?"Plural":"Singular"),{chart:d,names:p.map(function(T){return a(T)}),ranges:p.map(function(T){return c(T)}),numAxes:p.length})},s.prototype.destroy=function(){this.announcer&&this.announcer.destroy()},s}(H)}),ot(j,"Accessibility/Components/MenuComponent.js",[j["Core/Chart/Chart.js"],j["Core/Utilities.js"],j["Accessibility/AccessibilityComponent.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H,X,z,tt,V){var b,W=this&&this.__extends||(b=function(m,a){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var _ in u)u.hasOwnProperty(_)&&(c[_]=u[_])})(m,a)},function(m,a){function c(){this.constructor=m}b(m,a),m.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}),P=H.attr,S=tt.getChartTitle,Z=tt.unhideChartElementFromAT,k=V.getFakeMouseEvent;return H=function(b){function m(){return null!==b&&b.apply(this,arguments)||this}return W(m,b),m.prototype.init=function(){var a=this.chart,c=this;this.addEvent(a,"exportMenuShown",function(){c.onMenuShown()}),this.addEvent(a,"exportMenuHidden",function(){c.onMenuHidden()}),this.createProxyGroup()},m.prototype.onMenuHidden=function(){var a=this.chart.exportContextMenu;a&&a.setAttribute("aria-hidden","true"),this.setExportButtonExpandedState("false")},m.prototype.onMenuShown=function(){var a=this.chart,c=a.exportContextMenu;c&&(this.addAccessibleContextMenuAttribs(),Z(a,c)),this.setExportButtonExpandedState("true")},m.prototype.setExportButtonExpandedState=function(a){this.exportButtonProxy&&this.exportButtonProxy.buttonElement.setAttribute("aria-expanded",a)},m.prototype.onChartRender=function(){var a=this.chart,c=a.focusElement,u=a.accessibility;this.proxyProvider.clearGroup("chartMenu"),this.proxyMenuButton(),this.exportButtonProxy&&c&&c===a.exportingGroup&&(c.focusBorder?a.setFocusToElement(c,this.exportButtonProxy.buttonElement):u&&u.keyboardNavigation.tabindexContainer.focus())},m.prototype.proxyMenuButton=function(){var a=this.chart,u=a.exportSVGElements&&a.exportSVGElements[0],_=a.options.exporting,D=a.exportSVGElements&&a.exportSVGElements[0];_&&!1!==_.enabled&&_.accessibility&&_.accessibility.enabled&&D&&D.element&&u&&(this.exportButtonProxy=this.proxyProvider.addProxyElement("chartMenu",{click:u},{"aria-label":a.langFormat("accessibility.exporting.menuButtonLabel",{chart:a,chartTitle:S(a)}),"aria-expanded":!1,title:a.options.lang.contextButtonTitle||null}))},m.prototype.createProxyGroup=function(){this.chart&&this.proxyProvider&&this.proxyProvider.addGroup("chartMenu","div")},m.prototype.addAccessibleContextMenuAttribs=function(){var a=this.chart,c=a.exportDivElements;c&&c.length&&(c.forEach(function(u){u&&("LI"!==u.tagName||u.children&&u.children.length?u.setAttribute("aria-hidden","true"):u.setAttribute("tabindex",-1))}),(c=c[0]&&c[0].parentNode)&&P(c,{"aria-hidden":void 0,"aria-label":a.langFormat("accessibility.exporting.chartMenuLabel",{chart:a}),role:"list"}))},m.prototype.getKeyboardNavigation=function(){var a=this.keyCodes,c=this.chart,u=this;return new z(c,{keyCodeMap:[[[a.left,a.up],function(){return u.onKbdPrevious(this)}],[[a.right,a.down],function(){return u.onKbdNext(this)}],[[a.enter,a.space],function(){return u.onKbdClick(this)}]],validate:function(){return!!c.exporting&&!1!==c.options.exporting.enabled&&!1!==c.options.exporting.accessibility.enabled},init:function(){var _=u.exportButtonProxy,D=u.chart.exportingGroup;_&&D&&c.setFocusToElement(D,_.buttonElement)},terminate:function(){c.hideExportMenu()}})},m.prototype.onKbdPrevious=function(a){var c=this.chart,u=c.options.accessibility;a=a.response;for(var _=c.highlightedExportItemIx||0;_--;)if(c.highlightExportItem(_))return a.success;return u.keyboardNavigation.wrapAround?(c.highlightLastExportItem(),a.success):a.prev},m.prototype.onKbdNext=function(a){var c=this.chart,u=c.options.accessibility;a=a.response;for(var _=(c.highlightedExportItemIx||0)+1;_<c.exportDivElements.length;++_)if(c.highlightExportItem(_))return a.success;return u.keyboardNavigation.wrapAround?(c.highlightExportItem(0),a.success):a.next},m.prototype.onKbdClick=function(a){var c=this.chart,_=(c.exportSVGElements&&c.exportSVGElements[0]).element;return c.openMenu?this.fakeClickEvent(c.exportDivElements[c.highlightedExportItemIx]):(this.fakeClickEvent(_),c.highlightExportItem(0)),a.response.success},m}(X),function(b){function m(){var D=this.exportSVGElements&&this.exportSVGElements[0];D&&(D=D.element).onclick&&D.onclick(k("click"))}function a(){var D=this.exportDivElements;D&&this.exportContextMenu&&this.openMenu&&(D.forEach(function(t){t&&"highcharts-menu-item"===t.className&&t.onmouseout&&t.onmouseout(k("mouseout"))}),this.highlightedExportItemIx=0,this.exportContextMenu.hideMenu(),this.container.focus())}function c(D){var t=this.exportDivElements&&this.exportDivElements[D],B=this.exportDivElements&&this.exportDivElements[this.highlightedExportItemIx];if(t&&"LI"===t.tagName&&(!t.children||!t.children.length)){var M=!!(this.renderTo.getElementsByTagName("g")[0]||{}).focus;return t.focus&&M&&t.focus(),B&&B.onmouseout&&B.onmouseout(k("mouseout")),t.onmouseover&&t.onmouseover(k("mouseover")),this.highlightedExportItemIx=D,!0}return!1}function u(){if(this.exportDivElements)for(var D=this.exportDivElements.length;D--;)if(this.highlightExportItem(D))return!0;return!1}var _=[];b.compose=function(D){-1===_.indexOf(D)&&(_.push(D),(D=Y.prototype).hideExportMenu=a,D.highlightExportItem=c,D.highlightLastExportItem=u,D.showExportMenu=m)}}(H||(H={})),H}),ot(j,"Accessibility/KeyboardNavigation.js",[j["Core/Globals.js"],j["Accessibility/Components/MenuComponent.js"],j["Core/Utilities.js"],j["Accessibility/Utils/EventProvider.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H,X,z,tt){var V=Y.doc,W=Y.win,P=X.addEvent,S=X.fireEvent,Z=tt.getElement,k=tt.simulatedEventTarget;return function(b){function m(){var u=this;S(this,"dismissPopupContent",{},function(){u.tooltip&&u.tooltip.hide(0),u.hideExportMenu()})}function a(u){27===(u.which||u.keyCode)&&Y.charts&&Y.charts.forEach(function(_){_&&_.dismissPopupContent&&_.dismissPopupContent()})}var c=[];b.compose=function(u){return H.compose(u),-1===c.indexOf(u)&&(c.push(u),u.prototype.dismissPopupContent=m),-1===c.indexOf(V)&&(c.push(V),P(V,"keydown",a)),u}}((X=function(){function b(m,a){this.components=this.chart=void 0,this.currentModuleIx=NaN,this.exitAnchor=this.eventProvider=void 0,this.modules=[],this.tabindexContainer=void 0,this.init(m,a)}return b.prototype.init=function(m,a){var c=this,u=this.eventProvider=new z;this.chart=m,this.components=a,this.modules=[],this.currentModuleIx=0,this.update(),u.addEvent(this.tabindexContainer,"keydown",function(_){return c.onKeydown(_)}),u.addEvent(this.tabindexContainer,"focus",function(_){return c.onFocus(_)}),["mouseup","touchend"].forEach(function(_){return u.addEvent(V,_,function(D){return c.onMouseUp(D)})}),["mousedown","touchstart"].forEach(function(_){return u.addEvent(m.renderTo,_,function(){c.isClickingChart=!0})}),u.addEvent(m.renderTo,"mouseover",function(){c.pointerIsOverChart=!0}),u.addEvent(m.renderTo,"mouseout",function(){c.pointerIsOverChart=!1})},b.prototype.update=function(m){var a=this.chart.options.accessibility;a=a&&a.keyboardNavigation;var c=this.components;this.updateContainerTabindex(),a&&a.enabled&&m&&m.length?(this.modules=m.reduce(function(u,_){return _=c[_].getKeyboardNavigation(),u.concat(_)},[]),this.updateExitAnchor()):(this.modules=[],this.currentModuleIx=0,this.removeExitAnchor())},b.prototype.updateExitAnchor=function(){var m="highcharts-end-of-chart-marker-".concat(this.chart.index);m=Z(m),this.removeExitAnchor(),m?(this.makeElementAnExitAnchor(m),this.exitAnchor=m):this.createExitAnchor()},b.prototype.move=function(m){var a=this.modules&&this.modules[this.currentModuleIx];if(a&&a.terminate&&a.terminate(m),this.chart.focusElement&&this.chart.focusElement.removeFocusBorder(),this.currentModuleIx+=m,a=this.modules&&this.modules[this.currentModuleIx]){if(a.validate&&!a.validate())return this.move(m);if(a.init)return a.init(m),!0}return this.currentModuleIx=0,this.exiting=!0,0<m?this.exitAnchor&&this.exitAnchor.focus():this.tabindexContainer.focus(),!1},b.prototype.onFocus=function(m){m=m.relatedTarget&&this.chart.container.contains(m.relatedTarget),this.exiting||this.tabbingInBackwards||this.isClickingChart||m||null!==(m=this.getFirstValidModuleIx())&&(this.currentModuleIx=m,this.modules[m].init(1)),this.exiting=!1},b.prototype.onMouseUp=function(m){if(delete this.isClickingChart,!this.keyboardReset&&m.relatedTarget!==k){if(m=this.chart,!this.pointerIsOverChart){var a=this.modules&&this.modules[this.currentModuleIx||0];a&&a.terminate&&a.terminate(),this.currentModuleIx=0}m.focusElement&&(m.focusElement.removeFocusBorder(),delete m.focusElement),this.keyboardReset=!0}},b.prototype.onKeydown=function(m){m=m||W.event;var c,a=this.modules&&this.modules.length&&this.modules[this.currentModuleIx];if(this.exiting=this.keyboardReset=!1,a){var u=a.run(m);u===a.response.success?c=!0:u===a.response.prev?c=this.move(-1):u===a.response.next&&(c=this.move(1)),c&&(m.preventDefault(),m.stopPropagation())}},b.prototype.updateContainerTabindex=function(){var m=this.chart.options.accessibility;m=!((m=m&&m.keyboardNavigation)&&!1===m.enabled);var a=this.chart,c=a.container;a.renderTo.hasAttribute("tabindex")&&(c.removeAttribute("tabindex"),c=a.renderTo),this.tabindexContainer=c;var u=c.getAttribute("tabindex");m&&!u?c.setAttribute("tabindex","0"):m||a.container.removeAttribute("tabindex")},b.prototype.createExitAnchor=function(){var m=this.chart,a=this.exitAnchor=V.createElement("div");m.renderTo.appendChild(a),this.makeElementAnExitAnchor(a)},b.prototype.makeElementAnExitAnchor=function(m){var a=this.tabindexContainer.getAttribute("tabindex")||0;m.setAttribute("class","highcharts-exit-anchor"),m.setAttribute("tabindex",a),m.setAttribute("aria-hidden",!1),this.addExitAnchorEventsToEl(m)},b.prototype.removeExitAnchor=function(){this.exitAnchor&&this.exitAnchor.parentNode&&(this.exitAnchor.parentNode.removeChild(this.exitAnchor),delete this.exitAnchor)},b.prototype.addExitAnchorEventsToEl=function(m){var a=this.chart,c=this;this.eventProvider.addEvent(m,"focus",function(u){var _=!((u=u||W.event).relatedTarget&&a.container.contains(u.relatedTarget)||c.exiting);a.focusElement&&delete a.focusElement,_?(c.tabbingInBackwards=!0,c.tabindexContainer.focus(),delete c.tabbingInBackwards,u.preventDefault(),c.modules&&c.modules.length&&(c.currentModuleIx=c.modules.length-1,(u=c.modules[c.currentModuleIx])&&u.validate&&!u.validate()?c.move(-1):u&&u.init(-1))):c.exiting=!1})},b.prototype.getFirstValidModuleIx=function(){for(var m=this.modules.length,a=0;a<m;++a){var c=this.modules[a];if(!c.validate||c.validate())return a}return null},b.prototype.destroy=function(){this.removeExitAnchor(),this.eventProvider.removeAddedEvents(),this.chart.container.removeAttribute("tabindex")},b}())||(X={})),X}),ot(j,"Accessibility/Components/LegendComponent.js",[j["Core/Animation/AnimationUtilities.js"],j["Core/Globals.js"],j["Core/Legend/Legend.js"],j["Core/Utilities.js"],j["Accessibility/AccessibilityComponent.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H,X,z,tt,V,W,P){function S(w){var h=w.legend&&w.legend.allItems,l=w.options.legend.accessibility||{};return w=w.colorAxis&&w.colorAxis.some(function(o){return!o.dataClasses||!o.dataClasses.length}),!(!h||!h.length||w||!1===l.enabled)}function Z(w,h){var l=h.legendItem||{};h.setState(w?"hover":"",!0),h=0;for(var o=["group","label","symbol"];h<o.length;h++){var y=l[o[h]];(y=y&&y.element||y)&&c(y,w?"mouseover":"mouseout")}}var w,k=this&&this.__extends||(w=function(h,l){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,y){o.__proto__=y}||function(o,y){for(var s in y)y.hasOwnProperty(s)&&(o[s]=y[s])})(h,l)},function(h,l){function o(){this.constructor=h}w(h,l),h.prototype=null===l?Object.create(l):(o.prototype=l.prototype,new o)}),b=Y.animObject,m=H.doc,a=z.addEvent,c=z.fireEvent,u=z.isNumber,_=z.pick,D=z.syncTimeout,t=W.getChartTitle,B=P.stripHTMLTagsFromString,M=P.addClass,x=P.removeClass;return Y=function(w){function h(){var l=null!==w&&w.apply(this,arguments)||this;return l.highlightedLegendItemIx=NaN,l.proxyGroup=null,l}return k(h,w),h.prototype.init=function(){var l=this;this.recreateProxies(),this.addEvent(X,"afterScroll",function(){this.chart===l.chart&&(l.proxyProvider.updateGroupProxyElementPositions("legend"),l.updateLegendItemProxyVisibility(),-1<l.highlightedLegendItemIx&&this.chart.highlightLegendItem(l.highlightedLegendItemIx))}),this.addEvent(X,"afterPositionItem",function(o){this.chart===l.chart&&this.chart.renderer&&l.updateProxyPositionForItem(o.item)}),this.addEvent(X,"afterRender",function(){this.chart===l.chart&&this.chart.renderer&&l.recreateProxies()&&D(function(){return l.proxyProvider.updateGroupProxyElementPositions("legend")},b(_(this.chart.renderer.globalAnimation,!0)).duration)})},h.prototype.updateLegendItemProxyVisibility=function(){var r,l=this.chart,o=l.legend,y=o.currentPage||1,s=o.clipHeight||0;(o.allItems||[]).forEach(function(d){if(d.a11yProxyElement){var p=o.pages&&o.pages.length,T=d.a11yProxyElement.element,U=!1;r=d.legendItem||{},p&&(d=r.pageIx||0,U=(p=r.y||0)+(U=r.label?Math.round(r.label.getBBox().height):0)-o.pages[d]>s||d!==y-1),U?l.styledMode?M(T,"highcharts-a11y-invisible"):T.style.visibility="hidden":(x(T,"highcharts-a11y-invisible"),T.style.visibility="")}})},h.prototype.onChartRender=function(){S(this.chart)||this.removeProxies()},h.prototype.highlightAdjacentLegendPage=function(l){var o=this.chart,y=o.legend,s=y.pages||[];if(0<(l=(y.currentPage||1)+l)&&l<=s.length)for(var r=s=0,d=y.allItems;r<d.length;r++)((d[r].legendItem||{}).pageIx||0)+1===l&&(y=o.highlightLegendItem(s))&&(this.highlightedLegendItemIx=s),++s},h.prototype.updateProxyPositionForItem=function(l){l.a11yProxyElement&&l.a11yProxyElement.refreshPosition()},h.prototype.recreateProxies=function(){var l=m.activeElement,o=this.proxyGroup;return l=l&&o&&o.contains(l),this.removeProxies(),!!S(this.chart)&&(this.addLegendProxyGroup(),this.proxyLegendItems(),this.updateLegendItemProxyVisibility(),this.updateLegendTitle(),l&&this.chart.highlightLegendItem(this.highlightedLegendItemIx),!0)},h.prototype.removeProxies=function(){this.proxyProvider.removeGroup("legend")},h.prototype.updateLegendTitle=function(){var l=this.chart,o=B((l.legend&&l.legend.options.title&&l.legend.options.title.text||"").replace(/<br ?\/?>/g," "));l=l.langFormat("accessibility.legend.legendLabel"+(o?"":"NoTitle"),{chart:l,legendTitle:o,chartTitle:t(l)}),this.proxyProvider.updateGroupAttrs("legend",{"aria-label":l})},h.prototype.addLegendProxyGroup=function(){this.proxyGroup=this.proxyProvider.addGroup("legend","ul",{"aria-label":"_placeholder_",role:"all"===this.chart.options.accessibility.landmarkVerbosity?"region":null})},h.prototype.proxyLegendItems=function(){var o,l=this;((this.chart.legend||{}).allItems||[]).forEach(function(y){(o=y.legendItem||{}).label&&o.label.element&&l.proxyLegendItem(y)})},h.prototype.proxyLegendItem=function(l){var o=l.legendItem||{};if(o.label&&o.group){var y=this.chart.langFormat("accessibility.legend.legendItem",{chart:this.chart,itemName:B(l.name),item:l});l.a11yProxyElement=this.proxyProvider.addProxyElement("legend",{click:o.label,visual:(o.group.div?o.label:o.group).element},{tabindex:-1,"aria-pressed":l.visible,"aria-label":y})}},h.prototype.getKeyboardNavigation=function(){var l=this.keyCodes,o=this,y=this.chart;return new V(y,{keyCodeMap:[[[l.left,l.right,l.up,l.down],function(s){return o.onKbdArrowKey(this,s)}],[[l.enter,l.space],function(){return o.onKbdClick(this)}],[[l.pageDown,l.pageUp],function(s){return o.highlightAdjacentLegendPage(s===l.pageDown?1:-1),this.response.success}]],validate:function(){return o.shouldHaveLegendNavigation()},init:function(){y.highlightLegendItem(0),o.highlightedLegendItemIx=0},terminate:function(){o.highlightedLegendItemIx=-1,y.legend.allItems.forEach(function(s){return Z(!1,s)})}})},h.prototype.onKbdArrowKey=function(l,o){var y=this.keyCodes,s=l.response,r=this.chart,d=r.options.accessibility,p=r.legend.allItems.length;return r.highlightLegendItem(this.highlightedLegendItemIx+(o=o===y.left||o===y.up?-1:1))?(this.highlightedLegendItemIx+=o,s.success):(1<p&&d.keyboardNavigation.wrapAround&&l.init(o),s.success)},h.prototype.onKbdClick=function(l){var o=this.chart.legend.allItems[this.highlightedLegendItemIx];return o&&o.a11yProxyElement&&o.a11yProxyElement.click(),l.response.success},h.prototype.shouldHaveLegendNavigation=function(){if(!S(this.chart))return!1;var l=this.chart,o=(l.options.legend||{}).accessibility||{};return!!(l.legend.display&&o.keyboardNavigation&&o.keyboardNavigation.enabled)},h}(tt),function(w){function h(y){var s=this.legend.allItems,r=this.accessibility&&this.accessibility.components.legend.highlightedLegendItemIx,d=s[y],p=d.legendItem||{};return!!d&&(u(r)&&s[r]&&Z(!1,s[r]),r=(s=this.legend).currentPage,typeof(y=(s.allItems[y].legendItem||{}).pageIx)<"u"&&y+1!==r&&s.scroll(1+y-r),y=d.a11yProxyElement&&d.a11yProxyElement.buttonElement,(p=p.label)&&p.element&&y&&this.setFocusToElement(p,y),Z(!0,d),!0)}function l(y){var s=y.item;this.chart.options.accessibility.enabled&&s&&s.a11yProxyElement&&s.a11yProxyElement.buttonElement.setAttribute("aria-pressed",y.visible?"true":"false")}var o=[];w.compose=function(y,s){-1===o.indexOf(y)&&(o.push(y),y.prototype.highlightLegendItem=h),-1===o.indexOf(s)&&(o.push(s),a(s,"afterColorizeItem",l))}}(Y||(Y={})),Y}),ot(j,"Accessibility/Components/SeriesComponent/SeriesDescriber.js",[j["Accessibility/Components/AnnotationsA11y.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Core/FormatUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt){function W(d){var p=d.chart.options.accessibility.series.pointDescriptionEnabledThreshold;return!!(!1!==p&&d.points&&d.points.length>=p)}function Z(d,p){var T=d.series,U=T.chart;d=U.options.accessibility.point||{};var G=T.options.accessibility&&T.options.accessibility.point||{};return T=T.tooltipOptions||{},U=U.options.lang,y(p)?w(p,G.valueDecimals||d.valueDecimals||T.valueDecimals||-1,U.decimalPoint,U.accessibility.thousandsSep||U.thousandsSep):p}function b(d,p){return d.chart.langFormat("accessibility.series."+p+"Description",{name:D(d[p]),series:d})}function a(d){var p=d.series,T=1<p.chart.series.length||p.options.name,U=d.series,G=U.chart,O=U.options.accessibility;if(O=O&&O.point&&O.point.valueDescriptionFormat||G.options.accessibility.point.valueDescriptionFormat,U=s(U.xAxis&&U.xAxis.options.accessibility&&U.xAxis.options.accessibility.enabled,!G.angular)){var v=d.series,C=v.chart,q=v.options.accessibility&&v.options.accessibility.point||{},J=C.options.accessibility.point||{};(v=v.xAxis&&v.xAxis.dateTime)?(v=v.getXDateFormat(d.x||0,C.options.tooltip.dateTimeLabelFormats),q=q.dateFormatter&&q.dateFormatter(d)||J.dateFormatter&&J.dateFormatter(d)||q.dateFormat||J.dateFormat||v,C=C.time.dateFormat(q,d.x||0,void 0)):C=void 0,q=(d.series.xAxis||{}).categories&&r(d.category)&&(""+d.category).replace("<br/>"," "),J=r(d.id)&&0>(""+d.id).indexOf("highcharts-"),v="x, "+d.x,C=d.name||C||q||(J?d.id:v)}else C="";q=r(d.index)?d.index+1:"";var R=(J=d.series).chart.options.accessibility.point||{},A=J.chart.options.accessibility&&J.chart.options.accessibility.point||{},N=J.tooltipOptions||{};return v=A.valuePrefix||R.valuePrefix||N.valuePrefix||"",R=A.valueSuffix||R.valueSuffix||N.valueSuffix||"",A=Z(d,d[typeof d.value<"u"?"value":"y"]),J=d.isNull?J.chart.langFormat("accessibility.series.nullPointValue",{point:d}):J.pointArrayMap?function m(d,p,T){var U=p||"",G=T||"";return d.series.pointArrayMap.reduce(function(O,v){O+=O.length?", ":"";var C=Z(d,s(d[v],d.options[v]));return O+(v+": ")+U+C+G},"")}(d,v,R):v+A+R,G=x(O,{point:d,index:q,xDescription:C,value:J,separator:U?", ":""},G),O=(O=d.options&&d.options.accessibility&&d.options.accessibility.description)?" "+O:"",p=T?" "+p.name+".":"",T=d.series.chart,C={point:d,annotations:U=_(d)},T=U.length?T.langFormat("accessibility.series.pointAnnotationsDescription",C):"",d.accessibility=d.accessibility||{},d.accessibility.valueDescription=G,G+O+p+(T?" "+T:"")}function u(d){var p=d.chart,T=p.types||[],U=function k(d){var p=(d.options.accessibility||{}).description;return p&&d.chart.langFormat("accessibility.series.description",{description:p,series:d})||""}(d),G=function(J){return p[J]&&1<p[J].length&&d[J]},O=d.index+1,v=b(d,"xAxis"),C=b(d,"yAxis"),q={seriesNumber:O,series:d,chart:p};return q=p.langFormat("accessibility.series.summary."+d.type+(T=1<T.length?"Combination":""),q)||p.langFormat("accessibility.series.summary.default"+T,q),G=(G("yAxis")?" "+C+".":"")+(G("xAxis")?" "+v+".":""),x(p.options.accessibility.series.descriptionFormat||"",{seriesDescription:q,authorDescription:U?" "+U:"",axisDescription:G,series:d,chart:p,seriesNumber:O},void 0)}var _=Y.getPointAnnotationTexts,D=H.getAxisDescription,t=H.getSeriesFirstPointElement,B=H.getSeriesA11yElement,M=H.unhideChartElementFromAT,x=X.format,w=X.numberFormat,h=z.reverseChildNodes,l=z.stripHTMLTagsFromString,o=tt.find,y=tt.isNumber,s=tt.pick,r=tt.defined;return{defaultPointDescriptionFormatter:a,defaultSeriesDescriptionFormatter:u,describeSeries:function(d){var p=d.chart,T=t(d),U=B(d),G=p.is3d&&p.is3d();U&&(U.lastChild!==T||G||h(U),function c(d){var p=function P(d){var p=d.options.accessibility||{};return!W(d)&&!p.exposeAsGroupOnly}(d),T=function S(d){var p=d.chart.options.accessibility.keyboardNavigation.seriesNavigation;return!(!d.points||!(d.points.length<p.pointNavigationEnabledThreshold||!1===p.pointNavigationEnabledThreshold))}(d),U=d.chart.options.accessibility.point.describeNull;(p||T)&&d.points.forEach(function(G){var O;if(!(O=G.graphic&&G.graphic.element)){var v=G.series;if(O=v&&v.chart,v=v&&v.is("sunburst"),O=O&&O.options.accessibility.point.describeNull,O=G.isNull&&!v&&O){v=G.series;var C=function V(d){var p=d.index;return d.series&&d.series.data&&r(p)&&o(d.series.data,function(T){return!!(T&&typeof T.index<"u"&&T.index>p&&T.graphic&&T.graphic.element)})||null}(G);v=(O=C&&C.graphic)?O.parentGroup:v.graph||v.group,C=C?{x:s(G.plotX,C.plotX,0),y:s(G.plotY,C.plotY,0)}:{x:s(G.plotX,0),y:s(G.plotY,0)},(C=G.series.chart.renderer.rect(C.x,C.y,1,1)).attr({class:"highcharts-a11y-mock-point",fill:"none",opacity:0,"fill-opacity":0,"stroke-opacity":0}),v&&v.element?(G.graphic=C,G.hasMockGraphic=!0,C.add(v),v.element.insertBefore(C.element,O?O.element:null),O=C.element):O=void 0}}v=G.options&&G.options.accessibility&&!1===G.options.accessibility.enabled,O&&(G.isNull&&!U?O.setAttribute("aria-hidden",!0):(O.setAttribute("tabindex","-1"),d.chart.styledMode||(O.style.outline="none"),p&&!v?(v=(C=G.series).chart.options.accessibility.point||{},G=l((C=C.options.accessibility&&C.options.accessibility.point||{}).descriptionFormatter&&C.descriptionFormatter(G)||v.descriptionFormatter&&v.descriptionFormatter(G)||a(G)),O.setAttribute("role","img"),O.setAttribute("aria-label",G)):O.setAttribute("aria-hidden",!0)))})}(d),M(p,U),p=(G=d.chart).options.chart,T=1<G.series.length,G=G.options.accessibility.series.describeSingleSeries,p.options3d&&p.options3d.enabled&&T||!(T||G||(d.options.accessibility||{}).exposeAsGroupOnly||W(d))?U.removeAttribute("aria-label"):(T=(p=d.chart.options.accessibility).landmarkVerbosity,U.setAttribute("role",(d.options.accessibility||{}).exposeAsGroupOnly?"img":"all"===T?"region":"group"),U.setAttribute("tabindex","-1"),d.chart.styledMode||(U.style.outline="none"),U.setAttribute("aria-label",l(p.series.descriptionFormatter&&p.series.descriptionFormatter(d)||u(d)))))}}}),ot(j,"Accessibility/Components/SeriesComponent/NewDataAnnouncer.js",[j["Core/Globals.js"],j["Core/Utilities.js"],j["Accessibility/Utils/Announcer.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/EventProvider.js"],j["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(Y,H,X,z,tt,V){var S=H.addEvent,Z=H.defined,k=z.getChartTitle,b=V.defaultPointDescriptionFormatter,m=V.defaultSeriesDescriptionFormatter;return function(a){function c(_){var D=this.chart,t=this.newDataAnnouncer;t&&t.chart===D&&D.options.accessibility.announceNewData.enabled&&(t.dirty.newPoint=Z(t.dirty.newPoint)?void 0:_.point)}function u(){var _=this.chart,D=this.newDataAnnouncer;D&&D.chart===_&&_.options.accessibility.announceNewData.enabled&&(D.dirty.hasDirty=!0,D.dirty.allSeries[this.name+this.index]=this)}a.composedClasses=[],a.compose=function(_){-1===a.composedClasses.indexOf(_)&&(a.composedClasses.push(_),S(_,"addPoint",c),S(_,"updatedData",u))}}((H=function(){function a(c){this.announcer=void 0,this.dirty={allSeries:{}},this.eventProvider=void 0,this.lastAnnouncementTime=0,this.chart=c}return a.prototype.init=function(){var c=this.chart,u=c.options.accessibility.announceNewData.interruptUser?"assertive":"polite";this.lastAnnouncementTime=0,this.dirty={allSeries:{}},this.eventProvider=new tt,this.announcer=new X(c,u),this.addEventListeners()},a.prototype.destroy=function(){this.eventProvider.removeAddedEvents(),this.announcer.destroy()},a.prototype.addEventListeners=function(){var c=this,u=this.chart,_=this.eventProvider;_.addEvent(u,"afterApplyDrilldown",function(){c.lastAnnouncementTime=0}),_.addEvent(u,"afterAddSeries",function(D){c.onSeriesAdded(D.series)}),_.addEvent(u,"redraw",function(){c.announceDirtyData()})},a.prototype.onSeriesAdded=function(c){this.chart.options.accessibility.announceNewData.enabled&&(this.dirty.hasDirty=!0,this.dirty.allSeries[c.name+c.index]=c,this.dirty.newSeries=Z(this.dirty.newSeries)?void 0:c)},a.prototype.announceDirtyData=function(){var c=this;if(this.chart.options.accessibility.announceNewData&&this.dirty.hasDirty){var u=this.dirty.newPoint;u&&(u=function W(a){var c=a.series.data.filter(function(u){return a.x===u.x&&a.y===u.y});return 1===c.length?c[0]:a}(u)),this.queueAnnouncement(Object.keys(this.dirty.allSeries).map(function(_){return c.dirty.allSeries[_]}),this.dirty.newSeries,u),this.dirty={allSeries:{}}}},a.prototype.queueAnnouncement=function(c,u,_){var D=this,t=this.chart.options.accessibility.announceNewData;if(t.enabled){var B=+new Date;t=Math.max(0,t.minAnnounceInterval-(B-this.lastAnnouncementTime)),c=function P(a,c){var u=(a||[]).concat(c||[]).reduce(function(_,D){return _[D.name+D.index]=D,_},{});return Object.keys(u).map(function(_){return u[_]})}(this.queuedAnnouncement&&this.queuedAnnouncement.series,c),(u=this.buildAnnouncementMessage(c,u,_))&&(this.queuedAnnouncement&&clearTimeout(this.queuedAnnouncementTimer),this.queuedAnnouncement={time:B,message:u,series:c},this.queuedAnnouncementTimer=setTimeout(function(){D&&D.announcer&&(D.lastAnnouncementTime=+new Date,D.announcer.announce(D.queuedAnnouncement.message),delete D.queuedAnnouncement,delete D.queuedAnnouncementTimer)},t))}},a.prototype.buildAnnouncementMessage=function(c,u,_){var D=this.chart,t=D.options.accessibility.announceNewData;return t.announcementFormatter&&!1!==(c=t.announcementFormatter(c,u,_))?c.length?c:null:(c=Y.charts&&1<Y.charts.length?"Multiple":"Single",c=u?"newSeriesAnnounce"+c:_?"newPointAnnounce"+c:"newDataAnnounce",t=k(D),D.langFormat("accessibility.announceNewData."+c,{chartTitle:t,seriesDesc:u?m(u):null,pointDesc:_?b(_):null,point:_,series:u}))},a}())||(H={})),H}),ot(j,"Accessibility/ProxyElement.js",[j["Core/Globals.js"],j["Core/Utilities.js"],j["Accessibility/Utils/EventProvider.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"]],function(Y,H,X,z,tt){var V=Y.doc,W=H.attr,P=H.css,S=H.merge,Z=z.fireEventOnWrappedOrUnwrappedElement,k=tt.cloneMouseEvent,b=tt.cloneTouchEvent,m=tt.getFakeMouseEvent,a=tt.removeElement;return function(){function c(u,_,D,t){this.chart=u,this.target=_,this.groupType=D,D="ul"===D,this.eventProvider=new X;var B=D?V.createElement("li"):null,M=this.buttonElement=V.createElement("button");u.styledMode||this.hideButtonVisually(M),B?(D&&!u.styledMode&&(B.style.listStyle="none"),B.appendChild(M),this.element=B):this.element=M,this.updateTarget(_,t)}return c.prototype.click=function(){var u=this.getTargetPosition();u.x+=u.width/2,u.y+=u.height/2,u=m("click",u),Z(this.target.click,u)},c.prototype.updateTarget=function(u,_){this.target=u,this.updateCSSClassName();var D=_||{};Object.keys(D).forEach(function(t){null===D[t]&&delete D[t]}),W(this.buttonElement,S({"aria-label":this.getTargetAttr(u.click,"aria-label")},D)),this.eventProvider.removeAddedEvents(),this.addProxyEventsToButton(this.buttonElement,u.click),this.refreshPosition()},c.prototype.refreshPosition=function(){var u=this.getTargetPosition();P(this.buttonElement,{width:(u.width||1)+"px",height:(u.height||1)+"px",left:(Math.round(u.x)||0)+"px",top:(Math.round(u.y)||0)+"px"})},c.prototype.remove=function(){this.eventProvider.removeAddedEvents(),a(this.element)},c.prototype.updateCSSClassName=function(){var u=this.chart.legend;u=-1<((u=u.group&&u.group.div)&&u.className||"").indexOf("highcharts-no-tooltip");var _=-1<(this.getTargetAttr(this.target.click,"class")||"").indexOf("highcharts-no-tooltip");this.buttonElement.className=u||_?"highcharts-a11y-proxy-button highcharts-no-tooltip":"highcharts-a11y-proxy-button"},c.prototype.addProxyEventsToButton=function(u,_){var D=this;"click touchstart touchend touchcancel touchmove mouseover mouseenter mouseleave mouseout".split(" ").forEach(function(t){var B=0===t.indexOf("touch");D.eventProvider.addEvent(u,t,function(M){var x=B?b(M):k(M);_&&Z(_,x),M.stopPropagation(),B||M.preventDefault()},{passive:!1})})},c.prototype.hideButtonVisually=function(u){P(u,{borderWidth:0,backgroundColor:"transparent",cursor:"pointer",outline:"none",opacity:.001,filter:"alpha(opacity=1)",zIndex:999,overflow:"hidden",padding:0,margin:0,display:"block",position:"absolute","-ms-filter":"progid:DXImageTransform.Microsoft.Alpha(Opacity=1)"})},c.prototype.getTargetPosition=function(){var u=this.target.click;if(u=u.element?u.element:u,u=this.target.visual||u,this.chart.renderTo&&u&&u.getBoundingClientRect){u=u.getBoundingClientRect();var _=this.chart.pointer.getChartPosition();return{x:(u.left-_.left)/_.scaleX,y:(u.top-_.top)/_.scaleY,width:u.right/_.scaleX-u.left/_.scaleX,height:u.bottom/_.scaleY-u.top/_.scaleY}}return{x:0,y:0,width:1,height:1}},c.prototype.getTargetAttr=function(u,_){return u.element?u.element.getAttribute(_):u.getAttribute(_)},c}()}),ot(j,"Accessibility/ProxyProvider.js",[j["Core/Globals.js"],j["Core/Utilities.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/DOMElementProvider.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Accessibility/ProxyElement.js"]],function(Y,H,X,z,tt,V){var W=Y.doc,P=H.attr,S=H.css,Z=X.unhideChartElementFromAT,k=tt.removeElement,b=tt.removeChildNodes;return function(){function m(a){this.chart=a,this.domElementProvider=new z,this.groups={},this.groupOrder=[],this.beforeChartProxyPosContainer=this.createProxyPosContainer("before"),this.afterChartProxyPosContainer=this.createProxyPosContainer("after"),this.update()}return m.prototype.addProxyElement=function(a,c,u){var _=this.groups[a];if(!_)throw Error("ProxyProvider.addProxyElement: Invalid group key "+a);return a=new V(this.chart,c,_.type,u),_.proxyContainerElement.appendChild(a.element),_.proxyElements.push(a),a},m.prototype.addGroup=function(a,c,u){var _=this.groups[a];if(_)return _.groupElement;if(_=this.domElementProvider.createElement(c),u&&u.role&&"div"!==c){var D=this.domElementProvider.createElement("div");D.appendChild(_)}else D=_;return D.className="highcharts-a11y-proxy-group highcharts-a11y-proxy-group-"+a.replace(/\W/g,"-"),this.groups[a]={proxyContainerElement:_,groupElement:D,type:c,proxyElements:[]},P(D,u||{}),"ul"===c&&_.setAttribute("role","list"),this.afterChartProxyPosContainer.appendChild(D),this.updateGroupOrder(this.groupOrder),D},m.prototype.updateGroupAttrs=function(a,c){var u=this.groups[a];if(!u)throw Error("ProxyProvider.updateGroupAttrs: Invalid group key "+a);P(u.groupElement,c)},m.prototype.updateGroupOrder=function(a){var c=this;if(this.groupOrder=a.slice(),!this.isDOMOrderGroupOrder()){var u=a.indexOf("series"),_=-1<u?a.slice(0,u):a,D=-1<u?a.slice(u+1):[];a=W.activeElement,["before","after"].forEach(function(t){var B=c["before"===t?"beforeChartProxyPosContainer":"afterChartProxyPosContainer"];t="before"===t?_:D,b(B),t.forEach(function(M){(M=c.groups[M])&&B.appendChild(M.groupElement)})}),(this.beforeChartProxyPosContainer.contains(a)||this.afterChartProxyPosContainer.contains(a))&&a&&a.focus&&a.focus()}},m.prototype.clearGroup=function(a){var c=this.groups[a];if(!c)throw Error("ProxyProvider.clearGroup: Invalid group key "+a);b(c.proxyContainerElement)},m.prototype.removeGroup=function(a){var c=this.groups[a];c&&(k(c.groupElement),delete this.groups[a])},m.prototype.update=function(){this.updatePosContainerPositions(),this.updateGroupOrder(this.groupOrder),this.updateProxyElementPositions()},m.prototype.updateProxyElementPositions=function(){Object.keys(this.groups).forEach(this.updateGroupProxyElementPositions.bind(this))},m.prototype.updateGroupProxyElementPositions=function(a){(a=this.groups[a])&&a.proxyElements.forEach(function(c){return c.refreshPosition()})},m.prototype.destroy=function(){this.domElementProvider.destroyCreatedElements()},m.prototype.createProxyPosContainer=function(a){var c=this.domElementProvider.createElement("div");return c.setAttribute("aria-hidden","false"),c.className="highcharts-a11y-proxy-container"+(a?"-"+a:""),S(c,{top:"0",left:"0"}),this.chart.styledMode||(c.style.whiteSpace="nowrap",c.style.position="absolute"),c},m.prototype.getCurrentGroupOrderInDOM=function(){var a=this,c=function(_){var D=[];_=_.children;for(var t=0;t<_.length;++t){t:{for(var B=_[t],M=Object.keys(a.groups),x=M.length;x--;){var w=M[x],h=a.groups[w];if(h&&B===h.groupElement){B=w;break t}}B=void 0}B&&D.push(B)}return D},u=c(this.beforeChartProxyPosContainer);return c=c(this.afterChartProxyPosContainer),u.push("series"),u.concat(c)},m.prototype.isDOMOrderGroupOrder=function(){var a=this,c=this.getCurrentGroupOrderInDOM(),u=this.groupOrder.filter(function(D){return"series"===D||!!a.groups[D]}),_=c.length;if(_!==u.length)return!1;for(;_--;)if(c[_]!==u[_])return!1;return!0},m.prototype.updatePosContainerPositions=function(){var a=this.chart;if(!a.renderer.forExport){var c=a.renderer.box;a.container.insertBefore(this.afterChartProxyPosContainer,c.nextSibling),a.container.insertBefore(this.beforeChartProxyPosContainer,c),Z(this.chart,this.afterChartProxyPosContainer),Z(this.chart,this.beforeChartProxyPosContainer)}},m}()}),ot(j,"Stock/RangeSelector/RangeSelectorDefaults.js",[],function(){return{lang:{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"",rangeSelectorTo:"\u2192"},rangeSelector:{allButtonsEnabled:!1,buttons:void 0,buttonSpacing:5,dropdown:"responsive",enabled:void 0,verticalAlign:"top",buttonTheme:{width:28,height:18,padding:2,zIndex:7},floating:!1,x:0,y:0,height:void 0,inputBoxBorderColor:"none",inputBoxHeight:17,inputBoxWidth:void 0,inputDateFormat:"%b %e, %Y",inputDateParser:void 0,inputEditDateFormat:"%Y-%m-%d",inputEnabled:!0,inputPosition:{align:"right",x:0,y:0},inputSpacing:5,selected:void 0,buttonPosition:{align:"left",x:0,y:0},inputStyle:{color:"#335cad",cursor:"pointer"},labelStyle:{color:"#666666"}}}}),ot(j,"Stock/RangeSelector/RangeSelectorComposition.js",[j["Core/Defaults.js"],j["Stock/RangeSelector/RangeSelectorDefaults.js"],j["Core/Utilities.js"]],function(Y,H,X){function z(){var h=this.range,l=h.type,o=this.max,y=this.chart.time,s=function(T,U){var G="year"===l?"FullYear":"Month",O=new y.Date(T),v=y.get(G,O);return y.set(G,O,v+U),v===y.get(G,O)&&y.set("Date",O,0),O.getTime()-T};if(D(h))var r=o-h,d=h;else h&&(r=o+s(o,-(h.count||1)),this.chart&&(this.chart.fixedRange=o-r));var p=B(this.dataMin,Number.MIN_VALUE);return D(r)||(r=p),r<=p&&(r=p,typeof d>"u"&&(d=s(r,h.count)),this.newMax=Math.min(r+d,B(this.dataMax,Number.MAX_VALUE))),D(o)?!D(h)&&h&&h._offsetMin&&(r+=h._offsetMin):r=void 0,r}function tt(){this.options.rangeSelector&&this.options.rangeSelector.enabled&&(this.rangeSelector=new w(this))}function V(){var h=this.axes,l=this.rangeSelector;l&&(D(l.deferredYTDClick)&&(l.clickButton(l.deferredYTDClick),delete l.deferredYTDClick),h.forEach(function(o){o.updateNames(),o.setScale()}),this.getAxisMargins(),l.render(),h=l.options.verticalAlign,l.options.floating||("bottom"===h?this.extraBottomMargin=!0:"middle"!==h&&(this.extraTopMargin=!0)))}function W(h){var l,o,y,s,r=h.rangeSelector,d=function(){r&&(l=h.xAxis[0].getExtremes(),o=h.legend,s=r&&r.options.verticalAlign,D(l.min)&&r.render(l.min,l.max),o.display&&"top"===s&&s===o.options.verticalAlign&&((y=t(h.spacingBox)).y="vertical"===o.options.layout?h.plotTop:y.y+r.getHeight(),o.group.placed=!1,o.align(y)))};r&&(_(M,function(p){return p[0]===h})||M.push([h,[a(h.xAxis[0],"afterSetExtremes",function(p){r&&r.render(p.min,p.max)}),a(h,"redraw",d)]]),d())}function P(){for(var h=0,l=M.length;h<l;++h){var o=M[h];if(o[0]===this){o[1].forEach(function(y){return y()}),M.splice(h,1);break}}}function S(){var h=this.rangeSelector;h&&(h=h.getHeight(),this.extraTopMargin&&(this.plotTop+=h),this.extraBottomMargin&&(this.marginBottom+=h))}function Z(){var h=this.rangeSelector;h&&!h.options.floating&&(h.render(),"bottom"===(h=h.options.verticalAlign)?this.extraBottomMargin=!0:"middle"!==h&&(this.extraTopMargin=!0))}function k(h){var l=h.options.rangeSelector;h=this.extraBottomMargin;var o=this.extraTopMargin,y=this.rangeSelector;l&&l.enabled&&!c(y)&&this.options.rangeSelector&&(this.options.rangeSelector.enabled=!0,this.rangeSelector=y=new w(this)),this.extraTopMargin=this.extraBottomMargin=!1,y&&(W(this),l=l&&l.verticalAlign||y.options&&y.options.verticalAlign,y.options.floating||("bottom"===l?this.extraBottomMargin=!0:"middle"!==l&&(this.extraTopMargin=!0)),this.extraBottomMargin!==h||this.extraTopMargin!==o)&&(this.isDirtyBox=!0)}var w,b=Y.defaultOptions,m=Y.setOptions,a=X.addEvent,c=X.defined,u=X.extend,_=X.find,D=X.isNumber,t=X.merge,B=X.pick,M=[],x=[];return{compose:function(h,l,o){w=o,-1===x.indexOf(h)&&(x.push(h),h.prototype.minFromRange=z),-1===x.indexOf(l)&&(x.push(l),a(l,"afterGetContainer",tt),a(l,"beforeRender",V),a(l,"destroy",P),a(l,"getMargins",S),a(l,"render",Z),a(l,"update",k),l.prototype.callbacks.push(W)),-1===x.indexOf(m)&&(u(b,{rangeSelector:H.rangeSelector}),u(b.lang,H.lang))}}}),ot(j,"Stock/RangeSelector/RangeSelector.js",[j["Core/Axis/Axis.js"],j["Core/Defaults.js"],j["Core/Globals.js"],j["Stock/RangeSelector/RangeSelectorComposition.js"],j["Core/Renderer/SVG/SVGElement.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt,V){var P=H.defaultOptions,S=V.addEvent,Z=V.createElement,k=V.css,b=V.defined,m=V.destroyObjectProperties,a=V.discardElement,c=V.extend,u=V.fireEvent,_=V.isNumber,D=V.merge,t=V.objectEach,B=V.pad,M=V.pick,x=V.pInt,w=V.splat;return H=function(){function h(l){this.buttons=void 0,this.buttonOptions=h.prototype.defaultButtons,this.initialButtonGroupWidth=0,this.options=void 0,this.chart=l,this.init(l)}return h.compose=function(l,o){z.compose(l,o,h)},h.prototype.clickButton=function(l,o){var y=this.chart,s=this.buttonOptions[l],r=y.xAxis[0],d=y.scroller&&y.scroller.getUnionExtremes()||r||{},p=s.type,T=s.dataGrouping,U=d.dataMin,G=d.dataMax,O=r&&Math.round(Math.min(r.max,M(G,r.max)));d=s._range;var v,C=!0;if(null!==U&&null!==G){if(y.fixedRange=d,this.setSelected(l),T&&(this.forcedDataGrouping=!0,Y.prototype.setDataGrouping.call(r||{chart:this.chart},T,!1),this.frozenStates=s.preserveDataGrouping),"month"===p||"year"===p)if(r){var q=r.minFromRange.call(p={range:s,max:O,chart:y,dataMin:U,dataMax:G});_(p.newMax)&&(O=p.newMax),C=!1}else d=s;else if(d)q=Math.max(O-d,U),O=Math.min(q+d,G),C=!1;else if("ytd"===p){if(!r)return void(this.deferredYTDClick=l);(typeof G>"u"||typeof U>"u")&&(U=Number.MAX_VALUE,G=Number.MIN_VALUE,y.series.forEach(function(N){(N=N.xData)&&(U=Math.min(N[0],U),G=Math.max(N[N.length-1],G))}),o=!1),q=v=(p=this.getYTDExtremes(G,U,y.time.useUTC)).min,O=p.max}else"all"===p&&r&&(y.navigator&&y.navigator.baseSeries[0]&&(y.navigator.baseSeries[0].xAxis.options.range=void 0),q=U,O=G);if(C&&s._offsetMin&&b(q)&&(q+=s._offsetMin),s._offsetMax&&b(O)&&(O+=s._offsetMax),this.dropdown&&(this.dropdown.selectedIndex=l+1),r)r.setExtremes(q,O,M(o,!0),void 0,{trigger:"rangeSelectorButton",rangeSelectorButton:s});else{var J=w(y.options.xAxis)[0],R=J.range;J.range=d;var A=J.min;J.min=v,S(y,"load",function(){J.range=R,J.min=A})}u(this,"afterBtnClick")}},h.prototype.setSelected=function(l){this.selected=this.options.selected=l},h.prototype.init=function(l){var o=this,y=l.options.rangeSelector,s=y.buttons||o.defaultButtons.slice(),r=y.selected,d=function(){var p=o.minInput,T=o.maxInput;p&&p.blur&&u(p,"blur"),T&&T.blur&&u(T,"blur")};o.chart=l,o.options=y,o.buttons=[],o.buttonOptions=s,this.eventsToUnbind=[],this.eventsToUnbind.push(S(l.container,"mousedown",d)),this.eventsToUnbind.push(S(l,"resize",d)),s.forEach(o.computeButtonRange),typeof r<"u"&&s[r]&&this.clickButton(r,!1),this.eventsToUnbind.push(S(l,"load",function(){l.xAxis&&l.xAxis[0]&&S(l.xAxis[0],"setExtremes",function(p){this.max-this.min!==l.fixedRange&&"rangeSelectorButton"!==p.trigger&&"updatedData"!==p.trigger&&o.forcedDataGrouping&&!o.frozenStates&&this.setDataGrouping(!1,!1)})}))},h.prototype.updateButtonStates=function(){var l=this,o=this.chart,y=this.dropdown,s=o.xAxis[0],r=Math.round(s.max-s.min),d=!s.hasVisibleSeries,p=o.scroller&&o.scroller.getUnionExtremes()||s,T=p.dataMin,U=p.dataMax,G=(o=l.getYTDExtremes(U,T,o.time.useUTC)).min,O=o.max,v=l.selected,C=l.options.allButtonsEnabled,q=l.buttons,J=_(v);l.buttonOptions.forEach(function(R,A){var N=R._range,E=R.type,K=R.count||1,Q=q[A],et=R._offsetMax-R._offsetMin,rt=A===v,at=N>U-T,lt=N<s.minRange;R=0;var ft=!1,vt=!1;N=N===r,("month"===E||"year"===E)&&r+36e5>=864e5*{month:28,year:365}[E]*K-et&&r-36e5<=864e5*{month:31,year:366}[E]*K+et?N=!0:"ytd"===E?(N=O-G+et===r,ft=!rt):"all"===E&&(N=s.max-s.min>=U-T,vt=!rt&&J&&N),K=rt&&N||N&&!J&&!ft||rt&&l.frozenStates,(E=!C&&(at||lt||vt||d))?R=3:K&&(J=!0,R=2),Q.state!==R&&(Q.setState(R),y&&(y.options[A+1].disabled=E,2===R&&(y.selectedIndex=A+1)),0===R&&v===A&&l.setSelected())})},h.prototype.computeButtonRange=function(l){var o=l.type,y=l.count||1,s={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};s[o]?l._range=s[o]*y:("month"===o||"year"===o)&&(l._range=864e5*{month:30,year:365}[o]*y),l._offsetMin=M(l.offsetMin,0),l._offsetMax=M(l.offsetMax,0),l._range+=l._offsetMax-l._offsetMin},h.prototype.getInputValue=function(l){var y=this.chart.time;return(l="min"===l?this.minInput:this.maxInput)?("text"===l.type&&this.chart.options.rangeSelector.inputDateParser||this.defaultInputDateParser)(l.value,y.useUTC,y):0},h.prototype.setInputValue=function(l,o){var y=this.options,s=this.chart.time,r="min"===l?this.minInput:this.maxInput;if(l="min"===l?this.minDateBox:this.maxDateBox,r){var d=r.getAttribute("data-hc-time");d=b(d)?Number(d):void 0,b(o)&&(b(d)&&r.setAttribute("data-hc-time-previous",d),r.setAttribute("data-hc-time",o),d=o),r.value=s.dateFormat(this.inputTypeFormats[r.type]||y.inputEditDateFormat,d),l&&l.attr({text:s.dateFormat(y.inputDateFormat,d)})}},h.prototype.setInputExtremes=function(l,o,y){if(l="min"===l?this.minInput:this.maxInput){var s=this.inputTypeFormats[l.type],r=this.chart.time;s&&(o=r.dateFormat(s,o),l.min!==o&&(l.min=o),y=r.dateFormat(s,y),l.max!==y&&(l.max=y))}},h.prototype.showInput=function(l){var o="min"===l?this.minDateBox:this.maxDateBox;if((l="min"===l?this.minInput:this.maxInput)&&o&&this.inputGroup){var y="text"===l.type,s=this.inputGroup,r=s.translateX;s=s.translateY;var d=this.options.inputBoxWidth;k(l,{width:y?o.width+(d?-2:20)+"px":"auto",height:y?o.height-2+"px":"auto",border:"2px solid silver"}),k(l,y&&d?{left:r+o.x+"px",top:s+"px"}:{left:Math.min(Math.round(o.x+r-(l.offsetWidth-o.width)/2),this.chart.chartWidth-l.offsetWidth)+"px",top:s-(l.offsetHeight-o.height)/2+"px"})}},h.prototype.hideInput=function(l){(l="min"===l?this.minInput:this.maxInput)&&k(l,{top:"-9999em",border:0,width:"1px",height:"1px"})},h.prototype.defaultInputDateParser=function(l,o,y){var r,s=l.split("/").join("-").split(" ").join("T");return-1===s.indexOf("T")&&(s+="T00:00"),o?s+="Z":((r=X.isSafari)&&(r=!(6<(r=s).length&&(r.lastIndexOf("-")===r.length-6||r.lastIndexOf("+")===r.length-6))),r&&(s+=0>=(r=new Date(s).getTimezoneOffset()/60)?"+".concat(B(-r),":00"):"-".concat(B(r),":00"))),s=Date.parse(s),_(s)||(l=l.split("-"),s=Date.UTC(x(l[0]),x(l[1])-1,x(l[2]))),y&&o&&_(s)&&(s+=y.getTimezoneOffset(s)),s},h.prototype.drawInput=function(l){function o(){var q=d.maxInput,J=d.minInput,R=y.xAxis[0],A=y.scroller&&y.scroller.xAxis?y.scroller.xAxis:R,N=A.dataMin;A=A.dataMax;var E=d.getInputValue(l);E!==Number(v.getAttribute("data-hc-time-previous"))&&_(E)&&(v.setAttribute("data-hc-time-previous",E),G&&q&&_(N)?E>Number(q.getAttribute("data-hc-time"))?E=void 0:E<N&&(E=N):J&&_(A)&&(E<Number(J.getAttribute("data-hc-time"))?E=void 0:E>A&&(E=A)),typeof E<"u"&&R.setExtremes(G?E:R.min,G?R.max:E,void 0,void 0,{trigger:"rangeSelectorInput"}))}var y=this.chart,s=this.div,r=this.inputGroup,d=this,p=y.renderer.style||{},T=y.renderer,U=y.options.rangeSelector,G="min"===l,O=P.lang[G?"rangeSelectorFrom":"rangeSelectorTo"]||"";O=T.label(O,0).addClass("highcharts-range-label").attr({padding:O?2:0,height:O?U.inputBoxHeight:0}).add(r),T=T.label("",0).addClass("highcharts-range-input").attr({padding:2,width:U.inputBoxWidth,height:U.inputBoxHeight,"text-align":"center"}).on("click",function(){d.showInput(l),d[l+"Input"].focus()}),y.styledMode||T.attr({stroke:U.inputBoxBorderColor,"stroke-width":1}),T.add(r);var v=Z("input",{name:l,className:"highcharts-range-selector"},void 0,s);v.setAttribute("type",function W(h){if(-1!==h.indexOf("%L"))return"text";var l="aAdewbBmoyY".split("").some(function(y){return-1!==h.indexOf("%"+y)}),o="HkIlMS".split("").some(function(y){return-1!==h.indexOf("%"+y)});return l&&o?"datetime-local":l?"date":o?"time":"text"}(U.inputDateFormat||"%b %e, %Y")),y.styledMode||(O.css(D(p,U.labelStyle)),T.css(D({color:"#333333"},p,U.inputStyle)),k(v,c({position:"absolute",border:0,boxShadow:"0 0 15px rgba(0,0,0,0.3)",width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:p.fontSize,fontFamily:p.fontFamily,top:"-9999em"},U.inputStyle))),v.onfocus=function(){d.showInput(l)},v.onblur=function(){v===X.doc.activeElement&&o(),d.hideInput(l),d.setInputValue(l),v.blur()};var C=!1;return v.onchange=function(){C||(o(),d.hideInput(l),v.blur())},v.onkeypress=function(q){13===q.keyCode&&o()},v.onkeydown=function(q){C=!0,38!==q.keyCode&&40!==q.keyCode||o()},v.onkeyup=function(){C=!1},{dateBox:T,input:v,label:O}},h.prototype.getPosition=function(){var l=this.chart,o=l.options.rangeSelector;return{buttonTop:(l="top"===o.verticalAlign?l.plotTop-l.axisOffset[0]:0)+o.buttonPosition.y,inputTop:l+o.inputPosition.y-10}},h.prototype.getYTDExtremes=function(l,o,y){var s=this.chart.time,r=new s.Date(l),d=s.get("FullYear",r);return y=y?s.Date.UTC(d,0,1):+new s.Date(d,0,1),o=Math.max(o,y),r=r.getTime(),{max:Math.min(l||r,r),min:o}},h.prototype.render=function(l,o){var y=this.chart,s=y.renderer,r=y.container,d=y.options,p=d.rangeSelector,T=M(d.chart.style&&d.chart.style.zIndex,0)+1;if(d=p.inputEnabled,!1!==p.enabled){if(this.rendered||(this.group=s.g("range-selector-group").attr({zIndex:7}).add(),this.div=Z("div",void 0,{position:"relative",height:0,zIndex:T}),this.buttonOptions.length&&this.renderButtons(),r.parentNode&&r.parentNode.insertBefore(this.div,r),d&&(this.inputGroup=s.g("input-group").add(this.group),s=this.drawInput("min"),this.minDateBox=s.dateBox,this.minLabel=s.label,this.minInput=s.input,s=this.drawInput("max"),this.maxDateBox=s.dateBox,this.maxLabel=s.label,this.maxInput=s.input)),d&&(this.setInputValue("min",l),this.setInputValue("max",o),l=y.scroller&&y.scroller.getUnionExtremes()||y.xAxis[0]||{},b(l.dataMin)&&b(l.dataMax)&&(y=y.xAxis[0].minRange||0,this.setInputExtremes("min",l.dataMin,Math.min(l.dataMax,this.getInputValue("max"))-y),this.setInputExtremes("max",Math.max(l.dataMin,this.getInputValue("min"))+y,l.dataMax)),this.inputGroup)){var U=0;[this.minLabel,this.minDateBox,this.maxLabel,this.maxDateBox].forEach(function(G){if(G){var O=G.getBBox().width;O&&(G.attr({x:U}),U+=O+p.inputSpacing)}})}this.alignElements(),this.rendered=!0}},h.prototype.renderButtons=function(){var l=this,o=this.buttons,y=this.options,s=P.lang,r=this.chart.renderer,d=D(y.buttonTheme),p=d&&d.states,T=d.width||28;delete d.width,delete d.states,this.buttonGroup=r.g("range-selector-buttons").add(this.group);var U=this.dropdown=Z("select",void 0,{position:"absolute",width:"1px",height:"1px",padding:0,border:0,top:"-9999em",cursor:"pointer",opacity:1e-4},this.div);S(U,"touchstart",function(){U.style.fontSize="16px"}),[[X.isMS?"mouseover":"mouseenter"],[X.isMS?"mouseout":"mouseleave"],["change","click"]].forEach(function(G){var O=G[0],v=G[1];S(U,O,function(){var C=o[l.currentButtonIndex()];C&&u(C.element,v||O)})}),this.zoomText=r.label(s&&s.rangeSelectorZoom||"",0).attr({padding:y.buttonTheme.padding,height:y.buttonTheme.height,paddingLeft:0,paddingRight:0}).add(this.buttonGroup),this.chart.styledMode||(this.zoomText.css(y.labelStyle),d["stroke-width"]=M(d["stroke-width"],0)),Z("option",{textContent:this.zoomText.textStr,disabled:!0},void 0,U),this.buttonOptions.forEach(function(G,O){Z("option",{textContent:G.title||G.text},void 0,U),o[O]=r.button(G.text,0,0,function(v){var q,C=G.events&&G.events.click;C&&(q=C.call(G,v)),!1!==q&&l.clickButton(O),l.isActive=!0},d,p&&p.hover,p&&p.select,p&&p.disabled).attr({"text-align":"center",width:T}).add(l.buttonGroup),G.title&&o[O].attr("title",G.title)})},h.prototype.alignElements=function(){var l=this,o=this.buttonGroup,y=this.buttons,s=this.chart,r=this.group,d=this.inputGroup,p=this.options,T=this.zoomText,U=s.options,G=U.exporting&&!1!==U.exporting.enabled&&U.navigation&&U.navigation.buttonOptions;U=p.buttonPosition;var O=p.inputPosition,v=p.verticalAlign,C=function(A,N){return G&&l.titleCollision(s)&&"top"===v&&"right"===N.align&&N.y-A.getBBox().height-12<(G.y||0)+(G.height||0)+s.spacing[0]?-40:0},q=s.plotLeft;if(r&&U&&O){var J=U.x-s.spacing[3];if(o){if(this.positionButtons(),!this.initialButtonGroupWidth){var R=0;T&&(R+=T.getBBox().width+5),y.forEach(function(A,N){R+=A.width,N!==y.length-1&&(R+=p.buttonSpacing)}),this.initialButtonGroupWidth=R}q-=s.spacing[3],this.updateButtonStates(),T=C(o,U),this.alignButtonGroup(T),r.placed=o.placed=s.hasLoaded}o=0,d&&(o=C(d,O),"left"===O.align?J=q:"right"===O.align&&(J=-Math.max(s.axisOffset[1],-o)),d.align({y:O.y,width:d.getBBox().width,align:O.align,x:O.x+J-2},!0,s.spacingBox),d.placed=s.hasLoaded),this.handleCollision(o),r.align({verticalAlign:v},!0,s.spacingBox),d=r.alignAttr.translateY,o=r.getBBox().height+20,C=0,"bottom"===v&&(C=d-(o=o+(C=(C=s.legend&&s.legend.options)&&"bottom"===C.verticalAlign&&C.enabled&&!C.floating?s.legend.legendHeight+M(C.margin,10):0)-20)-(p.floating?0:p.y)-(s.titleOffset?s.titleOffset[2]:0)-10),"top"===v?(p.floating&&(C=0),s.titleOffset&&s.titleOffset[0]&&(C=s.titleOffset[0]),C+=s.margin[0]-s.spacing[0]||0):"middle"===v&&(O.y===U.y?C=d:(O.y||U.y)&&(C=0>O.y||0>U.y?C-Math.min(O.y,U.y):d-o)),r.translate(p.x,p.y+Math.floor(C)),U=this.minInput,O=this.maxInput,d=this.dropdown,p.inputEnabled&&U&&O&&(U.style.marginTop=r.translateY+"px",O.style.marginTop=r.translateY+"px"),d&&(d.style.marginTop=r.translateY+"px")}},h.prototype.alignButtonGroup=function(l,o){var y=this.chart,s=this.buttonGroup,r=this.options.buttonPosition,d=y.plotLeft-y.spacing[3],p=r.x-y.spacing[3];"right"===r.align?p+=l-d:"center"===r.align&&(p-=d/2),s&&s.align({y:r.y,width:M(o,this.initialButtonGroupWidth),align:r.align,x:p},!0,y.spacingBox)},h.prototype.positionButtons=function(){var l=this.buttons,o=this.chart,y=this.options,s=this.zoomText,r=o.hasLoaded?"animate":"attr",d=y.buttonPosition,p=o=o.plotLeft;for(s&&"hidden"!==s.visibility&&(s[r]({x:M(o+d.x,o)}),p+=d.x+s.getBBox().width+5),s=0,d=this.buttonOptions.length;s<d;++s)"hidden"!==l[s].visibility?(l[s][r]({x:p}),p+=l[s].width+y.buttonSpacing):l[s][r]({x:o})},h.prototype.handleCollision=function(l){var o=this,y=this.chart,s=this.buttonGroup,r=this.inputGroup,d=this.options,p=d.buttonPosition,T=d.dropdown,U=d.inputPosition;d=function(){var v=0;return o.buttons.forEach(function(C){(C=C.getBBox()).width>v&&(v=C.width)}),v};var G=function(v){if(r&&s){var C=r.alignAttr.translateX+r.alignOptions.x-l+r.getBBox().x+2,q=r.alignOptions.width,J=s.alignAttr.translateX+s.getBBox().x;return J+v>C&&C+q>J&&p.y<U.y+r.getBBox().height}return!1},O=function(){r&&s&&r.attr({translateX:r.alignAttr.translateX+(y.axisOffset[1]>=-l?0:-l),translateY:r.alignAttr.translateY+s.getBBox().height+10})};if(s){if("always"===T)return this.collapseButtons(l),void(G(d())&&O());"never"===T&&this.expandButtons()}r&&s?U.align===p.align||G(this.initialButtonGroupWidth+20)?"responsive"===T?(this.collapseButtons(l),G(d())&&O()):O():"responsive"===T&&this.expandButtons():s&&"responsive"===T&&(this.initialButtonGroupWidth>y.plotWidth?this.collapseButtons(l):this.expandButtons())},h.prototype.collapseButtons=function(l){var o=this.buttons,y=this.buttonOptions,s=this.chart,r=this.dropdown,d=this.options,p=this.zoomText,T=s.userOptions.rangeSelector&&s.userOptions.rangeSelector.buttonTheme||{},U=function(O){return{text:O?O+" \u25be":"\u25be",width:"auto",paddingLeft:M(d.buttonTheme.paddingLeft,T.padding,8),paddingRight:M(d.buttonTheme.paddingRight,T.padding,8)}};p&&p.hide();var G=!1;y.forEach(function(O,v){2!==(v=o[v]).state?v.hide():(v.show(),v.attr(U(O.text)),G=!0)}),G||(r&&(r.selectedIndex=0),o[0].show(),o[0].attr(U(this.zoomText&&this.zoomText.textStr))),y=d.buttonPosition.align,this.positionButtons(),"right"!==y&&"center"!==y||this.alignButtonGroup(l,o[this.currentButtonIndex()].getBBox().width),this.showDropdown()},h.prototype.expandButtons=function(){var l=this.buttons,o=this.buttonOptions,y=this.options,s=this.zoomText;this.hideDropdown(),s&&s.show(),o.forEach(function(r,d){(d=l[d]).show(),d.attr({text:r.text,width:y.buttonTheme.width||28,paddingLeft:M(y.buttonTheme.paddingLeft,"unset"),paddingRight:M(y.buttonTheme.paddingRight,"unset")}),2>d.state&&d.setState(0)}),this.positionButtons()},h.prototype.currentButtonIndex=function(){var l=this.dropdown;return l&&0<l.selectedIndex?l.selectedIndex-1:0},h.prototype.showDropdown=function(){var l=this.buttonGroup,o=this.buttons,y=this.chart,s=this.dropdown;if(l&&s){var r=l.translateX;l=l.translateY,o=o[this.currentButtonIndex()].getBBox(),k(s,{left:y.plotLeft+r+"px",top:l+.5+"px",width:o.width+"px",height:o.height+"px"}),this.hasVisibleDropdown=!0}},h.prototype.hideDropdown=function(){var l=this.dropdown;l&&(k(l,{top:"-9999em",width:"1px",height:"1px"}),this.hasVisibleDropdown=!1)},h.prototype.getHeight=function(){var l=this.options,o=this.group,y=l.y,s=l.buttonPosition.y,r=l.inputPosition.y;return l.height?l.height:(this.alignElements(),l=o?o.getBBox(!0).height+13+y:0,o=Math.min(r,s),(0>r&&0>s||0<r&&0<s)&&(l+=Math.abs(o)),l)},h.prototype.titleCollision=function(l){return!(l.options.title.text||l.options.subtitle.text)},h.prototype.update=function(l){var o=this.chart;D(!0,o.options.rangeSelector,l),this.destroy(),this.init(o),this.render()},h.prototype.destroy=function(){var l=this,o=l.minInput,y=l.maxInput;l.eventsToUnbind&&(l.eventsToUnbind.forEach(function(s){return s()}),l.eventsToUnbind=void 0),m(l.buttons),o&&(o.onfocus=o.onblur=o.onchange=null),y&&(y.onfocus=y.onblur=y.onchange=null),t(l,function(s,r){s&&"chart"!==r&&(s instanceof tt?s.destroy():s instanceof window.HTMLElement&&a(s)),s!==h.prototype[r]&&(l[r]=null)},this)},h}(),c(H.prototype,{defaultButtons:[{type:"month",count:1,text:"1m",title:"View 1 month"},{type:"month",count:3,text:"3m",title:"View 3 months"},{type:"month",count:6,text:"6m",title:"View 6 months"},{type:"ytd",text:"YTD",title:"View year to date"},{type:"year",count:1,text:"1y",title:"View 1 year"},{type:"all",text:"All",title:"View all"}],inputTypeFormats:{"datetime-local":"%Y-%m-%dT%H:%M:%S",date:"%Y-%m-%d",time:"%H:%M:%S"}}),H}),ot(j,"Accessibility/Components/RangeSelectorComponent.js",[j["Stock/RangeSelector/RangeSelector.js"],j["Accessibility/AccessibilityComponent.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/Announcer.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt,V){var b,W=this&&this.__extends||(b=function(m,a){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,u){c.__proto__=u}||function(c,u){for(var _ in u)u.hasOwnProperty(_)&&(c[_]=u[_])})(m,a)},function(m,a){function c(){this.constructor=m}b(m,a),m.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}),P=X.unhideChartElementFromAT,S=X.getAxisRangeDescription,Z=V.addEvent,k=V.attr;return H=function(b){function m(){var a=null!==b&&b.apply(this,arguments)||this;return a.announcer=void 0,a}return W(m,b),m.prototype.init=function(){this.announcer=new z(this.chart,"polite")},m.prototype.onChartUpdate=function(){var a=this.chart,c=this,u=a.rangeSelector;u&&(this.updateSelectorVisibility(),this.setDropdownAttrs(),u.buttons&&u.buttons.length&&u.buttons.forEach(function(_){c.setRangeButtonAttrs(_)}),u.maxInput&&u.minInput&&["minInput","maxInput"].forEach(function(_,D){(_=u[_])&&(P(a,_),c.setRangeInputAttrs(_,"accessibility.rangeSelector."+(D?"max":"min")+"InputLabel"))}))},m.prototype.updateSelectorVisibility=function(){var a=this.chart,c=a.rangeSelector,u=c&&c.dropdown,_=c&&c.buttons||[];c&&c.hasVisibleDropdown&&u?(P(a,u),_.forEach(function(D){return D.element.setAttribute("aria-hidden",!0)})):(u&&u.setAttribute("aria-hidden",!0),_.forEach(function(D){return P(a,D.element)}))},m.prototype.setDropdownAttrs=function(){var a=this.chart,c=a.rangeSelector&&a.rangeSelector.dropdown;c&&(a=a.langFormat("accessibility.rangeSelector.dropdownLabel",{rangeTitle:a.options.lang.rangeSelectorZoom}),c.setAttribute("aria-label",a),c.setAttribute("tabindex",-1))},m.prototype.setRangeButtonAttrs=function(a){k(a.element,{tabindex:-1,role:"button"})},m.prototype.setRangeInputAttrs=function(a,c){var u=this.chart;k(a,{tabindex:-1,"aria-label":u.langFormat(c,{chart:u})})},m.prototype.onButtonNavKbdArrowKey=function(a,c){var u=a.response,_=this.keyCodes,D=this.chart,t=D.options.accessibility.keyboardNavigation.wrapAround;return D.highlightRangeSelectorButton(D.highlightedRangeSelectorItemIx+(c=c===_.left||c===_.up?-1:1))?u.success:t?(a.init(c),u.success):u[0<c?"next":"prev"]},m.prototype.onButtonNavKbdClick=function(a){a=a.response;var c=this.chart;return 3!==c.oldRangeSelectorItemState&&this.fakeClickEvent(c.rangeSelector.buttons[c.highlightedRangeSelectorItemIx].element),a.success},m.prototype.onAfterBtnClick=function(){var a=this.chart,c=S(a.xAxis[0]);(a=a.langFormat("accessibility.rangeSelector.clickButtonAnnouncement",{chart:a,axisRangeDescription:c}))&&this.announcer.announce(a)},m.prototype.onInputKbdMove=function(a){var c=this.chart,u=c.rangeSelector,_=c.highlightedInputRangeIx=(c.highlightedInputRangeIx||0)+a;1<_||0>_?c.accessibility&&(c.accessibility.keyboardNavigation.tabindexContainer.focus(),c.accessibility.keyboardNavigation.move(a)):u&&(a=u[_?"maxDateBox":"minDateBox"],u=u[_?"maxInput":"minInput"],a&&u&&c.setFocusToElement(a,u))},m.prototype.onInputNavInit=function(a){var c=this,u=this,_=this.chart,D=0<a?0:1,t=_.rangeSelector,B=t&&t[D?"maxDateBox":"minDateBox"];if(a=t&&t.minInput,t=t&&t.maxInput,_.highlightedInputRangeIx=D,B&&a&&t){_.setFocusToElement(B,D?t:a),this.removeInputKeydownHandler&&this.removeInputKeydownHandler();var M=Z(a,"keydown",_=function(w){(w.which||w.keyCode)===c.keyCodes.tab&&(w.preventDefault(),w.stopPropagation(),u.onInputKbdMove(w.shiftKey?-1:1))}),x=Z(t,"keydown",_);this.removeInputKeydownHandler=function(){M(),x()}}},m.prototype.onInputNavTerminate=function(){var a=this.chart.rangeSelector||{};a.maxInput&&a.hideInput("max"),a.minInput&&a.hideInput("min"),this.removeInputKeydownHandler&&(this.removeInputKeydownHandler(),delete this.removeInputKeydownHandler)},m.prototype.initDropdownNav=function(){var a=this,c=this.chart,u=c.rangeSelector,_=u&&u.dropdown;u&&_&&(c.setFocusToElement(u.buttonGroup,_),this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeDropdownKeydownHandler=Z(_,"keydown",function(D){var t=c.accessibility;(D.which||D.keyCode)===a.keyCodes.tab&&(D.preventDefault(),D.stopPropagation(),t&&(t.keyboardNavigation.tabindexContainer.focus(),t.keyboardNavigation.move(D.shiftKey?-1:1)))}))},m.prototype.getRangeSelectorButtonNavigation=function(){var a=this.chart,c=this.keyCodes,u=this;return new tt(a,{keyCodeMap:[[[c.left,c.right,c.up,c.down],function(_){return u.onButtonNavKbdArrowKey(this,_)}],[[c.enter,c.space],function(){return u.onButtonNavKbdClick(this)}]],validate:function(){return!!(a.rangeSelector&&a.rangeSelector.buttons&&a.rangeSelector.buttons.length)},init:function(_){var D=a.rangeSelector;D&&D.hasVisibleDropdown?u.initDropdownNav():D&&(D=D.buttons.length-1,a.highlightRangeSelectorButton(0<_?0:D))},terminate:function(){u.removeDropdownKeydownHandler&&(u.removeDropdownKeydownHandler(),delete u.removeDropdownKeydownHandler)}})},m.prototype.getRangeSelectorInputNavigation=function(){var a=this.chart,c=this;return new tt(a,{keyCodeMap:[],validate:function(){return!!(a.rangeSelector&&a.rangeSelector.inputGroup&&"hidden"!==a.rangeSelector.inputGroup.element.style.visibility&&!1!==a.options.rangeSelector.inputEnabled&&a.rangeSelector.minInput&&a.rangeSelector.maxInput)},init:function(u){c.onInputNavInit(u)},terminate:function(){c.onInputNavTerminate()}})},m.prototype.getKeyboardNavigation=function(){return[this.getRangeSelectorButtonNavigation(),this.getRangeSelectorInputNavigation()]},m.prototype.destroy=function(){this.removeDropdownKeydownHandler&&this.removeDropdownKeydownHandler(),this.removeInputKeydownHandler&&this.removeInputKeydownHandler(),this.announcer&&this.announcer.destroy()},m}(H),function(b){function m(u){var _=this.rangeSelector&&this.rangeSelector.buttons||[],D=this.highlightedRangeSelectorItemIx,t=this.rangeSelector&&this.rangeSelector.selected;return typeof D<"u"&&_[D]&&D!==t&&_[D].setState(this.oldRangeSelectorItemState||0),this.highlightedRangeSelectorItemIx=u,!!_[u]&&(this.setFocusToElement(_[u].box,_[u].element),u!==t&&(this.oldRangeSelectorItemState=_[u].state,_[u].setState(1)),!0)}function a(){var u=this.chart.accessibility;if(u&&u.components.rangeSelector)return u.components.rangeSelector.onAfterBtnClick()}var c=[];b.compose=function(u,_){-1===c.indexOf(u)&&(c.push(u),u.prototype.highlightRangeSelectorButton=m),-1===c.indexOf(_)&&(c.push(_),Z(Y,"afterBtnClick",a))}}(H||(H={})),H}),ot(j,"Accessibility/Components/SeriesComponent/ForcedMarkers.js",[j["Core/Utilities.js"]],function(Y){var z,H=Y.addEvent,X=Y.merge;return function(tt){function V(b){X(!0,b,{marker:{enabled:!0,states:{normal:{opacity:0}}}})}function W(b){return b.marker.states&&b.marker.states.normal&&b.marker.states.normal.opacity}function P(){this.chart.styledMode&&(this.markerGroup&&this.markerGroup[this.a11yMarkersForced?"addClass":"removeClass"]("highcharts-a11y-markers-hidden"),this._hasPointMarkers&&this.points&&this.points.length&&this.points.forEach(function(b){b.graphic&&(b.graphic[b.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-hidden"),b.graphic[!1===b.hasForcedA11yMarker?"addClass":"removeClass"]("highcharts-a11y-marker-visible"))}))}function S(b){this.resetA11yMarkerOptions=X(b.options.marker||{},this.userOptions.marker||{})}function Z(){var b=this.options,m=!1!==(this.options.accessibility&&this.options.accessibility.enabled);if((m=this.chart.options.accessibility.enabled&&m)&&(m=this.points.length<(m=this.chart.options.accessibility).series.pointDescriptionEnabledThreshold||!1===m.series.pointDescriptionEnabledThreshold),m){if(b.marker&&!1===b.marker.enabled&&(this.a11yMarkersForced=!0,V(this.options)),this._hasPointMarkers&&this.points&&this.points.length)for(b=this.points.length;b--;){var a=(m=this.points[b]).options,c=m.hasForcedA11yMarker;delete m.hasForcedA11yMarker,a.marker&&(c=c&&0===W(a),a.marker.enabled&&!c?(X(!0,a.marker,{states:{normal:{opacity:W(a)||1}}}),m.hasForcedA11yMarker=!1):!1===a.marker.enabled&&(V(a),m.hasForcedA11yMarker=!0))}}else this.a11yMarkersForced&&(delete this.a11yMarkersForced,(b=this.resetA11yMarkerOptions)&&this.update({marker:{enabled:b.enabled,states:{normal:{opacity:b.states&&b.states.normal&&b.states.normal.opacity}}}}),delete this.resetA11yMarkerOptions)}var k=[];tt.compose=function(b){-1===k.indexOf(b)&&(k.push(b),H(b,"afterSetOptions",S),H(b,"render",Z),H(b,"afterRender",P))}}(z||(z={})),z}),ot(j,"Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js",[j["Core/Series/Point.js"],j["Core/Series/Series.js"],j["Core/Series/SeriesRegistry.js"],j["Core/Globals.js"],j["Core/Utilities.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Accessibility/Utils/EventProvider.js"],j["Accessibility/Utils/ChartUtilities.js"]],function(Y,H,X,z,tt,V,W,P){function S(x){var w=x.index,h=x.series.points,l=h.length;if(h[w]===x)return w;for(;l--;)if(h[l]===x)return l}function Z(x){var w=x.chart.options.accessibility.keyboardNavigation.seriesNavigation,h=x.options.accessibility||{},l=h.keyboardNavigation;return l&&!1===l.enabled||!1===h.enabled||!1===x.options.enableMouseTracking||!x.visible||w.pointNavigationEnabledThreshold&&w.pointNavigationEnabledThreshold<=x.points.length}function k(x){return x.isNull&&x.series.chart.options.accessibility.keyboardNavigation.seriesNavigation.skipNullPoints||!1===x.visible||!1===x.isInside||x.options.accessibility&&!1===x.options.accessibility.enabled||Z(x.series)}function b(x){for(var w=(x=x.series||[]).length,h=0;h<w;++h)if(!Z(x[h])){t:{for(var l=x[h].points||[],o=l.length,y=0;y<o;++y)if(!k(l[y])){l=l[y];break t}l=null}if(l)return l}return null}function m(x){for(var w=x.series.length,h=!1;w--&&(x.highlightedPoint=x.series[w].points[x.series[w].points.length-1],!(h=x.series[w].highlightNextValidPoint())););return h}function a(x){return delete x.highlightedPoint,!!(x=b(x))&&x.highlight()}var c=X.seriesTypes,u=z.doc,_=tt.defined,D=tt.fireEvent,t=P.getPointFromXY,B=P.getSeriesFromName,M=P.scrollToPoint;return function(x){function w(d){var p=this.series,T=this.highlightedPoint,U=T&&S(T)||0,O=this.series&&this.series[this.series.length-1];if(O=O&&O.points&&O.points[O.points.length-1],!p[0]||!p[0].points)return!1;if(T){if(p=p[T.series.index+(d?1:-1)],!(U=(T&&T.series.points||[])[U+(d?1:-1)])&&p&&(U=p.points[d?0:p.points.length-1]),!U)return!1}else U=d?p[0].points[0]:O;return k(U)?(this.highlightedPoint=Z(p=U.series)?d?p.points[p.points.length-1]:p.points[0]:U,this.highlightAdjacentPoint(d)):U.highlight()}function h(d){var U,p=this.highlightedPoint,T=1/0;return!(!_(p.plotX)||!_(p.plotY))&&(this.series.forEach(function(G){Z(G)||G.points.forEach(function(O){if(_(O.plotY)&&_(O.plotX)&&O!==p){var v=O.plotY-p.plotY,C=Math.abs(O.plotX-p.plotX);C=Math.abs(v)*Math.abs(v)+C*C*4,G.yAxis&&G.yAxis.reversed&&(v*=-1),!(0>=v&&d||0<=v&&!d||5>C||k(O))&&C<T&&(T=C,U=O)}})}),!!U&&U.highlight())}function l(d){var p=this.highlightedPoint,T=this.series&&this.series[this.series.length-1],U=T&&T.points&&T.points[T.points.length-1];return this.highlightedPoint?!(!(T=this.series[p.series.index+(d?-1:1)])||(U=function o(d,p,T,U){var G=1/0,O=p.points.length,v=function(J){return!(_(J.plotX)&&_(J.plotY))};if(!v(d)){for(;O--;){var C=p.points[O];if(!v(C)&&(C=(d.plotX-C.plotX)*(d.plotX-C.plotX)*(T||1)+(d.plotY-C.plotY)*(d.plotY-C.plotY)*(U||1))<G){G=C;var q=O}}return _(q)?p.points[q]:void 0}}(p,T,4),!U))&&(Z(T)?(U.highlight(),(d=this.highlightAdjacentSeries(d))||(p.highlight(),!1)):(U.highlight(),U.series.highlightNextValidPoint())):(T=d?this.series&&this.series[0]:T,!!(U=d?T&&T.points&&T.points[0]:U)&&U.highlight())}function y(d){void 0===d&&(d=!0);var p=this.series.chart;return!this.isNull&&d?this.onMouseOver():p.tooltip&&p.tooltip.hide(0),M(this),this.graphic&&(p.setFocusToElement(this.graphic),!d&&p.focusElement&&p.focusElement.removeFocusBorder()),p.highlightedPoint=this,this}function s(){var d=this.chart.highlightedPoint,p=(d&&d.series)===this?S(d):0,T=(d=this.points).length;if(d&&T){for(var U=p;U<T;++U)if(!k(d[U]))return d[U].highlight();for(;0<=p;--p)if(!k(d[p]))return d[p].highlight()}return!1}var r=[];x.compose=function(d,p,T){-1===r.indexOf(d)&&(r.push(d),(d=d.prototype).highlightAdjacentPoint=w,d.highlightAdjacentPointVertical=h,d.highlightAdjacentSeries=l),-1===r.indexOf(p)&&(r.push(p),p.prototype.highlight=y),-1===r.indexOf(T)&&(r.push(T),(p=T.prototype).keyboardMoveVertical=!0,["column","gantt","pie"].forEach(function(U){c[U]&&(c[U].prototype.keyboardMoveVertical=!1)}),p.highlightNextValidPoint=s)}}((X=function(){function x(w,h){this.keyCodes=h,this.chart=w}return x.prototype.init=function(){var w=this,h=this.chart,l=this.eventProvider=new W;l.addEvent(H,"destroy",function(){return w.onSeriesDestroy(this)}),l.addEvent(h,"afterApplyDrilldown",function(){var o=b(this);o&&o.highlight(!1)}),l.addEvent(h,"drilldown",function(o){var y=(o=o.point).series;w.lastDrilledDownPoint={x:o.x,y:o.y,seriesName:y?y.name:""}}),l.addEvent(h,"drillupall",function(){setTimeout(function(){w.onDrillupAll()},10)}),l.addEvent(Y,"afterSetState",function(){var o=this.graphic&&this.graphic.element,y=u.activeElement,s=y&&y.getAttribute("class");s=s&&-1<s.indexOf("highcharts-a11y-proxy-button"),h.highlightedPoint===this&&y!==o&&!s&&o&&o.focus&&o.focus()})},x.prototype.onDrillupAll=function(){var o,w=this.lastDrilledDownPoint,h=this.chart,l=w&&B(h,w.seriesName);w&&l&&_(w.x)&&_(w.y)&&(o=t(l,w.x,w.y)),o=o||b(h),h.container&&h.container.focus(),o&&o.highlight&&o.highlight(!1)},x.prototype.getKeyboardNavigationHandler=function(){var w=this,h=this.keyCodes,l=this.chart,o=l.inverted;return new V(l,{keyCodeMap:[[o?[h.up,h.down]:[h.left,h.right],function(y){return w.onKbdSideways(this,y)}],[o?[h.left,h.right]:[h.up,h.down],function(y){return w.onKbdVertical(this,y)}],[[h.enter,h.space],function(y,s){return(y=l.highlightedPoint)&&(s.point=y,D(y.series,"click",s),y.firePointEvent("click")),this.response.success}],[[h.home],function(){return a(l),this.response.success}],[[h.end],function(){return m(l),this.response.success}],[[h.pageDown,h.pageUp],function(y){return l.highlightAdjacentSeries(y===h.pageDown),this.response.success}]],init:function(){return w.onHandlerInit(this)},validate:function(){return!!b(l)},terminate:function(){return w.onHandlerTerminate()}})},x.prototype.onKbdSideways=function(w,h){var l=this.keyCodes;return this.attemptHighlightAdjacentPoint(w,h===l.right||h===l.down)},x.prototype.onHandlerInit=function(w){var h=this.chart;return h.options.accessibility.keyboardNavigation.seriesNavigation.rememberPointFocus&&h.highlightedPoint?h.highlightedPoint.highlight():a(h),w.response.success},x.prototype.onKbdVertical=function(w,h){var l=this.chart,o=this.keyCodes;return h=h===o.down||h===o.right,(o=l.options.accessibility.keyboardNavigation.seriesNavigation).mode&&"serialize"===o.mode?this.attemptHighlightAdjacentPoint(w,h):(l[l.highlightedPoint&&l.highlightedPoint.series.keyboardMoveVertical?"highlightAdjacentPointVertical":"highlightAdjacentSeries"](h),w.response.success)},x.prototype.onHandlerTerminate=function(){var w=this.chart,h=w.options.accessibility.keyboardNavigation;w.tooltip&&w.tooltip.hide(0);var l=w.highlightedPoint&&w.highlightedPoint.series;l&&l.onMouseOut&&l.onMouseOut(),w.highlightedPoint&&w.highlightedPoint.onMouseOut&&w.highlightedPoint.onMouseOut(),h.seriesNavigation.rememberPointFocus||delete w.highlightedPoint},x.prototype.attemptHighlightAdjacentPoint=function(w,h){var l=this.chart,o=l.options.accessibility.keyboardNavigation.wrapAround;return l.highlightAdjacentPoint(h)||o&&(h?a(l):m(l))?w.response.success:w.response[h?"next":"prev"]},x.prototype.onSeriesDestroy=function(w){var h=this.chart;h.highlightedPoint&&h.highlightedPoint.series===w&&(delete h.highlightedPoint,h.focusElement&&h.focusElement.removeFocusBorder())},x.prototype.destroy=function(){this.eventProvider.removeAddedEvents()},x}())||(X={})),X}),ot(j,"Accessibility/Components/SeriesComponent/SeriesComponent.js",[j["Accessibility/AccessibilityComponent.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Components/SeriesComponent/ForcedMarkers.js"],j["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],j["Accessibility/Components/SeriesComponent/SeriesDescriber.js"],j["Accessibility/Components/SeriesComponent/SeriesKeyboardNavigation.js"],j["Core/Tooltip.js"]],function(Y,H,X,z,tt,V,W){var k,P=this&&this.__extends||(k=function(b,m){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var u in c)c.hasOwnProperty(u)&&(a[u]=c[u])})(b,m)},function(b,m){function a(){this.constructor=b}k(b,m),b.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}),S=H.hideSeriesFromAT,Z=tt.describeSeries;return function(k){function b(){return null!==k&&k.apply(this,arguments)||this}return P(b,k),b.compose=function(m,a,c){z.compose(c),X.compose(c),V.compose(m,a,c)},b.prototype.init=function(){this.newDataAnnouncer=new z(this.chart),this.newDataAnnouncer.init(),this.keyboardNavigation=new V(this.chart,this.keyCodes),this.keyboardNavigation.init(),this.hideTooltipFromATWhenShown(),this.hideSeriesLabelsFromATWhenShown()},b.prototype.hideTooltipFromATWhenShown=function(){var m=this;this.addEvent(W,"refresh",function(){this.chart===m.chart&&this.label&&this.label.element&&this.label.element.setAttribute("aria-hidden",!0)})},b.prototype.hideSeriesLabelsFromATWhenShown=function(){this.addEvent(this.chart,"afterDrawSeriesLabels",function(){this.series.forEach(function(m){m.labelBySeries&&m.labelBySeries.attr("aria-hidden",!0)})})},b.prototype.onChartRender=function(){this.chart.series.forEach(function(m){!1!==(m.options.accessibility&&m.options.accessibility.enabled)&&m.visible?Z(m):S(m)})},b.prototype.getKeyboardNavigation=function(){return this.keyboardNavigation.getKeyboardNavigationHandler()},b.prototype.destroy=function(){this.newDataAnnouncer.destroy(),this.keyboardNavigation.destroy()},b}(Y)}),ot(j,"Accessibility/Components/ZoomComponent.js",[j["Accessibility/AccessibilityComponent.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Core/Utilities.js"]],function(Y,H,X,z,tt){var k,V=this&&this.__extends||(k=function(b,m){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var u in c)c.hasOwnProperty(u)&&(a[u]=c[u])})(b,m)},function(b,m){function a(){this.constructor=b}k(b,m),b.prototype=null===m?Object.create(m):(a.prototype=m.prototype,new a)}),W=H.unhideChartElementFromAT,P=X.getFakeMouseEvent,S=tt.attr,Z=tt.pick;return function(k){function b(){var m=null!==k&&k.apply(this,arguments)||this;return m.focusedMapNavButtonIx=-1,m}return V(b,k),b.prototype.init=function(){var m=this,a=this.chart;this.proxyProvider.addGroup("zoom","div"),["afterShowResetZoom","afterApplyDrilldown","drillupall"].forEach(function(c){m.addEvent(a,c,function(){m.updateProxyOverlays()})})},b.prototype.onChartUpdate=function(){var m=this.chart,a=this;m.mapNavigation&&m.mapNavigation.navButtons.forEach(function(c,u){W(m,c.element),a.setMapNavButtonAttrs(c.element,"accessibility.zoom.mapZoom"+(u?"Out":"In"))})},b.prototype.setMapNavButtonAttrs=function(m,a){var c=this.chart;a=c.langFormat(a,{chart:c}),S(m,{tabindex:-1,role:"button","aria-label":a})},b.prototype.onChartRender=function(){this.updateProxyOverlays()},b.prototype.updateProxyOverlays=function(){var m=this.chart;this.proxyProvider.clearGroup("zoom"),m.resetZoomButton&&this.createZoomProxyButton(m.resetZoomButton,"resetZoomProxyButton",m.langFormat("accessibility.zoom.resetZoomButton",{chart:m})),m.drillUpButton&&m.breadcrumbs&&m.breadcrumbs.list&&this.createZoomProxyButton(m.drillUpButton,"drillUpProxyButton",m.langFormat("accessibility.drillUpButton",{chart:m,buttonText:m.breadcrumbs.getButtonText(m.breadcrumbs.list[m.breadcrumbs.list.length-1])}))},b.prototype.createZoomProxyButton=function(m,a,c){this[a]=this.proxyProvider.addProxyElement("zoom",{click:m},{"aria-label":c,tabindex:-1})},b.prototype.getMapZoomNavigation=function(){var m=this.keyCodes,a=this.chart,c=this;return new z(a,{keyCodeMap:[[[m.up,m.down,m.left,m.right],function(u){return c.onMapKbdArrow(this,u)}],[[m.tab],function(u,_){return c.onMapKbdTab(this,_)}],[[m.space,m.enter],function(){return c.onMapKbdClick(this)}]],validate:function(){return!!(a.mapView&&a.mapNavigation&&a.mapNavigation.navButtons.length)},init:function(u){return c.onMapNavInit(u)}})},b.prototype.onMapKbdArrow=function(m,a){var c=this.chart,u=this.keyCodes,_=c.container,D=a===u.up||a===u.down;return a=(D?c.plotHeight:c.plotWidth)/10*(a===u.left||a===u.up?1:-1),u=10*Math.random(),c={x:_.offsetLeft+c.plotLeft+c.plotWidth/2+u,y:_.offsetTop+c.plotTop+c.plotHeight/2+u},D=D?{x:c.x,y:c.y+a}:{x:c.x+a,y:c.y},[P("mousedown",c),P("mousemove",D),P("mouseup",D)].forEach(function(t){return _.dispatchEvent(t)}),m.response.success},b.prototype.onMapKbdTab=function(m,a){var c=this.chart;m=m.response;var u=(a=a.shiftKey)&&!this.focusedMapNavButtonIx||!a&&this.focusedMapNavButtonIx;return c.mapNavigation.navButtons[this.focusedMapNavButtonIx].setState(0),u?(c.mapView&&c.mapView.zoomBy(),m[a?"prev":"next"]):(this.focusedMapNavButtonIx+=a?-1:1,c.setFocusToElement((a=c.mapNavigation.navButtons[this.focusedMapNavButtonIx]).box,a.element),a.setState(2),m.success)},b.prototype.onMapKbdClick=function(m){return this.fakeClickEvent(this.chart.mapNavigation.navButtons[this.focusedMapNavButtonIx].element),m.response.success},b.prototype.onMapNavInit=function(m){var a=this.chart,c=a.mapNavigation.navButtons[0];a.setFocusToElement((c=0<m?c:a.mapNavigation.navButtons[1]).box,c.element),c.setState(2),this.focusedMapNavButtonIx=0<m?0:1},b.prototype.simpleButtonNavigation=function(m,a,c){var u=this.keyCodes,_=this,D=this.chart;return new z(D,{keyCodeMap:[[[u.tab,u.up,u.down,u.left,u.right],function(t,B){return this.response[t===u.tab&&B.shiftKey||t===u.left||t===u.up?"prev":"next"]}],[[u.space,u.enter],function(){var t=c(this,D);return Z(t,this.response.success)}]],validate:function(){return D[m]&&D[m].box&&_[a].buttonElement},init:function(){D.setFocusToElement(D[m].box,_[a].buttonElement)}})},b.prototype.getKeyboardNavigation=function(){return[this.simpleButtonNavigation("resetZoomButton","resetZoomProxyButton",function(m,a){a.zoomOut()}),this.simpleButtonNavigation("drillUpButton","drillUpProxyButton",function(m,a){return a.drillUp(),m.response.prev}),this.getMapZoomNavigation()]},b}(Y)}),ot(j,"Accessibility/HighContrastMode.js",[j["Core/Globals.js"]],function(Y){var H=Y.doc,X=Y.isMS,z=Y.win;return{isHighContrastModeActive:function(){var tt=/(Edg)/.test(z.navigator.userAgent);if(z.matchMedia&&tt)return z.matchMedia("(-ms-high-contrast: active)").matches;if(X&&z.getComputedStyle){(tt=H.createElement("div")).style.backgroundImage="url(".concat("data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",")"),H.body.appendChild(tt);var V=(tt.currentStyle||z.getComputedStyle(tt)).backgroundImage;return H.body.removeChild(tt),"none"===V}return z.matchMedia&&z.matchMedia("(forced-colors: active)").matches},setHighContrastTheme:function(tt){tt.highContrastModeActive=!0;var V=tt.options.accessibility.highContrastTheme;tt.update(V,!1),tt.series.forEach(function(W){var P=V.plotOptions[W.type]||{};W.update({color:P.color||"windowText",colors:[P.color||"windowText"],borderColor:P.borderColor||"window"}),W.points.forEach(function(S){S.options&&S.options.color&&S.update({color:P.color||"windowText",borderColor:P.borderColor||"window"},!1)})}),tt.redraw()}}}),ot(j,"Accessibility/HighContrastTheme.js",[],function(){return{chart:{backgroundColor:"window"},title:{style:{color:"windowText"}},subtitle:{style:{color:"windowText"}},colorAxis:{minColor:"windowText",maxColor:"windowText",stops:[]},colors:["windowText"],xAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},yAxis:{gridLineColor:"windowText",labels:{style:{color:"windowText"}},lineColor:"windowText",minorGridLineColor:"windowText",tickColor:"windowText",title:{style:{color:"windowText"}}},tooltip:{backgroundColor:"window",borderColor:"windowText",style:{color:"windowText"}},plotOptions:{series:{lineColor:"windowText",fillColor:"window",borderColor:"windowText",edgeColor:"windowText",borderWidth:1,dataLabels:{connectorColor:"windowText",color:"windowText",style:{color:"windowText",textOutline:"none"}},marker:{lineColor:"windowText",fillColor:"windowText"}},pie:{color:"window",colors:["window"],borderColor:"windowText",borderWidth:1},boxplot:{fillColor:"window"},candlestick:{lineColor:"windowText",fillColor:"window"},errorbar:{fillColor:"window"}},legend:{backgroundColor:"window",itemStyle:{color:"windowText"},itemHoverStyle:{color:"windowText"},itemHiddenStyle:{color:"#555"},title:{style:{color:"windowText"}}},credits:{style:{color:"windowText"}},labels:{style:{color:"windowText"}},drilldown:{activeAxisLabelStyle:{color:"windowText"},activeDataLabelStyle:{color:"windowText"}},navigation:{buttonOptions:{symbolStroke:"windowText",theme:{fill:"window"}}},rangeSelector:{buttonTheme:{fill:"window",stroke:"windowText",style:{color:"windowText"},states:{hover:{fill:"window",stroke:"windowText",style:{color:"windowText"}},select:{fill:"#444",stroke:"windowText",style:{color:"windowText"}}}},inputBoxBorderColor:"windowText",inputStyle:{backgroundColor:"window",color:"windowText"},labelStyle:{color:"windowText"}},navigator:{handles:{backgroundColor:"window",borderColor:"windowText"},outlineColor:"windowText",maskFill:"transparent",series:{color:"windowText",lineColor:"windowText"},xAxis:{gridLineColor:"windowText"}},scrollbar:{barBackgroundColor:"#444",barBorderColor:"windowText",buttonArrowColor:"windowText",buttonBackgroundColor:"window",buttonBorderColor:"windowText",rifleColor:"windowText",trackBackgroundColor:"window",trackBorderColor:"windowText"}}}),ot(j,"Accessibility/Options/A11yDefaults.js",[],function(){return{accessibility:{enabled:!0,screenReaderSection:{beforeChartFormat:"<{headingTagName}>{chartTitle}</{headingTagName}><div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>",afterChartFormat:"{endOfChartMarker}",axisRangeDateFormat:"%Y-%m-%d %H:%M:%S"},series:{descriptionFormat:"{seriesDescription}{authorDescription}{axisDescription}",describeSingleSeries:!1,pointDescriptionEnabledThreshold:200},point:{valueDescriptionFormat:"{xDescription}{separator}{value}.",describeNull:!0},landmarkVerbosity:"all",linkedDescription:'*[data-highcharts-chart="{index}"] + .highcharts-description',keyboardNavigation:{enabled:!0,focusBorder:{enabled:!0,hideBrowserFocusOutline:!0,style:{color:"#335cad",lineWidth:2,borderRadius:3},margin:2},order:["series","zoom","rangeSelector","legend","chartMenu"],wrapAround:!0,seriesNavigation:{skipNullPoints:!0,pointNavigationEnabledThreshold:!1,rememberPointFocus:!1}},announceNewData:{enabled:!1,minAnnounceInterval:5e3,interruptUser:!1}},legend:{accessibility:{enabled:!0,keyboardNavigation:{enabled:!0}}},exporting:{accessibility:{enabled:!0}}}}),ot(j,"Accessibility/Options/LangDefaults.js",[],function(){return{accessibility:{defaultChartTitle:"Chart",chartContainerLabel:"{title}. Highcharts interactive chart.",svgContainerLabel:"Interactive chart",drillUpButton:"{buttonText}",credits:"Chart credits: {creditsStr}",thousandsSep:",",svgContainerTitle:"",graphicContainerLabel:"",screenReaderSection:{beforeRegionLabel:"",afterRegionLabel:"",annotations:{heading:"Chart annotations summary",descriptionSinglePoint:"{annotationText}. Related to {annotationPoint}",descriptionMultiplePoints:"{annotationText}. Related to {annotationPoint}{ Also related to, #each(additionalAnnotationPoints)}",descriptionNoPoints:"{annotationText}"},endOfChartMarker:"End of interactive chart."},sonification:{playAsSoundButtonText:"Play as sound, {chartTitle}",playAsSoundClickAnnouncement:"Play"},legend:{legendLabelNoTitle:"Toggle series visibility, {chartTitle}",legendLabel:"Chart legend: {legendTitle}",legendItem:"Show {itemName}"},zoom:{mapZoomIn:"Zoom chart",mapZoomOut:"Zoom out chart",resetZoomButton:"Reset zoom"},rangeSelector:{dropdownLabel:"{rangeTitle}",minInputLabel:"Select start date.",maxInputLabel:"Select end date.",clickButtonAnnouncement:"Viewing {axisRangeDescription}"},table:{viewAsDataTableButtonText:"View as data table, {chartTitle}",tableSummary:"Table representation of chart."},announceNewData:{newDataAnnounce:"Updated data for chart {chartTitle}",newSeriesAnnounceSingle:"New data series: {seriesDesc}",newPointAnnounceSingle:"New data point: {pointDesc}",newSeriesAnnounceMultiple:"New data series in chart {chartTitle}: {seriesDesc}",newPointAnnounceMultiple:"New data point in chart {chartTitle}: {pointDesc}"},seriesTypeDescriptions:{boxplot:"Box plot charts are typically used to display groups of statistical data. Each data point in the chart can have up to 5 values: minimum, lower quartile, median, upper quartile, and maximum.",arearange:"Arearange charts are line charts displaying a range between a lower and higher value for each point.",areasplinerange:"These charts are line charts displaying a range between a lower and higher value for each point.",bubble:"Bubble charts are scatter charts where each data point also has a size value.",columnrange:"Columnrange charts are column charts displaying a range between a lower and higher value for each point.",errorbar:"Errorbar series are used to display the variability of the data.",funnel:"Funnel charts are used to display reduction of data in stages.",pyramid:"Pyramid charts consist of a single pyramid with item heights corresponding to each point value.",waterfall:"A waterfall chart is a column chart where each column contributes towards a total end value."},chartTypes:{emptyChart:"Empty chart",mapTypeDescription:"Map of {mapTitle} with {numSeries} data series.",unknownMap:"Map of unspecified region with {numSeries} data series.",combinationChart:"Combination chart with {numSeries} data series.",defaultSingle:"Chart with {numPoints} data {#plural(numPoints, points, point)}.",defaultMultiple:"Chart with {numSeries} data series.",splineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",splineMultiple:"Line chart with {numSeries} lines.",lineSingle:"Line chart with {numPoints} data {#plural(numPoints, points, point)}.",lineMultiple:"Line chart with {numSeries} lines.",columnSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",columnMultiple:"Bar chart with {numSeries} data series.",barSingle:"Bar chart with {numPoints} {#plural(numPoints, bars, bar)}.",barMultiple:"Bar chart with {numSeries} data series.",pieSingle:"Pie chart with {numPoints} {#plural(numPoints, slices, slice)}.",pieMultiple:"Pie chart with {numSeries} pies.",scatterSingle:"Scatter chart with {numPoints} {#plural(numPoints, points, point)}.",scatterMultiple:"Scatter chart with {numSeries} data series.",boxplotSingle:"Boxplot with {numPoints} {#plural(numPoints, boxes, box)}.",boxplotMultiple:"Boxplot with {numSeries} data series.",bubbleSingle:"Bubble chart with {numPoints} {#plural(numPoints, bubbles, bubble)}.",bubbleMultiple:"Bubble chart with {numSeries} data series."},axis:{xAxisDescriptionSingular:"The chart has 1 X axis displaying {names[0]}. {ranges[0]}",xAxisDescriptionPlural:"The chart has {numAxes} X axes displaying {#each(names, -1) }and {names[-1]}.",yAxisDescriptionSingular:"The chart has 1 Y axis displaying {names[0]}. {ranges[0]}",yAxisDescriptionPlural:"The chart has {numAxes} Y axes displaying {#each(names, -1) }and {names[-1]}.",timeRangeDays:"Data range: {range} days.",timeRangeHours:"Data range: {range} hours.",timeRangeMinutes:"Data range: {range} minutes.",timeRangeSeconds:"Data range: {range} seconds.",rangeFromTo:"Data ranges from {rangeFrom} to {rangeTo}.",rangeCategories:"Data range: {numCategories} categories."},exporting:{chartMenuLabel:"Chart menu",menuButtonLabel:"View chart menu, {chartTitle}"},series:{summary:{default:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",defaultCombination:"{series.name}, series {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",line:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",lineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",spline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",splineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",column:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",columnCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",bar:"{series.name}, bar series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bars, bar)}.",barCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bar series with {series.points.length} {#plural(series.points.length, bars, bar)}.",pie:"{series.name}, pie {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, slices, slice)}.",pieCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Pie with {series.points.length} {#plural(series.points.length, slices, slice)}.",scatter:"{series.name}, scatter plot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, points, point)}.",scatterCombination:"{series.name}, series {seriesNumber} of {chart.series.length}, scatter plot with {series.points.length} {#plural(series.points.length, points, point)}.",boxplot:"{series.name}, boxplot {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, boxes, box)}.",boxplotCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Boxplot with {series.points.length} {#plural(series.points.length, boxes, box)}.",bubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",bubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",map:"{series.name}, map {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, areas, area)}.",mapCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Map with {series.points.length} {#plural(series.points.length, areas, area)}.",mapline:"{series.name}, line {seriesNumber} of {chart.series.length} with {series.points.length} data {#plural(series.points.length, points, point)}.",maplineCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Line with {series.points.length} data {#plural(series.points.length, points, point)}.",mapbubble:"{series.name}, bubble series {seriesNumber} of {chart.series.length} with {series.points.length} {#plural(series.points.length, bubbles, bubble)}.",mapbubbleCombination:"{series.name}, series {seriesNumber} of {chart.series.length}. Bubble series with {series.points.length} {#plural(series.points.length, bubbles, bubble)}."},description:"{description}",xAxisDescription:"X axis, {name}",yAxisDescription:"Y axis, {name}",nullPointValue:"No value",pointAnnotationsDescription:"{Annotation: #each(annotations). }"}}}}),ot(j,"Accessibility/Options/DeprecatedOptions.js",[j["Core/Utilities.js"]],function(Y){function H(S,Z,k){for(var b,m=0;m<Z.length-1;++m)S=S[b=Z[m]]=P(S[b],{});S[Z[Z.length-1]]=k}function X(S,Z,k,b){function m(u,_){return _.reduce(function(D,t){return D[t]},u)}var a=m(S.options,Z),c=m(S.options,k);Object.keys(b).forEach(function(u){var _,D=a[u];typeof D<"u"&&(H(c,b[u],D),W(32,!1,S,((_={})[Z.join(".")+"."+u]=k.join(".")+"."+b[u].join("."),_)))})}var W=Y.error,P=Y.pick;return function(S){(function z(S){var Z=S.options.chart,k=S.options.accessibility||{};["description","typeDescription"].forEach(function(b){var m;Z[b]&&(k[b]=Z[b],W(32,!1,S,((m={})["chart.".concat(b)]="use accessibility.".concat(b),m)))})})(S),function tt(S){S.axes.forEach(function(Z){(Z=Z.options)&&Z.description&&(Z.accessibility=Z.accessibility||{},Z.accessibility.description=Z.description,W(32,!1,S,{"axis.description":"use axis.accessibility.description"}))})}(S),S.series&&function V(S){var Z={description:["accessibility","description"],exposeElementToA11y:["accessibility","exposeAsGroupOnly"],pointDescriptionFormatter:["accessibility","point","descriptionFormatter"],skipKeyboardNavigation:["accessibility","keyboardNavigation","enabled"],"accessibility.pointDescriptionFormatter":["accessibility","point","descriptionFormatter"]};S.series.forEach(function(k){Object.keys(Z).forEach(function(b){var m,a=k.options[b];"accessibility.pointDescriptionFormatter"===b&&(a=k.options.accessibility&&k.options.accessibility.pointDescriptionFormatter),typeof a<"u"&&(H(k.options,Z[b],"skipKeyboardNavigation"===b?!a:a),W(32,!1,S,((m={})["series.".concat(b)]="series."+Z[b].join("."),m)))})})}(S),X(S,["accessibility"],["accessibility"],{pointDateFormat:["point","dateFormat"],pointDateFormatter:["point","dateFormatter"],pointDescriptionFormatter:["point","descriptionFormatter"],pointDescriptionThreshold:["series","pointDescriptionEnabledThreshold"],pointNavigationThreshold:["keyboardNavigation","seriesNavigation","pointNavigationEnabledThreshold"],pointValueDecimals:["point","valueDecimals"],pointValuePrefix:["point","valuePrefix"],pointValueSuffix:["point","valueSuffix"],screenReaderSectionFormatter:["screenReaderSection","beforeChartFormatter"],describeSingleSeries:["series","describeSingleSeries"],seriesDescriptionFormatter:["series","descriptionFormatter"],onTableAnchorClick:["screenReaderSection","onViewDataTableClick"],axisRangeDateFormat:["screenReaderSection","axisRangeDateFormat"]}),X(S,["accessibility","keyboardNavigation"],["accessibility","keyboardNavigation","seriesNavigation"],{skipNullPoints:["skipNullPoints"],mode:["mode"]}),X(S,["lang","accessibility"],["lang","accessibility"],{legendItem:["legend","legendItem"],legendLabel:["legend","legendLabel"],mapZoomIn:["zoom","mapZoomIn"],mapZoomOut:["zoom","mapZoomOut"],resetZoomButton:["zoom","resetZoomButton"],screenReaderRegionLabel:["screenReaderSection","beforeRegionLabel"],rangeSelectorButton:["rangeSelector","buttonText"],rangeSelectorMaxInput:["rangeSelector","maxInputLabel"],rangeSelectorMinInput:["rangeSelector","minInputLabel"],svgContainerEnd:["screenReaderSection","endOfChartMarker"],viewAsDataTable:["table","viewAsDataTableButtonText"],tableSummary:["table","tableSummary"]})}}),ot(j,"Accessibility/Accessibility.js",[j["Core/Defaults.js"],j["Core/Globals.js"],j["Core/Utilities.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Accessibility/A11yI18n.js"],j["Accessibility/Components/ContainerComponent.js"],j["Accessibility/FocusBorder.js"],j["Accessibility/Components/InfoRegionsComponent.js"],j["Accessibility/KeyboardNavigation.js"],j["Accessibility/Components/LegendComponent.js"],j["Accessibility/Components/MenuComponent.js"],j["Accessibility/Components/SeriesComponent/NewDataAnnouncer.js"],j["Accessibility/ProxyProvider.js"],j["Accessibility/Components/RangeSelectorComponent.js"],j["Accessibility/Components/SeriesComponent/SeriesComponent.js"],j["Accessibility/Components/ZoomComponent.js"],j["Accessibility/HighContrastMode.js"],j["Accessibility/HighContrastTheme.js"],j["Accessibility/Options/A11yDefaults.js"],j["Accessibility/Options/LangDefaults.js"],j["Accessibility/Options/DeprecatedOptions.js"]],function(Y,H,X,z,tt,V,W,P,S,Z,k,b,m,a,c,u,_,D,t,B,M){Y=Y.defaultOptions;var x=H.doc,w=X.addEvent,h=X.extend,l=X.fireEvent,o=X.merge,y=z.removeElement;return function(s){function r(){this.accessibility&&this.accessibility.destroy()}function d(){this.a11yDirty&&this.renderTo&&(delete this.a11yDirty,this.updateA11yEnabled());var O=this.accessibility;O&&!O.zombie&&(O.proxyProvider.updateProxyElementPositions(),O.getComponentOrder().forEach(function(v){O.components[v].onChartRender()}))}function p(O){(O=O.options.accessibility)&&(O.customComponents&&(this.options.accessibility.customComponents=O.customComponents,delete O.customComponents),o(!0,this.options.accessibility,O),this.accessibility&&this.accessibility.destroy&&(this.accessibility.destroy(),delete this.accessibility)),this.a11yDirty=!0}function T(){var O=this.accessibility,v=this.options.accessibility;v&&v.enabled?O&&!O.zombie?O.update():(this.accessibility=O=new s(this),!O.zombie&&O.update()):O?(O.destroy&&O.destroy(),delete this.accessibility):this.renderTo.setAttribute("aria-hidden",!0)}function U(){this.series.chart.accessibility&&(this.series.chart.a11yDirty=!0)}var G=[];s.i18nFormat=tt.i18nFormat,s.compose=function(O,v,C,q,J,R){S.compose(O),b.compose(q),Z.compose(O,v),k.compose(O),c.compose(O,C,q),tt.compose(O),W.compose(O,J),R&&a.compose(O,R),-1===G.indexOf(O)&&(G.push(O),O.prototype.updateA11yEnabled=T,w(O,"destroy",r),w(O,"render",d),w(O,"update",p),["addSeries","init"].forEach(function(A){w(O,A,function(){this.a11yDirty=!0})}),["afterApplyDrilldown","drillupall"].forEach(function(A){w(O,A,function(){var N=this.accessibility;N&&!N.zombie&&N.update()})})),-1===G.indexOf(C)&&(G.push(C),w(C,"update",U)),-1===G.indexOf(q)&&(G.push(q),["update","updatedData","remove"].forEach(function(A){w(q,A,function(){this.chart.accessibility&&(this.chart.a11yDirty=!0)})}))}}((H=function(){function s(r){this.proxyProvider=this.keyboardNavigation=this.components=this.chart=void 0,this.init(r)}return s.prototype.init=function(r){this.chart=r,x.addEventListener&&r.renderer.isSVG?(M(r),this.proxyProvider=new m(this.chart),this.initComponents(),this.keyboardNavigation=new S(r,this.components)):(this.zombie=!0,this.components={},r.renderTo.setAttribute("aria-hidden",!0))},s.prototype.initComponents=function(){var r=this.chart,d=this.proxyProvider,p=r.options.accessibility;this.components={container:new V,infoRegions:new P,legend:new Z,chartMenu:new k,rangeSelector:new a,series:new c,zoom:new u},p.customComponents&&h(this.components,p.customComponents);var T=this.components;this.getComponentOrder().forEach(function(U){T[U].initBase(r,d),T[U].init()})},s.prototype.getComponentOrder=function(){if(!this.components)return[];if(!this.components.series)return Object.keys(this.components);var r=Object.keys(this.components).filter(function(d){return"series"!==d});return["series"].concat(r)},s.prototype.update=function(){var r=this.components,d=this.chart,p=d.options.accessibility;l(d,"beforeA11yUpdate"),d.types=this.getChartTypes(),this.proxyProvider.updateGroupOrder(p=p.keyboardNavigation.order),this.getComponentOrder().forEach(function(T){r[T].onChartUpdate(),l(d,"afterA11yComponentUpdate",{name:T,component:r[T]})}),this.keyboardNavigation.update(p),!d.highContrastModeActive&&_.isHighContrastModeActive()&&_.setHighContrastTheme(d),l(d,"afterA11yUpdate",{accessibility:this})},s.prototype.destroy=function(){var r=this.chart||{},d=this.components;Object.keys(d).forEach(function(p){d[p].destroy(),d[p].destroyBase()}),this.proxyProvider&&this.proxyProvider.destroy(),r.announcerContainer&&y(r.announcerContainer),this.keyboardNavigation&&this.keyboardNavigation.destroy(),r.renderTo&&r.renderTo.setAttribute("aria-hidden",!0),r.focusElement&&r.focusElement.removeFocusBorder()},s.prototype.getChartTypes=function(){var r={};return this.chart.series.forEach(function(d){r[d.type]=1}),Object.keys(r)},s}())||(H={})),o(!0,Y,t,{accessibility:{highContrastTheme:D},lang:B}),H}),ot(j,"masters/modules/accessibility.src.js",[j["Core/Globals.js"],j["Accessibility/Accessibility.js"],j["Accessibility/AccessibilityComponent.js"],j["Accessibility/Utils/ChartUtilities.js"],j["Accessibility/Utils/HTMLUtilities.js"],j["Accessibility/KeyboardNavigationHandler.js"],j["Accessibility/Components/SeriesComponent/SeriesDescriber.js"]],function(Y,H,X,z,tt,V,W){Y.i18nFormat=H.i18nFormat,Y.A11yChartUtilities=z,Y.A11yHTMLUtilities=tt,Y.AccessibilityComponent=X,Y.KeyboardNavigationHandler=V,Y.SeriesAccessibilityDescriber=W,H.compose(Y.Chart,Y.Legend,Y.Point,Y.Series,Y.SVGElement,Y.RangeSelector)})},Bt.exports?(j.default=j,Bt.exports=j):(_t=[Tt(3470)],void 0!==(St=function(ot){return j(ot),j.Highcharts=ot,j}.apply(Ft,_t))&&(Bt.exports=St))},9964:Bt=>{function Ft(_t){return!!_t.constructor&&"function"==typeof _t.constructor.isBuffer&&_t.constructor.isBuffer(_t)}Bt.exports=function(_t){return null!=_t&&(Ft(_t)||function Tt(_t){return"function"==typeof _t.readFloatLE&&"function"==typeof _t.slice&&Ft(_t.slice(0,0))}(_t)||!!_t._isBuffer)}},9769:(Bt,Ft,Tt)=>{var _t,St,j,ot,Y;_t=Tt(5585),St=Tt(3018).utf8,j=Tt(9964),ot=Tt(3018).bin,(Y=function(H,X){H.constructor==String?H=X&&"binary"===X.encoding?ot.stringToBytes(H):St.stringToBytes(H):j(H)?H=Array.prototype.slice.call(H,0):!Array.isArray(H)&&H.constructor!==Uint8Array&&(H=H.toString());for(var z=_t.bytesToWords(H),tt=8*H.length,V=1732584193,W=-271733879,P=-1732584194,S=271733878,Z=0;Z<z.length;Z++)z[Z]=16711935&(z[Z]<<8|z[Z]>>>24)|4278255360&(z[Z]<<24|z[Z]>>>8);z[tt>>>5]|=128<<tt%32,z[14+(tt+64>>>9<<4)]=tt;var k=Y._ff,b=Y._gg,m=Y._hh,a=Y._ii;for(Z=0;Z<z.length;Z+=16){var c=V,u=W,_=P,D=S;V=k(V,W,P,S,z[Z+0],7,-680876936),S=k(S,V,W,P,z[Z+1],12,-389564586),P=k(P,S,V,W,z[Z+2],17,606105819),W=k(W,P,S,V,z[Z+3],22,-1044525330),V=k(V,W,P,S,z[Z+4],7,-176418897),S=k(S,V,W,P,z[Z+5],12,1200080426),P=k(P,S,V,W,z[Z+6],17,-1473231341),W=k(W,P,S,V,z[Z+7],22,-45705983),V=k(V,W,P,S,z[Z+8],7,1770035416),S=k(S,V,W,P,z[Z+9],12,-1958414417),P=k(P,S,V,W,z[Z+10],17,-42063),W=k(W,P,S,V,z[Z+11],22,-1990404162),V=k(V,W,P,S,z[Z+12],7,1804603682),S=k(S,V,W,P,z[Z+13],12,-40341101),P=k(P,S,V,W,z[Z+14],17,-1502002290),V=b(V,W=k(W,P,S,V,z[Z+15],22,1236535329),P,S,z[Z+1],5,-165796510),S=b(S,V,W,P,z[Z+6],9,-1069501632),P=b(P,S,V,W,z[Z+11],14,643717713),W=b(W,P,S,V,z[Z+0],20,-373897302),V=b(V,W,P,S,z[Z+5],5,-701558691),S=b(S,V,W,P,z[Z+10],9,38016083),P=b(P,S,V,W,z[Z+15],14,-660478335),W=b(W,P,S,V,z[Z+4],20,-405537848),V=b(V,W,P,S,z[Z+9],5,568446438),S=b(S,V,W,P,z[Z+14],9,-1019803690),P=b(P,S,V,W,z[Z+3],14,-187363961),W=b(W,P,S,V,z[Z+8],20,1163531501),V=b(V,W,P,S,z[Z+13],5,-1444681467),S=b(S,V,W,P,z[Z+2],9,-51403784),P=b(P,S,V,W,z[Z+7],14,1735328473),V=m(V,W=b(W,P,S,V,z[Z+12],20,-1926607734),P,S,z[Z+5],4,-378558),S=m(S,V,W,P,z[Z+8],11,-2022574463),P=m(P,S,V,W,z[Z+11],16,1839030562),W=m(W,P,S,V,z[Z+14],23,-35309556),V=m(V,W,P,S,z[Z+1],4,-1530992060),S=m(S,V,W,P,z[Z+4],11,1272893353),P=m(P,S,V,W,z[Z+7],16,-155497632),W=m(W,P,S,V,z[Z+10],23,-1094730640),V=m(V,W,P,S,z[Z+13],4,681279174),S=m(S,V,W,P,z[Z+0],11,-358537222),P=m(P,S,V,W,z[Z+3],16,-722521979),W=m(W,P,S,V,z[Z+6],23,76029189),V=m(V,W,P,S,z[Z+9],4,-640364487),S=m(S,V,W,P,z[Z+12],11,-421815835),P=m(P,S,V,W,z[Z+15],16,530742520),V=a(V,W=m(W,P,S,V,z[Z+2],23,-995338651),P,S,z[Z+0],6,-198630844),S=a(S,V,W,P,z[Z+7],10,1126891415),P=a(P,S,V,W,z[Z+14],15,-1416354905),W=a(W,P,S,V,z[Z+5],21,-57434055),V=a(V,W,P,S,z[Z+12],6,1700485571),S=a(S,V,W,P,z[Z+3],10,-1894986606),P=a(P,S,V,W,z[Z+10],15,-1051523),W=a(W,P,S,V,z[Z+1],21,-2054922799),V=a(V,W,P,S,z[Z+8],6,1873313359),S=a(S,V,W,P,z[Z+15],10,-30611744),P=a(P,S,V,W,z[Z+6],15,-1560198380),W=a(W,P,S,V,z[Z+13],21,1309151649),V=a(V,W,P,S,z[Z+4],6,-145523070),S=a(S,V,W,P,z[Z+11],10,-1120210379),P=a(P,S,V,W,z[Z+2],15,718787259),W=a(W,P,S,V,z[Z+9],21,-343485551),V=V+c>>>0,W=W+u>>>0,P=P+_>>>0,S=S+D>>>0}return _t.endian([V,W,P,S])})._ff=function(H,X,z,tt,V,W,P){var S=H+(X&z|~X&tt)+(V>>>0)+P;return(S<<W|S>>>32-W)+X},Y._gg=function(H,X,z,tt,V,W,P){var S=H+(X&tt|z&~tt)+(V>>>0)+P;return(S<<W|S>>>32-W)+X},Y._hh=function(H,X,z,tt,V,W,P){var S=H+(X^z^tt)+(V>>>0)+P;return(S<<W|S>>>32-W)+X},Y._ii=function(H,X,z,tt,V,W,P){var S=H+(z^(X|~tt))+(V>>>0)+P;return(S<<W|S>>>32-W)+X},Y._blocksize=16,Y._digestsize=16,Bt.exports=function(H,X){if(null==H)throw new Error("Illegal argument "+H);var z=_t.wordsToBytes(Y(H,X));return X&&X.asBytes?z:X&&X.asString?ot.bytesToString(z):_t.bytesToHex(z)}}}]);